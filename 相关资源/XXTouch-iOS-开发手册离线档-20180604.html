<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>XXTouch iOS 开发手册</title>
<style type="text/css">
/*! zybuluo */

article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio,canvas,video{display:inline-block;*display:inline;*zoom:1}audio:not([controls]){display:none}html{font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}a:hover,a:active{outline:0}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{width:auto\9;height:auto;max-width:100%;vertical-align:middle;border:0;-ms-interpolation-mode:bicubic}#map_canvas img,.google-maps img{max-width:none}button,input,select,textarea{margin:0;font-size:100%;vertical-align:middle}button,input{*overflow:visible;line-height:normal}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}button,html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}label,select,button,input[type=button],input[type=reset],input[type=submit],input[type=radio],input[type=checkbox]{cursor:pointer}input[type=search]{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-appearance:textfield}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button{-webkit-appearance:none}textarea{overflow:auto;vertical-align:top}@media print{*{color:#000!important;text-shadow:none!important;background:transparent!important;box-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100%!important}@page{margin:.5cm}p,h2,h3{orphans:3;widows:3}h2,h3{page-break-after:avoid}}.clearfix{*zoom:1}.clearfix:before,.clearfix:after{display:table;line-height:0;content:""}.clearfix:after{clear:both}.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.input-block-level{display:block;width:100%;min-height:30px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}body{margin:0;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;line-height:20px;color:#333;background-color:#fff}a{color:#08c;text-decoration:none}a:hover{color:#005580;text-decoration:underline}.img-rounded{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.img-polaroid{padding:4px;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1)}.img-circle{-webkit-border-radius:500px;-moz-border-radius:500px;border-radius:500px}.row{margin-left:-20px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:""}.row:after{clear:both}[class*=span]{float:left;min-height:1px;margin-left:20px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:940px}.span12{width:940px}.span11{width:860px}.span10{width:780px}.span9{width:700px}.span8{width:620px}.span7{width:540px}.span6{width:460px}.span5{width:380px}.span4{width:300px}.span3{width:220px}.span2{width:140px}.span1{width:60px}.offset12{margin-left:980px}.offset11{margin-left:900px}.offset10{margin-left:820px}.offset9{margin-left:740px}.offset8{margin-left:660px}.offset7{margin-left:580px}.offset6{margin-left:500px}.offset5{margin-left:420px}.offset4{margin-left:340px}.offset3{margin-left:260px}.offset2{margin-left:180px}.offset1{margin-left:100px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:""}.row-fluid:after{clear:both}.row-fluid [class*=span]{display:block;float:left;width:100%;min-height:30px;margin-left:2.127659574468085%;*margin-left:2.074468085106383%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=span]:first-child{margin-left:0}.row-fluid .controls-row [class*=span]+[class*=span]{margin-left:2.127659574468085%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.48936170212765%;*width:91.43617021276594%}.row-fluid .span10{width:82.97872340425532%;*width:82.92553191489361%}.row-fluid .span9{width:74.46808510638297%;*width:74.41489361702126%}.row-fluid .span8{width:65.95744680851064%;*width:65.90425531914893%}.row-fluid .span7{width:57.44680851063829%;*width:57.39361702127659%}.row-fluid .span6{width:48.93617021276595%;*width:48.88297872340425%}.row-fluid .span5{width:40.42553191489362%;*width:40.37234042553192%}.row-fluid .span4{width:31.914893617021278%;*width:31.861702127659576%}.row-fluid .span3{width:23.404255319148934%;*width:23.351063829787233%}.row-fluid .span2{width:14.893617021276595%;*width:14.840425531914894%}.row-fluid .span1{width:6.382978723404255%;*width:6.329787234042553%}.row-fluid .offset12{margin-left:104.25531914893617%;*margin-left:104.14893617021275%}.row-fluid .offset12:first-child{margin-left:102.12765957446808%;*margin-left:102.02127659574467%}.row-fluid .offset11{margin-left:95.74468085106382%;*margin-left:95.6382978723404%}.row-fluid .offset11:first-child{margin-left:93.61702127659574%;*margin-left:93.51063829787232%}.row-fluid .offset10{margin-left:87.23404255319149%;*margin-left:87.12765957446807%}.row-fluid .offset10:first-child{margin-left:85.1063829787234%;*margin-left:84.99999999999999%}.row-fluid .offset9{margin-left:78.72340425531914%;*margin-left:78.61702127659572%}.row-fluid .offset9:first-child{margin-left:76.59574468085106%;*margin-left:76.48936170212764%}.row-fluid .offset8{margin-left:70.2127659574468%;*margin-left:70.10638297872339%}.row-fluid .offset8:first-child{margin-left:68.08510638297872%;*margin-left:67.9787234042553%}.row-fluid .offset7{margin-left:61.70212765957446%;*margin-left:61.59574468085106%}.row-fluid .offset7:first-child{margin-left:59.574468085106375%;*margin-left:59.46808510638297%}.row-fluid .offset6{margin-left:53.191489361702125%;*margin-left:53.085106382978715%}.row-fluid .offset6:first-child{margin-left:51.063829787234035%;*margin-left:50.95744680851063%}.row-fluid .offset5{margin-left:44.68085106382979%;*margin-left:44.57446808510638%}.row-fluid .offset5:first-child{margin-left:42.5531914893617%;*margin-left:42.4468085106383%}.row-fluid .offset4{margin-left:36.170212765957444%;*margin-left:36.06382978723405%}.row-fluid .offset4:first-child{margin-left:34.04255319148936%;*margin-left:33.93617021276596%}.row-fluid .offset3{margin-left:27.659574468085104%;*margin-left:27.5531914893617%}.row-fluid .offset3:first-child{margin-left:25.53191489361702%;*margin-left:25.425531914893618%}.row-fluid .offset2{margin-left:19.148936170212764%;*margin-left:19.04255319148936%}.row-fluid .offset2:first-child{margin-left:17.02127659574468%;*margin-left:16.914893617021278%}.row-fluid .offset1{margin-left:10.638297872340425%;*margin-left:10.53191489361702%}.row-fluid .offset1:first-child{margin-left:8.51063829787234%;*margin-left:8.404255319148938%}[class*=span].hide,.row-fluid [class*=span].hide{display:none}[class*=span].pull-right,.row-fluid [class*=span].pull-right{float:right}.container{margin-right:auto;margin-left:auto;*zoom:1}.container:before,.container:after{display:table;line-height:0;content:""}.container:after{clear:both}.container-fluid{padding-right:20px;padding-left:20px;*zoom:1}.container-fluid:before,.container-fluid:after{display:table;line-height:0;content:""}.container-fluid:after{clear:both}p{margin:0 0 10px}.lead{margin-bottom:20px;font-size:21px;font-weight:200;line-height:30px}small{font-size:85%}strong{font-weight:700}em{font-style:italic}cite{font-style:normal}.muted{color:#999}a.muted:hover{color:gray}.text-warning{color:#c09853}a.text-warning:hover{color:#a47e3c}.text-error{color:#b94a48}a.text-error:hover{color:#953b39}.text-info{color:#3a87ad}a.text-info:hover{color:#2d6987}.text-success{color:#468847}a.text-success:hover{color:#356635}h1,h2,h3,h4,h5,h6{margin:10px 0;font-family:inherit;font-weight:700;line-height:20px;color:inherit;text-rendering:optimizelegibility}h1 small,h2 small,h3 small,h4 small,h5 small,h6 small{font-weight:400;line-height:1;color:#999}h1,h2,h3{line-height:40px}h1{font-size:38.5px}h2{font-size:31.5px}h3{font-size:24.5px}h4{font-size:17.5px}h5{font-size:14px}h6{font-size:11.9px}h1 small{font-size:24.5px}h2 small{font-size:17.5px}h3 small{font-size:14px}h4 small{font-size:14px}.page-header{padding-bottom:9px;margin:20px 0 30px;border-bottom:1px solid #eee}ul,ol{padding:0;margin:0 0 10px 25px}ul ul,ul ol,ol ol,ol ul{margin-bottom:0}li{line-height:20px}ul.unstyled,ol.unstyled{margin-left:0;list-style:none}ul.inline,ol.inline{margin-left:0;list-style:none}ul.inline>li,ol.inline>li{display:inline-block;padding-right:5px;padding-left:5px}dl{margin-bottom:20px}dt,dd{line-height:20px}dt{font-weight:700}dd{margin-left:10px}.dl-horizontal{*zoom:1}.dl-horizontal:before,.dl-horizontal:after{display:table;line-height:0;content:""}.dl-horizontal:after{clear:both}.dl-horizontal dt{float:left;width:160px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:180px}hr{margin:20px 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}abbr[title],abbr[data-original-title]{cursor:help;border-bottom:1px dotted #999}abbr.initialism{font-size:90%;text-transform:uppercase}blockquote{padding:0 0 0 15px;margin:0 0 20px;border-left:5px solid #eee}blockquote p{margin-bottom:0;font-size:16px;font-weight:300;line-height:25px}blockquote small{display:block;line-height:20px;color:#999}blockquote small:before{content:'\2014 \00A0'}blockquote.pull-right{float:right;padding-right:15px;padding-left:0;border-right:5px solid #eee;border-left:0}blockquote.pull-right p,blockquote.pull-right small{text-align:right}blockquote.pull-right small:before{content:''}blockquote.pull-right small:after{content:'\00A0 \2014'}q:before,q:after,blockquote:before,blockquote:after{content:""}address{display:block;margin-bottom:20px;font-style:normal;line-height:20px}code,pre{padding:0 3px 2px;font-family:Monaco,Menlo,Consolas,"Courier New",monospace;font-size:12px;color:#333;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}code{padding:2px 4px;color:#d14;white-space:nowrap;background-color:#f7f7f9;border:1px solid #e1e1e8}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:20px;word-break:break-all;word-wrap:break-word;white-space:pre;white-space:pre-wrap;background-color:#f5f5f5;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}pre.prettyprint{margin-bottom:20px}pre code{padding:0;color:inherit;white-space:pre;white-space:pre-wrap;background-color:transparent;border:0}.pre-scrollable{max-height:340px;overflow-y:scroll}form{margin:0 0 20px}fieldset{padding:0;margin:0;border:0}legend{display:block;width:100%;padding:0;margin-bottom:20px;font-size:21px;line-height:40px;color:#333;border:0;border-bottom:1px solid #e5e5e5}legend small{font-size:15px;color:#999}label,input,button,select,textarea{font-size:14px;font-weight:400;line-height:20px}input,button,select,textarea{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}label{display:block;margin-bottom:5px}select,textarea,input[type=text],input[type=password],input[type=datetime],input[type=datetime-local],input[type=date],input[type=month],input[type=time],input[type=week],input[type=number],input[type=email],input[type=url],input[type=search],input[type=tel],input[type=color],.uneditable-input{display:inline-block;height:20px;padding:4px 6px;margin-bottom:10px;font-size:14px;line-height:20px;color:#555;vertical-align:middle;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}input,textarea,.uneditable-input{width:206px}textarea{height:auto}textarea,input[type=text],input[type=password],input[type=datetime],input[type=datetime-local],input[type=date],input[type=month],input[type=time],input[type=week],input[type=number],input[type=email],input[type=url],input[type=search],input[type=tel],input[type=color],.uneditable-input{background-color:#fff;border:1px solid #ccc;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border linear .2s,box-shadow linear .2s;-moz-transition:border linear .2s,box-shadow linear .2s;-o-transition:border linear .2s,box-shadow linear .2s;transition:border linear .2s,box-shadow linear .2s}textarea:focus,input[type=text]:focus,input[type=password]:focus,input[type=datetime]:focus,input[type=datetime-local]:focus,input[type=date]:focus,input[type=month]:focus,input[type=time]:focus,input[type=week]:focus,input[type=number]:focus,input[type=email]:focus,input[type=url]:focus,input[type=search]:focus,input[type=tel]:focus,input[type=color]:focus,.uneditable-input:focus{border-color:rgba(82,168,236,.8);outline:0;outline:thin dotted \9;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(82,168,236,.6);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(82,168,236,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(82,168,236,.6)}input[type=radio],input[type=checkbox]{margin:4px 0 0;margin-top:1px \9;*margin-top:0;line-height:normal}input[type=file],input[type=image],input[type=submit],input[type=reset],input[type=button],input[type=radio],input[type=checkbox]{width:auto}select,input[type=file]{height:30px;*margin-top:4px;line-height:30px}select{width:220px;background-color:#fff;border:1px solid #ccc}select[multiple],select[size]{height:auto}select:focus,input[type=file]:focus,input[type=radio]:focus,input[type=checkbox]:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.uneditable-input,.uneditable-textarea{color:#999;cursor:not-allowed;background-color:#fcfcfc;border-color:#ccc;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,.025);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,.025);box-shadow:inset 0 1px 2px rgba(0,0,0,.025)}.uneditable-input{overflow:hidden;white-space:nowrap}.uneditable-textarea{width:auto;height:auto}input:-moz-placeholder,textarea:-moz-placeholder{color:#999}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#999}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#999}.radio,.checkbox{min-height:20px;padding-left:20px}.radio input[type=radio],.checkbox input[type=checkbox]{float:left;margin-left:-20px}.controls>.radio:first-child,.controls>.checkbox:first-child{padding-top:5px}.radio.inline,.checkbox.inline{display:inline-block;padding-top:5px;margin-bottom:0;vertical-align:middle}.radio.inline+.radio.inline,.checkbox.inline+.checkbox.inline{margin-left:10px}.input-mini{width:60px}.input-small{width:90px}.input-medium{width:150px}.input-large{width:210px}.input-xlarge{width:270px}.input-xxlarge{width:530px}input[class*=span],select[class*=span],textarea[class*=span],.uneditable-input[class*=span],.row-fluid input[class*=span],.row-fluid select[class*=span],.row-fluid textarea[class*=span],.row-fluid .uneditable-input[class*=span]{float:none;margin-left:0}.input-append input[class*=span],.input-append .uneditable-input[class*=span],.input-prepend input[class*=span],.input-prepend .uneditable-input[class*=span],.row-fluid input[class*=span],.row-fluid select[class*=span],.row-fluid textarea[class*=span],.row-fluid .uneditable-input[class*=span],.row-fluid .input-prepend [class*=span],.row-fluid .input-append [class*=span]{display:inline-block}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*=span]+[class*=span]{margin-left:20px}input.span12,textarea.span12,.uneditable-input.span12{width:926px}input.span11,textarea.span11,.uneditable-input.span11{width:846px}input.span10,textarea.span10,.uneditable-input.span10{width:766px}input.span9,textarea.span9,.uneditable-input.span9{width:686px}input.span8,textarea.span8,.uneditable-input.span8{width:606px}input.span7,textarea.span7,.uneditable-input.span7{width:526px}input.span6,textarea.span6,.uneditable-input.span6{width:446px}input.span5,textarea.span5,.uneditable-input.span5{width:366px}input.span4,textarea.span4,.uneditable-input.span4{width:286px}input.span3,textarea.span3,.uneditable-input.span3{width:206px}input.span2,textarea.span2,.uneditable-input.span2{width:126px}input.span1,textarea.span1,.uneditable-input.span1{width:46px}.controls-row{*zoom:1}.controls-row:before,.controls-row:after{display:table;line-height:0;content:""}.controls-row:after{clear:both}.controls-row [class*=span],.row-fluid .controls-row [class*=span]{float:left}.controls-row .checkbox[class*=span],.controls-row .radio[class*=span]{padding-top:5px}input[disabled],select[disabled],textarea[disabled],input[readonly],select[readonly],textarea[readonly]{cursor:not-allowed;background-color:#eee}input[type=radio][disabled],input[type=checkbox][disabled],input[type=radio][readonly],input[type=checkbox][readonly]{background-color:transparent}.control-group.warning .control-label,.control-group.warning .help-block,.control-group.warning .help-inline{color:#c09853}.control-group.warning .checkbox,.control-group.warning .radio,.control-group.warning input,.control-group.warning select,.control-group.warning textarea{color:#c09853}.control-group.warning input,.control-group.warning select,.control-group.warning textarea{border-color:#c09853;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.control-group.warning input:focus,.control-group.warning select:focus,.control-group.warning textarea:focus{border-color:#a47e3c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #dbc59e;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #dbc59e;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #dbc59e}.control-group.warning .input-prepend .add-on,.control-group.warning .input-append .add-on{color:#c09853;background-color:#fcf8e3;border-color:#c09853}.control-group.error .control-label,.control-group.error .help-block,.control-group.error .help-inline{color:#b94a48}.control-group.error .checkbox,.control-group.error .radio,.control-group.error input,.control-group.error select,.control-group.error textarea{color:#b94a48}.control-group.error input,.control-group.error select,.control-group.error textarea{border-color:#b94a48;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.control-group.error input:focus,.control-group.error select:focus,.control-group.error textarea:focus{border-color:#953b39;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #d59392;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #d59392;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #d59392}.control-group.error .input-prepend .add-on,.control-group.error .input-append .add-on{color:#b94a48;background-color:#f2dede;border-color:#b94a48}.control-group.success .control-label,.control-group.success .help-block,.control-group.success .help-inline{color:#468847}.control-group.success .checkbox,.control-group.success .radio,.control-group.success input,.control-group.success select,.control-group.success textarea{color:#468847}.control-group.success input,.control-group.success select,.control-group.success textarea{border-color:#468847;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.control-group.success input:focus,.control-group.success select:focus,.control-group.success textarea:focus{border-color:#356635;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #7aba7b;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #7aba7b;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #7aba7b}.control-group.success .input-prepend .add-on,.control-group.success .input-append .add-on{color:#468847;background-color:#dff0d8;border-color:#468847}.control-group.info .control-label,.control-group.info .help-block,.control-group.info .help-inline{color:#3a87ad}.control-group.info .checkbox,.control-group.info .radio,.control-group.info input,.control-group.info select,.control-group.info textarea{color:#3a87ad}.control-group.info input,.control-group.info select,.control-group.info textarea{border-color:#3a87ad;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.control-group.info input:focus,.control-group.info select:focus,.control-group.info textarea:focus{border-color:#2d6987;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #7ab5d3;-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #7ab5d3;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #7ab5d3}.control-group.info .input-prepend .add-on,.control-group.info .input-append .add-on{color:#3a87ad;background-color:#d9edf7;border-color:#3a87ad}input:focus:invalid,textarea:focus:invalid,select:focus:invalid{color:#b94a48;border-color:#ee5f5b}input:focus:invalid:focus,textarea:focus:invalid:focus,select:focus:invalid:focus{border-color:#e9322d;-webkit-box-shadow:0 0 6px #f8b9b7;-moz-box-shadow:0 0 6px #f8b9b7;box-shadow:0 0 6px #f8b9b7}.form-actions{padding:19px 20px 20px;margin-top:20px;margin-bottom:20px;background-color:#f5f5f5;border-top:1px solid #e5e5e5;*zoom:1}.form-actions:before,.form-actions:after{display:table;line-height:0;content:""}.form-actions:after{clear:both}.help-block,.help-inline{color:#595959}.help-block{display:block;margin-bottom:10px}.help-inline{display:inline-block;*display:inline;padding-left:5px;vertical-align:middle;*zoom:1}.input-append,.input-prepend{margin-bottom:5px;font-size:0;white-space:nowrap}.input-append input,.input-prepend input,.input-append select,.input-prepend select,.input-append .uneditable-input,.input-prepend .uneditable-input,.input-append .dropdown-menu,.input-prepend .dropdown-menu{font-size:14px}.input-append input,.input-prepend input,.input-append select,.input-prepend select,.input-append .uneditable-input,.input-prepend .uneditable-input{position:relative;margin-bottom:0;*margin-left:0;vertical-align:top;-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-append input:focus,.input-prepend input:focus,.input-append select:focus,.input-prepend select:focus,.input-append .uneditable-input:focus,.input-prepend .uneditable-input:focus{z-index:2}.input-append .add-on,.input-prepend .add-on{display:inline-block;width:auto;height:20px;min-width:16px;padding:4px 5px;font-size:14px;font-weight:400;line-height:20px;text-align:center;text-shadow:0 1px 0 #fff;background-color:#eee;border:1px solid #ccc}.input-append .add-on,.input-prepend .add-on,.input-append .btn,.input-prepend .btn,.input-append .btn-group>.dropdown-toggle,.input-prepend .btn-group>.dropdown-toggle{vertical-align:top;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.input-append .active,.input-prepend .active{background-color:#a9dba9;border-color:#46a546}.input-prepend .add-on,.input-prepend .btn{margin-right:-1px}.input-prepend .add-on:first-child,.input-prepend .btn:first-child{-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.input-append input,.input-append select,.input-append .uneditable-input{-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.input-append input+.btn-group .btn:last-child,.input-append select+.btn-group .btn:last-child,.input-append .uneditable-input+.btn-group .btn:last-child{-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-append .add-on,.input-append .btn,.input-append .btn-group{margin-left:-1px}.input-append .add-on:last-child,.input-append .btn:last-child,.input-append .btn-group:last-child>.dropdown-toggle{-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-prepend.input-append input,.input-prepend.input-append select,.input-prepend.input-append .uneditable-input{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.input-prepend.input-append input+.btn-group .btn,.input-prepend.input-append select+.btn-group .btn,.input-prepend.input-append .uneditable-input+.btn-group .btn{-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-prepend.input-append .add-on:first-child,.input-prepend.input-append .btn:first-child{margin-right:-1px;-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.input-prepend.input-append .add-on:last-child,.input-prepend.input-append .btn:last-child{margin-left:-1px;-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.input-prepend.input-append .btn-group:first-child{margin-left:0}input.search-query{padding-right:14px;padding-right:4px \9;padding-left:14px;padding-left:4px \9;margin-bottom:0;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px}.form-search .input-append .search-query,.form-search .input-prepend .search-query{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.form-search .input-append .search-query{-webkit-border-radius:14px 0 0 14px;-moz-border-radius:14px 0 0 14px;border-radius:14px 0 0 14px}.form-search .input-append .btn{-webkit-border-radius:0 14px 14px 0;-moz-border-radius:0 14px 14px 0;border-radius:0 14px 14px 0}.form-search .input-prepend .search-query{-webkit-border-radius:0 14px 14px 0;-moz-border-radius:0 14px 14px 0;border-radius:0 14px 14px 0}.form-search .input-prepend .btn{-webkit-border-radius:14px 0 0 14px;-moz-border-radius:14px 0 0 14px;border-radius:14px 0 0 14px}.form-search input,.form-inline input,.form-horizontal input,.form-search textarea,.form-inline textarea,.form-horizontal textarea,.form-search select,.form-inline select,.form-horizontal select,.form-search .help-inline,.form-inline .help-inline,.form-horizontal .help-inline,.form-search .uneditable-input,.form-inline .uneditable-input,.form-horizontal .uneditable-input,.form-search .input-prepend,.form-inline .input-prepend,.form-horizontal .input-prepend,.form-search .input-append,.form-inline .input-append,.form-horizontal .input-append{display:inline-block;*display:inline;margin-bottom:0;vertical-align:middle;*zoom:1}.form-search .hide,.form-inline .hide,.form-horizontal .hide{display:none}.form-search label,.form-inline label,.form-search .btn-group,.form-inline .btn-group{display:inline-block}.form-search .input-append,.form-inline .input-append,.form-search .input-prepend,.form-inline .input-prepend{margin-bottom:0}.form-search .radio,.form-search .checkbox,.form-inline .radio,.form-inline .checkbox{padding-left:0;margin-bottom:0;vertical-align:middle}.form-search .radio input[type=radio],.form-search .checkbox input[type=checkbox],.form-inline .radio input[type=radio],.form-inline .checkbox input[type=checkbox]{float:left;margin-right:3px;margin-left:0}.control-group{margin-bottom:10px}legend+.control-group{margin-top:20px;-webkit-margin-top-collapse:separate}.form-horizontal .control-group{margin-bottom:20px;*zoom:1}.form-horizontal .control-group:before,.form-horizontal .control-group:after{display:table;line-height:0;content:""}.form-horizontal .control-group:after{clear:both}.form-horizontal .control-label{float:left;width:160px;padding-top:5px;text-align:right}.form-horizontal .controls{*display:inline-block;*padding-left:20px;margin-left:180px;*margin-left:0}.form-horizontal .controls:first-child{*padding-left:180px}.form-horizontal .help-block{margin-bottom:0}.form-horizontal input+.help-block,.form-horizontal select+.help-block,.form-horizontal textarea+.help-block,.form-horizontal .uneditable-input+.help-block,.form-horizontal .input-prepend+.help-block,.form-horizontal .input-append+.help-block{margin-top:10px}.form-horizontal .form-actions{padding-left:180px}table{max-width:100%;background-color:transparent;border-collapse:collapse;border-spacing:0}.table{width:100%;margin-bottom:20px}.table th,.table td{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #ddd}.table th{font-weight:700}.table thead th{vertical-align:bottom}.table caption+thead tr:first-child th,.table caption+thead tr:first-child td,.table colgroup+thead tr:first-child th,.table colgroup+thead tr:first-child td,.table thead:first-child tr:first-child th,.table thead:first-child tr:first-child td{border-top:0}.table tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed th,.table-condensed td{padding:4px 5px}.table-bordered{border:1px solid #ddd;border-collapse:separate;*border-collapse:collapse;border-left:0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.table-bordered th,.table-bordered td{border-left:1px solid #ddd}.table-bordered caption+thead tr:first-child th,.table-bordered caption+tbody tr:first-child th,.table-bordered caption+tbody tr:first-child td,.table-bordered colgroup+thead tr:first-child th,.table-bordered colgroup+tbody tr:first-child th,.table-bordered colgroup+tbody tr:first-child td,.table-bordered thead:first-child tr:first-child th,.table-bordered tbody:first-child tr:first-child th,.table-bordered tbody:first-child tr:first-child td{border-top:0}.table-bordered thead:first-child tr:first-child>th:first-child,.table-bordered tbody:first-child tr:first-child>td:first-child{-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topleft:4px}.table-bordered thead:first-child tr:first-child>th:last-child,.table-bordered tbody:first-child tr:first-child>td:last-child{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-moz-border-radius-topright:4px}.table-bordered thead:last-child tr:last-child>th:first-child,.table-bordered tbody:last-child tr:last-child>td:first-child,.table-bordered tfoot:last-child tr:last-child>td:first-child{-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-moz-border-radius-bottomleft:4px}.table-bordered thead:last-child tr:last-child>th:last-child,.table-bordered tbody:last-child tr:last-child>td:last-child,.table-bordered tfoot:last-child tr:last-child>td:last-child{-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-bottomright:4px}.table-bordered tfoot+tbody:last-child tr:last-child td:first-child{-webkit-border-bottom-left-radius:0;border-bottom-left-radius:0;-moz-border-radius-bottomleft:0}.table-bordered tfoot+tbody:last-child tr:last-child td:last-child{-webkit-border-bottom-right-radius:0;border-bottom-right-radius:0;-moz-border-radius-bottomright:0}.table-bordered caption+thead tr:first-child th:first-child,.table-bordered caption+tbody tr:first-child td:first-child,.table-bordered colgroup+thead tr:first-child th:first-child,.table-bordered colgroup+tbody tr:first-child td:first-child{-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topleft:4px}.table-bordered caption+thead tr:first-child th:last-child,.table-bordered caption+tbody tr:first-child td:last-child,.table-bordered colgroup+thead tr:first-child th:last-child,.table-bordered colgroup+tbody tr:first-child td:last-child{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-moz-border-radius-topright:4px}.table-striped tbody>tr:nth-child(odd)>td,.table-striped tbody>tr:nth-child(odd)>th{background-color:#f9f9f9}.table-hover tbody tr:hover td,.table-hover tbody tr:hover th{background-color:#f5f5f5}table td[class*=span],table th[class*=span],.row-fluid table td[class*=span],.row-fluid table th[class*=span]{display:table-cell;float:none;margin-left:0}.table td.span1,.table th.span1{float:none;width:44px;margin-left:0}.table td.span2,.table th.span2{float:none;width:124px;margin-left:0}.table td.span3,.table th.span3{float:none;width:204px;margin-left:0}.table td.span4,.table th.span4{float:none;width:284px;margin-left:0}.table td.span5,.table th.span5{float:none;width:364px;margin-left:0}.table td.span6,.table th.span6{float:none;width:444px;margin-left:0}.table td.span7,.table th.span7{float:none;width:524px;margin-left:0}.table td.span8,.table th.span8{float:none;width:604px;margin-left:0}.table td.span9,.table th.span9{float:none;width:684px;margin-left:0}.table td.span10,.table th.span10{float:none;width:764px;margin-left:0}.table td.span11,.table th.span11{float:none;width:844px;margin-left:0}.table td.span12,.table th.span12{float:none;width:924px;margin-left:0}.table tbody tr.success td{background-color:#dff0d8}.table tbody tr.error td{background-color:#f2dede}.table tbody tr.warning td{background-color:#fcf8e3}.table tbody tr.info td{background-color:#d9edf7}.table-hover tbody tr.success:hover td{background-color:#d0e9c6}.table-hover tbody tr.error:hover td{background-color:#ebcccc}.table-hover tbody tr.warning:hover td{background-color:#faf2cc}.table-hover tbody tr.info:hover td{background-color:#c4e3f3}[class^=icon-],[class*=" icon-"]{display:inline-block;width:14px;height:14px;margin-top:1px;*margin-right:.3em;line-height:14px;vertical-align:text-top;background-image:url(../img/glyphicons-halflings.png);background-position:14px 14px;background-repeat:no-repeat}.icon-white,.nav-pills>.active>a>[class^=icon-],.nav-pills>.active>a>[class*=" icon-"],.nav-list>.active>a>[class^=icon-],.nav-list>.active>a>[class*=" icon-"],.navbar-inverse .nav>.active>a>[class^=icon-],.navbar-inverse .nav>.active>a>[class*=" icon-"],.dropdown-menu>li>a:hover>[class^=icon-],.dropdown-menu>li>a:hover>[class*=" icon-"],.dropdown-menu>.active>a>[class^=icon-],.dropdown-menu>.active>a>[class*=" icon-"],.dropdown-submenu:hover>a>[class^=icon-],.dropdown-submenu:hover>a>[class*=" icon-"]{background-image:url(../img/glyphicons-halflings-white.png)}.icon-glass{background-position:0 0}.icon-music{background-position:-24px 0}.icon-search{background-position:-48px 0}.icon-envelope{background-position:-72px 0}.icon-heart{background-position:-96px 0}.icon-star{background-position:-120px 0}.icon-star-empty{background-position:-144px 0}.icon-user{background-position:-168px 0}.icon-film{background-position:-192px 0}.icon-th-large{background-position:-216px 0}.icon-th{background-position:-240px 0}.icon-th-list{background-position:-264px 0}.icon-ok{background-position:-288px 0}.icon-remove{background-position:-312px 0}.icon-zoom-in{background-position:-336px 0}.icon-zoom-out{background-position:-360px 0}.icon-off{background-position:-384px 0}.icon-signal{background-position:-408px 0}.icon-cog{background-position:-432px 0}.icon-trash{background-position:-456px 0}.icon-home{background-position:0 -24px}.icon-file{background-position:-24px -24px}.icon-time{background-position:-48px -24px}.icon-road{background-position:-72px -24px}.icon-download-alt{background-position:-96px -24px}.icon-download{background-position:-120px -24px}.icon-upload{background-position:-144px -24px}.icon-inbox{background-position:-168px -24px}.icon-play-circle{background-position:-192px -24px}.icon-repeat{background-position:-216px -24px}.icon-refresh{background-position:-240px -24px}.icon-list-alt{background-position:-264px -24px}.icon-lock{background-position:-287px -24px}.icon-flag{background-position:-312px -24px}.icon-headphones{background-position:-336px -24px}.icon-volume-off{background-position:-360px -24px}.icon-volume-down{background-position:-384px -24px}.icon-volume-up{background-position:-408px -24px}.icon-qrcode{background-position:-432px -24px}.icon-barcode{background-position:-456px -24px}.icon-tag{background-position:0 -48px}.icon-tags{background-position:-25px -48px}.icon-book{background-position:-48px -48px}.icon-bookmark{background-position:-72px -48px}.icon-print{background-position:-96px -48px}.icon-camera{background-position:-120px -48px}.icon-font{background-position:-144px -48px}.icon-bold{background-position:-167px -48px}.icon-italic{background-position:-192px -48px}.icon-text-height{background-position:-216px -48px}.icon-text-width{background-position:-240px -48px}.icon-align-left{background-position:-264px -48px}.icon-align-center{background-position:-288px -48px}.icon-align-right{background-position:-312px -48px}.icon-align-justify{background-position:-336px -48px}.icon-list{background-position:-360px -48px}.icon-indent-left{background-position:-384px -48px}.icon-indent-right{background-position:-408px -48px}.icon-facetime-video{background-position:-432px -48px}.icon-picture{background-position:-456px -48px}.icon-pencil{background-position:0 -72px}.icon-map-marker{background-position:-24px -72px}.icon-adjust{background-position:-48px -72px}.icon-tint{background-position:-72px -72px}.icon-edit{background-position:-96px -72px}.icon-share{background-position:-120px -72px}.icon-check{background-position:-144px -72px}.icon-move{background-position:-168px -72px}.icon-step-backward{background-position:-192px -72px}.icon-fast-backward{background-position:-216px -72px}.icon-backward{background-position:-240px -72px}.icon-play{background-position:-264px -72px}.icon-pause{background-position:-288px -72px}.icon-stop{background-position:-312px -72px}.icon-forward{background-position:-336px -72px}.icon-fast-forward{background-position:-360px -72px}.icon-step-forward{background-position:-384px -72px}.icon-eject{background-position:-408px -72px}.icon-chevron-left{background-position:-432px -72px}.icon-chevron-right{background-position:-456px -72px}.icon-plus-sign{background-position:0 -96px}.icon-minus-sign{background-position:-24px -96px}.icon-remove-sign{background-position:-48px -96px}.icon-ok-sign{background-position:-72px -96px}.icon-question-sign{background-position:-96px -96px}.icon-info-sign{background-position:-120px -96px}.icon-screenshot{background-position:-144px -96px}.icon-remove-circle{background-position:-168px -96px}.icon-ok-circle{background-position:-192px -96px}.icon-ban-circle{background-position:-216px -96px}.icon-arrow-left{background-position:-240px -96px}.icon-arrow-right{background-position:-264px -96px}.icon-arrow-up{background-position:-289px -96px}.icon-arrow-down{background-position:-312px -96px}.icon-share-alt{background-position:-336px -96px}.icon-resize-full{background-position:-360px -96px}.icon-resize-small{background-position:-384px -96px}.icon-plus{background-position:-408px -96px}.icon-minus{background-position:-433px -96px}.icon-asterisk{background-position:-456px -96px}.icon-exclamation-sign{background-position:0 -120px}.icon-gift{background-position:-24px -120px}.icon-leaf{background-position:-48px -120px}.icon-fire{background-position:-72px -120px}.icon-eye-open{background-position:-96px -120px}.icon-eye-close{background-position:-120px -120px}.icon-warning-sign{background-position:-144px -120px}.icon-plane{background-position:-168px -120px}.icon-calendar{background-position:-192px -120px}.icon-random{width:16px;background-position:-216px -120px}.icon-comment{background-position:-240px -120px}.icon-magnet{background-position:-264px -120px}.icon-chevron-up{background-position:-288px -120px}.icon-chevron-down{background-position:-313px -119px}.icon-retweet{background-position:-336px -120px}.icon-shopping-cart{background-position:-360px -120px}.icon-folder-close{background-position:-384px -120px}.icon-folder-open{width:16px;background-position:-408px -120px}.icon-resize-vertical{background-position:-432px -119px}.icon-resize-horizontal{background-position:-456px -118px}.icon-hdd{background-position:0 -144px}.icon-bullhorn{background-position:-24px -144px}.icon-bell{background-position:-48px -144px}.icon-certificate{background-position:-72px -144px}.icon-thumbs-up{background-position:-96px -144px}.icon-thumbs-down{background-position:-120px -144px}.icon-hand-right{background-position:-144px -144px}.icon-hand-left{background-position:-168px -144px}.icon-hand-up{background-position:-192px -144px}.icon-hand-down{background-position:-216px -144px}.icon-circle-arrow-right{background-position:-240px -144px}.icon-circle-arrow-left{background-position:-264px -144px}.icon-circle-arrow-up{background-position:-288px -144px}.icon-circle-arrow-down{background-position:-312px -144px}.icon-globe{background-position:-336px -144px}.icon-wrench{background-position:-360px -144px}.icon-tasks{background-position:-384px -144px}.icon-filter{background-position:-408px -144px}.icon-briefcase{background-position:-432px -144px}.icon-fullscreen{background-position:-456px -144px}.dropup,.dropdown{position:relative}.dropdown-toggle{*margin-bottom:-3px}.dropdown-toggle:active,.open .dropdown-toggle{outline:0}.caret{display:inline-block;width:0;height:0;vertical-align:top;border-top:4px solid #000;border-right:4px solid transparent;border-left:4px solid transparent;content:""}.dropdown .caret{margin-top:8px;margin-left:2px}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;list-style:none;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);*border-right-width:2px;*border-bottom-width:2px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,.2);box-shadow:0 5px 10px rgba(0,0,0,.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.dropdown-menu.pull-right{right:0;left:auto}.dropdown-menu .divider{*width:100%;height:1px;margin:9px 1px;*margin:-5px 0 5px;overflow:hidden;background-color:#e5e5e5;border-bottom:1px solid #fff}.dropdown-menu li>a{display:block;padding:3px 20px;clear:both;font-weight:400;line-height:20px;color:#333;white-space:nowrap}.dropdown-menu li>a:hover,.dropdown-menu li>a:focus,.dropdown-submenu:hover>a{color:#fff;text-decoration:none;background-color:#0081c2;background-image:-moz-linear-gradient(top,#08c,#0077b3);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#0077b3));background-image:-webkit-linear-gradient(top,#08c,#0077b3);background-image:-o-linear-gradient(top,#08c,#0077b3);background-image:linear-gradient(to bottom,#08c,#0077b3);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc', endColorstr='#ff0077b3', GradientType=0)}.dropdown-menu .active>a,.dropdown-menu .active>a:hover{color:#fff;text-decoration:none;background-color:#0081c2;background-image:-moz-linear-gradient(top,#08c,#0077b3);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#0077b3));background-image:-webkit-linear-gradient(top,#08c,#0077b3);background-image:-o-linear-gradient(top,#08c,#0077b3);background-image:linear-gradient(to bottom,#08c,#0077b3);background-repeat:repeat-x;outline:0;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc', endColorstr='#ff0077b3', GradientType=0)}.dropdown-menu .disabled>a,.dropdown-menu .disabled>a:hover{color:#999}.dropdown-menu .disabled>a:hover{text-decoration:none;cursor:default;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.open{*z-index:1000}.open>.dropdown-menu{display:block}.pull-right>.dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{border-top:0;border-bottom:4px solid #000;content:""}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:1px}.dropdown-submenu{position:relative}.dropdown-submenu>.dropdown-menu{top:0;left:100%;margin-top:-6px;margin-left:-1px;-webkit-border-radius:0 6px 6px;-moz-border-radius:0 6px 6px;border-radius:0 6px 6px}.dropdown-submenu:hover>.dropdown-menu{display:block}.dropup .dropdown-submenu>.dropdown-menu{top:auto;bottom:0;margin-top:0;margin-bottom:-2px;-webkit-border-radius:5px 5px 5px 0;-moz-border-radius:5px 5px 5px 0;border-radius:5px 5px 5px 0}.dropdown-submenu>a:after{display:block;float:right;width:0;height:0;margin-top:5px;margin-right:-10px;border-color:transparent;border-left-color:#ccc;border-style:solid;border-width:5px 0 5px 5px;content:" "}.dropdown-submenu:hover>a:after{border-left-color:#fff}.dropdown-submenu.pull-left{float:none}.dropdown-submenu.pull-left>.dropdown-menu{left:-100%;margin-left:10px;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px}.dropdown .dropdown-menu .nav-header{padding-right:20px;padding-left:20px}.typeahead{z-index:1051;margin-top:2px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.05);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.05);box-shadow:inset 0 1px 1px rgba(0,0,0,.05)}.well blockquote{border-color:#ddd;border-color:rgba(0,0,0,.15)}.well-large{padding:24px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.well-small{padding:9px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.fade{opacity:0;-webkit-transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{position:relative;height:0;overflow:hidden;-webkit-transition:height .35s ease;-moz-transition:height .35s ease;-o-transition:height .35s ease;transition:height .35s ease}.collapse.in{height:auto}.close{float:right;font-size:20px;font-weight:700;line-height:20px;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.close:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4;filter:alpha(opacity=40)}button.close{padding:0;cursor:pointer;background:transparent;border:0;-webkit-appearance:none}.btn{display:inline-block;*display:inline;padding:4px 12px;margin-bottom:0;*margin-left:.3em;font-size:14px;line-height:20px;color:#333;text-align:center;text-shadow:0 1px 1px rgba(255,255,255,.75);vertical-align:middle;cursor:pointer;background-color:#f5f5f5;*background-color:#e6e6e6;background-image:-moz-linear-gradient(top,#fff,#e6e6e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));background-image:-webkit-linear-gradient(top,#fff,#e6e6e6);background-image:-o-linear-gradient(top,#fff,#e6e6e6);background-image:linear-gradient(to bottom,#fff,#e6e6e6);background-repeat:repeat-x;border:1px solid #bbb;*border:0;border-color:#e6e6e6 #e6e6e6 #bfbfbf;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);border-bottom-color:#a2a2a2;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);*zoom:1;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05)}.btn:hover,.btn:active,.btn.active,.btn.disabled,.btn[disabled]{color:#333;background-color:#e6e6e6;*background-color:#d9d9d9}.btn:active,.btn.active{background-color:#ccc \9}.btn:first-child{*margin-left:0}.btn:hover{color:#333;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;-moz-transition:background-position .1s linear;-o-transition:background-position .1s linear;transition:background-position .1s linear}.btn:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn.active,.btn:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05);box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05)}.btn.disabled,.btn[disabled]{cursor:default;background-image:none;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.btn-large{padding:11px 19px;font-size:17.5px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.btn-large [class^=icon-],.btn-large [class*=" icon-"]{margin-top:4px}.btn-small{padding:2px 10px;font-size:11.9px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.btn-small [class^=icon-],.btn-small [class*=" icon-"]{margin-top:0}.btn-mini [class^=icon-],.btn-mini [class*=" icon-"]{margin-top:-1px}.btn-mini{padding:0 6px;font-size:10.5px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.btn-block{display:block;width:100%;padding-right:0;padding-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.btn-block+.btn-block{margin-top:5px}input[type=submit].btn-block,input[type=reset].btn-block,input[type=button].btn-block{width:100%}.btn-primary.active,.btn-warning.active,.btn-danger.active,.btn-success.active,.btn-info.active,.btn-inverse.active{color:rgba(255,255,255,.75)}.btn{border-color:#c5c5c5;border-color:rgba(0,0,0,.15) rgba(0,0,0,.15) rgba(0,0,0,.25)}.btn-primary{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#006dcc;*background-color:#04c;background-image:-moz-linear-gradient(top,#08c,#04c);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#04c));background-image:-webkit-linear-gradient(top,#08c,#04c);background-image:-o-linear-gradient(top,#08c,#04c);background-image:linear-gradient(to bottom,#08c,#04c);background-repeat:repeat-x;border-color:#04c #04c #002a80;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc', endColorstr='#ff0044cc', GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-primary:hover,.btn-primary:active,.btn-primary.active,.btn-primary.disabled,.btn-primary[disabled]{color:#fff;background-color:#04c;*background-color:#003bb3}.btn-primary:active,.btn-primary.active{background-color:#039 \9}.btn-warning{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#faa732;*background-color:#f89406;background-image:-moz-linear-gradient(top,#fbb450,#f89406);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fbb450),to(#f89406));background-image:-webkit-linear-gradient(top,#fbb450,#f89406);background-image:-o-linear-gradient(top,#fbb450,#f89406);background-image:linear-gradient(to bottom,#fbb450,#f89406);background-repeat:repeat-x;border-color:#f89406 #f89406 #ad6704;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffbb450', endColorstr='#fff89406', GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-warning:hover,.btn-warning:active,.btn-warning.active,.btn-warning.disabled,.btn-warning[disabled]{color:#fff;background-color:#f89406;*background-color:#df8505}.btn-warning:active,.btn-warning.active{background-color:#c67605 \9}.btn-danger{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#da4f49;*background-color:#bd362f;background-image:-moz-linear-gradient(top,#ee5f5b,#bd362f);background-image:-webkit-gradient(linear,0 0,0 100%,from(#ee5f5b),to(#bd362f));background-image:-webkit-linear-gradient(top,#ee5f5b,#bd362f);background-image:-o-linear-gradient(top,#ee5f5b,#bd362f);background-image:linear-gradient(to bottom,#ee5f5b,#bd362f);background-repeat:repeat-x;border-color:#bd362f #bd362f #802420;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffee5f5b', endColorstr='#ffbd362f', GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-danger:hover,.btn-danger:active,.btn-danger.active,.btn-danger.disabled,.btn-danger[disabled]{color:#fff;background-color:#bd362f;*background-color:#a9302a}.btn-danger:active,.btn-danger.active{background-color:#942a25 \9}.btn-success{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#5bb75b;*background-color:#51a351;background-image:-moz-linear-gradient(top,#62c462,#51a351);background-image:-webkit-gradient(linear,0 0,0 100%,from(#62c462),to(#51a351));background-image:-webkit-linear-gradient(top,#62c462,#51a351);background-image:-o-linear-gradient(top,#62c462,#51a351);background-image:linear-gradient(to bottom,#62c462,#51a351);background-repeat:repeat-x;border-color:#51a351 #51a351 #387038;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff62c462', endColorstr='#ff51a351', GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-success:hover,.btn-success:active,.btn-success.active,.btn-success.disabled,.btn-success[disabled]{color:#fff;background-color:#51a351;*background-color:#499249}.btn-success:active,.btn-success.active{background-color:#408140 \9}.btn-info{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#49afcd;*background-color:#2f96b4;background-image:-moz-linear-gradient(top,#5bc0de,#2f96b4);background-image:-webkit-gradient(linear,0 0,0 100%,from(#5bc0de),to(#2f96b4));background-image:-webkit-linear-gradient(top,#5bc0de,#2f96b4);background-image:-o-linear-gradient(top,#5bc0de,#2f96b4);background-image:linear-gradient(to bottom,#5bc0de,#2f96b4);background-repeat:repeat-x;border-color:#2f96b4 #2f96b4 #1f6377;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff5bc0de', endColorstr='#ff2f96b4', GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-info:hover,.btn-info:active,.btn-info.active,.btn-info.disabled,.btn-info[disabled]{color:#fff;background-color:#2f96b4;*background-color:#2a85a0}.btn-info:active,.btn-info.active{background-color:#24748c \9}.btn-inverse{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#363636;*background-color:#222;background-image:-moz-linear-gradient(top,#444,#222);background-image:-webkit-gradient(linear,0 0,0 100%,from(#444),to(#222));background-image:-webkit-linear-gradient(top,#444,#222);background-image:-o-linear-gradient(top,#444,#222);background-image:linear-gradient(to bottom,#444,#222);background-repeat:repeat-x;border-color:#222 #222 #000;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff444444', endColorstr='#ff222222', GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.btn-inverse:hover,.btn-inverse:active,.btn-inverse.active,.btn-inverse.disabled,.btn-inverse[disabled]{color:#fff;background-color:#222;*background-color:#151515}.btn-inverse:active,.btn-inverse.active{background-color:#080808 \9}button.btn,input[type=submit].btn{*padding-top:3px;*padding-bottom:3px}button.btn::-moz-focus-inner,input[type=submit].btn::-moz-focus-inner{padding:0;border:0}button.btn.btn-large,input[type=submit].btn.btn-large{*padding-top:7px;*padding-bottom:7px}button.btn.btn-small,input[type=submit].btn.btn-small{*padding-top:3px;*padding-bottom:3px}button.btn.btn-mini,input[type=submit].btn.btn-mini{*padding-top:1px;*padding-bottom:1px}.btn-link,.btn-link:active,.btn-link[disabled]{background-color:transparent;background-image:none;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.btn-link{color:#08c;cursor:pointer;border-color:transparent;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.btn-link:hover{color:#005580;text-decoration:underline;background-color:transparent}.btn-link[disabled]:hover{color:#333;text-decoration:none}.btn-group{position:relative;display:inline-block;*display:inline;*margin-left:.3em;font-size:0;white-space:nowrap;vertical-align:middle;*zoom:1}.btn-group:first-child{*margin-left:0}.btn-group+.btn-group{margin-left:5px}.btn-toolbar{margin-top:10px;margin-bottom:10px;font-size:0}.btn-toolbar>.btn+.btn,.btn-toolbar>.btn-group+.btn,.btn-toolbar>.btn+.btn-group{margin-left:5px}.btn-group>.btn{position:relative;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.btn-group>.btn+.btn{margin-left:-1px}.btn-group>.btn,.btn-group>.dropdown-menu,.btn-group>.popover{font-size:14px}.btn-group>.btn-mini{font-size:10.5px}.btn-group>.btn-small{font-size:11.9px}.btn-group>.btn-large{font-size:17.5px}.btn-group>.btn:first-child{margin-left:0;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-bottomleft:4px;-moz-border-radius-topleft:4px}.btn-group>.btn:last-child,.btn-group>.dropdown-toggle{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-bottomright:4px}.btn-group>.btn.large:first-child{margin-left:0;-webkit-border-bottom-left-radius:6px;border-bottom-left-radius:6px;-webkit-border-top-left-radius:6px;border-top-left-radius:6px;-moz-border-radius-bottomleft:6px;-moz-border-radius-topleft:6px}.btn-group>.btn.large:last-child,.btn-group>.large.dropdown-toggle{-webkit-border-top-right-radius:6px;border-top-right-radius:6px;-webkit-border-bottom-right-radius:6px;border-bottom-right-radius:6px;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:6px}.btn-group>.btn:hover,.btn-group>.btn:focus,.btn-group>.btn:active,.btn-group>.btn.active{z-index:2}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group>.btn+.dropdown-toggle{*padding-top:5px;padding-right:8px;*padding-bottom:5px;padding-left:8px;-webkit-box-shadow:inset 1px 0 0 rgba(255,255,255,.125),inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:inset 1px 0 0 rgba(255,255,255,.125),inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);box-shadow:inset 1px 0 0 rgba(255,255,255,.125),inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05)}.btn-group>.btn-mini+.dropdown-toggle{*padding-top:2px;padding-right:5px;*padding-bottom:2px;padding-left:5px}.btn-group>.btn-small+.dropdown-toggle{*padding-top:5px;*padding-bottom:4px}.btn-group>.btn-large+.dropdown-toggle{*padding-top:7px;padding-right:12px;*padding-bottom:7px;padding-left:12px}.btn-group.open .dropdown-toggle{background-image:none;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05);box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05)}.btn-group.open .btn.dropdown-toggle{background-color:#e6e6e6}.btn-group.open .btn-primary.dropdown-toggle{background-color:#04c}.btn-group.open .btn-warning.dropdown-toggle{background-color:#f89406}.btn-group.open .btn-danger.dropdown-toggle{background-color:#bd362f}.btn-group.open .btn-success.dropdown-toggle{background-color:#51a351}.btn-group.open .btn-info.dropdown-toggle{background-color:#2f96b4}.btn-group.open .btn-inverse.dropdown-toggle{background-color:#222}.btn .caret{margin-top:8px;margin-left:0}.btn-mini .caret,.btn-small .caret,.btn-large .caret{margin-top:6px}.btn-large .caret{border-top-width:5px;border-right-width:5px;border-left-width:5px}.dropup .btn-large .caret{border-bottom-width:5px}.btn-primary .caret,.btn-warning .caret,.btn-danger .caret,.btn-info .caret,.btn-success .caret,.btn-inverse .caret{border-top-color:#fff;border-bottom-color:#fff}.btn-group-vertical{display:inline-block;*display:inline;*zoom:1}.btn-group-vertical>.btn{display:block;float:none;max-width:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.btn-group-vertical>.btn+.btn{margin-top:-1px;margin-left:0}.btn-group-vertical>.btn:first-child{-webkit-border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0}.btn-group-vertical>.btn:last-child{-webkit-border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px}.btn-group-vertical>.btn-large:first-child{-webkit-border-radius:6px 6px 0 0;-moz-border-radius:6px 6px 0 0;border-radius:6px 6px 0 0}.btn-group-vertical>.btn-large:last-child{-webkit-border-radius:0 0 6px 6px;-moz-border-radius:0 0 6px 6px;border-radius:0 0 6px 6px}.alert{padding:8px 35px 8px 14px;margin-bottom:20px;text-shadow:0 1px 0 rgba(255,255,255,.5);background-color:#fcf8e3;border:1px solid #fbeed5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.alert,.alert h4{color:#c09853}.alert h4{margin:0}.alert .close{position:relative;top:-2px;right:-21px;line-height:20px}.alert-success{color:#468847;background-color:#dff0d8;border-color:#d6e9c6}.alert-success h4{color:#468847}.alert-danger,.alert-error{color:#b94a48;background-color:#f2dede;border-color:#eed3d7}.alert-danger h4,.alert-error h4{color:#b94a48}.alert-info{color:#3a87ad;background-color:#d9edf7;border-color:#bce8f1}.alert-info h4{color:#3a87ad}.alert-block{padding-top:14px;padding-bottom:14px}.alert-block>p,.alert-block>ul{margin-bottom:0}.alert-block p+p{margin-top:5px}.nav{margin-bottom:20px;margin-left:0;list-style:none}.nav>li>a{display:block}.nav>li>a:hover{text-decoration:none;background-color:#eee}.nav>li>a>img{max-width:none}.nav>.pull-right{float:right}.nav-header{display:block;padding:3px 15px;font-size:11px;font-weight:700;line-height:20px;color:#999;text-shadow:0 1px 0 rgba(255,255,255,.5);text-transform:uppercase}.nav li+.nav-header{margin-top:9px}.nav-list{padding-right:15px;padding-left:15px;margin-bottom:0}.nav-list>li>a,.nav-list .nav-header{margin-right:-15px;margin-left:-15px;text-shadow:0 1px 0 rgba(255,255,255,.5)}.nav-list>li>a{padding:3px 15px}.nav-list>.active>a,.nav-list>.active>a:hover{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.2);background-color:#08c}.nav-list [class^=icon-],.nav-list [class*=" icon-"]{margin-right:2px}.nav-list .divider{*width:100%;height:1px;margin:9px 1px;*margin:-5px 0 5px;overflow:hidden;background-color:#e5e5e5;border-bottom:1px solid #fff}.nav-tabs,.nav-pills{*zoom:1}.nav-tabs:before,.nav-pills:before,.nav-tabs:after,.nav-pills:after{display:table;line-height:0;content:""}.nav-tabs:after,.nav-pills:after{clear:both}.nav-tabs>li,.nav-pills>li{float:left}.nav-tabs>li>a,.nav-pills>li>a{padding-right:12px;padding-left:12px;margin-right:2px;line-height:14px}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{margin-bottom:-1px}.nav-tabs>li>a{padding-top:8px;padding-bottom:8px;line-height:20px;border:1px solid transparent;-webkit-border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0}.nav-tabs>li>a:hover{border-color:#eee #eee #ddd}.nav-tabs>.active>a,.nav-tabs>.active>a:hover{color:#555;cursor:default;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent}.nav-pills>li>a{padding-top:8px;padding-bottom:8px;margin-top:2px;margin-bottom:2px;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}.nav-pills>.active>a,.nav-pills>.active>a:hover{color:#fff;background-color:#08c}.nav-stacked>li{float:none}.nav-stacked>li>a{margin-right:0}.nav-tabs.nav-stacked{border-bottom:0}.nav-tabs.nav-stacked>li>a{border:1px solid #ddd;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.nav-tabs.nav-stacked>li:first-child>a{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-topleft:4px}.nav-tabs.nav-stacked>li:last-child>a{-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-moz-border-radius-bottomright:4px;-moz-border-radius-bottomleft:4px}.nav-tabs.nav-stacked>li>a:hover{z-index:2;border-color:#ddd}.nav-pills.nav-stacked>li>a{margin-bottom:3px}.nav-pills.nav-stacked>li:last-child>a{margin-bottom:1px}.nav-tabs .dropdown-menu{-webkit-border-radius:0 0 6px 6px;-moz-border-radius:0 0 6px 6px;border-radius:0 0 6px 6px}.nav-pills .dropdown-menu{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.nav .dropdown-toggle .caret{margin-top:6px;border-top-color:#08c;border-bottom-color:#08c}.nav .dropdown-toggle:hover .caret{border-top-color:#005580;border-bottom-color:#005580}.nav-tabs .dropdown-toggle .caret{margin-top:8px}.nav .active .dropdown-toggle .caret{border-top-color:#fff;border-bottom-color:#fff}.nav-tabs .active .dropdown-toggle .caret{border-top-color:#555;border-bottom-color:#555}.nav>.dropdown.active>a:hover{cursor:pointer}.nav-tabs .open .dropdown-toggle,.nav-pills .open .dropdown-toggle,.nav>li.dropdown.open.active>a:hover{color:#fff;background-color:#999;border-color:#999}.nav li.dropdown.open .caret,.nav li.dropdown.open.active .caret,.nav li.dropdown.open a:hover .caret{border-top-color:#fff;border-bottom-color:#fff;opacity:1;filter:alpha(opacity=100)}.tabs-stacked .open>a:hover{border-color:#999}.tabbable{*zoom:1}.tabbable:before,.tabbable:after{display:table;line-height:0;content:""}.tabbable:after{clear:both}.tab-content{overflow:auto}.tabs-below>.nav-tabs,.tabs-right>.nav-tabs,.tabs-left>.nav-tabs{border-bottom:0}.tab-content>.tab-pane,.pill-content>.pill-pane{display:none}.tab-content>.active,.pill-content>.active{display:block}.tabs-below>.nav-tabs{border-top:1px solid #ddd}.tabs-below>.nav-tabs>li{margin-top:-1px;margin-bottom:0}.tabs-below>.nav-tabs>li>a{-webkit-border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px}.tabs-below>.nav-tabs>li>a:hover{border-top-color:#ddd;border-bottom-color:transparent}.tabs-below>.nav-tabs>.active>a,.tabs-below>.nav-tabs>.active>a:hover{border-color:transparent #ddd #ddd}.tabs-left>.nav-tabs>li,.tabs-right>.nav-tabs>li{float:none}.tabs-left>.nav-tabs>li>a,.tabs-right>.nav-tabs>li>a{min-width:74px;margin-right:0;margin-bottom:3px}.tabs-left>.nav-tabs{float:left;margin-right:19px;border-right:1px solid #ddd}.tabs-left>.nav-tabs>li>a{margin-right:-1px;-webkit-border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}.tabs-left>.nav-tabs>li>a:hover{border-color:#eee #ddd #eee #eee}.tabs-left>.nav-tabs .active>a,.tabs-left>.nav-tabs .active>a:hover{border-color:#ddd transparent #ddd #ddd;*border-right-color:#fff}.tabs-right>.nav-tabs{float:right;margin-left:19px;border-left:1px solid #ddd}.tabs-right>.nav-tabs>li>a{margin-left:-1px;-webkit-border-radius:0 4px 4px 0;-moz-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}.tabs-right>.nav-tabs>li>a:hover{border-color:#eee #eee #eee #ddd}.tabs-right>.nav-tabs .active>a,.tabs-right>.nav-tabs .active>a:hover{border-color:#ddd #ddd #ddd transparent;*border-left-color:#fff}.nav>.disabled>a{color:#999}.nav>.disabled>a:hover{text-decoration:none;cursor:default;background-color:transparent}.navbar{*position:relative;*z-index:2;margin-bottom:20px;overflow:visible}.navbar-inner{min-height:40px;padding-right:20px;padding-left:20px;background-color:#fafafa;background-image:-moz-linear-gradient(top,#fff,#f2f2f2);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#f2f2f2));background-image:-webkit-linear-gradient(top,#fff,#f2f2f2);background-image:-o-linear-gradient(top,#fff,#f2f2f2);background-image:linear-gradient(to bottom,#fff,#f2f2f2);background-repeat:repeat-x;border:1px solid #d4d4d4;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#fff2f2f2', GradientType=0);*zoom:1;-webkit-box-shadow:0 1px 4px rgba(0,0,0,.065);-moz-box-shadow:0 1px 4px rgba(0,0,0,.065);box-shadow:0 1px 4px rgba(0,0,0,.065)}.navbar-inner:before,.navbar-inner:after{display:table;line-height:0;content:""}.navbar-inner:after{clear:both}.navbar .container{width:auto}.nav-collapse.collapse{height:auto;overflow:visible}.navbar .brand{display:block;float:left;padding:10px 20px;margin-left:-20px;font-size:20px;font-weight:200;color:#777;text-shadow:0 1px 0 #fff}.navbar .brand:hover{text-decoration:none}.navbar-text{margin-bottom:0;line-height:40px;color:#777}.navbar-link{color:#777}.navbar-link:hover{color:#333}.navbar .divider-vertical{height:40px;margin:0 9px;border-right:1px solid #fff;border-left:1px solid #f2f2f2}.navbar .btn,.navbar .btn-group{margin-top:5px}.navbar .btn-group .btn,.navbar .input-prepend .btn,.navbar .input-append .btn{margin-top:0}.navbar-form{margin-bottom:0;*zoom:1}.navbar-form:before,.navbar-form:after{display:table;line-height:0;content:""}.navbar-form:after{clear:both}.navbar-form input,.navbar-form select,.navbar-form .radio,.navbar-form .checkbox{margin-top:5px}.navbar-form input,.navbar-form select,.navbar-form .btn{display:inline-block;margin-bottom:0}.navbar-form input[type=image],.navbar-form input[type=checkbox],.navbar-form input[type=radio]{margin-top:3px}.navbar-form .input-append,.navbar-form .input-prepend{margin-top:5px;white-space:nowrap}.navbar-form .input-append input,.navbar-form .input-prepend input{margin-top:0}.navbar-search{position:relative;float:left;margin-top:5px;margin-bottom:0}.navbar-search .search-query{padding:4px 14px;margin-bottom:0;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:13px;font-weight:400;line-height:1;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px}.navbar-static-top{position:static;margin-bottom:0}.navbar-static-top .navbar-inner{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.navbar-fixed-top,.navbar-fixed-bottom{position:fixed;right:0;left:0;z-index:1030;margin-bottom:0}.navbar-fixed-top .navbar-inner,.navbar-static-top .navbar-inner{border-width:0 0 1px}.navbar-fixed-bottom .navbar-inner{border-width:1px 0 0}.navbar-fixed-top .navbar-inner,.navbar-fixed-bottom .navbar-inner{padding-right:0;padding-left:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:940px}.navbar-fixed-top{top:0}.navbar-fixed-top .navbar-inner,.navbar-static-top .navbar-inner{-webkit-box-shadow:0 1px 10px rgba(0,0,0,.1);-moz-box-shadow:0 1px 10px rgba(0,0,0,.1);box-shadow:0 1px 10px rgba(0,0,0,.1)}.navbar-fixed-bottom{bottom:0}.navbar-fixed-bottom .navbar-inner{-webkit-box-shadow:0 -1px 10px rgba(0,0,0,.1);-moz-box-shadow:0 -1px 10px rgba(0,0,0,.1);box-shadow:0 -1px 10px rgba(0,0,0,.1)}.navbar .nav{position:relative;left:0;display:block;float:left;margin:0 10px 0 0}.navbar .nav.pull-right{float:right;margin-right:0}.navbar .nav>li{float:left}.navbar .nav>li>a{float:none;padding:10px 15px;color:#777;text-decoration:none;text-shadow:0 1px 0 #fff}.navbar .nav .dropdown-toggle .caret{margin-top:8px}.navbar .nav>li>a:focus,.navbar .nav>li>a:hover{color:#333;text-decoration:none;background-color:transparent}.navbar .nav>.active>a,.navbar .nav>.active>a:hover,.navbar .nav>.active>a:focus{color:#555;text-decoration:none;background-color:#e5e5e5;-webkit-box-shadow:inset 0 3px 8px rgba(0,0,0,.125);-moz-box-shadow:inset 0 3px 8px rgba(0,0,0,.125);box-shadow:inset 0 3px 8px rgba(0,0,0,.125)}.navbar .btn-navbar{display:none;float:right;padding:7px 10px;margin-right:5px;margin-left:5px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#ededed;*background-color:#e5e5e5;background-image:-moz-linear-gradient(top,#f2f2f2,#e5e5e5);background-image:-webkit-gradient(linear,0 0,0 100%,from(#f2f2f2),to(#e5e5e5));background-image:-webkit-linear-gradient(top,#f2f2f2,#e5e5e5);background-image:-o-linear-gradient(top,#f2f2f2,#e5e5e5);background-image:linear-gradient(to bottom,#f2f2f2,#e5e5e5);background-repeat:repeat-x;border-color:#e5e5e5 #e5e5e5 #bfbfbf;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff2f2f2', endColorstr='#ffe5e5e5', GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.075);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.075);box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.075)}.navbar .btn-navbar:hover,.navbar .btn-navbar:active,.navbar .btn-navbar.active,.navbar .btn-navbar.disabled,.navbar .btn-navbar[disabled]{color:#fff;background-color:#e5e5e5;*background-color:#d9d9d9}.navbar .btn-navbar:active,.navbar .btn-navbar.active{background-color:#ccc \9}.navbar .btn-navbar .icon-bar{display:block;width:18px;height:2px;background-color:#f5f5f5;-webkit-border-radius:1px;-moz-border-radius:1px;border-radius:1px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.25);-moz-box-shadow:0 1px 0 rgba(0,0,0,.25);box-shadow:0 1px 0 rgba(0,0,0,.25)}.btn-navbar .icon-bar+.icon-bar{margin-top:3px}.navbar .nav>li>.dropdown-menu:before{position:absolute;top:-7px;left:9px;display:inline-block;border-right:7px solid transparent;border-bottom:7px solid #ccc;border-left:7px solid transparent;border-bottom-color:rgba(0,0,0,.2);content:''}.navbar .nav>li>.dropdown-menu:after{position:absolute;top:-6px;left:10px;display:inline-block;border-right:6px solid transparent;border-bottom:6px solid #fff;border-left:6px solid transparent;content:''}.navbar-fixed-bottom .nav>li>.dropdown-menu:before{top:auto;bottom:-7px;border-top:7px solid #ccc;border-bottom:0;border-top-color:rgba(0,0,0,.2)}.navbar-fixed-bottom .nav>li>.dropdown-menu:after{top:auto;bottom:-6px;border-top:6px solid #fff;border-bottom:0}.navbar .nav li.dropdown>a:hover .caret{border-top-color:#555;border-bottom-color:#555}.navbar .nav li.dropdown.open>.dropdown-toggle,.navbar .nav li.dropdown.active>.dropdown-toggle,.navbar .nav li.dropdown.open.active>.dropdown-toggle{color:#555;background-color:#e5e5e5}.navbar .nav li.dropdown>.dropdown-toggle .caret{border-top-color:#777;border-bottom-color:#777}.navbar .nav li.dropdown.open>.dropdown-toggle .caret,.navbar .nav li.dropdown.active>.dropdown-toggle .caret,.navbar .nav li.dropdown.open.active>.dropdown-toggle .caret{border-top-color:#555;border-bottom-color:#555}.navbar .pull-right>li>.dropdown-menu,.navbar .nav>li>.dropdown-menu.pull-right{right:0;left:auto}.navbar .pull-right>li>.dropdown-menu:before,.navbar .nav>li>.dropdown-menu.pull-right:before{right:12px;left:auto}.navbar .pull-right>li>.dropdown-menu:after,.navbar .nav>li>.dropdown-menu.pull-right:after{right:13px;left:auto}.navbar .pull-right>li>.dropdown-menu .dropdown-menu,.navbar .nav>li>.dropdown-menu.pull-right .dropdown-menu{right:100%;left:auto;margin-right:-1px;margin-left:0;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px}.navbar-inverse .navbar-inner{background-color:#1b1b1b;background-image:-moz-linear-gradient(top,#222,#111);background-image:-webkit-gradient(linear,0 0,0 100%,from(#222),to(#111));background-image:-webkit-linear-gradient(top,#222,#111);background-image:-o-linear-gradient(top,#222,#111);background-image:linear-gradient(to bottom,#222,#111);background-repeat:repeat-x;border-color:#252525;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff222222', endColorstr='#ff111111', GradientType=0)}.navbar-inverse .brand,.navbar-inverse .nav>li>a{color:#999;text-shadow:0 -1px 0 rgba(0,0,0,.25)}.navbar-inverse .brand:hover,.navbar-inverse .nav>li>a:hover{color:#fff}.navbar-inverse .brand{color:#999}.navbar-inverse .navbar-text{color:#999}.navbar-inverse .nav>li>a:focus,.navbar-inverse .nav>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .nav .active>a,.navbar-inverse .nav .active>a:hover,.navbar-inverse .nav .active>a:focus{color:#fff;background-color:#111}.navbar-inverse .navbar-link{color:#999}.navbar-inverse .navbar-link:hover{color:#fff}.navbar-inverse .divider-vertical{border-right-color:#222;border-left-color:#111}.navbar-inverse .nav li.dropdown.open>.dropdown-toggle,.navbar-inverse .nav li.dropdown.active>.dropdown-toggle,.navbar-inverse .nav li.dropdown.open.active>.dropdown-toggle{color:#fff;background-color:#111}.navbar-inverse .nav li.dropdown>a:hover .caret{border-top-color:#fff;border-bottom-color:#fff}.navbar-inverse .nav li.dropdown>.dropdown-toggle .caret{border-top-color:#999;border-bottom-color:#999}.navbar-inverse .nav li.dropdown.open>.dropdown-toggle .caret,.navbar-inverse .nav li.dropdown.active>.dropdown-toggle .caret,.navbar-inverse .nav li.dropdown.open.active>.dropdown-toggle .caret{border-top-color:#fff;border-bottom-color:#fff}.navbar-inverse .navbar-search .search-query{color:#fff;background-color:#515151;border-color:#111;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,.1),0 1px 0 rgba(255,255,255,.15);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,.1),0 1px 0 rgba(255,255,255,.15);box-shadow:inset 0 1px 2px rgba(0,0,0,.1),0 1px 0 rgba(255,255,255,.15);-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.navbar-inverse .navbar-search .search-query:-moz-placeholder{color:#ccc}.navbar-inverse .navbar-search .search-query:-ms-input-placeholder{color:#ccc}.navbar-inverse .navbar-search .search-query::-webkit-input-placeholder{color:#ccc}.navbar-inverse .navbar-search .search-query:focus,.navbar-inverse .navbar-search .search-query.focused{padding:5px 15px;color:#333;text-shadow:0 1px 0 #fff;background-color:#fff;border:0;outline:0;-webkit-box-shadow:0 0 3px rgba(0,0,0,.15);-moz-box-shadow:0 0 3px rgba(0,0,0,.15);box-shadow:0 0 3px rgba(0,0,0,.15)}.navbar-inverse .btn-navbar{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#0e0e0e;*background-color:#040404;background-image:-moz-linear-gradient(top,#151515,#040404);background-image:-webkit-gradient(linear,0 0,0 100%,from(#151515),to(#040404));background-image:-webkit-linear-gradient(top,#151515,#040404);background-image:-o-linear-gradient(top,#151515,#040404);background-image:linear-gradient(to bottom,#151515,#040404);background-repeat:repeat-x;border-color:#040404 #040404 #000;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff151515', endColorstr='#ff040404', GradientType=0);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.navbar-inverse .btn-navbar:hover,.navbar-inverse .btn-navbar:active,.navbar-inverse .btn-navbar.active,.navbar-inverse .btn-navbar.disabled,.navbar-inverse .btn-navbar[disabled]{color:#fff;background-color:#040404;*background-color:#000}.navbar-inverse .btn-navbar:active,.navbar-inverse .btn-navbar.active{background-color:#000 \9}.breadcrumb{padding:8px 15px;margin:0 0 20px;list-style:none;background-color:#f5f5f5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.breadcrumb>li{display:inline-block;*display:inline;text-shadow:0 1px 0 #fff;*zoom:1}.breadcrumb>li>.divider{padding:0 5px;color:#ccc}.breadcrumb>.active{color:#999}.pagination{margin:20px 0}.pagination ul{display:inline-block;*display:inline;margin-bottom:0;margin-left:0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;*zoom:1;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:0 1px 2px rgba(0,0,0,.05);box-shadow:0 1px 2px rgba(0,0,0,.05)}.pagination ul>li{display:inline}.pagination ul>li>a,.pagination ul>li>span{float:left;padding:4px 12px;line-height:20px;text-decoration:none;background-color:#fff;border:1px solid #ddd;border-left-width:0}.pagination ul>li>a:hover,.pagination ul>.active>a,.pagination ul>.active>span{background-color:#f5f5f5}.pagination ul>.active>a,.pagination ul>.active>span{color:#999;cursor:default}.pagination ul>.disabled>span,.pagination ul>.disabled>a,.pagination ul>.disabled>a:hover{color:#999;cursor:default;background-color:transparent}.pagination ul>li:first-child>a,.pagination ul>li:first-child>span{border-left-width:1px;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-moz-border-radius-bottomleft:4px;-moz-border-radius-topleft:4px}.pagination ul>li:last-child>a,.pagination ul>li:last-child>span{-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;-moz-border-radius-topright:4px;-moz-border-radius-bottomright:4px}.pagination-centered{text-align:center}.pagination-right{text-align:right}.pagination-large ul>li>a,.pagination-large ul>li>span{padding:11px 19px;font-size:17.5px}.pagination-large ul>li:first-child>a,.pagination-large ul>li:first-child>span{-webkit-border-bottom-left-radius:6px;border-bottom-left-radius:6px;-webkit-border-top-left-radius:6px;border-top-left-radius:6px;-moz-border-radius-bottomleft:6px;-moz-border-radius-topleft:6px}.pagination-large ul>li:last-child>a,.pagination-large ul>li:last-child>span{-webkit-border-top-right-radius:6px;border-top-right-radius:6px;-webkit-border-bottom-right-radius:6px;border-bottom-right-radius:6px;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:6px}.pagination-mini ul>li:first-child>a,.pagination-small ul>li:first-child>a,.pagination-mini ul>li:first-child>span,.pagination-small ul>li:first-child>span{-webkit-border-bottom-left-radius:3px;border-bottom-left-radius:3px;-webkit-border-top-left-radius:3px;border-top-left-radius:3px;-moz-border-radius-bottomleft:3px;-moz-border-radius-topleft:3px}.pagination-mini ul>li:last-child>a,.pagination-small ul>li:last-child>a,.pagination-mini ul>li:last-child>span,.pagination-small ul>li:last-child>span{-webkit-border-top-right-radius:3px;border-top-right-radius:3px;-webkit-border-bottom-right-radius:3px;border-bottom-right-radius:3px;-moz-border-radius-topright:3px;-moz-border-radius-bottomright:3px}.pagination-small ul>li>a,.pagination-small ul>li>span{padding:2px 10px;font-size:11.9px}.pagination-mini ul>li>a,.pagination-mini ul>li>span{padding:0 6px;font-size:10.5px}.pager{margin:20px 0;text-align:center;list-style:none;*zoom:1}.pager:before,.pager:after{display:table;line-height:0;content:""}.pager:after{clear:both}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px}.pager li>a:hover{text-decoration:none;background-color:#f5f5f5}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:hover,.pager .disabled>span{color:#999;cursor:default;background-color:#fff}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.modal-backdrop.fade{opacity:0}.modal-backdrop,.modal-backdrop.fade.in{opacity:.8;filter:alpha(opacity=80)}.modal{position:fixed;top:10%;left:50%;z-index:1050;width:560px;margin-left:-280px;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,.3);*border:1px solid #999;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;outline:0;-webkit-box-shadow:0 3px 7px rgba(0,0,0,.3);-moz-box-shadow:0 3px 7px rgba(0,0,0,.3);box-shadow:0 3px 7px rgba(0,0,0,.3);-webkit-background-clip:padding-box;-moz-background-clip:padding-box;background-clip:padding-box}.modal.fade{top:-25%;-webkit-transition:opacity .3s linear,top .3s ease-out;-moz-transition:opacity .3s linear,top .3s ease-out;-o-transition:opacity .3s linear,top .3s ease-out;transition:opacity .3s linear,top .3s ease-out}.modal.fade.in{top:10%}.modal-header{padding:9px 15px;border-bottom:1px solid #eee}.modal-header .close{margin-top:2px}.modal-header h3{margin:0;line-height:30px}.modal-body{position:relative;max-height:400px;padding:15px;overflow-y:auto}.modal-form{margin-bottom:0}.modal-footer{padding:14px 15px 15px;margin-bottom:0;text-align:right;background-color:#f5f5f5;border-top:1px solid #ddd;-webkit-border-radius:0 0 6px 6px;-moz-border-radius:0 0 6px 6px;border-radius:0 0 6px 6px;*zoom:1;-webkit-box-shadow:inset 0 1px 0 #fff;-moz-box-shadow:inset 0 1px 0 #fff;box-shadow:inset 0 1px 0 #fff}.modal-footer:before,.modal-footer:after{display:table;line-height:0;content:""}.modal-footer:after{clear:both}.modal-footer .btn+.btn{margin-bottom:0;margin-left:5px}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}.tooltip{position:absolute;z-index:1030;display:block;padding:5px;font-size:11px;opacity:0;filter:alpha(opacity=0);visibility:visible}.tooltip.in{opacity:.8;filter:alpha(opacity=80)}.tooltip.top{margin-top:-3px}.tooltip.right{margin-left:3px}.tooltip.bottom{margin-top:3px}.tooltip.left{margin-left:-3px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;text-decoration:none;background-color:#000;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-right-color:#000;border-width:5px 5px 5px 0}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-left-color:#000;border-width:5px 0 5px 5px}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-bottom-color:#000;border-width:0 5px 5px}.popover{position:absolute;top:0;left:0;z-index:1010;display:none;width:236px;padding:1px;text-align:left;white-space:normal;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,.2);box-shadow:0 5px 10px rgba(0,0,0,.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{padding:8px 14px;margin:0;font-size:14px;font-weight:400;line-height:18px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;-webkit-border-radius:5px 5px 0 0;-moz-border-radius:5px 5px 0 0;border-radius:5px 5px 0 0}.popover-content{padding:9px 14px}.popover .arrow,.popover .arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.popover .arrow{border-width:11px}.popover .arrow:after{border-width:10px;content:""}.popover.top .arrow{bottom:-11px;left:50%;margin-left:-11px;border-top-color:#999;border-top-color:rgba(0,0,0,.25);border-bottom-width:0}.popover.top .arrow:after{bottom:1px;margin-left:-10px;border-top-color:#fff;border-bottom-width:0}.popover.right .arrow{top:50%;left:-11px;margin-top:-11px;border-right-color:#999;border-right-color:rgba(0,0,0,.25);border-left-width:0}.popover.right .arrow:after{bottom:-10px;left:1px;border-right-color:#fff;border-left-width:0}.popover.bottom .arrow{top:-11px;left:50%;margin-left:-11px;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,.25);border-top-width:0}.popover.bottom .arrow:after{top:1px;margin-left:-10px;border-bottom-color:#fff;border-top-width:0}.popover.left .arrow{top:50%;right:-11px;margin-top:-11px;border-left-color:#999;border-left-color:rgba(0,0,0,.25);border-right-width:0}.popover.left .arrow:after{right:1px;bottom:-10px;border-left-color:#fff;border-right-width:0}.thumbnails{margin-left:-20px;list-style:none;*zoom:1}.thumbnails:before,.thumbnails:after{display:table;line-height:0;content:""}.thumbnails:after{clear:both}.row-fluid .thumbnails{margin-left:0}.thumbnails>li{float:left;margin-bottom:20px;margin-left:20px}.thumbnail{display:block;padding:4px;line-height:20px;border:1px solid #ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.055);-moz-box-shadow:0 1px 3px rgba(0,0,0,.055);box-shadow:0 1px 3px rgba(0,0,0,.055);-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}a.thumbnail:hover{border-color:#08c;-webkit-box-shadow:0 1px 4px rgba(0,105,214,.25);-moz-box-shadow:0 1px 4px rgba(0,105,214,.25);box-shadow:0 1px 4px rgba(0,105,214,.25)}.thumbnail>img{display:block;max-width:100%;margin-right:auto;margin-left:auto}.thumbnail .caption{padding:9px;color:#555}.media,.media-body{overflow:hidden;*overflow:visible;zoom:1}.media,.media .media{margin-top:15px}.media:first-child{margin-top:0}.media-object{display:block}.media-heading{margin:0 0 5px}.media .pull-left{margin-right:10px}.media .pull-right{margin-left:10px}.media-list{margin-left:0;list-style:none}.label,.badge{display:inline-block;padding:2px 4px;font-size:11.844px;font-weight:700;line-height:14px;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);white-space:nowrap;vertical-align:baseline;background-color:#999}.label{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.badge{padding-right:9px;padding-left:9px;-webkit-border-radius:9px;-moz-border-radius:9px;border-radius:9px}.label:empty,.badge:empty{display:none}a.label:hover,a.badge:hover{color:#fff;text-decoration:none;cursor:pointer}.label-important,.badge-important{background-color:#b94a48}.label-important[href],.badge-important[href]{background-color:#953b39}.label-warning,.badge-warning{background-color:#f89406}.label-warning[href],.badge-warning[href]{background-color:#c67605}.label-success,.badge-success{background-color:#468847}.label-success[href],.badge-success[href]{background-color:#356635}.label-info,.badge-info{background-color:#3a87ad}.label-info[href],.badge-info[href]{background-color:#2d6987}.label-inverse,.badge-inverse{background-color:#333}.label-inverse[href],.badge-inverse[href]{background-color:#1a1a1a}.btn .label,.btn .badge{position:relative;top:-1px}.btn-mini .label,.btn-mini .badge{top:0}@-webkit-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-moz-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-ms-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-o-keyframes progress-bar-stripes{from{background-position:0 0}to{background-position:40px 0}}@keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}.progress{height:20px;margin-bottom:20px;overflow:hidden;background-color:#f7f7f7;background-image:-moz-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-webkit-gradient(linear,0 0,0 100%,from(#f5f5f5),to(#f9f9f9));background-image:-webkit-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-o-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:linear-gradient(to bottom,#f5f5f5,#f9f9f9);background-repeat:repeat-x;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5', endColorstr='#fff9f9f9', GradientType=0);-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,.1);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,.1);box-shadow:inset 0 1px 2px rgba(0,0,0,.1)}.progress .bar{float:left;width:0;height:100%;font-size:12px;color:#fff;text-align:center;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#0e90d2;background-image:-moz-linear-gradient(top,#149bdf,#0480be);background-image:-webkit-gradient(linear,0 0,0 100%,from(#149bdf),to(#0480be));background-image:-webkit-linear-gradient(top,#149bdf,#0480be);background-image:-o-linear-gradient(top,#149bdf,#0480be);background-image:linear-gradient(to bottom,#149bdf,#0480be);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff149bdf', endColorstr='#ff0480be', GradientType=0);-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-moz-box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:width .6s ease;-moz-transition:width .6s ease;-o-transition:width .6s ease;transition:width .6s ease}.progress .bar+.bar{-webkit-box-shadow:inset 1px 0 0 rgba(0,0,0,.15),inset 0 -1px 0 rgba(0,0,0,.15);-moz-box-shadow:inset 1px 0 0 rgba(0,0,0,.15),inset 0 -1px 0 rgba(0,0,0,.15);box-shadow:inset 1px 0 0 rgba(0,0,0,.15),inset 0 -1px 0 rgba(0,0,0,.15)}.progress-striped .bar{background-color:#149bdf;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,.15)),color-stop(0.75,rgba(255,255,255,.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);-webkit-background-size:40px 40px;-moz-background-size:40px 40px;-o-background-size:40px 40px;background-size:40px 40px}.progress.active .bar{-webkit-animation:progress-bar-stripes 2s linear infinite;-moz-animation:progress-bar-stripes 2s linear infinite;-ms-animation:progress-bar-stripes 2s linear infinite;-o-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite}.progress-danger .bar,.progress .bar-danger{background-color:#dd514c;background-image:-moz-linear-gradient(top,#ee5f5b,#c43c35);background-image:-webkit-gradient(linear,0 0,0 100%,from(#ee5f5b),to(#c43c35));background-image:-webkit-linear-gradient(top,#ee5f5b,#c43c35);background-image:-o-linear-gradient(top,#ee5f5b,#c43c35);background-image:linear-gradient(to bottom,#ee5f5b,#c43c35);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffee5f5b', endColorstr='#ffc43c35', GradientType=0)}.progress-danger.progress-striped .bar,.progress-striped .bar-danger{background-color:#ee5f5b;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,.15)),color-stop(0.75,rgba(255,255,255,.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.progress-success .bar,.progress .bar-success{background-color:#5eb95e;background-image:-moz-linear-gradient(top,#62c462,#57a957);background-image:-webkit-gradient(linear,0 0,0 100%,from(#62c462),to(#57a957));background-image:-webkit-linear-gradient(top,#62c462,#57a957);background-image:-o-linear-gradient(top,#62c462,#57a957);background-image:linear-gradient(to bottom,#62c462,#57a957);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff62c462', endColorstr='#ff57a957', GradientType=0)}.progress-success.progress-striped .bar,.progress-striped .bar-success{background-color:#62c462;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,.15)),color-stop(0.75,rgba(255,255,255,.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.progress-info .bar,.progress .bar-info{background-color:#4bb1cf;background-image:-moz-linear-gradient(top,#5bc0de,#339bb9);background-image:-webkit-gradient(linear,0 0,0 100%,from(#5bc0de),to(#339bb9));background-image:-webkit-linear-gradient(top,#5bc0de,#339bb9);background-image:-o-linear-gradient(top,#5bc0de,#339bb9);background-image:linear-gradient(to bottom,#5bc0de,#339bb9);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff5bc0de', endColorstr='#ff339bb9', GradientType=0)}.progress-info.progress-striped .bar,.progress-striped .bar-info{background-color:#5bc0de;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,.15)),color-stop(0.75,rgba(255,255,255,.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.progress-warning .bar,.progress .bar-warning{background-color:#faa732;background-image:-moz-linear-gradient(top,#fbb450,#f89406);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fbb450),to(#f89406));background-image:-webkit-linear-gradient(top,#fbb450,#f89406);background-image:-o-linear-gradient(top,#fbb450,#f89406);background-image:linear-gradient(to bottom,#fbb450,#f89406);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffbb450', endColorstr='#fff89406', GradientType=0)}.progress-warning.progress-striped .bar,.progress-striped .bar-warning{background-color:#fbb450;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,.15)),color-stop(0.75,rgba(255,255,255,.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent)}.accordion{margin-bottom:20px}.accordion-group{margin-bottom:2px;border:1px solid #e5e5e5;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.accordion-heading{border-bottom:0}.accordion-heading .accordion-toggle{display:block;padding:8px 15px}.accordion-toggle{cursor:pointer}.accordion-inner{padding:9px 15px;border-top:1px solid #e5e5e5}.carousel{position:relative;margin-bottom:20px;line-height:1}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner>.item{position:relative;display:none;-webkit-transition:.6s ease-in-out left;-moz-transition:.6s ease-in-out left;-o-transition:.6s ease-in-out left;transition:.6s ease-in-out left}.carousel-inner>.item>img{display:block;line-height:1}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;top:0;width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;top:40%;left:15px;width:40px;height:40px;margin-top:-20px;font-size:60px;font-weight:100;line-height:30px;color:#fff;text-align:center;background:#222;border:3px solid #fff;-webkit-border-radius:23px;-moz-border-radius:23px;border-radius:23px;opacity:.5;filter:alpha(opacity=50)}.carousel-control.right{right:15px;left:auto}.carousel-control:hover{color:#fff;text-decoration:none;opacity:.9;filter:alpha(opacity=90)}.carousel-caption{position:absolute;right:0;bottom:0;left:0;padding:15px;background:#333;background:rgba(0,0,0,.75)}.carousel-caption h4,.carousel-caption p{line-height:20px;color:#fff}.carousel-caption h4{margin:0 0 5px}.carousel-caption p{margin-bottom:0}.hero-unit{padding:60px;margin-bottom:30px;font-size:18px;font-weight:200;line-height:30px;color:inherit;background-color:#eee;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.hero-unit h1{margin-bottom:0;font-size:60px;line-height:1;letter-spacing:-1px;color:inherit}.hero-unit li{line-height:30px}.pull-right{float:right}.pull-left{float:left}.hide{display:none}.show{display:block}.invisible{visibility:hidden}.affix{position:fixed}@-ms-viewport{width:device-width}.clearfix{*zoom:1}.clearfix:before,.clearfix:after{display:table;line-height:0;content:""}.clearfix:after{clear:both}.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.input-block-level{display:block;width:100%;min-height:30px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.hidden{display:none;visibility:hidden}.visible-phone{display:none!important}.visible-tablet{display:none!important}.hidden-desktop{display:none!important}.visible-desktop{display:inherit!important}@media (min-width:768px) and (max-width:979px){.hidden-desktop{display:inherit!important}.visible-desktop{display:none!important}.visible-tablet{display:inherit!important}.hidden-tablet{display:none!important}}@media (max-width:767px){.hidden-desktop{display:inherit!important}.visible-desktop{display:none!important}.visible-phone{display:inherit!important}.hidden-phone{display:none!important}}@media (min-width:1200px){.row{margin-left:-30px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:""}.row:after{clear:both}[class*=span]{float:left;min-height:1px;margin-left:30px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:1170px}.span12{width:1170px}.span11{width:1070px}.span10{width:970px}.span9{width:870px}.span8{width:770px}.span7{width:670px}.span6{width:570px}.span5{width:470px}.span4{width:370px}.span3{width:270px}.span2{width:170px}.span1{width:70px}.offset12{margin-left:1230px}.offset11{margin-left:1130px}.offset10{margin-left:1030px}.offset9{margin-left:930px}.offset8{margin-left:830px}.offset7{margin-left:730px}.offset6{margin-left:630px}.offset5{margin-left:530px}.offset4{margin-left:430px}.offset3{margin-left:330px}.offset2{margin-left:230px}.offset1{margin-left:130px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:""}.row-fluid:after{clear:both}.row-fluid [class*=span]{display:block;float:left;width:100%;min-height:30px;margin-left:2.564102564102564%;*margin-left:2.5109110747408616%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=span]:first-child{margin-left:0}.row-fluid .controls-row [class*=span]+[class*=span]{margin-left:2.564102564102564%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.45299145299145%;*width:91.39979996362975%}.row-fluid .span10{width:82.90598290598291%;*width:82.8527914166212%}.row-fluid .span9{width:74.35897435897436%;*width:74.30578286961266%}.row-fluid .span8{width:65.81196581196582%;*width:65.75877432260411%}.row-fluid .span7{width:57.26495726495726%;*width:57.21176577559556%}.row-fluid .span6{width:48.717948717948715%;*width:48.664757228587014%}.row-fluid .span5{width:40.17094017094017%;*width:40.11774868157847%}.row-fluid .span4{width:31.623931623931625%;*width:31.570740134569924%}.row-fluid .span3{width:23.076923076923077%;*width:23.023731587561375%}.row-fluid .span2{width:14.52991452991453%;*width:14.476723040552828%}.row-fluid .span1{width:5.982905982905983%;*width:5.929714493544281%}.row-fluid .offset12{margin-left:105.12820512820512%;*margin-left:105.02182214948171%}.row-fluid .offset12:first-child{margin-left:102.56410256410257%;*margin-left:102.45771958537915%}.row-fluid .offset11{margin-left:96.58119658119658%;*margin-left:96.47481360247316%}.row-fluid .offset11:first-child{margin-left:94.01709401709402%;*margin-left:93.91071103837061%}.row-fluid .offset10{margin-left:88.03418803418803%;*margin-left:87.92780505546462%}.row-fluid .offset10:first-child{margin-left:85.47008547008548%;*margin-left:85.36370249136206%}.row-fluid .offset9{margin-left:79.48717948717949%;*margin-left:79.38079650845607%}.row-fluid .offset9:first-child{margin-left:76.92307692307693%;*margin-left:76.81669394435352%}.row-fluid .offset8{margin-left:70.94017094017094%;*margin-left:70.83378796144753%}.row-fluid .offset8:first-child{margin-left:68.37606837606839%;*margin-left:68.26968539734497%}.row-fluid .offset7{margin-left:62.393162393162385%;*margin-left:62.28677941443899%}.row-fluid .offset7:first-child{margin-left:59.82905982905982%;*margin-left:59.72267685033642%}.row-fluid .offset6{margin-left:53.84615384615384%;*margin-left:53.739770867430444%}.row-fluid .offset6:first-child{margin-left:51.28205128205128%;*margin-left:51.175668303327875%}.row-fluid .offset5{margin-left:45.299145299145295%;*margin-left:45.1927623204219%}.row-fluid .offset5:first-child{margin-left:42.73504273504273%;*margin-left:42.62865975631933%}.row-fluid .offset4{margin-left:36.75213675213675%;*margin-left:36.645753773413354%}.row-fluid .offset4:first-child{margin-left:34.18803418803419%;*margin-left:34.081651209310785%}.row-fluid .offset3{margin-left:28.205128205128204%;*margin-left:28.0987452264048%}.row-fluid .offset3:first-child{margin-left:25.641025641025642%;*margin-left:25.53464266230224%}.row-fluid .offset2{margin-left:19.65811965811966%;*margin-left:19.551736679396257%}.row-fluid .offset2:first-child{margin-left:17.094017094017094%;*margin-left:16.98763411529369%}.row-fluid .offset1{margin-left:11.11111111111111%;*margin-left:11.004728132387708%}.row-fluid .offset1:first-child{margin-left:8.547008547008547%;*margin-left:8.440625568285142%}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*=span]+[class*=span]{margin-left:30px}input.span12,textarea.span12,.uneditable-input.span12{width:1156px}input.span11,textarea.span11,.uneditable-input.span11{width:1056px}input.span10,textarea.span10,.uneditable-input.span10{width:956px}input.span9,textarea.span9,.uneditable-input.span9{width:856px}input.span8,textarea.span8,.uneditable-input.span8{width:756px}input.span7,textarea.span7,.uneditable-input.span7{width:656px}input.span6,textarea.span6,.uneditable-input.span6{width:556px}input.span5,textarea.span5,.uneditable-input.span5{width:456px}input.span4,textarea.span4,.uneditable-input.span4{width:356px}input.span3,textarea.span3,.uneditable-input.span3{width:256px}input.span2,textarea.span2,.uneditable-input.span2{width:156px}input.span1,textarea.span1,.uneditable-input.span1{width:56px}.thumbnails{margin-left:-30px}.thumbnails>li{margin-left:30px}.row-fluid .thumbnails{margin-left:0}}@media (min-width:768px) and (max-width:979px){.row{margin-left:-20px;*zoom:1}.row:before,.row:after{display:table;line-height:0;content:""}.row:after{clear:both}[class*=span]{float:left;min-height:1px;margin-left:20px}.container,.navbar-static-top .container,.navbar-fixed-top .container,.navbar-fixed-bottom .container{width:724px}.span12{width:724px}.span11{width:662px}.span10{width:600px}.span9{width:538px}.span8{width:476px}.span7{width:414px}.span6{width:352px}.span5{width:290px}.span4{width:228px}.span3{width:166px}.span2{width:104px}.span1{width:42px}.offset12{margin-left:764px}.offset11{margin-left:702px}.offset10{margin-left:640px}.offset9{margin-left:578px}.offset8{margin-left:516px}.offset7{margin-left:454px}.offset6{margin-left:392px}.offset5{margin-left:330px}.offset4{margin-left:268px}.offset3{margin-left:206px}.offset2{margin-left:144px}.offset1{margin-left:82px}.row-fluid{width:100%;*zoom:1}.row-fluid:before,.row-fluid:after{display:table;line-height:0;content:""}.row-fluid:after{clear:both}.row-fluid [class*=span]{display:block;float:left;width:100%;min-height:30px;margin-left:2.7624309392265194%;*margin-left:2.709239449864817%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=span]:first-child{margin-left:0}.row-fluid .controls-row [class*=span]+[class*=span]{margin-left:2.7624309392265194%}.row-fluid .span12{width:100%;*width:99.94680851063829%}.row-fluid .span11{width:91.43646408839778%;*width:91.38327259903608%}.row-fluid .span10{width:82.87292817679558%;*width:82.81973668743387%}.row-fluid .span9{width:74.30939226519337%;*width:74.25620077583166%}.row-fluid .span8{width:65.74585635359117%;*width:65.69266486422946%}.row-fluid .span7{width:57.18232044198895%;*width:57.12912895262725%}.row-fluid .span6{width:48.61878453038674%;*width:48.56559304102504%}.row-fluid .span5{width:40.05524861878453%;*width:40.00205712942283%}.row-fluid .span4{width:31.491712707182323%;*width:31.43852121782062%}.row-fluid .span3{width:22.92817679558011%;*width:22.87498530621841%}.row-fluid .span2{width:14.3646408839779%;*width:14.311449394616199%}.row-fluid .span1{width:5.801104972375691%;*width:5.747913483013988%}.row-fluid .offset12{margin-left:105.52486187845304%;*margin-left:105.41847889972962%}.row-fluid .offset12:first-child{margin-left:102.76243093922652%;*margin-left:102.6560479605031%}.row-fluid .offset11{margin-left:96.96132596685082%;*margin-left:96.8549429881274%}.row-fluid .offset11:first-child{margin-left:94.1988950276243%;*margin-left:94.09251204890089%}.row-fluid .offset10{margin-left:88.39779005524862%;*margin-left:88.2914070765252%}.row-fluid .offset10:first-child{margin-left:85.6353591160221%;*margin-left:85.52897613729868%}.row-fluid .offset9{margin-left:79.8342541436464%;*margin-left:79.72787116492299%}.row-fluid .offset9:first-child{margin-left:77.07182320441989%;*margin-left:76.96544022569647%}.row-fluid .offset8{margin-left:71.2707182320442%;*margin-left:71.16433525332079%}.row-fluid .offset8:first-child{margin-left:68.50828729281768%;*margin-left:68.40190431409427%}.row-fluid .offset7{margin-left:62.70718232044199%;*margin-left:62.600799341718584%}.row-fluid .offset7:first-child{margin-left:59.94475138121547%;*margin-left:59.838368402492065%}.row-fluid .offset6{margin-left:54.14364640883978%;*margin-left:54.037263430116376%}.row-fluid .offset6:first-child{margin-left:51.38121546961326%;*margin-left:51.27483249088986%}.row-fluid .offset5{margin-left:45.58011049723757%;*margin-left:45.47372751851417%}.row-fluid .offset5:first-child{margin-left:42.81767955801105%;*margin-left:42.71129657928765%}.row-fluid .offset4{margin-left:37.01657458563536%;*margin-left:36.91019160691196%}.row-fluid .offset4:first-child{margin-left:34.25414364640884%;*margin-left:34.14776066768544%}.row-fluid .offset3{margin-left:28.45303867403315%;*margin-left:28.346655695309746%}.row-fluid .offset3:first-child{margin-left:25.69060773480663%;*margin-left:25.584224756083227%}.row-fluid .offset2{margin-left:19.88950276243094%;*margin-left:19.783119783707537%}.row-fluid .offset2:first-child{margin-left:17.12707182320442%;*margin-left:17.02068884448102%}.row-fluid .offset1{margin-left:11.32596685082873%;*margin-left:11.219583872105325%}.row-fluid .offset1:first-child{margin-left:8.56353591160221%;*margin-left:8.457152932878806%}input,textarea,.uneditable-input{margin-left:0}.controls-row [class*=span]+[class*=span]{margin-left:20px}input.span12,textarea.span12,.uneditable-input.span12{width:710px}input.span11,textarea.span11,.uneditable-input.span11{width:648px}input.span10,textarea.span10,.uneditable-input.span10{width:586px}input.span9,textarea.span9,.uneditable-input.span9{width:524px}input.span8,textarea.span8,.uneditable-input.span8{width:462px}input.span7,textarea.span7,.uneditable-input.span7{width:400px}input.span6,textarea.span6,.uneditable-input.span6{width:338px}input.span5,textarea.span5,.uneditable-input.span5{width:276px}input.span4,textarea.span4,.uneditable-input.span4{width:214px}input.span3,textarea.span3,.uneditable-input.span3{width:152px}input.span2,textarea.span2,.uneditable-input.span2{width:90px}input.span1,textarea.span1,.uneditable-input.span1{width:28px}}@media (max-width:767px){body{padding-right:20px;padding-left:20px}.navbar-fixed-top,.navbar-fixed-bottom,.navbar-static-top{margin-right:-20px;margin-left:-20px}.container-fluid{padding:0}.dl-horizontal dt{float:none;width:auto;clear:none;text-align:left}.dl-horizontal dd{margin-left:0}.container{width:auto}.row-fluid{width:100%}.row,.thumbnails{margin-left:0}.thumbnails>li{float:none;margin-left:0}[class*=span],.uneditable-input[class*=span],.row-fluid [class*=span]{display:block;float:none;width:100%;margin-left:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.span12,.row-fluid .span12{width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.row-fluid [class*=offset]:first-child{margin-left:0}.input-large,.input-xlarge,.input-xxlarge,input[class*=span],select[class*=span],textarea[class*=span],.uneditable-input{display:block;width:100%;min-height:30px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.input-prepend input,.input-append input,.input-prepend input[class*=span],.input-append input[class*=span]{display:inline-block;width:auto}.controls-row [class*=span]+[class*=span]{margin-left:0}.modal{position:fixed;top:20px;right:20px;left:20px;width:auto;margin:0}.modal.fade{top:-100px}.modal.fade.in{top:20px}}@media (max-width:480px){.nav-collapse{-webkit-transform:translate3d(0,0,0)}.page-header h1 small{display:block;line-height:20px}input[type=checkbox],input[type=radio]{border:1px solid #ccc}.form-horizontal .control-label{float:none;width:auto;padding-top:0;text-align:left}.form-horizontal .controls{margin-left:0}.form-horizontal .control-list{padding-top:0}.form-horizontal .form-actions{padding-right:10px;padding-left:10px}.media .pull-left,.media .pull-right{display:block;float:none;margin-bottom:10px}.media-object{margin-right:0;margin-left:0}.modal{top:10px;right:10px;left:10px}.modal-header .close{padding:10px;margin:-10px}.carousel-caption{position:static}}@media (max-width:979px){body{padding-top:0}.navbar-fixed-top,.navbar-fixed-bottom{position:static}.navbar-fixed-top{margin-bottom:20px}.navbar-fixed-bottom{margin-top:20px}.navbar-fixed-top .navbar-inner,.navbar-fixed-bottom .navbar-inner{padding:5px}.navbar .container{width:auto;padding:0}.navbar .brand{padding-right:10px;padding-left:10px;margin:0 0 0 -5px}.nav-collapse{clear:both}.nav-collapse .nav{float:none;margin:0 0 10px}.nav-collapse .nav>li{float:none}.nav-collapse .nav>li>a{margin-bottom:2px}.nav-collapse .nav>.divider-vertical{display:none}.nav-collapse .nav .nav-header{color:#777;text-shadow:none}.nav-collapse .nav>li>a,.nav-collapse .dropdown-menu a{padding:9px 15px;font-weight:700;color:#777;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.nav-collapse .btn{padding:4px 10px;font-weight:400;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.nav-collapse .dropdown-menu li+li a{margin-bottom:2px}.nav-collapse .nav>li>a:hover,.nav-collapse .dropdown-menu a:hover{background-color:#f2f2f2}.navbar-inverse .nav-collapse .nav>li>a,.navbar-inverse .nav-collapse .dropdown-menu a{color:#999}.navbar-inverse .nav-collapse .nav>li>a:hover,.navbar-inverse .nav-collapse .dropdown-menu a:hover{background-color:#111}.nav-collapse.in .btn-group{padding:0;margin-top:5px}.nav-collapse .dropdown-menu{position:static;top:auto;left:auto;display:none;float:none;max-width:none;padding:0;margin:0 15px;background-color:transparent;border:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.nav-collapse .open>.dropdown-menu{display:block}.nav-collapse .dropdown-menu:before,.nav-collapse .dropdown-menu:after{display:none}.nav-collapse .dropdown-menu .divider{display:none}.nav-collapse .nav>li>.dropdown-menu:before,.nav-collapse .nav>li>.dropdown-menu:after{display:none}.nav-collapse .navbar-form,.nav-collapse .navbar-search{float:none;padding:10px 15px;margin:10px 0;border-top:1px solid #f2f2f2;border-bottom:1px solid #f2f2f2;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.1);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.1);box-shadow:inset 0 1px 0 rgba(255,255,255,.1),0 1px 0 rgba(255,255,255,.1)}.navbar-inverse .nav-collapse .navbar-form,.navbar-inverse .nav-collapse .navbar-search{border-top-color:#111;border-bottom-color:#111}.navbar .nav-collapse .nav.pull-right{float:none;margin-left:0}.nav-collapse,.nav-collapse.collapse{height:0;overflow:hidden}.navbar .btn-navbar{display:block}.navbar-static .navbar-inner{padding-right:10px;padding-left:10px}}@media (min-width:980px){.nav-collapse.collapse{height:auto!important;overflow:visible!important}}#global-prompt-alert{margin-bottom:0;text-align:center}#close-global-prompt-alert{float:right;position:relative;right:100px}@font-face{font-family:icomoon;src:url(/static/font/icomoon.eot?-he749z);src:url(/static/font/icomoon.eot?#iefix-he749z) format('embedded-opentype'),url(/static/font/icomoon.woff?-he749z) format('woff'),url(/static/font/icomoon.ttf?-he749z) format('truetype'),url(/static/font/icomoon.svg?-he749z#icomoon) format('svg');font-weight:400;font-style:normal}[class^=glyph-],[class*=" glyph-"]{font-family:icomoon;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.glyph-comment:before{content:"\e600"}@font-face{font-family:FontAwesome;src:url(/static/font/fontawesome-webfont.eot?v=3.2.1);src:url(/static/font/fontawesome-webfont.eot?#iefix&v=3.2.1) format('embedded-opentype'),url(/static/font/fontawesome-webfont.woff?v=3.2.1) format('woff'),url(/static/font/fontawesome-webfont.ttf?v=3.2.1) format('truetype'),url(/static/font/fontawesome-webfont.svg#fontawesomeregular?v=3.2.1) format('svg');font-weight:400;font-style:normal}[class^=icon-],[class*=" icon-"]{font-family:FontAwesome;font-weight:400;font-style:normal;text-decoration:inherit;-webkit-font-smoothing:antialiased;*margin-right:.3em}[class^=icon-]:before,[class*=" icon-"]:before{text-decoration:inherit;display:inline-block;speak:none}.icon-large:before{vertical-align:-10%;font-size:1.3333333333333333em}a [class^=icon-],a [class*=" icon-"]{display:inline}[class^=icon-].icon-fixed-width,[class*=" icon-"].icon-fixed-width{display:inline-block;width:1.1428571428571428em;text-align:right;padding-right:.2857142857142857em}[class^=icon-].icon-fixed-width.icon-large,[class*=" icon-"].icon-fixed-width.icon-large{width:1.4285714285714286em}.icons-ul{margin-left:2.142857142857143em;list-style-type:none}.icons-ul>li{position:relative}.icons-ul .icon-li{position:absolute;left:-2.142857142857143em;width:2.142857142857143em;text-align:center;line-height:inherit}[class^=icon-].hide,[class*=" icon-"].hide{display:none}.icon-muted{color:#eee}.icon-light{color:#fff}.icon-dark{color:#333}.icon-border{border:solid 1px #eee;padding:.2em .25em .15em;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.icon-2x{font-size:2em}.icon-2x.icon-border{border-width:2px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.icon-3x{font-size:3em}.icon-3x.icon-border{border-width:3px;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}.icon-4x{font-size:4em}.icon-4x.icon-border{border-width:4px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.icon-5x{font-size:5em}.icon-5x.icon-border{border-width:5px;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px}.pull-right{float:right}.pull-left{float:left}[class^=icon-].pull-left,[class*=" icon-"].pull-left{margin-right:.3em}[class^=icon-].pull-right,[class*=" icon-"].pull-right{margin-left:.3em}[class^=icon-],[class*=" icon-"]{display:inline;width:auto;height:auto;line-height:normal;vertical-align:baseline;background-image:none;background-position:0 0;background-repeat:repeat;margin-top:0}.icon-white,.nav-pills>.active>a>[class^=icon-],.nav-pills>.active>a>[class*=" icon-"],.nav-list>.active>a>[class^=icon-],.nav-list>.active>a>[class*=" icon-"],.navbar-inverse .nav>.active>a>[class^=icon-],.navbar-inverse .nav>.active>a>[class*=" icon-"],.dropdown-menu>li>a:hover>[class^=icon-],.dropdown-menu>li>a:hover>[class*=" icon-"],.dropdown-menu>.active>a>[class^=icon-],.dropdown-menu>.active>a>[class*=" icon-"],.dropdown-submenu:hover>a>[class^=icon-],.dropdown-submenu:hover>a>[class*=" icon-"]{background-image:none}.btn [class^=icon-].icon-large,.nav [class^=icon-].icon-large,.btn [class*=" icon-"].icon-large,.nav [class*=" icon-"].icon-large{line-height:.9em}.btn [class^=icon-].icon-spin,.nav [class^=icon-].icon-spin,.btn [class*=" icon-"].icon-spin,.nav [class*=" icon-"].icon-spin{display:inline-block}.nav-tabs [class^=icon-],.nav-pills [class^=icon-],.nav-tabs [class*=" icon-"],.nav-pills [class*=" icon-"],.nav-tabs [class^=icon-].icon-large,.nav-pills [class^=icon-].icon-large,.nav-tabs [class*=" icon-"].icon-large,.nav-pills [class*=" icon-"].icon-large{line-height:.9em}.btn [class^=icon-].pull-left.icon-2x,.btn [class*=" icon-"].pull-left.icon-2x,.btn [class^=icon-].pull-right.icon-2x,.btn [class*=" icon-"].pull-right.icon-2x{margin-top:.18em}.btn [class^=icon-].icon-spin.icon-large,.btn [class*=" icon-"].icon-spin.icon-large{line-height:.8em}.btn.btn-small [class^=icon-].pull-left.icon-2x,.btn.btn-small [class*=" icon-"].pull-left.icon-2x,.btn.btn-small [class^=icon-].pull-right.icon-2x,.btn.btn-small [class*=" icon-"].pull-right.icon-2x{margin-top:.25em}.btn.btn-large [class^=icon-],.btn.btn-large [class*=" icon-"]{margin-top:0}.btn.btn-large [class^=icon-].pull-left.icon-2x,.btn.btn-large [class*=" icon-"].pull-left.icon-2x,.btn.btn-large [class^=icon-].pull-right.icon-2x,.btn.btn-large [class*=" icon-"].pull-right.icon-2x{margin-top:.05em}.btn.btn-large [class^=icon-].pull-left.icon-2x,.btn.btn-large [class*=" icon-"].pull-left.icon-2x{margin-right:.2em}.btn.btn-large [class^=icon-].pull-right.icon-2x,.btn.btn-large [class*=" icon-"].pull-right.icon-2x{margin-left:.2em}.nav-list [class^=icon-],.nav-list [class*=" icon-"]{line-height:inherit}.icon-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:-35%}.icon-stack [class^=icon-],.icon-stack [class*=" icon-"]{display:block;text-align:center;position:absolute;width:100%;height:100%;font-size:1em;line-height:inherit;*line-height:2em}.icon-stack .icon-stack-base{font-size:2em;*line-height:1em}.icon-spin{display:inline-block;-moz-animation:spin 2s infinite linear;-o-animation:spin 2s infinite linear;-webkit-animation:spin 2s infinite linear;animation:spin 2s infinite linear}a .icon-stack,a .icon-spin{display:inline-block;text-decoration:none}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg)}100%{-moz-transform:rotate(359deg)}}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg)}100%{-o-transform:rotate(359deg)}}@-ms-keyframes spin{0%{-ms-transform:rotate(0deg)}100%{-ms-transform:rotate(359deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(359deg)}}.icon-rotate-90:before{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg);filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1)}.icon-rotate-180:before{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg);filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2)}.icon-rotate-270:before{-webkit-transform:rotate(270deg);-moz-transform:rotate(270deg);-ms-transform:rotate(270deg);-o-transform:rotate(270deg);transform:rotate(270deg);filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3)}.icon-flip-horizontal:before{-webkit-transform:scale(-1,1);-moz-transform:scale(-1,1);-ms-transform:scale(-1,1);-o-transform:scale(-1,1);transform:scale(-1,1)}.icon-flip-vertical:before{-webkit-transform:scale(1,-1);-moz-transform:scale(1,-1);-ms-transform:scale(1,-1);-o-transform:scale(1,-1);transform:scale(1,-1)}a .icon-rotate-90:before,a .icon-rotate-180:before,a .icon-rotate-270:before,a .icon-flip-horizontal:before,a .icon-flip-vertical:before{display:inline-block}.icon-glass:before{content:"\f000"}.icon-music:before{content:"\f001"}.icon-search:before{content:"\f002"}.icon-envelope-alt:before{content:"\f003"}.icon-heart:before{content:"\f004"}.icon-star:before{content:"\f005"}.icon-star-empty:before{content:"\f006"}.icon-user:before{content:"\f007"}.icon-film:before{content:"\f008"}.icon-th-large:before{content:"\f009"}.icon-th:before{content:"\f00a"}.icon-th-list:before{content:"\f00b"}.icon-ok:before{content:"\f00c"}.icon-remove:before{content:"\f00d"}.icon-zoom-in:before{content:"\f00e"}.icon-zoom-out:before{content:"\f010"}.icon-power-off:before,.icon-off:before{content:"\f011"}.icon-signal:before{content:"\f012"}.icon-gear:before,.icon-cog:before{content:"\f013"}.icon-trash:before{content:"\f014"}.icon-home:before{content:"\f015"}.icon-file-alt:before{content:"\f016"}.icon-time:before{content:"\f017"}.icon-road:before{content:"\f018"}.icon-download-alt:before{content:"\f019"}.icon-download:before{content:"\f01a"}.icon-upload:before{content:"\f01b"}.icon-inbox:before{content:"\f01c"}.icon-play-circle:before{content:"\f01d"}.icon-rotate-right:before,.icon-repeat:before{content:"\f01e"}.icon-refresh:before{content:"\f021"}.icon-list-alt:before{content:"\f022"}.icon-lock:before{content:"\f023"}.icon-flag:before{content:"\f024"}.icon-headphones:before{content:"\f025"}.icon-volume-off:before{content:"\f026"}.icon-volume-down:before{content:"\f027"}.icon-volume-up:before{content:"\f028"}.icon-qrcode:before{content:"\f029"}.icon-barcode:before{content:"\f02a"}.icon-tag:before{content:"\f02b"}.icon-tags:before{content:"\f02c"}.icon-book:before{content:"\f02d"}.icon-bookmark:before{content:"\f02e"}.icon-print:before{content:"\f02f"}.icon-camera:before{content:"\f030"}.icon-font:before{content:"\f031"}.icon-bold:before{content:"\f032"}.icon-italic:before{content:"\f033"}.icon-text-height:before{content:"\f034"}.icon-text-width:before{content:"\f035"}.icon-align-left:before{content:"\f036"}.icon-align-center:before{content:"\f037"}.icon-align-right:before{content:"\f038"}.icon-align-justify:before{content:"\f039"}.icon-list:before{content:"\f03a"}.icon-indent-left:before{content:"\f03b"}.icon-indent-right:before{content:"\f03c"}.icon-facetime-video:before{content:"\f03d"}.icon-picture:before{content:"\f03e"}.icon-pencil:before{content:"\f040"}.icon-map-marker:before{content:"\f041"}.icon-adjust:before{content:"\f042"}.icon-tint:before{content:"\f043"}.icon-edit:before{content:"\f044"}.icon-share:before{content:"\f045"}.icon-check:before{content:"\f046"}.icon-move:before{content:"\f047"}.icon-step-backward:before{content:"\f048"}.icon-fast-backward:before{content:"\f049"}.icon-backward:before{content:"\f04a"}.icon-play:before{content:"\f04b"}.icon-pause:before{content:"\f04c"}.icon-stop:before{content:"\f04d"}.icon-forward:before{content:"\f04e"}.icon-fast-forward:before{content:"\f050"}.icon-step-forward:before{content:"\f051"}.icon-eject:before{content:"\f052"}.icon-chevron-left:before{content:"\f053"}.icon-chevron-right:before{content:"\f054"}.icon-plus-sign:before{content:"\f055"}.icon-minus-sign:before{content:"\f056"}.icon-remove-sign:before{content:"\f057"}.icon-ok-sign:before{content:"\f058"}.icon-question-sign:before{content:"\f059"}.icon-info-sign:before{content:"\f05a"}.icon-screenshot:before{content:"\f05b"}.icon-remove-circle:before{content:"\f05c"}.icon-ok-circle:before{content:"\f05d"}.icon-ban-circle:before{content:"\f05e"}.icon-arrow-left:before{content:"\f060"}.icon-arrow-right:before{content:"\f061"}.icon-arrow-up:before{content:"\f062"}.icon-arrow-down:before{content:"\f063"}.icon-mail-forward:before,.icon-share-alt:before{content:"\f064"}.icon-resize-full:before{content:"\f065"}.icon-resize-small:before{content:"\f066"}.icon-plus:before{content:"\f067"}.icon-minus:before{content:"\f068"}.icon-asterisk:before{content:"\f069"}.icon-exclamation-sign:before{content:"\f06a"}.icon-gift:before{content:"\f06b"}.icon-leaf:before{content:"\f06c"}.icon-fire:before{content:"\f06d"}.icon-eye-open:before{content:"\f06e"}.icon-eye-close:before{content:"\f070"}.icon-warning-sign:before{content:"\f071"}.icon-plane:before{content:"\f072"}.icon-calendar:before{content:"\f073"}.icon-random:before{content:"\f074"}.icon-comment:before{content:"\f075"}.icon-magnet:before{content:"\f076"}.icon-chevron-up:before{content:"\f077"}.icon-chevron-down:before{content:"\f078"}.icon-retweet:before{content:"\f079"}.icon-shopping-cart:before{content:"\f07a"}.icon-folder-close:before{content:"\f07b"}.icon-folder-open:before{content:"\f07c"}.icon-resize-vertical:before{content:"\f07d"}.icon-resize-horizontal:before{content:"\f07e"}.icon-bar-chart:before{content:"\f080"}.icon-twitter-sign:before{content:"\f081"}.icon-facebook-sign:before{content:"\f082"}.icon-camera-retro:before{content:"\f083"}.icon-key:before{content:"\f084"}.icon-gears:before,.icon-cogs:before{content:"\f085"}.icon-comments:before{content:"\f086"}.icon-thumbs-up-alt:before{content:"\f087"}.icon-thumbs-down-alt:before{content:"\f088"}.icon-star-half:before{content:"\f089"}.icon-heart-empty:before{content:"\f08a"}.icon-signout:before{content:"\f08b"}.icon-linkedin-sign:before{content:"\f08c"}.icon-pushpin:before{content:"\f08d"}.icon-external-link:before{content:"\f08e"}.icon-signin:before{content:"\f090"}.icon-trophy:before{content:"\f091"}.icon-github-sign:before{content:"\f092"}.icon-upload-alt:before{content:"\f093"}.icon-lemon:before{content:"\f094"}.icon-phone:before{content:"\f095"}.icon-unchecked:before,.icon-check-empty:before{content:"\f096"}.icon-bookmark-empty:before{content:"\f097"}.icon-phone-sign:before{content:"\f098"}.icon-twitter:before{content:"\f099"}.icon-facebook:before{content:"\f09a"}.icon-github:before{content:"\f09b"}.icon-unlock:before{content:"\f09c"}.icon-credit-card:before{content:"\f09d"}.icon-rss:before{content:"\f09e"}.icon-hdd:before{content:"\f0a0"}.icon-bullhorn:before{content:"\f0a1"}.icon-bell:before{content:"\f0a2"}.icon-certificate:before{content:"\f0a3"}.icon-hand-right:before{content:"\f0a4"}.icon-hand-left:before{content:"\f0a5"}.icon-hand-up:before{content:"\f0a6"}.icon-hand-down:before{content:"\f0a7"}.icon-circle-arrow-left:before{content:"\f0a8"}.icon-circle-arrow-right:before{content:"\f0a9"}.icon-circle-arrow-up:before{content:"\f0aa"}.icon-circle-arrow-down:before{content:"\f0ab"}.icon-globe:before{content:"\f0ac"}.icon-wrench:before{content:"\f0ad"}.icon-tasks:before{content:"\f0ae"}.icon-filter:before{content:"\f0b0"}.icon-briefcase:before{content:"\f0b1"}.icon-fullscreen:before{content:"\f0b2"}.icon-group:before{content:"\f0c0"}.icon-link:before{content:"\f0c1"}.icon-cloud:before{content:"\f0c2"}.icon-beaker:before{content:"\f0c3"}.icon-cut:before{content:"\f0c4"}.icon-copy:before{content:"\f0c5"}.icon-paperclip:before,.icon-paper-clip:before{content:"\f0c6"}.icon-save:before{content:"\f0c7"}.icon-sign-blank:before{content:"\f0c8"}.icon-reorder:before{content:"\f0c9"}.icon-list-ul:before{content:"\f0ca"}.icon-list-ol:before{content:"\f0cb"}.icon-strikethrough:before{content:"\f0cc"}.icon-underline:before{content:"\f0cd"}.icon-table:before{content:"\f0ce"}.icon-magic:before{content:"\f0d0"}.icon-truck:before{content:"\f0d1"}.icon-pinterest:before{content:"\f0d2"}.icon-pinterest-sign:before{content:"\f0d3"}.icon-google-plus-sign:before{content:"\f0d4"}.icon-google-plus:before{content:"\f0d5"}.icon-money:before{content:"\f0d6"}.icon-caret-down:before{content:"\f0d7"}.icon-caret-up:before{content:"\f0d8"}.icon-caret-left:before{content:"\f0d9"}.icon-caret-right:before{content:"\f0da"}.icon-columns:before{content:"\f0db"}.icon-sort:before{content:"\f0dc"}.icon-sort-down:before{content:"\f0dd"}.icon-sort-up:before{content:"\f0de"}.icon-envelope:before{content:"\f0e0"}.icon-linkedin:before{content:"\f0e1"}.icon-rotate-left:before,.icon-undo:before{content:"\f0e2"}.icon-legal:before{content:"\f0e3"}.icon-dashboard:before{content:"\f0e4"}.icon-comment-alt:before{content:"\f0e5"}.icon-comments-alt:before{content:"\f0e6"}.icon-bolt:before{content:"\f0e7"}.icon-sitemap:before{content:"\f0e8"}.icon-umbrella:before{content:"\f0e9"}.icon-paste:before{content:"\f0ea"}.icon-lightbulb:before{content:"\f0eb"}.icon-exchange:before{content:"\f0ec"}.icon-cloud-download:before{content:"\f0ed"}.icon-cloud-upload:before{content:"\f0ee"}.icon-user-md:before{content:"\f0f0"}.icon-stethoscope:before{content:"\f0f1"}.icon-suitcase:before{content:"\f0f2"}.icon-bell-alt:before{content:"\f0f3"}.icon-coffee:before{content:"\f0f4"}.icon-food:before{content:"\f0f5"}.icon-file-text-alt:before{content:"\f0f6"}.icon-building:before{content:"\f0f7"}.icon-hospital:before{content:"\f0f8"}.icon-ambulance:before{content:"\f0f9"}.icon-medkit:before{content:"\f0fa"}.icon-fighter-jet:before{content:"\f0fb"}.icon-beer:before{content:"\f0fc"}.icon-h-sign:before{content:"\f0fd"}.icon-plus-sign-alt:before{content:"\f0fe"}.icon-double-angle-left:before{content:"\f100"}.icon-double-angle-right:before{content:"\f101"}.icon-double-angle-up:before{content:"\f102"}.icon-double-angle-down:before{content:"\f103"}.icon-angle-left:before{content:"\f104"}.icon-angle-right:before{content:"\f105"}.icon-angle-up:before{content:"\f106"}.icon-angle-down:before{content:"\f107"}.icon-desktop:before{content:"\f108"}.icon-laptop:before{content:"\f109"}.icon-tablet:before{content:"\f10a"}.icon-mobile-phone:before{content:"\f10b"}.icon-circle-blank:before{content:"\f10c"}.icon-quote-left:before{content:"\f10d"}.icon-quote-right:before{content:"\f10e"}.icon-spinner:before{content:"\f110"}.icon-circle:before{content:"\f111"}.icon-mail-reply:before,.icon-reply:before{content:"\f112"}.icon-github-alt:before{content:"\f113"}.icon-folder-close-alt:before{content:"\f114"}.icon-folder-open-alt:before{content:"\f115"}.icon-expand-alt:before{content:"\f116"}.icon-collapse-alt:before{content:"\f117"}.icon-smile:before{content:"\f118"}.icon-frown:before{content:"\f119"}.icon-meh:before{content:"\f11a"}.icon-gamepad:before{content:"\f11b"}.icon-keyboard:before{content:"\f11c"}.icon-flag-alt:before{content:"\f11d"}.icon-flag-checkered:before{content:"\f11e"}.icon-terminal:before{content:"\f120"}.icon-code:before{content:"\f121"}.icon-reply-all:before{content:"\f122"}.icon-mail-reply-all:before{content:"\f122"}.icon-star-half-full:before,.icon-star-half-empty:before{content:"\f123"}.icon-location-arrow:before{content:"\f124"}.icon-crop:before{content:"\f125"}.icon-code-fork:before{content:"\f126"}.icon-unlink:before{content:"\f127"}.icon-question:before{content:"\f128"}.icon-info:before{content:"\f129"}.icon-exclamation:before{content:"\f12a"}.icon-superscript:before{content:"\f12b"}.icon-subscript:before{content:"\f12c"}.icon-eraser:before{content:"\f12d"}.icon-puzzle-piece:before{content:"\f12e"}.icon-microphone:before{content:"\f130"}.icon-microphone-off:before{content:"\f131"}.icon-shield:before{content:"\f132"}.icon-calendar-empty:before{content:"\f133"}.icon-fire-extinguisher:before{content:"\f134"}.icon-rocket:before{content:"\f135"}.icon-maxcdn:before{content:"\f136"}.icon-chevron-sign-left:before{content:"\f137"}.icon-chevron-sign-right:before{content:"\f138"}.icon-chevron-sign-up:before{content:"\f139"}.icon-chevron-sign-down:before{content:"\f13a"}.icon-html5:before{content:"\f13b"}.icon-css3:before{content:"\f13c"}.icon-anchor:before{content:"\f13d"}.icon-unlock-alt:before{content:"\f13e"}.icon-bullseye:before{content:"\f140"}.icon-ellipsis-horizontal:before{content:"\f141"}.icon-ellipsis-vertical:before{content:"\f142"}.icon-rss-sign:before{content:"\f143"}.icon-play-sign:before{content:"\f144"}.icon-ticket:before{content:"\f145"}.icon-minus-sign-alt:before{content:"\f146"}.icon-check-minus:before{content:"\f147"}.icon-level-up:before{content:"\f148"}.icon-level-down:before{content:"\f149"}.icon-check-sign:before{content:"\f14a"}.icon-edit-sign:before{content:"\f14b"}.icon-external-link-sign:before{content:"\f14c"}.icon-share-sign:before{content:"\f14d"}.icon-compass:before{content:"\f14e"}.icon-collapse:before{content:"\f150"}.icon-collapse-top:before{content:"\f151"}.icon-expand:before{content:"\f152"}.icon-euro:before,.icon-eur:before{content:"\f153"}.icon-gbp:before{content:"\f154"}.icon-dollar:before,.icon-usd:before{content:"\f155"}.icon-rupee:before,.icon-inr:before{content:"\f156"}.icon-yen:before,.icon-jpy:before{content:"\f157"}.icon-renminbi:before,.icon-cny:before{content:"\f158"}.icon-won:before,.icon-krw:before{content:"\f159"}.icon-bitcoin:before,.icon-btc:before{content:"\f15a"}.icon-file:before{content:"\f15b"}.icon-file-text:before{content:"\f15c"}.icon-sort-by-alphabet:before{content:"\f15d"}.icon-sort-by-alphabet-alt:before{content:"\f15e"}.icon-sort-by-attributes:before{content:"\f160"}.icon-sort-by-attributes-alt:before{content:"\f161"}.icon-sort-by-order:before{content:"\f162"}.icon-sort-by-order-alt:before{content:"\f163"}.icon-thumbs-up:before{content:"\f164"}.icon-thumbs-down:before{content:"\f165"}.icon-youtube-sign:before{content:"\f166"}.icon-youtube:before{content:"\f167"}.icon-xing:before{content:"\f168"}.icon-xing-sign:before{content:"\f169"}.icon-youtube-play:before{content:"\f16a"}.icon-dropbox:before{content:"\f16b"}.icon-stackexchange:before{content:"\f16c"}.icon-instagram:before{content:"\f16d"}.icon-flickr:before{content:"\f16e"}.icon-adn:before{content:"\f170"}.icon-bitbucket:before{content:"\f171"}.icon-bitbucket-sign:before{content:"\f172"}.icon-tumblr:before{content:"\f173"}.icon-tumblr-sign:before{content:"\f174"}.icon-long-arrow-down:before{content:"\f175"}.icon-long-arrow-up:before{content:"\f176"}.icon-long-arrow-left:before{content:"\f177"}.icon-long-arrow-right:before{content:"\f178"}.icon-apple:before{content:"\f179"}.icon-windows:before{content:"\f17a"}.icon-android:before{content:"\f17b"}.icon-linux:before{content:"\f17c"}.icon-dribbble:before{content:"\f17d"}.icon-skype:before{content:"\f17e"}.icon-foursquare:before{content:"\f180"}.icon-trello:before{content:"\f181"}.icon-female:before{content:"\f182"}.icon-male:before{content:"\f183"}.icon-gittip:before{content:"\f184"}.icon-sun:before{content:"\f185"}.icon-moon:before{content:"\f186"}.icon-archive:before{content:"\f187"}.icon-bug:before{content:"\f188"}.icon-vk:before{content:"\f189"}.icon-weibo:before{content:"\f18a"}.icon-renren:before{content:"\f18b"}/* Pretty printing styles. Used with prettify.js. */
/* SPAN elements with the classes below are added by prettyprint. */
.pln { color: #000 }  /* plain text */

@media screen {
  .str { color: #080 }  /* string content */
  .kwd { color: #008 }  /* a keyword */
  .com { color: #800 }  /* a comment */
  .typ { color: #606 }  /* a type name */
  .lit { color: #066 }  /* a literal value */
  /* punctuation, lisp open bracket, lisp close bracket */
  .pun, .opn, .clo { color: #660 }
  .tag { color: #008 }  /* a markup tag name */
  .atn { color: #606 }  /* a markup attribute name */
  .atv { color: #080 }  /* a markup attribute value */
  .dec, .var { color: #606 }  /* a declaration; a variable name */
  .fun { color: red }  /* a function name */
}

/* Specify class=linenums on a pre to get line numbering */
ol.linenums { margin-top: 0; margin-bottom: 0; color: rgba(102, 128, 153, 0.4) } /* IE indents via margin-left */
ol.linenums { margin-left: 35px;}
ol.linenums > li { padding-left: 15px;}
pre.prettyprint {
    display: block;
    background-color: rgba(102, 128, 153, 0.05);
    box-shadow: 0 1px 2px rgba(255, 255, 255, 0.1) inset, 45px 0 0 rgba(102, 128, 153, 0.05) inset, 0 1px 0 rgba(102, 128, 153, 0.05);
    padding: 9.5px;
}

/* li.L0, li.L1, li.L2, li.L3, li.L5, li.L6, li.L7, li.L8 { list-style-type: none } */

/* Alternate shading for lines */
li.L1, li.L3, li.L5, li.L7, li.L9 { }

/* Use higher contrast and text-weight for printable form. */
@media print, projection {
  .str { color: #060 }
  .kwd { color: #006; font-weight: bold }
  .com { color: #600; font-style: italic }
  .typ { color: #404; font-weight: bold }
  .lit { color: #044 }
  .pun, .opn, .clo { color: #440 }
  .tag { color: #006; font-weight: bold }
  .atn { color: #404 }
  .atv { color: #060 }
}

/*! zybuluo */

.pace .pace-progress{background:#29d;position:fixed;z-index:2000;top:0;left:0;height:2px;-webkit-transition:width 1s;-moz-transition:width 1s;-o-transition:width 1s;transition:width 1s}.pace-inactive{display:none}body{}.theme-black{background-color:#444;color:#D6DBDF}.theme-white{background-color:#F9F9F5;color:#2C3E50}.table-striped-black tbody>tr:nth-child(2n+1)>td,.table-striped-black tbody>tr:nth-child(2n+1)>th{background-color:#333}.table-striped-white tbody>tr:nth-child(2n+1)>td,.table-striped-white tbody>tr:nth-child(2n+1)>th{background-color:rgba(102,128,153,.05)}hr{border:0;border-bottom:1px dashed #cfcfcf;margin:30px 0}.footnote{vertical-align:baseline;top:-8px;font-size:75%;line-height:0;position:relative}.footnotes small{color:#888;font-size:.9em}.footnotes{margin-bottom:20px}code{border:0;background-color:#D6DBDF;border-radius:4px;color:#2C3E50;font-size:90%;padding:2px 4px;white-space:nowrap}.code-black{background-color:#333;color:#D6DBDF}.toc ul{list-style-type:none}.fade{opacity:0;-webkit-transition:opacity .01s linear;-moz-transition:opacity .01s linear;-ms-transition:opacity .01s linear;-o-transition:opacity .01s linear;transition:opacity .01s linear}.red-on-black{color:#CD5C5C}.blue-on-black{color:#5BA4E5}a:hover{color:#5BA4E5}a:hover.red-on-black,a:hover.white-on-black{color:#F5F5F9}.white-on-black{color:#BBB}.whiter-on-black{color:#FFF;font-weight:700}.yellow-on-black{color:#FFA}body,button,input,select{font-family:PingFang SC,Hiragino Sans GB,Microsoft Yahei,WenQuanYi Micro Hei,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:500}.wmd-preview>p,.wmd-preview>pre,.wmd-preview>blockquote{margin:0 0 20px}.wmd-preview blockquote{padding:10px 15px;border-left-style:solid;border-left-width:10px}.white-blockquote{border-color:#D6DBDF;background:none repeat scroll 0 0 rgba(102,128,153,.05)}.black-blockquote{border-color:#333;background:none repeat scroll 0 0 rgba(51,51,51,.5)}.MathJax_Preview{color:inherit!important}blockquote p{margin-bottom:15px}blockquote p:last-child{margin-bottom:0}pre{border-width:0;padding:10px 15px;background:none repeat scroll 0 0 rgba(102,128,153,.05)}.wmd-preview dl{margin-bottom:20px}.wmd-preview dt,.wmd-preview dd{margin-bottom:5px;margin-top:5px;line-height:27px}.wmd-preview dt{font-weight:700}.wmd-preview dd{margin-left:40px}h1{margin:50px 0 20px;font-size:30px}h2{margin:35px 0 20px;font-size:26px}h3{margin:20px 0;font-size:21px}h4{font-size:18px}h5,h6{font-size:16px}.wmd-preview code,.wmd-preview pre{font-size:14px}.element-center{text-align:center;margin:0 auto}#wmd-button-bar{padding-bottom:5px;padding-top:5px;min-width:650px}#preview-button-bar{padding-bottom:5px;padding-top:5px}#wmd-button-bar,#preview-button-bar{height:40px}.wmd-button-bar,.preview-button-bar{background-color:#444;box-shadow:0 1px 1px rgba(0,0,0,.2);position:relative;z-index:50}.wmd-button-bar-full-shown{margin:0 auto;width:650px;border-bottom:1px solid #ddd}.preview-link>a{margin-left:15px;text-decoration:none}#toc-list{background-clip:padding-box;border-radius:4px;float:left;font-size:14px;list-style:none outside none;margin:2px 0 0;min-width:160px;position:absolute;padding:5px 0 20px;top:100%;z-index:1000}#toc-list .toc ul{margin-left:20px}#toc-list .toc>ul{margin:0}#toc-list a:hover{background:0 0;color:#005580;text-decoration:underline}#toc-list a{color:#08c;text-decoration:none;display:inline}#toc-list h3{margin:10px 0;padding-left:15px}#toc-list hr{margin:10px 0}.table-of-contents{overflow-x:hidden;overflow-y:auto;width:330px;max-height:400px;padding:5px 0}li.todo-list-item{list-style:none}li.todo-list-item i{margin:0 6px 0 -20px;vertical-align:middle}#upload-local-area{position:relative}#upload-local-button{margin-top:15px}#upload-local-info{position:absolute;top:20px;left:200px;color:#3a87ad}#upload-local-tips{margin-top:15px;margin-bottom:-10px;font-size:12px}a.attachment-block:hover{text-decoration:none}a.attachment-block{position:relative}a.attachment-block .attachment-filename{position:absolute;left:60px;top:-30px;width:300px;line-height:16px}a.attachment-block .attachment-filesize{position:absolute;left:60px;top:0;width:300px;font-size:80%}#merge-editor{width:100%;overflow-y:scroll;background-color:#fff;border:1px solid #ccc;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border linear .2s,box-shadow linear .2s;-moz-transition:border linear .2s,box-shadow linear .2s;-o-transition:border linear .2s,box-shadow linear .2s;transition:border linear .2s,box-shadow linear .2s}#merge-editor:focus{border-color:rgba(82,168,236,.8);outline:0;outline:thin dotted \9;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(82,168,236,.6);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(82,168,236,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(82,168,236,.6)}span.insert{background:#c6ffc6}span.delete{background:#ffc6c6}#input-file-open-local-file{width:100%;height:42px;line-height:1.45;padding-top:14px;border-color:rgba(82,168,236,.8);outline:0;outline:thin dotted \9;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(82,168,236,.6);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(82,168,236,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(82,168,236,.6)}#label-offline-local-file{margin-top:15px;margin-bottom:10px}#publish-password{margin-top:10px}.paid-user-color{color:#5eb95e!important}.dropdown{display:inline-block}ul.dropdown-menu{font-size:14px;padding:10px;color:#BBB}ul.dropdown-menu#signup-login-intro{min-width:250px}#info-menu{width:300px;padding-left:0;padding-right:0;cursor:default}#info-menu table{margin-bottom:10px;width:100%}#info-menu table,#info-menu td{border-width:0;border-bottom-left-radius:0;border-bottom-right-radius:0}#info-menu td.menu-label{padding:3px 20px;border-right:#333 1px solid;border-bottom:#333 1px solid}#info-menu td.menu-field{padding:3px 20px;border-bottom:#333 1px solid;text-align:right}#revision-list{width:300px}#revision-list,#latest-notes-list{border-top-width:0;border-top-left-radius:0;border-top-right-radius:0;padding:0 0 10px;overflow-y:auto}#file-menu,#latest-notes-list{width:220px;padding-left:0;padding-right:0;overflow-x:hidden}#info-revision-label,#latest-notes-label{padding:3px 20px;color:#5BA4E5}#file-list{width:500px;margin-top:50px;border-top-left-radius:0;border-top-right-radius:0;overflow-y:auto}#file-list-topbar{width:500px;border-bottom-left-radius:0;border-bottom-right-radius:0}#file-list-topbar #search-file-bar{display:block}#file-list-topbar #tag-file-bar{display:none}#search-file-bar a{display:inline;color:#888;font-size:13px}#search-file-bar a:hover,#search-file-bar a:focus{background-image:none;background-color:transparent}#search-file-bar a:hover{color:#fff}#file-list .tag-list{list-style-type:none;margin-left:10px}#file-list .tag-item{color:#5BA4E5}#file-list .tag-item:hover{color:#fff}#file-list .tag-list .tag-count{margin-right:30px}#file-list .item{border-right:solid 5px #444}#file-list li.selected-item{color:#fff;text-decoration:none;border-right:solid 5px #0081c2}#file-list li.selected-item>a{color:#fff}ul.dropdown-menu#about-menu{width:100px;max-height:180px;overflow-y:auto}ul.dropdown-menu .divider{border-bottom:#BBB 0 solid}ul.dropdown-menu{list-style-type:none;margin-left:0}ul.dropdown-menu li{line-height:30px}ul.dropdown-menu #search-file-textbox{margin-bottom:0;margin-right:10px;background-color:#444;color:#bbb;border:0;font-size:16px;width:300px}ul.dropdown-menu.theme-black li>a{color:#BBB}ul.dropdown-menu.theme-black li>a:hover{color:#FFF}ul.dropdown-menu.theme-white li>a{color:#333}ul.dropdown-menu.theme-white li>a:hover{color:#FFF}ul.dropdown-menu li i[class*=icon]{margin-right:10px;vertical-align:baseline}#editor-column,#preview-column{width:50%}.wmd-panel-editor{padding-left:20px;padding-right:20px}.wmd-panel-preview{padding-left:20px;padding-right:45px;position:relative}.wmd-panel-editor-full-shown{text-align:center;width:100%;overflow-y:scroll;overflow-x:hidden}.wmd-panel-editor-full-shown-ace{width:100%;overflow-y:hidden;overflow-x:hidden}#wmd-preview{font-family:PingFang SC,Hiragino Sans GB,Helvetica Neue,Microsoft Yahei,WenQuanYi Micro Hei,sans-serif}.wmd-input,.wmd-input:focus,#md-section-helper{width:100%;border:0;padding:0 6px;box-shadow:0 1px 1px rgba(0,0,0,.075) inset;transition:border .2s linear 0s,box-shadow .2s linear 0s;font-size:16px;line-height:27px;resize:none;overflow-x:hidden;font-family:Menlo,"Ubuntu Mono",Consolas,"Courier New",Microsoft Yahei,Hiragino Sans GB,WenQuanYi Micro Hei,sans-serif}#md-section-helper{top:-100px;height:1px;position:absolute;overflow:auto;white-space:pre-wrap;word-wrap:break-word}.editor-reader-full-hidden{position:absolute;top:-1000px;z-index:-1}.editor-reader-full-shown{position:fixed;left:0;right:0;top:0;bottom:0;z-index:1000}.reader-full-toolbar-hidden{position:absolute;top:-1000px;z-index:-1}.reader-full-toolbar-shown{position:fixed;right:0;top:0;bottom:0;width:45px;z-index:1000;background-color:#444;opacity:.9;box-shadow:0 0 10px rgba(0,0,0,.2);padding-top:80px}.reader-full-topInfo-hidden{position:absolute;top:-1000px;z-index:-1}.reader-full-topInfo-shown{position:static;margin:0 auto;max-width:850px;padding-top:40px;font-size:16px;color:#AAA}.editor-reader-hidden{position:absolute;top:-1000px;z-index:-1;display:none!important}.editor-reader-hidden-always{position:absolute;top:-1000px;z-index:-1}#large-image-panel{text-align:center;display:none;position:fixed;z-index:1000;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.9)}#large-image{margin:auto;position:absolute;top:0;bottom:0;left:0;right:0}#wmd-preview img{cursor:pointer}.sequence-diagram,.flow-diagram,div.mermaid{text-align:center;margin:0 auto;cursor:pointer}.sequence-diagram text,.flow-diagram text{font-size:15px!important;font-family:Arial!important}.theme-white.sequence-diagram [fill="#ffffff"],.theme-white.flow-diagram [fill="#ffffff"]{fill:#F9F9F5}.theme-white.sequence-diagram [stroke="#000000"],.theme-white.flow-diagram [stroke="#000000"]{stroke:#2C3E50}.theme-white.sequence-diagram [fill="#000"],.theme-white.flow-diagram [fill="#000"],.theme-white.sequence-diagram [fill="#000000"],.theme-white.flow-diagram [fill="#000000"],.theme-white.sequence-diagram [fill=black],.theme-white.flow-diagram [fill=black]{fill:#2C3E50}.theme-black.sequence-diagram [fill="#ffffff"],.theme-black.flow-diagram [fill="#ffffff"]{fill:#444}.theme-black.sequence-diagram [stroke="#000000"],.theme-black.flow-diagram [stroke="#000000"]{stroke:#D6DBDF}.theme-black.sequence-diagram [fill="#000"],.theme-black.flow-diagram [fill="#000"],.theme-black.sequence-diagram [fill="#000000"],.theme-black.flow-diagram [fill="#000000"],.theme-black.sequence-diagram [fill=black],.theme-black.flow-diagram [fill=black]{fill:#D6DBDF}.theme-white .MathJax_SVG [stroke=black]{stroke:#2C3E50}.theme-white .MathJax_SVG [fill=black]{fill:#2C3E50}.theme-black .MathJax_SVG [stroke=black]{stroke:#D6DBDF}.theme-black .MathJax_SVG [fill=black]{fill:#D6DBDF}.ace_search.right{border:1px solid #cbcbcb!important}.ace_search{background-color:#F9F9F5!important}.ace_gutter-cell{padding-left:0!important;color:#888!important;font-family:Monaco,Menlo,Consolas,"Courier New",monospace!important}#reader-full-topInfo>span,#reader-full-topInfo>code{margin-right:10px}#reader-full-topInfo a{font-size:16px;color:#AAA}.in-page-editor-buttons,.in-page-preview-buttons{margin-top:20px;position:fixed;z-index:10}.in-page-preview-buttons-full-reader{right:35px;top:-15px}.preview-container{overflow:auto}.wmd-preview{width:100%;font-size:16px;line-height:27px;overflow:auto;border:1px dashed #BBB;border-top-width:0;border-right-width:0;padding-left:5px;padding-right:5px}.wmd-preview li{line-height:27px}.wmd-preview ol.linenums>li{line-height:20px}.wmd-preview-full-reader{height:auto;border:0 none;margin:0 auto;max-width:850px;overflow-x:hidden;padding-bottom:50px;position:relative}.wmd-button-row,.preview-button-row{margin:10px 5px 5px;padding:0;height:auto}.wmd-spacer{width:0;height:20px;margin-left:30px;display:inline-block;list-style:none}.preview-button-full-reader{width:20px;height:20px;display:block;list-style:none;cursor:pointer;font-size:20px;margin:0 auto 20px}#reader-full-toolbar-home{margin-bottom:60px}.reader-full-toolbar-tail-shown{position:fixed;right:0;bottom:0;width:45px;z-index:1000;opacity:.9}.reader-full-toolbar-tail-hidden{position:absolute;top:-1000px;z-index:-1}.wmd-button,.preview-button,.in-page-button{width:20px;height:20px;display:inline-block;list-style:none;cursor:pointer;font-size:17px}.preview-link{height:20px;display:inline-block;list-style:none;cursor:pointer;font-size:16px}.wmd-button{margin-left:10px}.preview-link,.preview-button{margin-right:10px}.in-page-button{margin-right:15px}.wmd-button>span,.preview-button>span,.in-page-button>span{width:20px;height:20px;display:inline-block}.preview-link button{border:solid 0 #0081c2;background-color:#444;color:#5BA4E5;border-radius:4px;padding:2px 4px;vertical-align:baseline;font-size:14px}.preview-link button:hover{box-shadow:0 1px 1px rgba(0,0,0,.075) inset,0 0 8px rgba(82,168,236,.6)!important}.preview-link button:focus,.preview-link a:focus{outline-width:0}#editor-column ::-webkit-scrollbar,#preview-column ::-webkit-scrollbar{width:9px}#editor-column ::-webkit-scrollbar-track,#preview-column ::-webkit-scrollbar-track{background:rgba(102,128,153,.1)}#editor-column ::-webkit-scrollbar-thumb:hover,#preview-column ::-webkit-scrollbar-thumb:hover{background:rgba(102,128,153,.5)}#editor-column ::-webkit-scrollbar-thumb,#preview-column ::-webkit-scrollbar-thumb{background:rgba(102,128,153,.2)}#editor-column ::-webkit-scrollbar-corner,#editor-column ::-webkit-scrollbar-thumb:window-inactive,#preview-column ::-webkit-scrollbar-corner,#preview-column ::-webkit-scrollbar-thumb:window-inactive{background:rgba(102,128,153,.1)}#preview-button-bar ::-webkit-scrollbar{width:9px}#preview-button-bar ::-webkit-scrollbar-thumb:hover{background:rgba(91,164,245,.8)}#preview-button-bar ::-webkit-scrollbar-thumb{background:rgba(91,164,245,.6)}#preview-button-bar ::-webkit-scrollbar-corner,#preview-button-bar ::-webkit-scrollbar-thumb:window-inactive{background:rgba(91,164,245,.2)}.wmd-spacer1{left:40px}.wmd-spacer2{left:175px}.wmd-spacer3{left:300px}.wmd-prompt-background{background-color:#000}.wmd-prompt-dialog{border:1px solid #999;background-color:#F5F5F5}.wmd-prompt-dialog>div{font-size:.8em;font-family:arial,helvetica,sans-serif}.wmd-prompt-dialog>form>input[type=text]{border:1px solid #999;color:#000}.wmd-prompt-dialog>form>input[type=button]{border:1px solid #888;font-family:trebuchet MS,helvetica,sans-serif;font-size:.8em;font-weight:700}.clearfix:after{display:block;visibility:hidden;clear:both;height:0;content:" ";font-size:0}@-webkit-keyframes pop-upwards{0%{-webkit-transform:matrix(0.97,0,0,1,0,12);transform:matrix(0.97,0,0,1,0,12);opacity:0}20%{-webkit-transform:matrix(0.99,0,0,1,0,2);transform:matrix(0.99,0,0,1,0,2);opacity:.7}40%{-webkit-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1);opacity:1}70%{-webkit-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1}100%{-webkit-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1}}@keyframes pop-upwards{0%{-webkit-transform:matrix(0.97,0,0,1,0,12);transform:matrix(0.97,0,0,1,0,12);opacity:0}20%{-webkit-transform:matrix(0.99,0,0,1,0,2);transform:matrix(0.99,0,0,1,0,2);opacity:.7}40%{-webkit-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1);opacity:1}70%{-webkit-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1}100%{-webkit-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1}}.medium-toolbar-arrow-under:after,.medium-toolbar-arrow-over:before{position:absolute;left:50%;display:block;margin-left:-8px;width:0;height:0;border-style:solid;content:""}.medium-toolbar-arrow-under:after{border-width:8px 8px 0}.medium-toolbar-arrow-over:before{top:-8px;border-width:0 8px 8px}.medium-editor-toolbar{position:absolute;top:0;left:0;z-index:1000;visibility:hidden;font-size:16px;font-family:HelveticaNeue,Helvetica,Arial,sans-serif}.medium-editor-toolbar ul{margin:0;padding:0}.medium-editor-toolbar li{float:left;margin:0;padding:0;list-style:none}.medium-editor-toolbar li button{display:block;margin:0;padding:15px;cursor:pointer;font-size:14px;line-height:1.33;text-decoration:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.medium-editor-toolbar li .medium-editor-action-underline{text-decoration:underline}.medium-editor-toolbar li .medium-editor-action-pre{padding:15px 0;font-weight:100;font-size:12px;font-family:Menlo,monospace}.medium-editor-toolbar-active{visibility:visible;-webkit-animation:pop-upwards 160ms forwards linear;-ms-animation:pop-upwards 160ms forwards linear;animation:pop-upwards 160ms forwards linear;-webkit-transition:top .075s ease-out,left .075s ease-out;transition:top .075s ease-out,left .075s ease-out}button:focus{outline-width:0}.highlight-yellow{background-color:rgba(255,242,168,.6)}.highlight-green{background-color:rgba(133,246,150,.6)}.highlight-blue{padding-top:2px;padding-bottom:2px}.theme-white .highlight-blue{background-color:rgba(168,209,255,.8)}.theme-black .highlight-blue{background-color:rgba(168,209,255,.5)}.side-remark-hidden{position:absolute!important;top:-1000px;z-index:-1;display:none}.side-remark-shown{position:absolute;z-index:1000}.remark-icons{position:absolute;top:0;left:0;z-index:950}.remark-icon{position:absolute}.remark-icon-empty .icon-stack i{color:rgba(91,164,229,.6)}.remark-icon-hover .icon-stack i{color:#5BA4E5!important}.remark-icon-clicked .icon-stack i{color:#5BA4E5!important}.remark-count{position:absolute;top:-4px;left:5px;font-size:12px;font-weight:700;color:#FFF}.icon-stack{cursor:pointer}.icon-stack i{color:rgba(0,0,0,.4);font-size:22px}.remark-list{width:240px;font-size:14px;padding-bottom:20px}.remark-item{position:relative;padding:20px 0 20px 42px;border-top:1px solid}.remark-item:last-child{margin-bottom:20px;border-bottom:1px solid}.theme-white .remark-item{border-color:rgba(0,0,0,.1)}.theme-black .remark-item{border-color:rgba(0,0,0,.2)}.remark-item:hover{cursor:pointer}.remark-item .remark-head{position:absolute;left:0}.remark-reply .remark-delete-link{position:absolute;right:0;top:0;color:#CCC}.remark-reply .remark-delete-link .icon-remove{font-size:18px}.remark-reply .remark-delete-link:hover{color:#5BA4E5}.remark-item .remark-published-link{position:absolute;top:3px;right:10px;color:#CCC;font-size:13px;margin:0}.remark-item .remark-published-link:hover{color:#5BA4E5}.remark-options{position:absolute;top:0;right:0;list-style:none;color:#BBB;font-size:13px;margin:0}.remark-options li{padding:3px 10px 3px 3px;border-width:0 1px 1px;border-style:solid}.theme-white .remark-options li{border-color:rgba(0,0,0,.1)}.theme-black .remark-options li{border-color:rgba(0,0,0,.2)}.remark-options li:hover{color:#FFF;background-color:#08c;cursor:pointer}.remark-options li span{margin-left:5px}.remark-editor{margin-top:3px;word-wrap:break-word}.remark-editor p{margin:0}.remark-editor #default-span{color:#AAA;cursor:pointer}.remark-editor:focus{outline-width:0}.remark-reply,.new-reply{margin-top:14px;margin-bottom:6px;position:relative;padding-left:34px}.new-remark{position:relative;padding-left:42px}.new-remark .remark-head{position:absolute;left:0}.leave-reply{color:#08c;font-size:13px}.leave-remark{color:#BBB;font-size:14px}.leave-remark:hover,.leave-reply:hover{color:#5BA4E5;text-decoration:none;cursor:pointer}.leave-remark span{margin-right:15px}.remark-footer{margin-top:3px}.remark-footer button,.remark-reply-view-more{border:0;padding:0 6px 0 0;font-size:13px}.remark-footer button:hover,.remark-reply-view-more:hover{color:#5BA4E5;text-decoration:none}.remark-edit,.remark-cancel,.remark-delete{color:#AAA}.remark-notice{color:#AAA;font-size:12px}.remark-notice:before{content:'';display:block;margin:16px 0 10px;width:40px;height:1px;background:#CCC}.inline-error{color:#CD5C5C;font-size:12px}.unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tooltip-inner{max-width:250px;width:250px}.remark-reply .tooltip-inner{max-width:100px;width:100px}.medium-toolbar-arrow-under:after{top:36px;border-color:#333 transparent transparent}.medium-toolbar-arrow-over:before{top:-8px;border-color:transparent transparent #333}.medium-editor-toolbar{border:1px solid #000;background-color:#333;background:-webkit-linear-gradient(bottom,#333,rgba(36,36,36,.75));border-radius:3px;box-shadow:1px 2px 3px -2px #000;transition:top .075s ease-out,left .075s ease-out}.medium-editor-toolbar li button{min-width:36px;height:36px;padding:0 15px;border:0;border-right:1px solid #000;border-left:1px solid #333;border-left:1px solid rgba(255,255,255,.1);background-color:#333;color:#fff;background:linear-gradient(bottom,#333,rgba(36,36,36,.89));box-shadow:0 2px 2px rgba(0,0,0,.3);transition:background-color .2s ease-in}.medium-editor-toolbar li button:hover{background-color:#000}.medium-editor-toolbar li .medium-editor-button-first{border-top-left-radius:5px;border-bottom-left-radius:5px}.medium-editor-toolbar li .medium-editor-button-last{border-top-right-radius:5px;border-bottom-right-radius:5px}
#wmd-preview h1  {
    color: #0077bb; /* 将标题改为蓝色 */
}</style>
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="p7hw" id="xxtouch-ios-开发手册">XXTouch iOS 开发手册</h1><p data-anchor-id="1656"><code>XXTouch</code></p><hr><p style="color:red;font-weight:bold;" data-anchor-id="n1f6">Windows 平台按 Ctrl + F 可以输入文字搜索</p><p style="color:red;font-weight:bold;" data-anchor-id="sn18">Mac 平台按 command + F 可以输入文字搜索</p><hr><div class="md-section-divider"></div><h2 data-anchor-id="nvzl" id="关于-xxtouch">关于 XXTouch</h2><p data-anchor-id="sv3d">XXTouch 使用 <a href="http://www.lua.org/" target="_blank">Lua</a> 作为脚本语言，支持 <a href="http://www.lua.org/manual/5.3/" target="_blank">Lua 5.3</a> 版的所有语法与基本函数，并于其基础之上添加了一些扩展功能， 用于取色、找色、发送触摸、键盘事件等高级功能的实现。XXTouch 仅支持 UTF-8 编码的脚本。</p><hr><div class="md-section-divider"></div><h2 data-anchor-id="dpia" id="如何阅读本手册">如何阅读本手册</h2><ul data-anchor-id="qu5o">
<li>入门需要拥有 Lua 基础，可以参考<a href="http://cloudwu.github.io/lua53doc/manual.html" target="_blank">《Lua 5.3 中文手册》</a>及<a href="https://www.zybuluo.com/havonz/note/564563" target="_blank">《Lua 5.3 函数参考》</a> </li>
<li>示例代码中使用 0x 开头的数字为 16 进制数 ( <a href="https://baike.baidu.com/item/%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E6%95%B0/5697828" target="_blank">什么是 16 进制数?</a> )</li>
<li>参数描述中可选参数使用中括号包围</li>
<li>参数或返回值如果是表型固定结构值，则使用大括号表示表型结构</li>
<li>类型描述中 文本型 和 字符串型 都是 Lua 的 string 类型，但 文本型 一般是指可以打印的明文文字</li>
<li>章或节用叹号 ( ! ) 开头的说明这个函数或者这个模块的函数包含隐式 <strong>让出</strong>（在这个函数返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会）</li>
<li>若无额外说明，手册内示例代码均不处理边界情况，不应该直接复制到自己的脚本中用</li>
</ul><hr><p data-anchor-id="tt62"><div class="toc">
<ul>
<li><a href="#xxtouch-ios-开发手册">XXTouch iOS 开发手册</a><ul>
<li><a href="#关于-xxtouch">关于 XXTouch</a></li>
<li><a href="#如何阅读本手册">如何阅读本手册</a></li>
<li><a href="#如何使用-xxtouch">如何使用 XXTouch</a><ul>
<li><a href="#售前及安装答疑">售前及安装答疑</a></li>
<li><a href="#用户使用图文说明">用户使用图文说明</a></li>
<li><a href="#普通用户交流-qq-群-483853614">普通用户交流 QQ 群 （483853614）</a></li>
<li><a href="#开发相关及交流-qq-群-40898074">开发相关及交流 QQ 群 （40898074）</a></li>
<li><a href="#脚本及相关资源存在设备的哪个位置">脚本及相关资源存在设备的哪个位置？</a></li>
</ul>
</li>
<li><a href="#保护脚本正确接受-require">保护脚本，正确接受 require</a></li>
<li><a href="#基本控制函数">基本控制函数</a><ul>
<li><a href="#结束脚本-osexit">结束脚本 (os.exit)</a></li>
<li><a href="#重启脚本-osrestart">重启脚本 (os.restart)</a></li>
<li><a href="#脚本被终止时执行一些代码的方法">脚本被终止时执行一些代码的方法</a></li>
</ul>
</li>
<li><a href="#开发辅助函数">开发辅助函数</a><ul>
<li><a href="#打印内容到缓冲区-print">打印内容到缓冲区 (print)</a></li>
<li><a href="#将打印缓冲区的内容提出来-printout">将打印缓冲区的内容提出来 (print.out)</a></li>
<li><a href="#网络日志-nlog">网络日志 (nLog)</a></li>
</ul>
</li>
<li><a href="#屏幕模块screen">屏幕模块（screen）</a><ul>
<li><a href="#初始化旋转坐标系-screeninit">初始化旋转坐标系 (screen.init)</a></li>
<li><a href="#坐标旋转转换-screenrotatexy">坐标旋转转换 (screen.rotate_xy)</a></li>
<li><a href="#获取屏幕尺寸-screensize">获取屏幕尺寸 (screen.size)</a></li>
<li><a href="#保持屏幕-screenkeep">保持屏幕 (screen.keep)</a></li>
<li><a href="#取消保持屏幕-screenunkeep">取消保持屏幕 (screen.unkeep)</a></li>
<li><a href="#获取屏幕上某点颜色-screengetcolor">获取屏幕上某点颜色 (screen.get_color)</a></li>
<li><a href="#获取屏幕上某点颜色-rgb-screengetcolorrgb">获取屏幕上某点颜色 RGB (screen.get_color_rgb)</a></li>
<li><a href="#屏幕多点颜色匹配-screeniscolors">屏幕多点颜色匹配 (screen.is_colors)</a></li>
<li><a href="#多点相似度模式找色-screenfindcolor">多点相似度模式找色 (screen.find_color)</a></li>
<li><a href="#多点色偏模式找色-screenfindcolor">多点色偏模式找色 (screen.find_color)</a></li>
<li><a href="#获取屏幕图像-screenimage">获取屏幕图像 (screen.image)</a></li>
<li><a href="#屏幕区域文字识别-screenocrtext">屏幕区域文字识别 (screen.ocr_text)</a></li>
<li><a href="#屏幕找图-screenfindimage">屏幕找图 (screen.find_image)</a></li>
</ul>
</li>
<li><a href="#模拟触摸模块touch">模拟触摸模块（touch）</a><ul>
<li><a href="#模拟手指轻触一次屏幕-touchtap">! 模拟手指轻触一次屏幕 (touch.tap)</a></li>
<li><a href="#模拟手指接触屏幕-touchon">模拟手指接触屏幕 (touch.on)</a></li>
<li><a href="#模拟手指在屏幕上移动-move">! 模拟手指在屏幕上移动 (:move)</a></li>
<li><a href="#模拟手指在屏幕上施加压力-press">! 模拟手指在屏幕上施加压力 (:press)</a></li>
<li><a href="#模拟手指离开屏幕-off">模拟手指离开屏幕 (:off)</a></li>
<li><a href="#设置触摸事件对象移动步长-steplen">设置触摸事件对象移动步长 (:step_len)</a></li>
<li><a href="#设置触摸事件对象移动每步延迟-stepdelay">设置触摸事件对象移动每步延迟 (:step_delay)</a></li>
<li><a href="#毫秒级延迟-msleep">! 毫秒级延迟 (:msleep)</a></li>
<li><a href="#设置触摸圆点显示-touchshowpose">设置触摸圆点显示 (touch.show_pose)</a></li>
<li><a href="#touch-示例代码">touch 示例代码</a></li>
<li><a href="#精确滑动的实现示例">精确滑动的实现示例</a></li>
</ul>
</li>
<li><a href="#模拟按键模块key">模拟按键模块（key）</a><ul>
<li><a href="#模拟按一下物理按键-keypress">模拟按一下物理按键 (key.press)</a></li>
<li><a href="#模拟按下物理按键-keydown">模拟按下物理按键 (key.down)</a></li>
<li><a href="#松开按下的物理按键-keyup">松开按下的物理按键 (key.up)</a></li>
<li><a href="#模拟键入文本-keysendtext">模拟键入文本 (key.send_text)</a></li>
<li><a href="#示例及支持的键码列表">示例及支持的键码列表</a></li>
</ul>
</li>
<li><a href="#模拟重力加速计模块accelerometer">模拟重力加速计模块（accelerometer）</a><ul>
<li><a href="#模拟加速计数据-accelerometersimulate">模拟加速计数据 (accelerometer.simulate)</a></li>
<li><a href="#模拟摇一摇-accelerometershake">模拟摇一摇 (accelerometer.shake)</a></li>
<li><a href="#改变当前重力方向为-home-在左-accelerometerrotatehomeonleft">改变当前重力方向为 home 在左 (accelerometer.rotate_home_on_left)</a></li>
<li><a href="#改变当前重力方向为-home-在右-accelerometerrotatehomeonright">改变当前重力方向为 home 在右 (accelerometer.rotate_home_on_right)</a></li>
<li><a href="#改变当前重力方向为-home-在上-accelerometerrotatehomeontop">改变当前重力方向为 home 在上 (accelerometer.rotate_home_on_top)</a></li>
<li><a href="#改变当前重力方向为-home-在下-accelerometerrotatehomeonbottom">改变当前重力方向为 home 在下 (accelerometer.rotate_home_on_bottom)</a></li>
</ul>
</li>
<li><a href="#系统模块sys">系统模块（sys）</a><ul>
<li><a href="#显示提示文字-systoast">显示提示文字 (sys.toast)</a></li>
<li><a href="#弹出系统提示-sysalert">弹出系统提示 (sys.alert)</a></li>
<li><a href="#弹出输入提示-sysinputbox">弹出输入提示 (sys.input_box)</a></li>
<li><a href="#输入文字-sysinputtext">输入文字 (sys.input_text)</a></li>
<li><a href="#毫秒级延迟-sysmsleep">! 毫秒级延迟 (sys.msleep)</a></li>
<li><a href="#获取当前毫秒级时间戳-sysmtime">获取当前毫秒级时间戳 (sys.mtime)</a></li>
<li><a href="#获取网络时间-sysnettime">! 获取网络时间 (sys.net_time)</a></li>
<li><a href="#产生一个随机数-sysrnd">产生一个随机数 (sys.rnd)</a></li>
<li><a href="#获取设备当前内存状态信息-sysmemoryinfo">获取设备当前内存状态信息 (sys.memory_info)</a></li>
<li><a href="#获取设备当前可用内存值-sysavailablememory">获取设备当前可用内存值 (sys.available_memory)</a></li>
<li><a href="#获取设备当前未使用的存储空间值-sysfreediskspace">获取设备当前未使用的存储空间值 (sys.free_disk_space)</a></li>
<li><a href="#输出标准系统日志-syslog">输出标准系统日志 (sys.log)</a></li>
<li><a href="#问系统一个问题-sysmgcopyanswer">问系统一个问题 (sys.mgcopyanswer)</a></li>
<li><a href="#获取系统版本-sysversion">获取系统版本 (sys.version)</a></li>
<li><a href="#获取-xxtouch-版本-sysxtversion">获取 XXTouch 版本 (sys.xtversion)</a></li>
</ul>
</li>
<li><a href="#剪贴板模块pasteboard">剪贴板模块（pasteboard）</a><ul>
<li><a href="#写内容进剪贴板-pasteboardwrite">写内容进剪贴板 (pasteboard.write)</a></li>
<li><a href="#获取剪贴板中的数据-pasteboardread">获取剪贴板中的数据 (pasteboard.read)</a></li>
</ul>
</li>
<li><a href="#对话框模块dialog">对话框模块（dialog）</a><ul>
<li><a href="#建立一个对话框对象-dialog">! 建立一个对话框对象 (dialog)</a></li>
<li><a href="#配置对话框配置保存文件名-config">配置对话框配置保存文件名 (:config)</a></li>
<li><a href="#配置对话框配置保存文件名-setconfig">配置对话框配置保存文件名 (:set_config)</a></li>
<li><a href="#配置对话框自动消失时间-timeout">配置对话框自动消失时间 (:timeout)</a></li>
<li><a href="#配置对话框自动消失时间-settimeout">配置对话框自动消失时间 (:set_timeout)</a></li>
<li><a href="#配置对话框的标题-title">配置对话框的标题 (:title)</a></li>
<li><a href="#配置对话框的标题-settitle">配置对话框的标题 (:set_title)</a></li>
<li><a href="#配置对话框的尺寸-setsize">配置对话框的尺寸 (:set_size)</a></li>
<li><a href="#配置对话框的位置及尺寸-setframe">配置对话框的位置及尺寸 (:set_frame)</a></li>
<li><a href="#配置对话框的圆角半径-setcornerradius">配置对话框的圆角半径 (:set_corner_radius)</a></li>
<li><a href="#给对话框加上一个文本标签-addlabel">给对话框加上一个文本标签 (:add_label)</a></li>
<li><a href="#给对话框加上一个文本输入框-addinput">给对话框加上一个文本输入框 (:add_input)</a></li>
<li><a href="#给对话框加上一个图片-addimage">给对话框加上一个图片 (:add_image)</a></li>
<li><a href="#给对话框加上一个开关-addswitch">给对话框加上一个开关 (:add_switch)</a></li>
<li><a href="#给对话框加上一个选择器-addpicker">给对话框加上一个选择器 (:add_picker)</a></li>
<li><a href="#给对话框加上一个单选组-addradio">给对话框加上一个单选组 (:add_radio)</a></li>
<li><a href="#给对话框加上一个多选组-addcheckbox">给对话框加上一个多选组 (:add_checkbox)</a></li>
<li><a href="#给对话框加上一个数值选择器-addrange">给对话框加上一个数值选择器 (:add_range)</a></li>
<li><a href="#将对话框弹出来并返回用户的选择-show">! 将对话框弹出来并返回用户的选择 (:show)</a></li>
<li><a href="#在不弹出对话框的情况下获得对话框配置-load">! 在不弹出对话框的情况下获得对话框配置 (:load)</a></li>
</ul>
</li>
<li><a href="#清理模块clear">清理模块（clear）</a><ul>
<li><a href="#清理某个或某组钥匙串信息-clearkeychain">清理某个或某组钥匙串信息 (clear.keychain)</a></li>
<li><a href="#清理所有应用程序钥匙串信息-clearallkeychain">清理所有应用程序钥匙串信息 (clear.all_keychain)</a></li>
<li><a href="#清理剪贴板-clearpasteboard">清理剪贴板 (clear.pasteboard)</a></li>
<li><a href="#清理浏览器cookies-clearcookies">清理浏览器Cookies (clear.cookies)</a></li>
<li><a href="#清理系统缓存-clearcaches">清理系统缓存 (clear.caches)</a></li>
<li><a href="#清除相册中所有本地照片-clearallphotos">清除相册中所有本地照片 (clear.all_photos)</a></li>
<li><a href="#清理某个应用的存档数据-clearappdata">清理某个应用的存档数据 (clear.app_data)</a></li>
<li><a href="#清理-idfav-clearidfav">清理 IDFA/V (clear.idfav)</a></li>
</ul>
</li>
<li><a href="#应用程序模块app">应用程序模块（app）</a><ul>
<li><a href="#获取-app-的应用程序包路径-appbundlepath">获取 App 的应用程序包路径 (app.bundle_path)</a></li>
<li><a href="#获取-app-的应用存档路径-appdatapath">获取 App 的应用存档路径 (app.data_path)</a></li>
<li><a href="#获取-app-的应用分组信息-appgroupinfo">获取 App 的应用分组信息 (app.group_info)</a></li>
<li><a href="#弹出一个应用通知-apppopbanner">弹出一个应用通知 (app.pop_banner)</a></li>
<li><a href="#运行应用程序-apprun">运行应用程序 (app.run)</a></li>
<li><a href="#关闭应用程序-appclose">关闭应用程序 (app.close)</a></li>
<li><a href="#模拟使用上划退出应用程序-appquit">模拟使用上划退出应用程序 (app.quit)</a></li>
<li><a href="#检测应用程序是否正在运行-appisrunning">检测应用程序是否正在运行 (app.is_running)</a></li>
<li><a href="#输入文字-appinputtext">输入文字 (app.input_text)</a></li>
<li><a href="#通过应用程序-bid-获取应用的本地化名字-applocalizedname">通过应用程序 bid 获取应用的本地化名字 (app.localized_name)</a></li>
<li><a href="#通过应用程序-bid-获取应用的图标数据-apppngdataforbid">通过应用程序 bid 获取应用的图标数据 (app.png_data_for_bid)</a></li>
<li><a href="#通过应用程序-bid-获取其-pid-apppidforbid">通过应用程序 bid 获取其 pid (app.pid_for_bid)</a></li>
<li><a href="#获取应用程序当前内存消耗-appusedmemory">获取应用程序当前内存消耗 (app.used_memory)</a></li>
<li><a href="#获取前台应用的-bundle-identifier-appfrontbid">获取前台应用的 Bundle Identifier (app.front_bid)</a></li>
<li><a href="#获取前台应用的-process-identifier-appfrontpid">获取前台应用的 Process Identifier (app.front_pid)</a></li>
<li><a href="#前台打开一个-url-appopenurl">前台打开一个 URL (app.open_url)</a></li>
<li><a href="#获取设备所有的应用的-bundle-identifier-列表-appbundles">获取设备所有的应用的 Bundle Identifier 列表 (app.bundles)</a></li>
<li><a href="#获取当前设备的进程列表-appallprocs">获取当前设备的进程列表 (app.all_procs)</a></li>
<li><a href="#设置前台应用程序加速齿轮-appsetspeedadd">设置前台应用程序加速齿轮 (app.set_speed_add)</a></li>
<li><a href="#安装ipa安装包-appinstall">安装IPA安装包 (app.install)</a></li>
<li><a href="#卸载一个应用-appuninstall">卸载一个应用 (app.uninstall)</a></li>
<li><a href="#app-模块-额外说明">app 模块 额外说明</a></li>
</ul>
</li>
<li><a href="#设备相关模块device">设备相关模块（device）</a><ul>
<li><a href="#重置自动锁屏倒计时-deviceresetidle">重置自动锁屏倒计时 (device.reset_idle)</a></li>
<li><a href="#锁定屏幕-devicelockscreen">锁定屏幕 (device.lock_screen)</a></li>
<li><a href="#解锁屏幕-deviceunlockscreen">解锁屏幕 (device.unlock_screen)</a></li>
<li><a href="#获取屏幕锁定状态-deviceisscreenlocked">获取屏幕锁定状态 (device.is_screen_locked)</a></li>
<li><a href="#获取前台应用的画面方向-devicefrontorien">获取前台应用的画面方向 (device.front_orien)</a></li>
<li><a href="#锁定设备屏幕旋转-devicelockorien">锁定设备屏幕旋转 (device.lock_orien)</a></li>
<li><a href="#解锁设备屏幕旋转锁-deviceunlockorien">解锁设备屏幕旋转锁 (device.unlock_orien)</a></li>
<li><a href="#获取屏幕旋转锁锁定状态-deviceisorienlocked">获取屏幕旋转锁锁定状态 (device.is_orien_locked)</a></li>
<li><a href="#振动设备-devicevibrator">振动设备 (device.vibrator)</a></li>
<li><a href="#后台播放声音-deviceplaysound">后台播放声音 (device.play_sound)</a></li>
<li><a href="#获取设备类型-devicetype">获取设备类型 (device.type)</a></li>
<li><a href="#获取设备名-devicename">获取设备名 (device.name)</a></li>
<li><a href="#设置设备名-devicesetname">设置设备名 (device.set_name)</a></li>
<li><a href="#获取设备udid-deviceudid">获取设备UDID (device.udid)</a></li>
<li><a href="#获取设备的序列号-deviceserialnumber">获取设备的序列号 (device.serial_number)</a></li>
<li><a href="#获取设备的-wifi-mac-地址-devicewifimac">获取设备的 WiFi MAC 地址 (device.wifi_mac)</a></li>
<li><a href="#获取设备所有的接口-ip-deviceifaddrs">获取设备所有的接口 IP (device.ifaddrs)</a></li>
<li><a href="#获取当前设备电池剩余电量-devicebatterylevel">获取当前设备电池剩余电量 (device.battery_level)</a></li>
<li><a href="#获取当前设备充电状态-devicebatterystate">获取当前设备充电状态 (device.battery_state)</a></li>
<li><a href="#打开设备-wifi-deviceturnonwifi">打开设备 WiFi (device.turn_on_wifi)</a></li>
<li><a href="#关闭设备-wifi-deviceturnoffwifi">关闭设备 WiFi (device.turn_off_wifi)</a></li>
<li><a href="#打开设备蜂窝数据-deviceturnondata">打开设备蜂窝数据 (device.turn_on_data)</a></li>
<li><a href="#关闭设备蜂窝数据-deviceturnoffdata">关闭设备蜂窝数据 (device.turn_off_data)</a></li>
<li><a href="#打开设备蓝牙-deviceturnonbluetooth">打开设备蓝牙 (device.turn_on_bluetooth)</a></li>
<li><a href="#关闭设备蓝牙-deviceturnoffbluetooth">关闭设备蓝牙 (device.turn_off_bluetooth)</a></li>
<li><a href="#打开设备飞行模式-deviceturnonairplane">打开设备飞行模式 (device.turn_on_airplane)</a></li>
<li><a href="#关闭设备飞行模式-deviceturnoffairplane">关闭设备飞行模式 (device.turn_off_airplane)</a></li>
<li><a href="#连接到当前设置所选-vpn-deviceturnonvpn">连接到当前设置所选 VPN (device.turn_on_vpn)</a></li>
<li><a href="#断开已有的-vpn-连接-deviceturnoffvpn">断开已有的 VPN 连接 (device.turn_off_vpn)</a></li>
<li><a href="#判断当前是否打开了-vpn-开关-deviceisvpnon">判断当前是否打开了 VPN 开关 (device.is_vpn_on)</a></li>
<li><a href="#打开设备闪光灯-deviceflashon">打开设备闪光灯 (device.flash_on)</a></li>
<li><a href="#关闭设备闪光灯-deviceflashoff">关闭设备闪光灯 (device.flash_off)</a></li>
<li><a href="#打开减少动态效果开关-devicereducemotionon">打开“减少动态效果”开关 (device.reduce_motion_on)</a></li>
<li><a href="#关闭减少动态效果开关-devicereducemotionoff">关闭“减少动态效果”开关 (device.reduce_motion_off)</a></li>
<li><a href="#打开-assistivetouch-deviceassistivetouchon">打开 AssistiveTouch (device.assistive_touch_on)</a></li>
<li><a href="#关闭-assistivetouch-deviceassistivetouchoff">关闭 AssistiveTouch (device.assistive_touch_off)</a></li>
<li><a href="#获取背光亮度值-devicebrightness">获取背光亮度值 (device.brightness)</a></li>
<li><a href="#设置背光亮度-devicesetbrightness">设置背光亮度 (device.set_brightness)</a></li>
<li><a href="#设置自动锁屏分钟数-devicesetautolocktime">设置自动锁屏分钟数 (device.set_autolock_time)</a></li>
<li><a href="#设置设备音量-devicesetvolume">设置设备音量 (device.set_volume)</a></li>
<li><a href="#加入到一个无线局域网-devicejoinwifi">加入到一个无线局域网 (device.join_wifi)</a></li>
</ul>
</li>
<li><a href="#图片对象模块image">图片对象模块（image）</a><ul>
<li><a href="#判断一个值是否是图片对象-imageis">判断一个值是否是图片对象 (image.is)</a></li>
<li><a href="#创建指定尺寸空白图片对象-imagenew">创建指定尺寸空白图片对象 (image.new)</a></li>
<li><a href="#图像合并-imageopermerge">图像合并 (image.oper_merge)</a></li>
<li><a href="#新建一个文本图片对象-imagenewtextimage">新建一个文本图片对象 (image.new_text_image)</a></li>
<li><a href="#从文件创建图片对象-imageloadfile">从文件创建图片对象 (image.load_file)</a></li>
<li><a href="#从数据创建图片对象-imageloaddata">从数据创建图片对象 (image.load_data)</a></li>
<li><a href="#从图片对象创建拷贝图片对象-copy">从图片对象创建拷贝图片对象 (:copy)</a></li>
<li><a href="#从图片对象截取部分新建拷贝图片对象-crop">从图片对象截取部分新建拷贝图片对象 (:crop)</a></li>
<li><a href="#保存图片对象到相册-savetoalbum">保存图片对象到相册 (:save_to_album)</a></li>
<li><a href="#输出图片对象到一个-png-格式的文件-savetopngfile">输出图片对象到一个 PNG 格式的文件 (:save_to_png_file)</a></li>
<li><a href="#输出图片对象到一个-jpeg-格式的文件-savetojpegfile">输出图片对象到一个 JPEG 格式的文件 (:save_to_jpeg_file)</a></li>
<li><a href="#获取图片对象的-png-格式数据-pngdata">获取图片对象的 PNG 格式数据 (:png_data)</a></li>
<li><a href="#获取图片对象的-jpeg-格式数据-jpegdata">获取图片对象的 JPEG 格式数据 (:jpeg_data)</a></li>
<li><a href="#90度左旋图片对象-turnleft">90度左旋图片对象 (:turn_left)</a></li>
<li><a href="#90度右旋图片对象-turnright">90度右旋图片对象 (:turn_right)</a></li>
<li><a href="#180度旋转图片对象-turnupondown">180度旋转图片对象 (:turn_upondown)</a></li>
<li><a href="#获取图片对象的尺寸-size">获取图片对象的尺寸 (:size)</a></li>
<li><a href="#获取图片对象某点颜色-getcolor">获取图片对象某点颜色 (:get_color)</a></li>
<li><a href="#设置图片对象某点颜色-setcolor">设置图片对象某点颜色 (:set_color)</a></li>
<li><a href="#颜色替换-replacecolor">颜色替换 (:replace_color)</a></li>
<li><a href="#图中贴图-drawimage">图中贴图 (:draw_image)</a></li>
<li><a href="#二值化处理图片对象-binaryzation">二值化处理图片对象 (:binaryzation)</a></li>
<li><a href="#在图上找色-findcolor">在图上找色 (:find_color)</a></li>
<li><a href="#图片多点颜色匹配-iscolors">图片多点颜色匹配 (:is_colors)</a></li>
<li><a href="#解码一个二维码图片-qrdecode">解码一个二维码图片 (:qr_decode)</a></li>
<li><a href="#销毁一个图片对象-destroy">销毁一个图片对象 (:destroy)</a></li>
<li><a href="#cv-图中找图-cvfindimage">cv - 图中找图 (:cv_find_image)</a></li>
<li><a href="#cv-图片自动二值化-cvbinaryzation">cv - 图片自动二值化 (:cv_binaryzation)</a></li>
<li><a href="#cv-从图片创建一个拉伸的另外尺寸的图片-cvresize">cv - 从图片创建一个拉伸的另外尺寸的图片 (:cv_resize)</a></li>
<li><a href="#tesseract-对图片进行-ocr-识别-tessocr">tesseract - 对图片进行 ocr 识别 (:tess_ocr)</a></li>
</ul>
</li>
<li><a href="#进程字典">进程字典</a><ul>
<li><a href="#存储值到进程字典-procput">存储值到进程字典 (proc_put)</a></li>
<li><a href="#查看进程字典存储的值-procget">查看进程字典存储的值 (proc_get)</a></li>
<li><a href="#向进程队列词典中压入一个值-procqueuepush">向进程队列词典中压入一个值 (proc_queue_push)</a></li>
<li><a href="#从进程队列词典中弹出一个值-procqueuepop">从进程队列词典中弹出一个值 (proc_queue_pop)</a></li>
<li><a href="#从进程队列词典中弹出所有值-procqueueclear">从进程队列词典中弹出所有值 (proc_queue_clear)</a></li>
<li><a href="#获取进程队列词典的尺寸-procqueuesize">获取进程队列词典的尺寸 (proc_queue_size)</a></li>
<li><a href="#向进程队列词典头部压入一个值-procqueuepushfront">向进程队列词典头部压入一个值 (proc_queue_push_front)</a></li>
<li><a href="#向进程队列词典尾部压入一个值-procqueuepushback">向进程队列词典尾部压入一个值 (proc_queue_push_back)</a></li>
<li><a href="#从进程队列词典头部弹出一个值-procqueuepopfront">从进程队列词典头部弹出一个值 (proc_queue_pop_front)</a></li>
<li><a href="#从进程队列词典尾部弹出一个值-procqueuepopback">从进程队列词典尾部弹出一个值 (proc_queue_pop_back)</a></li>
</ul>
</li>
<li><a href="#线程模块thread">线程模块（thread）</a><ul>
<li><a href="#派发一个任务-threaddispatch">派发一个任务 (thread.dispatch)</a></li>
<li><a href="#获取当前任务的-id-threadcurrentid">获取当前任务的 ID (thread.current_id)</a></li>
<li><a href="#从队列中移除一项任务-threadkill">从队列中移除一项任务 (thread.kill)</a></li>
<li><a href="#阻塞等待一个任务完成-threadwait">阻塞等待一个任务完成 (thread.wait)</a></li>
<li><a href="#注册监听一个事件-threadregisterevent">注册监听一个事件 (thread.register_event)</a></li>
<li><a href="#反注册监听一个事件-threadunregisterevent">反注册监听一个事件 (thread.unregister_event)</a></li>
<li><a href="#thread-示例代码">thread 示例代码</a></li>
</ul>
</li>
<li><a href="#web-视图模块webview">Web 视图模块（webview）</a><ul>
<li><a href="#展现一个-webview-webviewshow">展现一个 webview (webview.show)</a></li>
<li><a href="#隐藏一个-webview-webviewhide">隐藏一个 webview (webview.hide)</a></li>
<li><a href="#在一个-webview-上执行一段-js-webvieweval">在一个 webview 上执行一段 JS (webview.eval)</a></li>
<li><a href="#获取一个-webview-的区域及层级信息-webviewframe">获取一个 webview 的区域及层级信息 (webview.frame)</a></li>
<li><a href="#销毁一个-webview-webviewdestroy">销毁一个 webview (webview.destroy)</a></li>
<li><a href="#webview-使用示例">webview 使用示例</a></li>
</ul>
</li>
<li><a href="#脚本包模块xpp">脚本包模块（xpp）</a><ul>
<li><a href="#获取当前脚本包的元信息-xppinfo">获取当前脚本包的元信息 (xpp.info)</a></li>
<li><a href="#获取当前脚本包的包路径-xppbundlepath">获取当前脚本包的包路径 (xpp.bundle_path)</a></li>
<li><a href="#获取当前脚本包中的资源路径-xppresourcepath">获取当前脚本包中的资源路径 (xpp.resource_path)</a></li>
</ul>
</li>
<li><a href="#脚本配置界面模块xui">脚本配置界面模块（xui）</a><ul>
<li><a href="#展示一个配置界面-xuishow">展示一个配置界面 (xui.show)</a></li>
<li><a href="#收起正在展示的配置界面-xuidismiss">收起正在展示的配置界面 (xui.dismiss)</a></li>
<li><a href="#校验配置界面的配置-xuisetup">校验配置界面的配置 (xui.setup)</a></li>
<li><a href="#重新加载当前正在展示的配置界面-xuireload">重新加载当前正在展示的配置界面 (xui.reload)</a></li>
<li><a href="#获取配置界面的配置值-xuiget">获取配置界面的配置值 (xui.get)</a></li>
<li><a href="#设置配置界面上的某个控件的值-xuiset">设置配置界面上的某个控件的值 (xui.set)</a></li>
<li><a href="#读取某个配置分区所有配置-xuiread">读取某个配置分区所有配置 (xui.read)</a></li>
<li><a href="#覆盖写入配置表到某个配置分区-xuiwrite">覆盖写入配置表到某个配置分区 (xui.write)</a></li>
<li><a href="#清除某个配置分区所有的配置-xuiclear">清除某个配置分区所有的配置 (xui.clear)</a></li>
</ul>
</li>
<li><a href="#扩展-table-模块">扩展 table 模块</a><ul>
<li><a href="#深拷贝一个表-tabledeepcopy">深拷贝一个表 (table.deep_copy)</a></li>
<li><a href="#深打印一个表-tabledeepprint">深打印一个表 (table.deep_print)</a></li>
<li><a href="#从字符串加载一个表-tableloadstring">从字符串加载一个表 (table.load_string)</a></li>
</ul>
</li>
<li><a href="#扩展-string-模块">扩展 string 模块</a><ul>
<li><a href="#转成-16-进制文本-stringtohex">转成 16 进制文本 (string.to_hex)</a></li>
<li><a href="#从-16-进制文本转回-stringfromhex">从 16 进制文本转回 (string.from_hex)</a></li>
<li><a href="#将-gbk-编码的文本转成-utf-8-编码的文本-stringfromgbk">将 GBK 编码的文本转成 UTF-8 编码的文本 (string.from_gbk)</a></li>
<li><a href="#计算字符串的-md5-哈希值-stringmd5">计算字符串的 md5 哈希值 (string.md5)</a></li>
<li><a href="#计算字符串的-sha1-哈希值-stringsha1">计算字符串的 sha1 哈希值 (string.sha1)</a></li>
<li><a href="#对字符串进行-base64-编码-stringbase64encode">对字符串进行 base64 编码 (string.base64_encode)</a></li>
<li><a href="#对-base64-编码的文本进行解码-stringbase64decode">对 base64 编码的文本进行解码 (string.base64_decode)</a></li>
<li><a href="#对字符串进行加密-stringaes128encrypt">对字符串进行加密 (string.aes128_encrypt)</a></li>
<li><a href="#解密一段已加密的字符串-stringaes128decrypt">解密一段已加密的字符串 (string.aes128_decrypt)</a></li>
<li><a href="#用分隔符规则分割一个字符串-stringsplit">用分隔符规则分割一个字符串 (string.split)</a></li>
<li><a href="#去除文本左边空白字符-stringltrim">去除文本左边空白字符 (string.ltrim)</a></li>
<li><a href="#去除文本右边空白字符-stringrtrim">去除文本右边空白字符 (string.rtrim)</a></li>
<li><a href="#去除文本左右两边空白字符-stringtrim">去除文本左右两边空白字符 (string.trim)</a></li>
<li><a href="#去除文本中所有的空白字符-stringatrim">去除文本中所有的空白字符 (string.atrim)</a></li>
<li><a href="#去除掉文本前的-utf8-bom-stringstriputf8bom">去除掉文本前的 UTF8-BOM (string.strip_utf8_bom)</a></li>
<li><a href="#生成随机字符串-stringrandom">生成随机字符串 (string.random)</a></li>
<li><a href="#比较两个版本号大小-stringcompareversion">比较两个版本号大小 (string.compare_version)</a></li>
<li><a href="#扩展-string-示例代码">扩展 string 示例代码</a></li>
</ul>
</li>
<li><a href="#http-模块http">! HTTP 模块（http）</a><ul>
<li><a href="#发起-get-请求-httpget">发起 GET 请求 (http.get)</a><ul>
<li><a href="#httpget-封装获取外网ip实例">http.get 封装获取外网IP实例</a></li>
<li><a href="#httpget-根据当前网络获取-gps-位置及城市名称实例">http.get 根据当前网络获取 GPS 位置及城市名称实例</a></li>
</ul>
</li>
<li><a href="#发起-post-请求-httppost">发起 POST 请求 (http.post)</a></li>
<li><a href="#http-文件下载-httpdownload">HTTP 文件下载 (http.download)</a></li>
<li><a href="#发起-head-请求-httphead">发起 HEAD 请求 (http.head)</a></li>
<li><a href="#发起-delete-请求-httpdelete">发起 DELETE 请求 (http.delete)</a></li>
<li><a href="#发起-put-请求-httpput">发起 PUT 请求 (http.put)</a></li>
</ul>
</li>
<li><a href="#ftp-模块ftp">! FTP 模块（ftp）</a><ul>
<li><a href="#ftp-文件下载-ftpdownload">FTP 文件下载 (ftp.download)</a></li>
<li><a href="#ftp-文件上传-ftpupload">FTP 文件上传 (ftp.upload)</a></li>
</ul>
</li>
<li><a href="#json-模块json">JSON 模块（json）</a><ul>
<li><a href="#将-lua-值转成-json-字符串-jsonencode">将 Lua 值转成 JSON 字符串 (json.encode)</a></li>
<li><a href="#将-json-字符串转换成-lua-值-jsondecode">将 JSON 字符串转换成 Lua 值 (json.decode)</a></li>
<li><a href="#json-中的-null-常量-jsonnull">JSON 中的 NULL 常量 (json.null)</a></li>
</ul>
</li>
<li><a href="#plist-文件读写模块plist">PLIST 文件读写模块（plist）</a><ul>
<li><a href="#读取-plist-文件-plistread">读取 plist 文件 (plist.read)</a></li>
<li><a href="#写入-plist-文件-plistwrite">写入 plist 文件 (plist.write)</a></li>
<li><a href="#读取属性表数据-plistload">读取属性表数据 (plist.load)</a></li>
<li><a href="#取-lua-表的属性表数据-plistdump">取 Lua 表的属性表数据 (plist.dump)</a></li>
</ul>
</li>
<li><a href="#小工具模块utils">小工具模块（utils）</a><ul>
<li><a href="#给通讯录添加一个或多个联系人-utilsaddcontacts">! 给通讯录添加一个或多个联系人 (utils.add_contacts)</a></li>
<li><a href="#删除通讯录所有联系人-utilsremoveallcontacts">! 删除通讯录所有联系人 (utils.remove_all_contacts)</a></li>
<li><a href="#打开扫码器-utilsopencodescanner">打开扫码器 (utils.open_code_scanner)</a></li>
<li><a href="#关闭扫码器-utilsclosecodescanner">关闭扫码器 (utils.close_code_scanner)</a></li>
<li><a href="#将文本编码成二维码图片-utilsqrencode">将文本编码成二维码图片 (utils.qr_encode)</a></li>
<li><a href="#获得当前脚本的启动参数-utilslaunchargs">获得当前脚本的启动参数 (utils.launch_args)</a></li>
<li><a href="#判断当前脚本是否从-app-内启动-utilsislaunchviaapp">判断当前脚本是否从 App 内启动 (utils.is_launch_via_app)</a></li>
<li><a href="#导入一个视频文件到相册-utilsvideotoalbum">! 导入一个视频文件到相册 (utils.video_to_album)</a></li>
</ul>
</li>
<li><a href="#文件操作模块file">文件操作模块（file）</a><ul>
<li><a href="#判断一个文件或目录是否存在-fileexists">判断一个文件或目录是否存在 (file.exists)</a></li>
<li><a href="#获取目录所有文件名列表-filelist">获取目录所有文件名列表 (file.list)</a></li>
<li><a href="#获得一个文件的尺寸-filesize">获得一个文件的尺寸 (file.size)</a></li>
<li><a href="#读取一个文件中的所有数据-filereads">读取一个文件中的所有数据 (file.reads)</a></li>
<li><a href="#将数据覆盖写入到文件-filewrites">将数据覆盖写入到文件 (file.writes)</a></li>
<li><a href="#将数据追加到文件末尾-fileappends">将数据追加到文件末尾 (file.appends)</a></li>
<li><a href="#统计一个文本文件的总行数-filelinecount">统计一个文本文件的总行数 (file.line_count)</a></li>
<li><a href="#获取一个文本文件指定行的数据-filegetline">获取一个文本文件指定行的数据 (file.get_line)</a></li>
<li><a href="#设置文本文件指定行的内容-filesetline">设置文本文件指定行的内容 (file.set_line)</a></li>
<li><a href="#在文本文件指定行前插入内容-fileinsertline">在文本文件指定行前插入内容 (file.insert_line)</a></li>
<li><a href="#移除文件中指定行-fileremoveline">移除文件中指定行 (file.remove_line)</a></li>
<li><a href="#获取一个文本文件的所有行-filegetlines">获取一个文本文件的所有行 (file.get_lines)</a></li>
<li><a href="#将一个顺序表转换逐行覆盖写入到文件中-filesetlines">将一个顺序表转换逐行覆盖写入到文件中 (file.set_lines)</a></li>
<li><a href="#将一个顺序表转换逐行插入到文件指定行前-fileinsertlines">将一个顺序表转换逐行插入到文件指定行前 (file.insert_lines)</a></li>
<li><a href="#计算一个文件的-md5-filemd5">计算一个文件的 MD5 (file.md5)</a></li>
<li><a href="#计算一个文件的-sha1-filesha1">计算一个文件的 SHA1 (file.sha1)</a></li>
</ul>
</li>
<li><a href="#vpn-配置模块vpnconf">VPN 配置模块（vpnconf）</a><ul>
<li><a href="#创建一个-vpn-配置vpnconfcreate">创建一个 VPN 配置(vpnconf.create)</a></li>
<li><a href="#获取当前系统-vpn-的列表vpnconflist">获取当前系统 VPN 的列表(vpnconf.list)</a></li>
<li><a href="#选择一个-vpn-配置vpnconfselect">选择一个 VPN 配置(vpnconf.select)</a></li>
<li><a href="#删除一个-vpn-配置vpnconfdelete">删除一个 VPN 配置(vpnconf.delete)</a></li>
<li><a href="#以当前选择的-vpn-建立连接vpnconfconnect">以当前选择的 VPN 建立连接(vpnconf.connect)</a></li>
<li><a href="#断开当前的-vpn-连接vpnconfdisconnect">断开当前的 VPN 连接(vpnconf.disconnect)</a></li>
<li><a href="#获取当前选择的-vpn-的状态vpnconfstatus">获取当前选择的 VPN 的状态(vpnconf.status)</a></li>
</ul>
</li>
<li><a href="#云打码模块cloudocr">云打码模块（cloud_ocr）</a><ul>
<li><a href="#初始化一个云打码平台cloudocrocr">初始化一个云打码平台(cloud_ocr.ocr)</a></li>
<li><a href="#识别屏幕上的范围-platocrscreen">识别屏幕上的范围 (plat.ocr_screen)</a></li>
<li><a href="#识别图片文件-platocrimage">识别图片文件 (plat.ocr_image)</a></li>
<li><a href="#识别图片对象-platocrobj">识别图片对象 (plat.ocr_obj)</a></li>
<li><a href="#提交错误的识别-platreporterror">提交错误的识别 (plat.report_error)</a></li>
<li><a href="#cloudocr-示例代码">cloud_ocr 示例代码</a></li>
</ul>
</li>
<li><a href="#系统回调消息">系统回调消息</a><ul>
<li><a href="#电话呼入呼出回调消息">电话呼入呼出回调消息</a></li>
<li><a href="#扫码结果回调消息">扫码结果回调消息</a></li>
<li><a href="#activator-事件回调消息">Activator 事件回调消息</a></li>
<li><a href="#hid-事件消息">HID 事件消息</a></li>
</ul>
</li>
<li><a href="#外部扩展">外部扩展</a><ul>
<li><a href="#地理位置伪装模块gps">地理位置伪装模块（gps）</a><ul>
<li><a href="#伪装gps位置-gpsfake">伪装GPS位置 (gps.fake)</a></li>
<li><a href="#清除gps伪装信息-gpsclear">清除GPS伪装信息 (gps.clear)</a></li>
</ul>
</li>
<li><a href="#大漠找字文字识别-模块">大漠找字/文字识别 模块</a></li>
</ul>
</li>
<li><a href="#已集成的开源扩展库">已集成的开源扩展库</a><ul>
<li><a href="#luacjson-扩展库">LuaCJSON 扩展库</a></li>
<li><a href="#luasocket-扩展库">LuaSocket 扩展库</a><ul>
<li><a href="#连接超时示例">连接超时示例</a></li>
<li><a href="#模拟-http-请求百度首页示例">模拟 HTTP 请求百度首页示例</a></li>
</ul>
</li>
<li><a href="#luaiconv-扩展库编码转换库">luaiconv 扩展库（编码转换库）</a><ul>
<li><a href="#gbk-编码转-utf-8-编码示例">GBK 编码转 UTF-8 编码示例</a></li>
<li><a href="#unicode-little-endianutf-16le-编码转-utf-8-编码示例">Unicode Little Endian（UTF-16LE） 编码转 UTF-8 编码示例</a></li>
<li><a href="#unicode-big-endianutf-16be-编码转-utf-8-编码示例">Unicode Big Endian（UTF-16BE） 编码转 UTF-8 编码示例</a></li>
</ul>
</li>
<li><a href="#lpeg-扩展库">lpeg 扩展库</a></li>
<li><a href="#luafilesystem-扩展库">LuaFileSystem 扩展库</a><ul>
<li><a href="#获取路径中所有文件名示例">获取路径中所有文件名示例</a></li>
<li><a href="#获取文件夹属性示例">获取文件（夹）属性示例</a></li>
<li><a href="#获取及切换脚本当前目录示例">获取及切换脚本当前目录示例</a></li>
</ul>
</li>
<li><a href="#luasqlite3-模块">LuaSQLite3 模块</a><ul>
<li><a href="#读取短信示例">读取短信示例</a></li>
</ul>
</li>
<li><a href="#lcurl-模块">lcurl 模块</a><ul>
<li><a href="#uriencode-和-uridecode">URIEncode 和 URIDecode</a></li>
<li><a href="#模拟触摸精灵-httpget-实现示例">模拟触摸精灵 httpGet 实现示例</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#更多的编译好的开源扩展库">更多的编译好的开源扩展库</a></li>
<li><a href="#附录">附录</a><ul>
<li><a href="#开发及周边工具下载">开发及周边工具下载</a></li>
<li><a href="#扩展库及远程扩展接口">扩展库及远程扩展接口</a></li>
<li><a href="#脚本守护模式是什么">脚本守护模式是什么？</a></li>
<li><a href="#开机启动的时机说明">开机启动的时机说明</a></li>
<li><a href="#url-scheme-的相关应用">"URL Scheme" 的相关应用</a></li>
<li><a href="#osdate-日期格式化相关">"os.date" 日期格式化相关</a></li>
<li><a href="#osexecute-相关示例代码">"os.execute" 相关示例代码</a><ul>
<li><a href="#重启设备">重启设备</a></li>
<li><a href="#注销设备">注销设备</a></li>
<li><a href="#重建图标缓存">重建图标缓存</a></li>
<li><a href="#创建脚本日志符号链接到脚本目录">创建脚本日志符号链接到脚本目录</a></li>
<li><a href="#常用操作封装">常用操作封装</a></li>
</ul>
</li>
<li><a href="#string库-的相关应用">"string库" 的相关应用</a></li>
<li><a href="#math库-的相关应用">"math库" 的相关应用</a></li>
<li><a href="#学习-lua-注意避开的坑">学习 Lua 注意避开的坑</a></li>
<li><a href="#开发常见运行期错误参考">开发常见运行期错误参考</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</p><hr><p data-anchor-id="olqa"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="bg93" id="如何使用-xxtouch">如何使用 XXTouch</h2><div class="md-section-divider"></div><h3 data-anchor-id="vf49" id="售前及安装答疑">售前及安装答疑</h3><ul data-anchor-id="xvjb">
<li><a href="https://www.xxtouch.com/docs/questions" target="_blank">前往查看</a></li>
</ul><div class="md-section-divider"></div><h3 data-anchor-id="7vio" id="用户使用图文说明">用户使用图文说明</h3><ul data-anchor-id="mc7r">
<li><a href="https://www.xxtouch.com/docs/manual" target="_blank">前往查看</a></li>
</ul><div class="md-section-divider"></div><h3 data-anchor-id="gghm" id="普通用户交流-qq-群-483853614">普通用户交流 QQ 群 （483853614）</h3><ul data-anchor-id="2a4g">
<li><a href="//shang.qq.com/wpa/qunwpa?idkey=95df3c05d706956387a255ac2979a1be21b92daccdf6caaf4aa662ac4512c636" target="_blank">与其它用户交流 483853614</a></li>
</ul><div class="md-section-divider"></div><h3 data-anchor-id="a7h2" id="开发相关及交流-qq-群-40898074">开发相关及交流 QQ 群 （40898074）</h3><ul data-anchor-id="e3i0">
<li><a href="#开发及周边工具下载">开发及周边工具下载</a></li>
<li><a href="//jq.qq.com/?_wv=1027&amp;k=40DDJzw" target="_blank">与其它开发者交流 40898074</a></li>
</ul><hr><p data-anchor-id="fp17"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h3 data-anchor-id="uusm" id="脚本及相关资源存在设备的哪个位置">脚本及相关资源存在设备的哪个位置？</h3><ul data-anchor-id="5f5x">
<li>脚本存放目录为 <code>/var/mobile/Media/1ferver/lua/scripts/</code></li>
<li>插件存放目录为 <code>/var/mobile/Media/1ferver/lib/</code></li>
<li>资源存放目录为 <code>/var/mobile/Media/1ferver/res/</code></li>
<li>日志存放目录为 <code>/var/mobile/Media/1ferver/log/</code></li>
<li>文字识别字库存放目录为 <code>/var/mobile/Media/1ferver/tessdata/</code></li>
<li>内置脚本模块存放目录为 <code>/var/mobile/Media/1ferver/lua/</code></li>
</ul><hr><p data-anchor-id="r8kb"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="5dq0" id="保护脚本正确接受-require">保护脚本，正确接受 require</h2><ul data-anchor-id="xdax">
<li><p>为何 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-require" target="_blank">require</a> 可能带来安全风险？</p>

<ul><li>XXTouch 加密的脚本模块可以被其它脚本或者模块以 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-require" target="_blank">require</a> 方式引用</li>
<li>当您的加密脚本被 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-require" target="_blank">require</a> 时，全局环境是不可信的，您的脚本调用的函数可能已经被替换</li></ul></li>
<li><p>如何正确使用 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-require" target="_blank">require</a> 呢？</p>

<ul><li><p>XXTouch 保证部分模块的函数会在 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-require" target="_blank">require</a> 之前恢复初始状态，这包括</p>

<ul><li>os、io、string、device、http、file、table 模块所有函数</li>
<li>您可以深拷贝全局环境到模块内局部环境以确保安全调用上述模块中所有函数</li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">--</span><span class="pln"> </span><span class="pun">在脚本的最前面加上这个代码</span></code></li><li class="L1"><code><span class="kwd">local</span><span class="pln"> _ENV </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">deep_copy</span><span class="pun">(</span><span class="pln">_ENV</span><span class="pun">)</span></code></li><li class="L2"><code><span class="pun">--</span><span class="pln"> </span><span class="pun">下面就是脚本的主体内容</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pun">--</span><span class="pln"> </span><span class="pun">最后您可能还需要返回一些导出函数或者常量</span></code></li></ol></pre></li></ul></li>
<li><p>并且保证当一个模块被 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-require" target="_blank">require</a> 方式引用的时候，全局变量 been_require 会无条件置为 true</p>

<ul><li><p>您可以通过这个全局变量的状态来判断自己是不是正在被 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-require" target="_blank">require</a></p></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">--</span><span class="pln"> </span><span class="pun">在脚本的最前面加上这个代码</span></code></li><li class="L1"><code><span class="kwd">if</span><span class="pln"> been_require </span><span class="kwd">then</span></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">如果被</span><span class="pln"> </span><span class="kwd">require</span><span class="pln"> </span><span class="pun">就直接退出</span></code></li><li class="L3"><code><span class="kwd">end</span></code></li><li class="L4"><code><span class="pun">--</span><span class="pln"> </span><span class="pun">下面就是脚本的主体内容</span></code></li></ol></pre></li></ul></li></ul></li>
</ul><hr><p data-anchor-id="24sw"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="9gi3" id="基本控制函数">基本控制函数</h2><ul data-anchor-id="ho6c">
<li><h3 id="结束脚本-osexit">结束脚本 (<strong>os.exit</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="kwd">exit</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-os.exit" target="_blank">os.exit</a> 是 lua 自带的结束进程的函数，在 XXTouch 是结束逻辑上的脚本进程 <br>
  在任意线程中调用都可以结束当前脚本进程，所有的线程、监听都会立即终止</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="kwd">exit</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="dxot"><br></p><ul data-anchor-id="1mpl">
<li><h3 id="重启脚本-osrestart">重启脚本 (<strong>os.restart</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败,</span><span class="pln"> </span><span class="pun">错误信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">restart</span><span class="pun">([</span><span class="pln"> </span><span class="pun">脚本文件路径</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>脚本文件路径 <strong>*1.1.2-2 新增</strong> <br>
  文本型，可选参数，当这里传入一个有效的脚本文件路径将会重启到目标脚本文件，默认为 ""</li>
  <li>操作成败 <br>
  布尔型，操作失败返回 false，只有传递了脚本文件路径的情况下才可能操作失败，操作成功则这个函数不会返回</li>
  <li>错误信息 <br>
  文本型，操作失败的情况下，会返回具体的错误信息</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>在没有 <strong>脚本文件路径</strong> 参数的情况下这个函数调用会直接重启 <strong>当前脚本</strong> 进程，当前脚本会立即结束 <br>
  传入了有效的 <strong>脚本文件路径</strong> 参数的时脚本会结束并重新启动到 <strong>目标脚本文件</strong> <br>
  操作失败的情况下，该函数会返回 false 并附带错误信息，操作失败通常是传入了非法参数</p>
</blockquote></li>
<li><p>需要注意</p>

<blockquote class="white-blockquote">
  <ul><li><strong>当前脚本</strong> 的定义是启动的那份脚本，脚本文件被更改后使用 os.restart() <strong>不会</strong> 启动更改之后的脚本文件</li>
  <li>如果可能，请 <strong>不要</strong> 在多线程环境使用该函数</li>
  <li>无延迟重启会导致的其它逻辑问题也需要作者规避</li>
  <li>当前函数暂 <strong>不支持</strong> 重启、启动 xpp <strong>脚本包</strong> 脚本</li></ul>
</blockquote></li>
<li><p>示例 1</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="pln">restart</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">重启到</span><span class="pln"> </span><span class="pun">“当前脚本”（不是</span><span class="pln"> </span><span class="pun">“当前脚本文件”）</span></code></li></ol></pre></li>
<li><p>示例 2</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="pln">restart</span><span class="pun">(</span><span class="pln">utils</span><span class="pun">.</span><span class="pln">launch_args</span><span class="pun">().</span><span class="pln">path</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">重启到</span><span class="pln"> </span><span class="pun">“当前脚本文件”</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获得当前脚本的启动参数-utilslaunchargs"><code>utils.launch_args</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="3fw9"><br></p><ul data-anchor-id="t348">
<li><h3 id="脚本被终止时执行一些代码的方法">脚本被终止时执行一些代码的方法</h3>

<ul><li><p>说明</p>

<blockquote class="white-blockquote">
  <p>这不是一个函数 <br>
  而是利用 Lua 的垃圾回收机制实现的，用于在脚本结束（或被结束）时执行一些代码的方法</p>
  
  <ul><li><strong>原理</strong> <br>
  定义一个全局对象（表型值），将其 <strong>析构函数</strong> 设为一个函数 <br>
  当 Lua 虚拟机结束之时，所有 Lua 对象（也包括你定义的这个）的 <strong>析构函数</strong> 会被调用 <br>
  Lua 中的 <strong>析构函数</strong> 是指对象的<a href="http://cloudwu.github.io/lua53doc/manual.html#2.4" target="_blank"> __gc 元方法</a></li></ul>
</blockquote></li>
<li><p>简易示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">关键词</span><span class="pln"> </span><span class="pun">脚本终止回调</span><span class="pln"> </span><span class="pun">脚本结束回调</span></code></li><li class="L1"><code class="language-lua"><span class="pun">随便取个变量名</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L2"><code class="language-lua"><span class="pln">setmetatable</span><span class="pun">(随便取个变量名,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    __gc </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(...)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">'被终止了！'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">500</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L7"><code class="language-lua"><span class="pun">})</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"现在可尝试手动结束脚本\n\n"</span><span class="pun">..</span><span class="pln">os</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="str">"%Y-%m-%d %H:%M:%S"</span><span class="pun">))</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a>、<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-setmetatable" target="_blank">setmetatable</a></p></li>
<li><p>完整封装示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">function</span><span class="pln"> atexit</span><span class="pun">(</span><span class="pln">callback</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">参数为一个函数，使用</span><span class="pln"> atexit</span><span class="pun">(一个函数)</span><span class="pln"> </span><span class="pun">注册一个函数在脚本结束时执行，建议不要耗时太长</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    ____atexit_guard____ </span><span class="pun">=</span><span class="pln"> ____atexit_guard____ </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> type</span><span class="pun">(</span><span class="pln">____atexit_guard____</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'table'</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> getmetatable</span><span class="pun">(</span><span class="pln">____atexit_guard____</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">            setmetatable</span><span class="pun">(</span><span class="pln">____atexit_guard____</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-lua"><span class="pln">                __gc </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">                    </span><span class="kwd">if</span><span class="pln"> type</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">callback</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'function'</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">                        pcall</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">callback</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L9"><code class="language-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            </span><span class="pun">})</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        ____atexit_guard____</span><span class="pun">.</span><span class="pln">callback </span><span class="pun">=</span><span class="pln"> callback</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        error</span><span class="pun">(</span><span class="str">'别用 `____atexit_guard____` 命名你的变量。'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L7"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">以上代码可拷贝到你的脚本的开头，以下为使用示例</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">使用</span><span class="pln"> atexit </span><span class="pun">注册一个终止回调函数</span></code></li><li class="L0"><code class="language-lua"><span class="pln">atexit</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span></code></li><li class="L1"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">'被终止了！'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">500</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"现在可尝试手动结束脚本\n\n"</span><span class="pun">..</span><span class="pln">os</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="str">"%Y-%m-%d %H:%M:%S"</span><span class="pun">))</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a>、<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-setmetatable" target="_blank">setmetatable</a></p></li></ul></li>
</ul><hr><p data-anchor-id="pebs"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="kfe7" id="开发辅助函数">开发辅助函数</h2><ul data-anchor-id="550f">
<li><h3 id="打印内容到缓冲区-print">打印内容到缓冲区 (<strong>print</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">print</span><span class="pun">([</span><span class="pln"> </span><span class="pun">参数</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">参数</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>参数1, 参数2, ... <br>
  任意类型，可选参数，可变参数，将会转换成文本输出到缓冲区，参数之间用 <code>"\t"</code> 隔开</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-print" target="_blank"><code>print</code></a> 是 lua 自带的打印输入函数，在 XXTouch 是将内容打印到缓冲区</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"hello world"</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="ovf2"><br></p><ul data-anchor-id="pbxe">
<li><h3 id="将打印缓冲区的内容提出来-printout">将打印缓冲区的内容提出来 (<strong>print.out</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">缓冲区内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">print</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将 print 函数打印的缓冲区清空并返回缓冲区内容</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">使用一个弹窗显示</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> </span><span class="pun">缓冲区内容</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">print</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="uasv"><br></p><ul data-anchor-id="q9d5">
<li><h3 id="网络日志-nlog">网络日志 (<strong>nLog</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">nLog</span><span class="pun">(日志内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>日志内容 <br>
  文本型，日志内容</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>这个函数是协议函数（空函数），默认执行不会产生任何效果，实现细节由配套开发环境决定 <br>
  当使用配套开发环境进行调试的时候这个函数将会将日志发回开发环境的日志框</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">将</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> </span><span class="pun">缓冲区内容发回开发开发工具的日志窗</span></code></li><li class="L1"><code class="language-lua"><span class="pln">nLog</span><span class="pun">(</span><span class="kwd">print</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">())</span></code></li></ol></pre></li></ul>

<hr>

<p><br> <br>
<br> <br>
<br></p></li>
</ul><div class="md-section-divider"></div><h2 data-anchor-id="enus" id="屏幕模块screen">屏幕模块（screen）</h2><ul data-anchor-id="1zhq">
<li><h3 id="初始化旋转坐标系-screeninit">初始化旋转坐标系 (<strong>screen.init</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">原坐标系</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">init</span><span class="pun">(坐标系)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>坐标系 <br>
  <ul><li>整数型，取值范围 <br>
  0 - 竖屏 home 在下 <br>
  1 - 横屏 home 在右 <br>
  2 - 横屏 home 在左 <br>
  3 - 竖屏 home 在上</li></ul></li>
  <li>原坐标系 <br>
  <ul><li>整数型，返回这个函数调用之前使用的坐标系</li></ul></li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>初始化取色或点击的坐标系 <br>
  使用以下别名调用也可以实现相同效果</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">init_home_on_bottom</span><span class="pun">()</span><span class="pln">    </span><span class="pun">--</span><span class="pln"> home </span><span class="pun">在下</span></code></li><li class="L1"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">init_home_on_right</span><span class="pun">()</span><span class="pln">     </span><span class="pun">--</span><span class="pln"> home </span><span class="pun">在右</span></code></li><li class="L2"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">init_home_on_left</span><span class="pun">()</span><span class="pln">      </span><span class="pun">--</span><span class="pln"> home </span><span class="pun">在左</span></code></li><li class="L3"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">init_home_on_top</span><span class="pun">()</span><span class="pln">       </span><span class="pun">--</span><span class="pln"> home </span><span class="pun">在上</span></code></li></ol></pre>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">init</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln">    </span><span class="pun">--</span><span class="pln"> home </span><span class="pun">在下</span></code></li><li class="L1"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">init</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">    </span><span class="pun">--</span><span class="pln"> home </span><span class="pun">在右</span></code></li><li class="L2"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">init</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">    </span><span class="pun">--</span><span class="pln"> home </span><span class="pun">在左</span></code></li><li class="L3"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">init</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln">    </span><span class="pun">--</span><span class="pln"> home </span><span class="pun">在上</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="rn1m"><br></p><ul data-anchor-id="o57b">
<li><h3 id="坐标旋转转换-screenrotatexy">坐标旋转转换 (<strong>screen.rotate_xy</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">旋转后的横坐标,</span><span class="pln"> </span><span class="pun">旋转后的纵坐标</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">rotate_xy</span><span class="pun">(横坐标,</span><span class="pln"> </span><span class="pun">纵坐标,</span><span class="pln"> </span><span class="pun">旋转方向)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>横坐标, 纵坐标 <br>
  <ul><li>整数型，需要旋转的坐标</li></ul></li>
  <li><strong>旋转方向</strong> <br>
  <ul><li>整数型，旋转选项 <br>
  0 - 不旋转 <br>
  1 - 往左 90 度旋转 <br>
  2 - 往右 90 度旋转 <br>
  3 - 180 度旋转</li></ul></li>
  <li>旋转后的横坐标, 旋转后的纵坐标 <br>
  <ul><li>整数型，返回使用 <strong>旋转方向</strong> 作为选项旋转后的坐标</li></ul></li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>坐标旋转转换，通常用于将竖屏坐标转换成横屏坐标 <br>
  <strong>这个函数在 1.1.1-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">rx</span><span class="pun">,</span><span class="pln"> ry </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">rotate_xy</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="xw2d"><br></p><ul data-anchor-id="yxog">
<li><h3 id="获取屏幕尺寸-screensize">获取屏幕尺寸 (<strong>screen.size</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">屏宽,</span><span class="pln"> </span><span class="pun">屏高</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>屏宽 整数型</li>
  <li>屏高 整数型</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>这个函数的返回值不受当前设备的桌面或者应用的的横竖屏状态影响，也不受放大模式影响 <br>
  这个函数可以在 XUI 中使用</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">根据分辨率判断设备类型</span></code></li><li class="L1"><code class="language-lua"><span class="pln">width</span><span class="pun">,</span><span class="pln"> height </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">if</span><span class="pln"> width </span><span class="pun">==</span><span class="pln"> </span><span class="lit">640</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> height </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1136</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> iPhone </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5S</span><span class="pun">,</span><span class="pln"> iPod touch </span><span class="lit">5</span></code></li><li class="L4"><code class="language-lua"><span class="pln">elseif width </span><span class="pun">==</span><span class="pln"> </span><span class="lit">640</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> height </span><span class="pun">==</span><span class="pln"> </span><span class="lit">960</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> iPhone </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4S</span><span class="pun">,</span><span class="pln"> iPod touch </span><span class="lit">4</span></code></li><li class="L6"><code class="language-lua"><span class="pln">elseif width </span><span class="pun">==</span><span class="pln"> </span><span class="lit">750</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> height </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1334</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> iPhone </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6S</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span></code></li><li class="L8"><code class="language-lua"><span class="pln">elseif width </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1242</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> height </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2208</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> iPhone </span><span class="lit">6</span><span class="pun">+,</span><span class="pln"> </span><span class="lit">6S</span><span class="pun">+,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">+,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">+</span></code></li><li class="L0"><code class="language-lua"><span class="pln">elseif width </span><span class="pun">==</span><span class="pln"> </span><span class="lit">768</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> height </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1024</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> iPad </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> mini </span><span class="lit">1</span></code></li><li class="L2"><code class="language-lua"><span class="pln">elseif width </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1536</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> height </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2048</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> iPad </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> mini </span><span class="lit">2</span></code></li><li class="L4"><code class="language-lua"><span class="pln">elseif width </span><span class="pun">==</span><span class="pln"> </span><span class="lit">320</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> height </span><span class="pun">==</span><span class="pln"> </span><span class="lit">480</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">这个应该不可能</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="y67y"><br></p><ul data-anchor-id="5f8t">
<li><h3 id="保持屏幕-screenkeep">保持屏幕 (<strong>screen.keep</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">keep</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>在脚本中保持当前屏幕内容不变，多次调用取色、找色、截图、找图等函数时，直接调用保持的内容。 <br>
  该函数为优化类函数，能够为大量的静态图像处理函数提供性能优化。 <br>
  调用仅会影响 XXTouch 取色逻辑，<strong>不会</strong> 导致屏幕画面卡住不动！！！</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">遍历屏幕区块</span></code></li><li class="L1"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">keep</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">for</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">640</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">960</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="pun">--格式化为十六进制文本</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        color </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="str">"%X"</span><span class="pun">,</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">get_color</span><span class="pun">(</span><span class="pln">k</span><span class="pun">,</span><span class="pln"> j</span><span class="pun">));</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="pun">--输出到系统日志</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"("</span><span class="pun">..</span><span class="pln">k</span><span class="pun">..</span><span class="str">", "</span><span class="pun">..</span><span class="pln">j</span><span class="pun">..</span><span class="str">") Color: "</span><span class="pun">..</span><span class="pln">color</span><span class="pun">..</span><span class="str">"."</span><span class="pun">);</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">unkeep</span><span class="pun">()</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#输出标准系统日志-syslog"><code>sys.log</code></a></p></li>
<li><p>小知识</p>

<blockquote class="white-blockquote">
  <ul><li>针对同一位置两行连续单独的 screen.get_color 调用可能取到不同的值</li>
  <li>screen.keep 的情况下 screen.get_color 单独调用耗时会超过一次 screen.keep 的耗时</li>
  <li>调用 screen.keep 之后，再连续调用 50 次 screen.get_color 耗时可以等同于调用一次 screen.keep</li></ul>
</blockquote></li></ul></li>
</ul><hr><p data-anchor-id="qmnv"><br></p><ul data-anchor-id="arfu">
<li><h3 id="取消保持屏幕-screenunkeep">取消保持屏幕 (<strong>screen.unkeep</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">unkeep</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>取消 <a href="#保持屏幕-screenkeep">screen.keep</a> 函数的效果，释放内存中的屏幕图像</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#保持屏幕-screenkeep"><code>参考 screen.keep 示例</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ds26"><br></p><ul data-anchor-id="pj2k">
<li><h3 id="获取屏幕上某点颜色-screengetcolor">获取屏幕上某点颜色 (<strong>screen.get_color</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">颜色值</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">get_color</span><span class="pun">(横坐标,</span><span class="pln"> </span><span class="pun">纵坐标)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>横坐标, 纵坐标 <br>
  整数型，代表目标点的坐标</li>
  <li>颜色值 <br>
  整数型，返回目标点颜色的 RGB 值</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取屏幕上某个坐标点的颜色</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">get_color</span><span class="pun">(</span><span class="lit">512</span><span class="pun">,</span><span class="pln"> </span><span class="lit">133</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> c</span><span class="pun">==</span><span class="lit">0xffffff</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"512, 133 这个点是纯白色"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="qwrn"><br></p><ul data-anchor-id="ph0v">
<li><h3 id="获取屏幕上某点颜色-rgb-screengetcolorrgb">获取屏幕上某点颜色 RGB (<strong>screen.get_color_rgb</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">红,</span><span class="pln"> </span><span class="pun">绿,</span><span class="pln"> </span><span class="pun">蓝</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">get_color_rgb</span><span class="pun">(横坐标,</span><span class="pln"> </span><span class="pun">纵坐标)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>横坐标, 纵坐标 <br>
  整数型，代表目标点的坐标</li>
  <li>红, 绿, 蓝 <br>
  整数型，返回目标点颜色的 <code>红、绿、蓝</code> 值，取值范围 0~255</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取屏幕上某个坐标点的颜色并拆分成 红(R) 绿(G) 蓝(B) 形式</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> r</span><span class="pun">,</span><span class="pln"> g</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">get_color_rgb</span><span class="pun">(</span><span class="lit">512</span><span class="pun">,</span><span class="pln"> </span><span class="lit">133</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> r</span><span class="pun">==</span><span class="lit">0xff</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> g</span><span class="pun">==</span><span class="lit">0xff</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> b</span><span class="pun">==</span><span class="lit">0xff</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"512, 133 这个点是纯白色"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="pix0"><br></p><ul data-anchor-id="efd9">
<li><h3 id="屏幕多点颜色匹配-screeniscolors">屏幕多点颜色匹配 (<strong>screen.is_colors</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否完全匹配</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">is_colors</span><span class="pun">({</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{横坐标*,</span><span class="pln"> </span><span class="pun">纵坐标*,</span><span class="pln"> </span><span class="pun">颜色*},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{横坐标*,</span><span class="pln"> </span><span class="pun">纵坐标*,</span><span class="pln"> </span><span class="pun">颜色*},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">...</span></code></li><li class="L4"><code class="language-lua"><span class="pun">}[,</span><span class="pln"> </span><span class="pun">颜色相似度])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>横坐标*, 纵坐标* <br>
  整数型，代表其中某点坐标</li>
  <li>颜色* <br>
  整数型，代表其中某点需要匹配的颜色值</li>
  <li>颜色相似度 <br>
  整数型，可选参数，代表需要的颜色的相似度，取值范围 1~100，默认 100</li>
  <li>是否完全匹配 <br>
  布尔型，所有点的颜色都匹配则返回 true，否则返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>匹配屏幕上若干点的颜色</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">is_colors</span><span class="pun">({</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">509</span><span class="pun">,</span><span class="pln"> </span><span class="lit">488</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xec1c23</span><span class="pun">},</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">如果坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">509</span><span class="pun">,</span><span class="pln"> </span><span class="lit">488</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的颜色与</span><span class="pln"> </span><span class="lit">0xec1c23</span><span class="pln"> </span><span class="pun">相似度在</span><span class="pln"> </span><span class="lit">90</span><span class="pun">%</span><span class="pln"> </span><span class="pun">以上</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">514</span><span class="pun">,</span><span class="pln"> </span><span class="lit">470</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x00adee</span><span class="pun">},</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">同时坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">514</span><span class="pun">,</span><span class="pln"> </span><span class="lit">470</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的颜色与</span><span class="pln"> </span><span class="lit">0x00adee</span><span class="pln"> </span><span class="pun">相似度在</span><span class="pln"> </span><span class="lit">90</span><span class="pun">%</span><span class="pln"> </span><span class="pun">以上</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">508</span><span class="pun">,</span><span class="pln"> </span><span class="lit">478</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffc823</span><span class="pun">},</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">同时坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">508</span><span class="pun">,</span><span class="pln"> </span><span class="lit">478</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的颜色与</span><span class="pln"> </span><span class="lit">0xffc823</span><span class="pln"> </span><span class="pun">相似度在</span><span class="pln"> </span><span class="lit">90</span><span class="pun">%</span><span class="pln"> </span><span class="pun">以上</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">511</span><span class="pun">,</span><span class="pln"> </span><span class="lit">454</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xa78217</span><span class="pun">},</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">同时坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">511</span><span class="pun">,</span><span class="pln"> </span><span class="lit">454</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的颜色与</span><span class="pln"> </span><span class="lit">0xa78217</span><span class="pln"> </span><span class="pun">相似度在</span><span class="pln"> </span><span class="lit">90</span><span class="pun">%</span><span class="pln"> </span><span class="pun">以上</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">521</span><span class="pun">,</span><span class="pln"> </span><span class="lit">433</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xd0d2d2</span><span class="pun">},</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">同时坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">521</span><span class="pun">,</span><span class="pln"> </span><span class="lit">433</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的颜色与</span><span class="pln"> </span><span class="lit">0xd0d2d2</span><span class="pln"> </span><span class="pun">相似度在</span><span class="pln"> </span><span class="lit">90</span><span class="pun">%</span><span class="pln"> </span><span class="pun">以上</span></code></li><li class="L6"><code class="language-lua"><span class="pun">},</span><span class="pln"> </span><span class="lit">90</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">                </span><span class="pun">--</span><span class="pln"> </span><span class="pun">则匹配</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"匹配！"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"不匹配！"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="06gl"><br></p><ul data-anchor-id="im4q">
<li><h3 id="多点相似度模式找色-screenfindcolor">多点相似度模式找色 (<strong>screen.find_color</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">横坐标,</span><span class="pln"> </span><span class="pun">纵坐标</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="pln">find_all </span><span class="pun">=</span><span class="pln"> </span><span class="pun">是否搜索多个结果],</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="pln">max_results </span><span class="pun">=</span><span class="pln"> </span><span class="pun">最大结果数],</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="pln">max_miss </span><span class="pun">=</span><span class="pln"> </span><span class="pun">允许最多未命中数],</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{起始点横坐标,</span><span class="pln"> </span><span class="pun">起始点纵坐标,</span><span class="pln"> </span><span class="pun">起始点颜色[,</span><span class="pln"> </span><span class="pun">起始点相似度]},</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">{偏移点横坐标*,</span><span class="pln"> </span><span class="pun">偏移点纵坐标*,</span><span class="pln"> </span><span class="pun">偏移点颜色*[,</span><span class="pln"> </span><span class="pun">偏移点相似度*]},</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">{偏移点横坐标*,</span><span class="pln"> </span><span class="pun">偏移点纵坐标*,</span><span class="pln"> </span><span class="pun">偏移点颜色*[,</span><span class="pln"> </span><span class="pun">偏移点相似度*]},</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">...</span></code></li><li class="L8"><code class="language-lua"><span class="pun">}</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">全局相似度,</span><span class="pln"> </span><span class="pun">左,</span><span class="pln"> </span><span class="pun">上,</span><span class="pln"> </span><span class="pun">右,</span><span class="pln"> </span><span class="pun">下</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>是否搜索多个结果 <br>
  布尔型，可选参数，这个标签设置为 true 会返回范围内所有匹配位置的一个表，格式为 {{x1, y1}, {x2, y2}, ...}，默认 false</li>
  <li>最大结果数 <br>
  整数型，可选参数，当 find_all（是否搜索多个结果） 标签设置为 true 的时候，这个表示最多返回结果数，最多可以设为 1000，默认 100</li>
  <li>允许最多未命中数 <strong>*1.2-3 新增</strong> <br>
  整数型，可选参数，可以允许最多的不匹配的点的数量，默认为 0，也就是全命中才算找到</li>
  <li>起始点横坐标, 起始点纵坐标 <br>
  整数型，代表起始坐标，它并不是限制找色的范围为固定这一点，而仅仅是给偏移位置一个相对坐标，不理解就填 0, 0</li>
  <li>起始点颜色 <br>
  整数型，代表需要搜索的那一点的颜色</li>
  <li>起始点相似度 <br>
  整数型，可选参数，需要搜索的那一点颜色的相似度，取值范围 1~100，默认 100</li>
  <li>偏移点横坐标*, 偏移点纵坐标* <br>
  整数型，代表一个偏移位置坐标</li>
  <li>偏移点颜色* <br>
  整数型，代表偏移位置需要匹配的颜色</li>
  <li>偏移点相似度* <br>
  整数型，可选参数，偏移位置的颜色的相似度，取值范围 -100~100，默认 100，负相似度意味着匹配小于该绝对值的相似度</li>
  <li>全局相似度 <br>
  整数型，可选参数，如果没有给单个点设置相似度，那么每一点都会用这个相似度，取值范围 1~100，默认 100</li>
  <li>左, 上, 右, 下 <br>
  整数型，可选参数，代表搜索区域，默认 全屏</li>
  <li>横坐标, 纵坐标 <br>
  整数型，返回匹配色的第一个色的坐标，搜索失败返回 -1, -1</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用相似度模式查找，获取区域中第一个完全匹配的多点颜色结构的位置</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">0</span><span class="pun">,</span><span class="pln">   </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xec1c23</span><span class="pun">},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">12</span><span class="pun">,</span><span class="pln">  </span><span class="pun">-</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">85</span><span class="pun">},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">18</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x00adee</span><span class="pun">},</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffc823</span><span class="pun">},</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">34</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xa78217</span><span class="pun">},</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">55</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xd0d2d2</span><span class="pun">},</span></code></li><li class="L7"><code class="language-lua"><span class="pun">},</span><span class="pln"> </span><span class="lit">90</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pun">--[[</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="pun">在左上为</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">右下为</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的区域找到第一点与</span><span class="pln"> </span><span class="lit">0xec1c23</span><span class="pln"> </span><span class="pun">相似度大于</span><span class="pln"> </span><span class="lit">90</span><span class="pln"> </span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">且它的相对坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的位置的颜色与</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">相似度大于</span><span class="pln"> </span><span class="lit">85</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">且它的相对坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">18</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的位置的颜色与</span><span class="pln"> </span><span class="lit">0x00adee</span><span class="pln"> </span><span class="pun">相似度大于</span><span class="pln"> </span><span class="lit">90</span><span class="pln"> </span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">且……（后面的同理）都能匹配的那个点</span></code></li><li class="L4"><code class="language-lua"><span class="pun">--]]</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">等效代码如下：</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">509</span><span class="pun">,</span><span class="pln"> </span><span class="lit">488</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xec1c23</span><span class="pun">},</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">521</span><span class="pun">,</span><span class="pln"> </span><span class="lit">485</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">85</span><span class="pun">},</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">514</span><span class="pun">,</span><span class="pln"> </span><span class="lit">470</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x00adee</span><span class="pun">},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">508</span><span class="pun">,</span><span class="pln"> </span><span class="lit">478</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffc823</span><span class="pun">},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">511</span><span class="pun">,</span><span class="pln"> </span><span class="lit">454</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xa78217</span><span class="pun">},</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">521</span><span class="pun">,</span><span class="pln"> </span><span class="lit">433</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xd0d2d2</span><span class="pun">},</span></code></li><li class="L5"><code class="language-lua"><span class="pun">},</span><span class="pln"> </span><span class="lit">90</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pun">--[[</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="pun">在左上为</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">右下为</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的区域找到第一点与</span><span class="pln"> </span><span class="lit">0xec1c23</span><span class="pln"> </span><span class="pun">相似度大于</span><span class="pln"> </span><span class="lit">90</span><span class="pln"> </span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="pun">且它的相对坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">521</span><span class="pun">-</span><span class="lit">509</span><span class="pun">,</span><span class="pln"> </span><span class="lit">485</span><span class="pun">-</span><span class="lit">488</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的位置的颜色与</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">相似度大于</span><span class="pln"> </span><span class="lit">85</span><span class="pln"> </span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="pun">且它的相对坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">514</span><span class="pun">-</span><span class="lit">509</span><span class="pun">,</span><span class="pln"> </span><span class="lit">470</span><span class="pun">-</span><span class="lit">488</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的位置的颜色与</span><span class="pln"> </span><span class="lit">0x00adee</span><span class="pln"> </span><span class="pun">相似度大于</span><span class="pln"> </span><span class="lit">90</span><span class="pln"> </span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">且……（后面的同理）都能匹配的那个点</span></code></li><li class="L2"><code class="language-lua"><span class="pun">--]]</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">不换行无缩进就是这个效果：</span></code></li><li class="L5"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0xec1c23</span><span class="pun">},{</span><span class="lit">12</span><span class="pun">,-</span><span class="lit">3</span><span class="pun">,</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="lit">85</span><span class="pun">},{</span><span class="lit">5</span><span class="pun">,-</span><span class="lit">18</span><span class="pun">,</span><span class="lit">0x00adee</span><span class="pun">},{-</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">10</span><span class="pun">,</span><span class="lit">0xffc823</span><span class="pun">},{</span><span class="lit">2</span><span class="pun">,-</span><span class="lit">34</span><span class="pun">,</span><span class="lit">0xa78217</span><span class="pun">},{</span><span class="lit">12</span><span class="pun">,-</span><span class="lit">55</span><span class="pun">,</span><span class="lit">0xd0d2d2</span><span class="pun">},},</span><span class="lit">90</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">100</span><span class="pun">,</span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">反匹配演示，在</span><span class="pln"> </span><span class="lit">5C</span><span class="pln"> </span><span class="pun">主屏幕运行可获得结果</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">516</span><span class="pun">,</span><span class="pln">  </span><span class="lit">288</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">519</span><span class="pun">,</span><span class="pln">  </span><span class="lit">286</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">521</span><span class="pun">,</span><span class="pln">  </span><span class="lit">289</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">516</span><span class="pun">,</span><span class="pln">  </span><span class="lit">296</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">522</span><span class="pun">,</span><span class="pln">  </span><span class="lit">297</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">520</span><span class="pun">,</span><span class="pln">  </span><span class="lit">295</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">10</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">这一点颜色与</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">相似度小于</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> </span><span class="pun">才匹配，下同</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">515</span><span class="pun">,</span><span class="pln">  </span><span class="lit">291</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">10</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">518</span><span class="pun">,</span><span class="pln">  </span><span class="lit">284</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">10</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">523</span><span class="pun">,</span><span class="pln">  </span><span class="lit">298</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">10</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">514</span><span class="pun">,</span><span class="pln">  </span><span class="lit">298</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">10</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">514</span><span class="pun">,</span><span class="pln">  </span><span class="lit">296</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">10</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L9"><code class="language-lua"><span class="pun">},</span><span class="pln"> </span><span class="lit">90</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">不写区域参数表示全屏找</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">results </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">范围匹配全输出演示</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">527</span><span class="pun">,</span><span class="pln">  </span><span class="lit">278</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xde1d26</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">524</span><span class="pun">,</span><span class="pln">  </span><span class="lit">285</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x007aff</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">555</span><span class="pun">,</span><span class="pln">  </span><span class="lit">292</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xe4ddc9</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">536</span><span class="pun">,</span><span class="pln">  </span><span class="lit">314</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffde02</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">502</span><span class="pun">,</span><span class="pln">  </span><span class="lit">291</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffde02</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">502</span><span class="pun">,</span><span class="pln">  </span><span class="lit">283</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xe4ddc9</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    find_all </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">带这个标签将返回范围所有匹配的位置的一个表，格式为</span><span class="pln"> </span><span class="pun">{{</span><span class="pln">x1</span><span class="pun">,</span><span class="pln"> y1</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">x2</span><span class="pun">,</span><span class="pln"> y2</span><span class="pun">},</span><span class="pln"> </span><span class="pun">...}</span></code></li><li class="L9"><code class="language-lua"><span class="pun">},</span><span class="pln"> </span><span class="lit">90</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">不写区域参数表示全屏找</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="crm9"><br></p><ul data-anchor-id="2sll">
<li><h3 id="多点色偏模式找色-screenfindcolor">多点色偏模式找色 (<strong>screen.find_color</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">横坐标,</span><span class="pln"> </span><span class="pun">纵坐标</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="pln">find_all </span><span class="pun">=</span><span class="pln"> </span><span class="pun">是否搜索多个结果],</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="pln">max_results </span><span class="pun">=</span><span class="pln"> </span><span class="pun">最大结果数],</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="pln">max_miss </span><span class="pun">=</span><span class="pln"> </span><span class="pun">允许最多未命中数],</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{起始点横坐标,</span><span class="pln"> </span><span class="pun">起始点纵坐标,</span><span class="pln"> </span><span class="pun">{起始点颜色[,</span><span class="pln"> </span><span class="pun">起始点色偏]}},</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">{偏移点横坐标*,</span><span class="pln"> </span><span class="pun">偏移点纵坐标*,</span><span class="pln"> </span><span class="pun">{偏移点颜色*,</span><span class="pln"> </span><span class="pun">偏移点色偏*}},</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">{偏移点横坐标*,</span><span class="pln"> </span><span class="pun">偏移点纵坐标*,</span><span class="pln"> </span><span class="pun">{偏移点颜色*,</span><span class="pln"> </span><span class="pun">偏移点色偏*}},</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">...</span></code></li><li class="L8"><code class="language-lua"><span class="pun">}</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">左,</span><span class="pln"> </span><span class="pun">上,</span><span class="pln"> </span><span class="pun">右,</span><span class="pln"> </span><span class="pun">下</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>是否搜索多个结果 <br>
  布尔型，可选参数，这个标签设置为 true 会返回范围内所有匹配位置的一个表，格式为 {{x1, y1}, {x2, y2}, ...}，默认 false</li>
  <li>最大结果数 <br>
  整数型，可选参数，当 find_all（是否搜索多个结果） 标签设置为 true 的时候，这个表示最多返回结果数，最多可以设为 1000，默认 100</li>
  <li>允许最多未命中数 <strong>*1.2-3 新增</strong> <br>
  整数型，可选参数，可以允许最多的不匹配的点的数量，默认为 0，也就是全命中才算找到</li>
  <li>起始点横坐标, 起始点纵坐标 <br>
  整数型，代表起始坐标，它并不是限制找色的范围为固定这一点，而仅仅是给偏移位置一个相对坐标，不理解就填 0, 0</li>
  <li>起始点颜色 <br>
  整数型，代表需要搜索的那一点的颜色</li>
  <li>起始点色偏 <br>
  整数型，需要搜索的颜色的最大色偏（或偏色），大于 0xff000000 则为反匹配模式</li>
  <li>偏移点横坐标*, 偏移点纵坐标* <br>
  整数型，代表一个偏移位置坐标</li>
  <li>偏移点颜色* <br>
  整数型，代表偏移位置需要匹配的颜色</li>
  <li>偏移点色偏* <br>
  整数型，偏移位置的颜色的色偏（或偏色），大于 0xff000000 则为反匹配模式</li>
  <li>左, 上, 右, 下 <br>
  整数型，可选参数，代表搜索区域，默认 全屏</li>
  <li>横坐标, 纵坐标 <br>
  整数型，返回匹配色的第一个色的坐标，搜索失败返回 -1, -1</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用色偏（或偏色）模式查找，获取区域中第一个完全匹配的多点颜色结构的位置</p>
  
  <p><strong>色偏（或偏色）</strong>用于表示颜色偏差范围，一个颜色附带色偏（或偏色）是指该颜色的红、绿、蓝偏移范围内的所有颜色 <br>
  当 0x456789 色偏为 0x123456 的时候表示 0x456789 的红正负范围 0x12、绿正负范围 0x34、蓝正负范围 0x56 <br>
  也就是其红色范围为 0x45 ± 0x12、绿色范围为 0x67 ± 0x34、蓝色的范围为 0x89 ± 0x56，如下表所示</p>
</blockquote>

<table class="table table-striped-white table-bordered">
<thead>
<tr>
 <th style="text-align:left;">负</th>
 <th style="text-align:left;">正</th>
</tr>
</thead>
<tbody><tr>
 <td style="text-align:left;">0x45 - 0x12 = 0x33</td>
 <td style="text-align:left;">0x45 + 0x12 = 0x57</td>
</tr>
<tr>
 <td style="text-align:left;">0x67 - 0x34 = 0x33</td>
 <td style="text-align:left;">0x45 + 0x12 = 0x9B</td>
</tr>
<tr>
 <td style="text-align:left;">0x89 - 0x56 = 0x33</td>
 <td style="text-align:left;">0x45 + 0x12 = 0xDF</td>
</tr>
</tbody></table>


<blockquote class="white-blockquote">
  <p>上表所述 {0x456789, 0x123456} 实际上就是表示从 0x333333 到 0x579BDF 之间所有的颜色</p>
  
  <p><strong>使用 0x 开头的数字为 16 进制数</strong> ( <a href="https://baike.baidu.com/item/%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E6%95%B0/5697828" target="_blank">什么是 16 进制数?</a> )</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">0</span><span class="pun">,</span><span class="pln">   </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xec1c23</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x000000</span><span class="pun">}},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">12</span><span class="pun">,</span><span class="pln">  </span><span class="pun">-</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">18</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0x00adee</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x123456</span><span class="pun">}},</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffc823</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101001</span><span class="pun">}},</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">34</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xa78217</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101001</span><span class="pun">}},</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">55</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xd0d2d2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101001</span><span class="pun">}},</span></code></li><li class="L7"><code class="language-lua"><span class="pun">},</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pun">--[[</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="pun">在左上为</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">右下为</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的区域找到第一点与</span><span class="pln"> </span><span class="lit">0xec1c23</span><span class="pln"> </span><span class="pun">完全相似</span><span class="pln"> </span><span class="pun">(色偏为</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">且它的相对坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的位置的颜色与</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">的色偏小于</span><span class="pln"> </span><span class="lit">0x101010</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">且它的相对坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">18</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的位置的颜色与</span><span class="pln"> </span><span class="lit">0x00adee</span><span class="pln"> </span><span class="pun">色偏小于</span><span class="pln"> </span><span class="lit">0x123456</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">且……（后面的同理）都能匹配的那个点</span></code></li><li class="L4"><code class="language-lua"><span class="pun">--]]</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">等效代码如下：</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">509</span><span class="pun">,</span><span class="pln"> </span><span class="lit">488</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xec1c23</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x000000</span><span class="pun">}},</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">521</span><span class="pun">,</span><span class="pln"> </span><span class="lit">485</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}},</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">514</span><span class="pun">,</span><span class="pln"> </span><span class="lit">470</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0x00adee</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x123456</span><span class="pun">}},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">508</span><span class="pun">,</span><span class="pln"> </span><span class="lit">478</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffc823</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101001</span><span class="pun">}},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">511</span><span class="pun">,</span><span class="pln"> </span><span class="lit">454</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xa78217</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101001</span><span class="pun">}},</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">521</span><span class="pun">,</span><span class="pln"> </span><span class="lit">433</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xd0d2d2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101001</span><span class="pun">}},</span></code></li><li class="L5"><code class="language-lua"><span class="pun">},</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pun">--[[</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="pun">在左上为</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">右下为</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的区域找到第一点与</span><span class="pln"> </span><span class="lit">0xec1c23</span><span class="pln"> </span><span class="pun">完全相似</span><span class="pln"> </span><span class="pun">(色偏为</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="pun">且它的相对坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">521</span><span class="pun">-</span><span class="lit">509</span><span class="pun">,</span><span class="pln"> </span><span class="lit">485</span><span class="pun">-</span><span class="lit">488</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的位置的颜色与</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">的色偏小于</span><span class="pln"> </span><span class="lit">0x101010</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="pun">且它的相对坐标</span><span class="pln"> </span><span class="pun">(</span><span class="lit">514</span><span class="pun">-</span><span class="lit">509</span><span class="pun">,</span><span class="pln"> </span><span class="lit">470</span><span class="pun">-</span><span class="lit">488</span><span class="pun">)</span><span class="pln"> </span><span class="pun">的位置的颜色与</span><span class="pln"> </span><span class="lit">0x00adee</span><span class="pln"> </span><span class="pun">色偏小于</span><span class="pln"> </span><span class="lit">0x123456</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">且……（后面的同理）都能匹配的那个点</span></code></li><li class="L2"><code class="language-lua"><span class="pun">--]]</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">不换行无缩进就是这个效果：</span></code></li><li class="L5"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,{</span><span class="lit">0xec1c23</span><span class="pun">,</span><span class="lit">0x000000</span><span class="pun">}},{</span><span class="lit">12</span><span class="pun">,-</span><span class="lit">3</span><span class="pun">,{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="lit">0x101010</span><span class="pun">}},{</span><span class="lit">5</span><span class="pun">,-</span><span class="lit">18</span><span class="pun">,{</span><span class="lit">0x00adee</span><span class="pun">,</span><span class="lit">0x123456</span><span class="pun">}},{-</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">10</span><span class="pun">,{</span><span class="lit">0xffc823</span><span class="pun">,</span><span class="lit">0x101001</span><span class="pun">}},{</span><span class="lit">2</span><span class="pun">,-</span><span class="lit">34</span><span class="pun">,{</span><span class="lit">0xa78217</span><span class="pun">,</span><span class="lit">0x101001</span><span class="pun">}},{</span><span class="lit">12</span><span class="pun">,-</span><span class="lit">55</span><span class="pun">,{</span><span class="lit">0xd0d2d2</span><span class="pun">,</span><span class="lit">0x101001</span><span class="pun">}},},</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">100</span><span class="pun">,</span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">反匹配演示，在</span><span class="pln"> </span><span class="lit">5C</span><span class="pln"> </span><span class="pun">主屏幕运行可获得结果</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">516</span><span class="pun">,</span><span class="pln">  </span><span class="lit">288</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">519</span><span class="pun">,</span><span class="pln">  </span><span class="lit">286</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">521</span><span class="pun">,</span><span class="pln">  </span><span class="lit">289</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">516</span><span class="pun">,</span><span class="pln">  </span><span class="lit">296</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">522</span><span class="pun">,</span><span class="pln">  </span><span class="lit">297</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">520</span><span class="pun">,</span><span class="pln">  </span><span class="lit">295</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xff101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">这一点颜色与</span><span class="pln"> </span><span class="lit">0xffffff</span><span class="pln"> </span><span class="pun">色差大于</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pln"> </span><span class="pun">才匹配，下同</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">515</span><span class="pun">,</span><span class="pln">  </span><span class="lit">291</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xff101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">518</span><span class="pun">,</span><span class="pln">  </span><span class="lit">284</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xff101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">523</span><span class="pun">,</span><span class="pln">  </span><span class="lit">298</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xff101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">514</span><span class="pun">,</span><span class="pln">  </span><span class="lit">298</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xff101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln"> </span><span class="lit">514</span><span class="pun">,</span><span class="pln">  </span><span class="lit">296</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffffff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xff101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L9"><code class="language-lua"><span class="pun">})</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">不写区域参数表示全屏找</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">results </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_color</span><span class="pun">({</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">范围匹配全输出演示</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">527</span><span class="pun">,</span><span class="pln">  </span><span class="lit">278</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xde1d26</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">524</span><span class="pun">,</span><span class="pln">  </span><span class="lit">285</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0x007aff</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">555</span><span class="pun">,</span><span class="pln">  </span><span class="lit">292</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xe4ddc9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">536</span><span class="pun">,</span><span class="pln">  </span><span class="lit">314</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffde02</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">502</span><span class="pun">,</span><span class="pln">  </span><span class="lit">291</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xffde02</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">  </span><span class="lit">502</span><span class="pun">,</span><span class="pln">  </span><span class="lit">283</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xe4ddc9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x101010</span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    find_all </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">带这个标签将返回范围所有匹配的位置的一个表，格式为</span><span class="pln"> </span><span class="pun">{{</span><span class="pln">x1</span><span class="pun">,</span><span class="pln"> y1</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">x2</span><span class="pun">,</span><span class="pln"> y2</span><span class="pun">},</span><span class="pln"> </span><span class="pun">...}</span></code></li><li class="L9"><code class="language-lua"><span class="pun">})</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">不写区域参数表示全屏找</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="khcp"><br></p><ul data-anchor-id="1162">
<li><h3 id="获取屏幕图像-screenimage">获取屏幕图像 (<strong>screen.image</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">([</span><span class="pln"> </span><span class="pun">左,</span><span class="pln"> </span><span class="pun">上,</span><span class="pln"> </span><span class="pun">右,</span><span class="pln"> </span><span class="pun">下</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>左, 上, 右, 下 <br>
  整数型，可选参数，代表图像区域，默认 全屏</li>
  <li>图像 <br>
  图片对象，返回一个图片对象，用法参考 <a href="#图片对象模块image">图片对象模块（image）</a></li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取屏幕上区域或全部图像 <br>
  该方法会产出一个新的图片对象，如需保证高效频繁使用请搭配 <a href="#销毁一个图片对象-destroy">image:destroy</a> 方法使用</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image </span><span class="pun">的示例代码</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">():</span><span class="pln">save_to_album</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">全屏截图并保存到相册</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">():</span><span class="pln">save_to_png_file</span><span class="pun">(</span><span class="str">"/User/1.png"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">全屏截图并保存到文件</span><span class="pln"> </span><span class="pun">/</span><span class="typ">User</span><span class="pun">/</span><span class="lit">1.png</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pun">):</span><span class="pln">save_to_album</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">截取左上坐标为</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">右下坐标为</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> </span><span class="pun">的区域图像保存到相册</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pln">pasteboard</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pun">):</span><span class="pln">png_data</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"public.png"</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">截取左上坐标为</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">右下坐标为</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> </span><span class="pun">的区域图像写入到剪贴板</span></code></li></ol></pre></li></ul>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#保存图片对象到相册-savetoalbum"><code>:save_to_album</code></a>、<a href="#输出图片对象到一个-png-格式的文件-savetopngfile"><code>:save_to_png_file</code></a>、<a href="#获取图片对象的-png-格式数据-pngdata"><code>:png_data</code></a>、<a href="#写内容进剪贴板-write"><code>pasteboard.write</code></a></p></li>
</ul><hr><p data-anchor-id="yd0u"><br> <br>
<br></p><ul data-anchor-id="4cml">
<li><h3 id="屏幕区域文字识别-screenocrtext">屏幕区域文字识别 (<strong>screen.ocr_text</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">识别结果,</span><span class="pln"> </span><span class="pun">结果详情</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">ocr_text</span><span class="pun">(左,</span><span class="pln"> </span><span class="pun">上,</span><span class="pln"> </span><span class="pun">右,</span><span class="pln"> </span><span class="pun">下</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">结果范围,</span><span class="pln"> </span><span class="pun">二值化选项</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>左, 上, 右, 下 <br>
  整数型，代表识别区域</li>
  <li>结果范围 <br>
  <ul><li>可以是 文本型 或 表型 参数 <br>
  详情可参考 <a href="#tesseract-对图片进行-ocr-识别-tessocr">对图片进行 ocr 识别</a></li></ul></li>
  <li>二值化选项 *1.1.0-1 新增 <br>
  <ul><li>可以是 实数型 或 文本型 或 表型 参数，分别代表 <br>
  实数型，二值化阈值，可参考 <a href="#opencv-图片自动二值化-cvbinaryzation">图片自动二值化</a> <br>
  表型，自定义二值化色偏，参考 <a href="#二值化处理图片对象-binaryzation">图片手动二值化</a> <br>
  文本型，自定义二值化色偏，参考 <a href="#二值化处理图片对象-binaryzation">图片手动二值化</a></li></ul></li>
  <li>识别结果 <br>
  文本型，识别返回的文字</li>
  <li>结果详情 *1.1.3-1 新增 <br>
  表型，识别结果的每个可见字符的位置描述</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>识别屏幕区域上的文字，该函数会引用 image.tess_ocr 模块 <br>
  内置 OCR 识别库引擎为 tesseract 3.02 版，版本不对或者字库文件损坏会导致 XXTouch 脚本服务崩溃 <br>
  这里提供适用于 XXTouch 的 tesseract 引擎版本为 3.05 版的 OCR 识别库 <a href="http://static.zybuluo.com/xxtouch/fxnwlp9ic4mzf01shxegkier/tess_ocr_1.2_with_tesseract_3.05.01.zip" target="_blank">tess_ocr_1.2_with_tesseract_3.05.01.zip-1853.9kB（点击下载）</a> <br>
  XXTouch 已内置 eng 识别库 [A-Za-z0-9] 能识别常规英文和数字 <br>
  如果需要做简体中文或是其它语言文字识别 <br>
  需要手动导入相关的字库文件到设备的 <code>/var/mobile/Media/1ferver/tessdata/</code> 目录 <br>
  这里提供 <a href="https://apt-pages.xxtouch.com/others/chi_sim.traineddata" target="_blank">简体中文字库（点击下载）</a> <br>
  <strong><code>二值化选项</code> 手动二值化在 1.1.0-1 版以上方可使用</strong> <br>
  <strong><code>结果详情</code> 在 1.1.3-1 版以上方可使用</strong> <br>
  如果想自己进行 tesseract 字库训练可以 <a href="https://www.baidu.com/s?wd=tesseract%20训练" target="_blank">百度搜索“tesseract 训练”</a></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">1</span><span class="pun">：</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> txt </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">ocr_text</span><span class="pun">(</span><span class="lit">187</span><span class="pun">,</span><span class="pln"> </span><span class="lit">882</span><span class="pun">,</span><span class="pln"> </span><span class="lit">298</span><span class="pun">,</span><span class="pln"> </span><span class="lit">914</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">默认配置是使用英文数字模式识别文字</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"识别结果："</span><span class="pun">..</span><span class="pln">txt</span><span class="pun">:</span><span class="pln">atrim</span><span class="pun">())</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">2</span><span class="pun">（</span><span class="lit">1.1</span><span class="pun">.</span><span class="lit">0</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">新增）：</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">local</span><span class="pln"> txt </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">ocr_text</span><span class="pun">(</span><span class="lit">465</span><span class="pun">,</span><span class="pln"> </span><span class="lit">241</span><span class="pun">,</span><span class="pln"> </span><span class="lit">505</span><span class="pun">,</span><span class="pln"> </span><span class="lit">269</span><span class="pun">,</span><span class="pln"> </span><span class="str">"eng"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"9D5D39-0F1F26,D3D3D2-2C2C2D"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">使用色偏二值化识别</span></code></li><li class="L6"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"识别结果："</span><span class="pun">..</span><span class="pln">txt</span><span class="pun">:</span><span class="pln">atrim</span><span class="pun">())</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">3</span><span class="pun">（</span><span class="lit">1.1</span><span class="pun">.</span><span class="lit">0</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">新增）：</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">local</span><span class="pln"> txt </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">ocr_text</span><span class="pun">(</span><span class="lit">465</span><span class="pun">,</span><span class="pln"> </span><span class="lit">241</span><span class="pun">,</span><span class="pln"> </span><span class="lit">505</span><span class="pun">,</span><span class="pln"> </span><span class="lit">269</span><span class="pun">,</span><span class="pln"> </span><span class="str">"eng"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{{</span><span class="lit">0x9D5D39</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x0F1F26</span><span class="pun">},{</span><span class="lit">0xD3D3D2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x2C2C2D</span><span class="pun">}})</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">使用色偏二值化识别，同上</span></code></li><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"识别结果："</span><span class="pun">..</span><span class="pln">txt</span><span class="pun">:</span><span class="pln">atrim</span><span class="pun">())</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">4</span><span class="pun">：</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">local</span><span class="pln"> txt </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">ocr_text</span><span class="pun">(</span><span class="lit">187</span><span class="pun">,</span><span class="pln"> </span><span class="lit">882</span><span class="pun">,</span><span class="pln"> </span><span class="lit">298</span><span class="pun">,</span><span class="pln"> </span><span class="lit">914</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-lua"><span class="pln">  lang </span><span class="pun">=</span><span class="pln"> </span><span class="str">"eng"</span><span class="pun">,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">  white_list </span><span class="pun">=</span><span class="pln"> </span><span class="str">"1234567890"</span><span class="pun">,</span><span class="pln">      </span><span class="pun">--</span><span class="pln"> </span><span class="pun">自定义使用白名单限制仅识别为数字</span></code></li><li class="L6"><code class="language-lua"><span class="pun">})</span></code></li><li class="L7"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"识别结果："</span><span class="pun">..</span><span class="pln">txt</span><span class="pun">:</span><span class="pln">atrim</span><span class="pun">())</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">5</span><span class="pun">（</span><span class="lit">1.1</span><span class="pun">.</span><span class="lit">0</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">新增）：</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> txt </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">ocr_text</span><span class="pun">(</span><span class="lit">187</span><span class="pun">,</span><span class="pln"> </span><span class="lit">882</span><span class="pun">,</span><span class="pln"> </span><span class="lit">298</span><span class="pun">,</span><span class="pln"> </span><span class="lit">914</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">  lang </span><span class="pun">=</span><span class="pln"> </span><span class="str">"eng"</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">  white_list </span><span class="pun">=</span><span class="pln"> </span><span class="str">"1234567890"</span><span class="pun">,</span><span class="pln">      </span><span class="pun">--</span><span class="pln"> </span><span class="pun">自定义使用白名单限制仅识别为数字</span></code></li><li class="L3"><code class="language-lua"><span class="pun">},</span><span class="pln"> </span><span class="str">"9D5D39-0F1F26,D3D3D2-2C2C2D"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">使用色偏二值化识别</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"识别结果："</span><span class="pun">..</span><span class="pln">txt</span><span class="pun">:</span><span class="pln">atrim</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#去除文本中所有的空白字符-stringatrim"><code>string.atrim</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="bvvk"><br></p><ul data-anchor-id="6ew3">
<li><h3 id="屏幕找图-screenfindimage">屏幕找图 (<strong>screen.find_image</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">横坐标,</span><span class="pln"> </span><span class="pun">纵坐标</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_image</span><span class="pun">(图片</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">相似度,</span><span class="pln"> </span><span class="pun">左,</span><span class="pln"> </span><span class="pun">上,</span><span class="pln"> </span><span class="pun">右,</span><span class="pln"> </span><span class="pun">下</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图片 <br>
  <ul><li>字符串型 <br>
  需要找的图片，可以是 png 或是 jpeg 格式的图片数据</li>
  <li>图片对象 <br>
  或是一个图片对象（可参考 <a href="#图片对象模块image">图片对象模块（image）</a>）</li>
  <li>文本型 *1.1.2-1 新增 <br>
  需要找的图片文件路径，如果不是合法路径则会以数据方式解析</li></ul></li>
  <li>相似度 <br>
  整数型，可选参数，需要找的图片的相似度，范围 1~100，默认为 95</li>
  <li>左, 上, 右, 下 <br>
  整数型，可选参数，搜索区域，默认 全屏</li>
  <li>横坐标, 纵坐标 <br>
  整数型，返回找到的图片的左上角坐标，搜索失败返回 -1, -1</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>在屏幕上寻找一个图像的位置，该函数会引用 image.cv 模块 <br>
  <strong>注意：</strong> 如果需要做多分辨率兼容，那么建议是于分辨率最小的设备上截图；大分辨率上的截图会无法在小分辨率设备上找到</p>
</blockquote></li>
<li><p>示例 <br>
<a href="https://apt-pages.xxtouch.com/others/XXTouch%E7%94%B5%E8%84%91%E7%AB%AF%E5%B7%A5%E5%85%B7%E9%9B%86/XXT%20%E5%8F%96%E8%89%B2%E5%99%A8%201.0.12%20Windows%20%E7%89%88.zip" target="_blank">XXT 取色器 1.0.12 Windows 版.zip-51.63MB</a></p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">1</span><span class="pun">（使用</span><span class="pln"> XXT </span><span class="pun">取色器</span><span class="pln"> </span><span class="typ">Shift</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">鼠标左键框选图像上的区域</span><span class="pln"> </span><span class="pun">可直接生成这样的代码）：</span></code></li><li class="L1"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_image</span><span class="pun">(</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">原图位置</span><span class="pln"> </span><span class="pun">左上:</span><span class="pln"> </span><span class="lit">354</span><span class="pun">,</span><span class="pln"> </span><span class="lit">274</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="pun">右下:</span><span class="pln"> </span><span class="lit">358</span><span class="pun">,</span><span class="pln"> </span><span class="lit">284</span></code></li><li class="L2"><code class="language-lua"><span class="str">"\x89\x50\x4e\x47\x0d\x0a\x1a\x0a\x00\x00\x00\x0d\x49\x48\x44\x52\x00\x00\x00\x04\x00\x00\x00\x0a\x08\x02\x00\x00\x00\x1c\x99\x68\x59\x00\x00\x00\x61\x49\x44\x41\x54\x78\xda\x63\x78\xfd\xf4\xda\xff\xff\xff\xff\xfd\xfb\xf7\xed\xcb\x5b\x86\xf7\xaf\x1f\xfc\x87\x01\x86\x2f\x1f\x5f\x02\xa9\xef\xa7\xce\x7c\xdd\xb1\x9b\xe1\xe7\xf7\xcf\x40\xce\xeb\xb2\xea\x7b\xb2\x6a\x0c\x7f\xff\xfe\x01\x72\x9e\x78\x06\x82\x38\x20\xdd\xbf\x7e\xdd\x57\xd4\x82\x72\x7e\xdd\xba\x0d\x64\x41\x39\x08\xd3\x80\x38\x6b\xe3\x7f\x86\x2a\x30\x02\x72\x8c\xa6\x40\x39\x00\xd5\x7b\x5f\x2e\xfd\xba\xd5\x32\x00\x00\x00\x00\x49\x45\x4e\x44\xae\x42\x60\x82"</span></code></li><li class="L3"><code class="language-lua"><span class="pun">,</span><span class="pln"> </span><span class="lit">95</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">639</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1135</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">2</span><span class="pun">：</span></code></li><li class="L6"><code class="language-lua"><span class="pln">img </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">load_file</span><span class="pun">(</span><span class="str">"/User/1.png"</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_image</span><span class="pun">(</span><span class="pln">img</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_image</span><span class="pun">(</span><span class="pln">img</span><span class="pun">,</span><span class="pln"> </span><span class="lit">95</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">4</span><span class="pun">（</span><span class="lit">1.1</span><span class="pun">.</span><span class="lit">2</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">新增）：</span></code></li><li class="L1"><code class="language-lua"><span class="pln">x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_image</span><span class="pun">(</span><span class="str">"/User/1.png"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">95</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">639</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1135</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>说明</strong>：在 Lua 源码中，字符串中 <code>\x</code> 开头，后面跟两位 16 进制数表示以该数字编码的单个字节。例如：<code>\x58</code> 表示 <code>X</code> 这个字符，可打印字符部分参考<a href="https://baike.baidu.com/item/ASCII/309296" target="_blank">《ASCII 编码》</a></p></li>
<li><p>复杂例子</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">从网上下载个小图片（一部分</span><span class="pln"> </span><span class="typ">XXTouch</span><span class="pln"> </span><span class="pun">图标）然后从屏幕上找到它并点击</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">,</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"https://www.xxtouch.com/img/find_image_test.png"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">==</span><span class="pln"> </span><span class="lit">200</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> img </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">load_data</span><span class="pun">(</span><span class="pln">r</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> img </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">find_image</span><span class="pun">(</span><span class="pln">img</span><span class="pun">,</span><span class="pln"> </span><span class="lit">95</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> x</span><span class="pun">~=-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">            touch</span><span class="pun">.</span><span class="pln">tap</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        </span><span class="kwd">else</span></code></li><li class="L9"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"没有在屏幕上找到 XXTouch 图标"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"可能下载到了一个假图片"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"下载失败"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#从数据创建图片对象-imageloaddata"><code>image.load_data</code></a>、<a href="#模拟手指轻触一次屏幕-touchtap"><code>touch.tap</code></a>、<a href="#发起-get-请求-httpget"><code>http.get</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="2k5s"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="dfwo" id="模拟触摸模块touch">模拟触摸模块（touch）</h2><ul data-anchor-id="kw3f">
<li><h3 id="模拟手指轻触一次屏幕-touchtap">! 模拟手指轻触一次屏幕 (<strong>touch.tap</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">tap</span><span class="pun">(横坐标,</span><span class="pln"> </span><span class="pun">纵坐标</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">延迟毫秒,</span><span class="pln"> </span><span class="pun">操作后等待毫秒</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>横坐标, 纵坐标  <br>
  整数型，需要轻触的点于当前旋转坐标系的坐标</li>
  <li>延迟毫秒 <br>
  整数型，可选参数，接触屏幕到离开屏幕之间的间隔时间，单位毫秒，默认 30</li>
  <li>操作后等待毫秒 <br>
  整数型，可选参数，轻触完成之后的等待时间，单位毫秒，默认 0</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>模拟手指轻触一次屏幕指定位置 <br>
  <strong>这个方法可能会让出，在这个方法返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong> <br>
  <strong>注:</strong> 该方法在调用完成之前会占用一个手指 id，手指 id 的数量是有限的（大约 30 个），超出限制再调用 <a href="#模拟手指接触屏幕-touchon">touch.on</a> 或 <a href="#模拟手指轻触一次屏幕-touchtap">touch.tap</a> 会抛出 <code>finger pool overflow</code> 错误，注意不要<strong>同时占用</strong>过多手指 id，及时调用 :off 方法释放手指</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">tap</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">点一下屏幕上</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">这个位置</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">tap</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">在屏幕上的</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">这个位置按下，等待</span><span class="pln"> </span><span class="lit">0.3</span><span class="pln"> </span><span class="pun">秒再抬起</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">tap</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">在屏幕上的</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">这个位置按下，等待</span><span class="pln"> </span><span class="lit">0.3</span><span class="pln"> </span><span class="pun">秒再抬起，再等待</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">秒</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="90fl"><br></p><ul data-anchor-id="ebkg">
<li><h3 id="模拟手指接触屏幕-touchon">模拟手指接触屏幕 (<strong>touch.on</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">触摸事件</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(横坐标,</span><span class="pln"> </span><span class="pun">纵坐标)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>横坐标, 纵坐标 <br>
  整数型，需要接触的点于当前旋转坐标系的坐标</li>
  <li>触摸事件 <br>
  触摸事件对象，通过调用 <a href="#模拟手指接触屏幕-touchon"><code>touch.on</code></a> 函数可以并获得一个用于操控当前触摸的事件对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>模拟手指接触屏幕指定位置，并返回一个用于操纵本次触摸过程的触摸事件对象 <br>
  <strong>注:</strong> 该函数会占用一个手指 id，手指 id 的数量是有限的（大约 30 个），超出限制再调用 <a href="#模拟手指接触屏幕-touchon">touch.on</a> 或 <a href="#模拟手指轻触一次屏幕-touchtap">touch.tap</a> 会抛出 <code>finger pool overflow</code> 错误，注意不要<strong>同时占用</strong>过多手指 id，及时调用 :off 方法释放手指</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">move</span><span class="pun">(</span><span class="lit">200</span><span class="pun">,</span><span class="lit">200</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟一个手指于点</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的位置接触屏幕，然后匀速滑动到点</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> </span><span class="pun">的位置，然后松开</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="5gzv"><br></p><ul data-anchor-id="eqtt">
<li><h3 id="模拟手指在屏幕上移动-move">! 模拟手指在屏幕上移动 (<strong>:move</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">触摸事件</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">触摸事件:</span><span class="pln">move</span><span class="pun">(横坐标,</span><span class="pln"> </span><span class="pun">纵坐标)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>横坐标, 纵坐标 <br>
  整数型，需要移动至的点于当前旋转坐标系的坐标</li>
  <li>触摸事件 <br>
  触摸事件对象，通过调用 <a href="#模拟手指接触屏幕-touchon">touch.on</a> 函数可以获得一个用于操控当前触摸的事件对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>模拟手指从当前位置移动到其它的位置 <br>
  <strong>这个方法可能会让出，在这个方法返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">move</span><span class="pun">(</span><span class="lit">200</span><span class="pun">,</span><span class="lit">200</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟一个手指于点</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的位置接触屏幕，然后匀速滑动到点</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> </span><span class="pun">的位置，然后松开</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="b0le"><br></p><ul data-anchor-id="fig4">
<li><h3 id="模拟手指在屏幕上施加压力-press">! 模拟手指在屏幕上施加压力 (<strong>:press</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">触摸事件</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">触摸事件:</span><span class="pln">press</span><span class="pun">([</span><span class="pln"> </span><span class="pun">压力,</span><span class="pln"> </span><span class="pun">速度</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>压力 <br>
  整数型，可选参数，压力，范围 1~10000，默认 1000</li>
  <li>速度 <br>
  整数型，可选参数，施加压力的速度，范围 1~100，默认 最快速</li>
  <li>触摸事件 <br>
  触摸事件对象，通过调用 <a href="#模拟手指接触屏幕-touchon">touch.on</a> 函数可以获得一个用于操控当前触摸的事件对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>模拟手指在当前位置施加压力，该方法仅能用于支持 3D Touch 的设备 <br>
  <strong>这个方法可能会让出，在这个方法返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">press</span><span class="pun">():</span><span class="pln">off</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟一个手指于点</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的位置接触屏幕，然后用力按下去，然后松手</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">press</span><span class="pun">(</span><span class="lit">2000</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">上面例子改一点压力</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">press</span><span class="pun">(</span><span class="lit">2000</span><span class="pun">,</span><span class="pln"> </span><span class="lit">50</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">上面例子改一点压力，按压速度放慢</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="it3v"><br></p><ul data-anchor-id="br8z">
<li><h3 id="模拟手指离开屏幕-off">模拟手指离开屏幕 (<strong>:off</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">触摸事件:</span><span class="pln">off</span><span class="pun">([</span><span class="pln"> </span><span class="pun">横坐标,</span><span class="pln"> </span><span class="pun">纵坐标</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>横坐标, 纵坐标 <br>
  整数型，可选参数，手指离开屏幕的点于当前旋转坐标系的坐标，默认 当前 te 事件记录的坐标</li>
  <li>触摸事件 <br>
  触摸事件对象，通过调用 <a href="#模拟手指接触屏幕-touchon">touch.on</a> 函数可以获得一个用于操控当前触摸的事件对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>模拟手指从当前位置或指定位置离开屏幕，该方法调用会释放当前触摸事件对象 <br>
  该方法会释放掉 <a href="#模拟手指接触屏幕-touchon">touch.on</a> 返回的触摸事件对象所占用的手指 id</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟一个手指于点</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的位置接触屏幕，然后于当前位置离开屏幕</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">off</span><span class="pun">(</span><span class="lit">105</span><span class="pun">,</span><span class="pln"> </span><span class="lit">95</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟一个手指于点</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的位置接触屏幕，然后于</span><span class="pln"> </span><span class="lit">105</span><span class="pun">,</span><span class="pln"> </span><span class="lit">95</span><span class="pln"> </span><span class="pun">这个位置离开屏幕</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="8bta"><br></p><ul data-anchor-id="5so9">
<li><h3 id="设置触摸事件对象移动步长-steplen">设置触摸事件对象移动步长 (<strong>:step_len</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">触摸事件</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">触摸事件:</span><span class="pln">step_len</span><span class="pun">(步长)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>步长 <br>
  整数型，可选参数，默认为 2</li>
  <li>触摸事件 <br>
  触摸事件对象，通过调用 <a href="#模拟手指接触屏幕-touchon">touch.on</a> 函数可以获得一个用于操控当前触摸的事件对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>设置当前触摸事件对象使用 move 方法滑动的步长</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">step_len</span><span class="pun">(</span><span class="lit">3</span><span class="pun">):</span><span class="pln">step_delay</span><span class="pun">(</span><span class="lit">0.2</span><span class="pun">):</span><span class="pln">move</span><span class="pun">(</span><span class="lit">200</span><span class="pun">,</span><span class="lit">200</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟一个手指于点</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的位置接触屏幕，以步长为</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">、每步延迟为</span><span class="pln"> </span><span class="lit">0.2</span><span class="pln"> </span><span class="pun">毫秒的速度滑动到点</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> </span><span class="pun">的位置离开屏幕</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="yy33"><br></p><ul data-anchor-id="3ma1">
<li><h3 id="设置触摸事件对象移动每步延迟-stepdelay">设置触摸事件对象移动每步延迟 (<strong>:step_delay</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">触摸事件</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">触摸事件:</span><span class="pln">step_delay</span><span class="pun">(每步延迟)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>每步延迟毫秒 <br>
  实数型，可选参数，每步延迟时间，单位毫秒，默认 0.1</li>
  <li>触摸事件 <br>
  触摸事件对象，通过调用 <a href="#模拟手指接触屏幕-touchon">touch.on</a> 函数可以获得一个用于操控当前触摸的事件对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>设置当前触摸事件对象使用 move 方法滑动的每步延迟</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">step_len</span><span class="pun">(</span><span class="lit">3</span><span class="pun">):</span><span class="pln">step_delay</span><span class="pun">(</span><span class="lit">0.2</span><span class="pun">):</span><span class="pln">move</span><span class="pun">(</span><span class="lit">200</span><span class="pun">,</span><span class="lit">200</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟一个手指于点</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的位置接触屏幕，以步长为</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">、每步延迟为</span><span class="pln"> </span><span class="lit">0.2</span><span class="pln"> </span><span class="pun">毫秒的速度滑动到点</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> </span><span class="pun">的位置离开屏幕</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="yo0j"><br></p><ul data-anchor-id="pii4">
<li><h3 id="毫秒级延迟-msleep">! 毫秒级延迟 (<strong>:msleep</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">触摸事件</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">触摸事件:</span><span class="pln">msleep</span><span class="pun">(毫秒数)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>毫秒数 <br>
  实数型，可选参数，延迟时间，单位毫秒，默认 0.1</li>
  <li>触摸事件 <br>
  触摸事件对象，通过调用 <a href="#模拟手指接触屏幕-touchon">touch.on</a> 函数可以获得一个用于操控当前触摸的事件对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>延迟函数，这个函数不会对对象有影响，仅仅起个阻塞当前线程的作用，该方法有个别名 :delay <br>
  <strong>这个方法可能会让出，在这个方法返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">300</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟一个手指于点</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">的位置接触屏幕，等待</span><span class="pln"> </span><span class="lit">300</span><span class="pln"> </span><span class="pun">毫秒，离开屏幕</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="8w57"><br></p><ul data-anchor-id="y7m6">
<li><h3 id="设置触摸圆点显示-touchshowpose">设置触摸圆点显示 (<strong>touch.show_pose</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">show_pose</span><span class="pun">(是否显示)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>是否显示 <br>
  布尔型，true 为显示；false 为不显示</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>设置 touch 模块函数调用时是否显示圆点在屏幕上 <br>
  <strong>打开圆点显示会极大降低 touch 模块函数的效率，并且长时间使用会影响系统稳定性，建议仅用于调试环境</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">show_pose</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">tap</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="v8xp"><br></p><ul data-anchor-id="122x">
<li><h3 id="touch-示例代码">touch 示例代码</h3>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">可以这样：</span></code></li><li class="L1"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">306</span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">):</span><span class="pln">step_len</span><span class="pun">(</span><span class="lit">2</span><span class="pun">):</span><span class="pln">step_delay</span><span class="pun">(</span><span class="lit">0</span><span class="pun">):</span><span class="pln">move</span><span class="pun">(</span><span class="lit">350</span><span class="pun">,</span><span class="pln"> </span><span class="lit">800</span><span class="pun">):</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">上面那个例子也能写成这样：</span></code></li><li class="L4"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">306</span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">)</span><span class="pln">  </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟手指在</span><span class="pln"> </span><span class="lit">306</span><span class="pun">,</span><span class="lit">300</span><span class="pln"> </span><span class="pun">这个坐标点接触屏幕</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">step_len</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">   </span><span class="pun">--</span><span class="pln"> </span><span class="pun">设置移动步长为</span><span class="pln"> </span><span class="lit">2</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">step_delay</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">设置移动每步延迟为</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">move</span><span class="pun">(</span><span class="lit">350</span><span class="pun">,</span><span class="pln"> </span><span class="lit">800</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">以上面两个参数所设置移动到</span><span class="pln"> </span><span class="lit">350</span><span class="pun">,</span><span class="lit">800</span><span class="pln"> </span><span class="pun">这个坐标</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span><span class="pln">   </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等</span><span class="pln"> </span><span class="lit">1000</span><span class="pln"> </span><span class="pun">毫秒（也就是</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">秒）</span></code></li><li class="L9"><code class="language-lua"><span class="pun">:</span><span class="pln">off</span><span class="pun">()</span><span class="pln">             </span><span class="pun">--</span><span class="pln"> </span><span class="pun">手指离开屏幕</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">或是这样：</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> te </span><span class="pun">=</span><span class="pln"> touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">306</span><span class="pun">,</span><span class="lit">300</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">te</span><span class="pun">:</span><span class="pln">step_len</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">te</span><span class="pun">:</span><span class="pln">step_delay</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">te</span><span class="pun">:</span><span class="pln">move</span><span class="pun">(</span><span class="lit">350</span><span class="pun">,</span><span class="pln"> </span><span class="lit">800</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">te</span><span class="pun">:</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">te</span><span class="pun">:</span><span class="pln">off</span><span class="pun">()</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">通常情况下，滑动代码可以写成这样</span></code></li><li class="L0"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">306</span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">move</span><span class="pun">(</span><span class="lit">350</span><span class="pun">,</span><span class="pln"> </span><span class="lit">800</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pun">:</span><span class="pln">off</span><span class="pun">()</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">等效于</span></code></li><li class="L6"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">306</span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">):</span><span class="pln">move</span><span class="pun">(</span><span class="lit">350</span><span class="pun">,</span><span class="pln"> </span><span class="lit">800</span><span class="pun">):</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">也可以这样用于模拟轻触屏幕一次</span></code></li><li class="L9"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">306</span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">):</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">30</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span></code></li></ol></pre></li>
<li><h3 id="精确滑动的实现示例">精确滑动的实现示例</h3>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">快速精确滑动可能需要一些技巧，看下面的例子以及注释</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">125</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">在起始坐标按下</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">step_len</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span><span class="pln">   </span><span class="pun">--</span><span class="pln"> </span><span class="pun">步长设长以便加速滑动</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">move</span><span class="pun">(</span><span class="lit">125</span><span class="pun">,</span><span class="pln"> </span><span class="lit">555</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">快速移动到接近目标位置</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">step_len</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">步长设短缓冲防止惯性</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">move</span><span class="pun">(</span><span class="lit">125</span><span class="pun">,</span><span class="pln"> </span><span class="lit">505</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">慢速移动目标位置</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">delay</span><span class="pun">(</span><span class="lit">100</span><span class="pun">)</span><span class="pln">     </span><span class="pun">--</span><span class="pln"> </span><span class="pun">抬起前等待一段时间</span></code></li><li class="L8"><code class="language-lua"><span class="pun">:</span><span class="pln">off</span><span class="pun">()</span><span class="pln">              </span><span class="pun">--</span><span class="pln"> </span><span class="pun">抬起手指</span></code></li></ol></pre></li>
</ul><hr><p data-anchor-id="67qa"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="p53j" id="模拟按键模块key">模拟按键模块（key）</h2><ul data-anchor-id="0jmq">
<li><h3 id="模拟按一下物理按键-keypress">模拟按一下物理按键 (<strong>key.press</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(按键码)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>按键码 <br>
  文本型，物理按键的按键码，键码在 <a href="#示例及支持的键码列表">示例及支持的键码列表</a> 一节查看</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>模拟按下物理按键然后松开它 <br>
  <strong>与此函数已知的冲突插件：Background Manager</strong></p>
</blockquote></li>
<li><p>示例 <br>
<a href="#示例及支持的键码列表"><code>本章结尾</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="1gin"><br></p><ul data-anchor-id="hmsk">
<li><h3 id="模拟按下物理按键-keydown">模拟按下物理按键 (<strong>key.down</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">down</span><span class="pun">(按键码)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>按键码 <br>
  文本型，物理按键的按键码，键码在 <a href="#示例及支持的键码列表">示例及支持的键码列表</a> 一节查看</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>模拟按下物理按键 <br>
  <strong>注意</strong> 这个函数应当有对应的 <a href="#松开按下的物理按键-keyup"><code>key.up</code></a> 调用，否则在脚本终止之后，会发生按键一直不释放的问题。 <br>
  <strong>与此函数已知的冲突插件：Background Manager</strong></p>
</blockquote></li>
<li><p>示例 <br>
<a href="#示例及支持的键码列表"><code>本章结尾</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="amr8"><br></p><ul data-anchor-id="ga4t">
<li><h3 id="松开按下的物理按键-keyup">松开按下的物理按键 (<strong>key.up</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">up</span><span class="pun">(按键码)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>按键码 <br>
  文本型，物理按键的按键码，键码在 <a href="#示例及支持的键码列表">示例及支持的键码列表</a> 一节查看</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>模拟松开按下物理按键 <br>
  <strong>与此函数已知的冲突插件：Background Manager</strong></p>
</blockquote></li>
<li><p>示例 <br>
<a href="#示例及支持的键码列表"><code>本章结尾</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="2ehq"><br></p><ul data-anchor-id="sgo8">
<li><h3 id="模拟键入文本-keysendtext">模拟键入文本 (<strong>key.send_text</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">send_text</span><span class="pun">(文本</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">每键延迟</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文本 <br>
  文本型，待输入的文字，只能是英文数字和半角字符还有 <code>"\b"</code> <code>"\r"</code> <code>"\t"</code></li>
  <li>每键延迟 <br>
  整数型，输入每次按键延迟，默认没有延迟以设备性能极限输入</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>该函数可用于所有的 input_text 函数都无效的情况下，强行模拟键盘键入 <br>
  亲测可以输入支付宝的支付密码 <br>
  <strong>与此函数已知的冲突插件：Background Manager</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">send_text</span><span class="pun">(</span><span class="str">"AbC12#"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">尽可能快的键入文本</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">send_text</span><span class="pun">(</span><span class="str">"AbC12#"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">每键入一次延迟</span><span class="pln"> </span><span class="lit">0.3</span><span class="pln"> </span><span class="pun">秒</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="w5es"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="qv49" id="示例及支持的键码列表">示例及支持的键码列表</h3><ul data-anchor-id="s5ur">
<li><p>模拟按 HOME 键</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"HOMEBUTTON"</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>模拟长按 HOME 键</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">down</span><span class="pun">(</span><span class="str">"HOMEBUTTON"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">按下</span><span class="pln"> HOME </span><span class="pun">键</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L2"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">up</span><span class="pun">(</span><span class="str">"HOMEBUTTON"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">松开</span><span class="pln"> HOME </span><span class="pun">键</span></code></li></ol></pre></li>
<li><p>模拟双击 HOME 键</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"HOMEBUTTON"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"HOMEBUTTON"</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>模拟按锁屏键（电源键）</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"LOCK"</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>模拟按回车键</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"RETURN"</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>其它模拟</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">下面这个例子是模拟组合键</span><span class="pln"> </span><span class="pun">[</span><span class="pln">command </span><span class="pun">+</span><span class="pln"> v</span><span class="pun">]</span><span class="pln"> </span><span class="pun">粘贴剪贴板的文本（不是</span><span class="pln"> windows </span><span class="pun">上的</span><span class="pln"> control </span><span class="pun">+</span><span class="pln"> v </span><span class="pun">）</span></code></li><li class="L1"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">down</span><span class="pun">(</span><span class="str">"LEFTCOMMAND"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">按下</span><span class="pln"> command </span><span class="pun">键</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">20</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">毫秒</span></code></li><li class="L3"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"V"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">按一下</span><span class="pln"> v </span><span class="pun">键</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">20</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">毫秒</span></code></li><li class="L5"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">up</span><span class="pun">(</span><span class="str">"LEFTCOMMAND"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">松开</span><span class="pln"> command </span><span class="pun">键</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"VOLUMEUP"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">按一下音量</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">键</span></code></li><li class="L8"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"VOLUMEDOWN"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">按一下音量</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">键</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">down</span><span class="pun">(</span><span class="str">"VOLUMEUP"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">按下音量</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">键</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L2"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">up</span><span class="pun">(</span><span class="str">"VOLUMEUP"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">松开音量</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">键</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">down</span><span class="pun">(</span><span class="str">"LOCK"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">按下锁屏键（电源键）</span></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">3000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L6"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">up</span><span class="pun">(</span><span class="str">"LOCK"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">松开锁屏键（电源键）</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"SHOW_HIDE_KEYBOARD"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">按一下[隐藏/显示键盘键]隐藏虚拟键盘</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"SHOW_HIDE_KEYBOARD"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">再按一下[隐藏/显示键盘键]显示虚拟键盘</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">下面这个例子是模拟组合键</span><span class="pln"> </span><span class="pun">[锁屏键</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> HOME</span><span class="pun">键]</span><span class="pln"> </span><span class="pun">实现截屏到相册</span></code></li><li class="L3"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">down</span><span class="pun">(</span><span class="str">"LOCK"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">按下锁屏键（电源键）</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">100</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">毫秒</span></code></li><li class="L5"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"HOMEBUTTON"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">按一下</span><span class="pln"> HOME </span><span class="pun">键</span></code></li><li class="L6"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">100</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">毫秒</span></code></li><li class="L7"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">up</span><span class="pun">(</span><span class="str">"LOCK"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">松开锁屏键（电源键）</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> iOS7</span><span class="pun">、</span><span class="pln">iOS8 </span><span class="pun">切换输入法的组合键</span></code></li><li class="L0"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">down</span><span class="pun">(</span><span class="str">"LEFTCOMMAND"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">50</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">" "</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">50</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">up</span><span class="pun">(</span><span class="str">"LEFTCOMMAND"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> iOS9 </span><span class="pun">切换输入法的组合键</span></code></li><li class="L7"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">down</span><span class="pun">(</span><span class="str">"LEFTCONTROL"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">50</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">"SPACE"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">50</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">up</span><span class="pun">(</span><span class="str">"LEFTCONTROL"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a></p></li>
<li><p>支持的键码列表</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">字母键：</span></code></li><li class="L1"><code class="language-lua"><span class="str">"A"</span><span class="pln"> </span><span class="str">"B"</span><span class="pln"> </span><span class="str">"C"</span><span class="pln"> </span><span class="str">"D"</span><span class="pln"> </span><span class="str">"E"</span><span class="pln"> </span><span class="str">"F"</span><span class="pln"> </span><span class="str">"G"</span><span class="pln"> </span><span class="str">"H"</span><span class="pln"> </span><span class="str">"I"</span><span class="pln"> </span><span class="str">"J"</span><span class="pln"> </span><span class="str">"K"</span><span class="pln"> </span><span class="str">"L"</span><span class="pln"> </span><span class="str">"M"</span><span class="pln"> </span><span class="str">"N"</span><span class="pln"> </span><span class="str">"O"</span><span class="pln"> </span><span class="str">"P"</span><span class="pln"> </span><span class="str">"Q"</span><span class="pln"> </span><span class="str">"R"</span><span class="pln"> </span><span class="str">"S"</span><span class="pln"> </span><span class="str">"T"</span><span class="pln"> </span><span class="str">"U"</span><span class="pln"> </span><span class="str">"V"</span><span class="pln"> </span><span class="str">"W"</span><span class="pln"> </span><span class="str">"X"</span><span class="pln"> </span><span class="str">"Y"</span><span class="pln"> </span><span class="str">"Z"</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">数字键：</span></code></li><li class="L4"><code class="language-lua"><span class="str">"1"</span><span class="pln"> </span><span class="str">"2"</span><span class="pln"> </span><span class="str">"3"</span><span class="pln"> </span><span class="str">"4"</span><span class="pln"> </span><span class="str">"5"</span><span class="pln"> </span><span class="str">"6"</span><span class="pln"> </span><span class="str">"7"</span><span class="pln"> </span><span class="str">"8"</span><span class="pln"> </span><span class="str">"9"</span><span class="pln"> </span><span class="str">"0"</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">功能键：</span></code></li><li class="L7"><code class="language-lua"><span class="str">"F1"</span><span class="pln"> </span><span class="str">"F2"</span><span class="pln"> </span><span class="str">"F3"</span><span class="pln"> </span><span class="str">"F4"</span><span class="pln"> </span><span class="str">"F5"</span><span class="pln"> </span><span class="str">"F6"</span><span class="pln"> </span><span class="str">"F7"</span><span class="pln"> </span><span class="str">"F8"</span><span class="pln"> </span><span class="str">"F9"</span><span class="pln"> </span><span class="str">"F10"</span><span class="pln"> </span><span class="str">"F11"</span><span class="pln"> </span><span class="str">"F12"</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">其它键：</span></code></li><li class="L0"><code class="language-lua"><span class="str">"RETURN"</span><span class="pln">        </span><span class="pun">--&lt;</span><span class="pln"> </span><span class="pun">回车键</span></code></li><li class="L1"><code class="language-lua"><span class="str">"ESCAPE"</span><span class="pln">        </span><span class="pun">--&lt;</span><span class="pln"> ESC</span><span class="pun">键</span></code></li><li class="L2"><code class="language-lua"><span class="str">"BACKSPACE"</span><span class="pln">     </span><span class="pun">--&lt;</span><span class="pln"> </span><span class="pun">退格键</span></code></li><li class="L3"><code class="language-lua"><span class="str">"TAB"</span><span class="pln">           </span><span class="pun">--&lt;</span><span class="pln"> </span><span class="pun">制表符键</span></code></li><li class="L4"><code class="language-lua"><span class="str">"SPACE"</span><span class="pln">         </span><span class="pun">--&lt;</span><span class="pln"> </span><span class="pun">空格键</span></code></li><li class="L5"><code class="language-lua"><span class="str">"HYPHEN"</span><span class="pln">        </span><span class="pun">--&lt;</span><span class="pln"> </span><span class="str">"-"</span><span class="pln"> </span><span class="pun">或</span><span class="pln"> </span><span class="str">"_"</span><span class="pln"> </span><span class="pun">键</span></code></li><li class="L6"><code class="language-lua"><span class="str">"EQUAL"</span><span class="pln">         </span><span class="pun">--&lt;</span><span class="pln"> </span><span class="str">"="</span><span class="pln"> </span><span class="pun">或</span><span class="pln"> </span><span class="str">"+"</span><span class="pln"> </span><span class="pun">键</span></code></li><li class="L7"><code class="language-lua"><span class="str">"BRACKETOPEN"</span><span class="pln">   </span><span class="pun">--&lt;</span><span class="pln"> </span><span class="str">"["</span><span class="pln"> </span><span class="pun">或</span><span class="pln"> </span><span class="str">"{"</span><span class="pln"> </span><span class="pun">键</span></code></li><li class="L8"><code class="language-lua"><span class="str">"BRACKETCLOSE"</span><span class="pln">  </span><span class="pun">--&lt;</span><span class="pln"> </span><span class="str">"]"</span><span class="pln"> </span><span class="pun">或</span><span class="pln"> </span><span class="str">"}"</span><span class="pln"> </span><span class="pun">键</span></code></li><li class="L9"><code class="language-lua"><span class="str">"BACKSLASH"</span><span class="pln">     </span><span class="pun">--&lt;</span><span class="pln"> </span><span class="str">"\" 或 "</span><span class="pun">|</span><span class="str">" 键</span></code></li><li class="L0"><code class="language-lua"><span class="str">"</span><span class="pln">SEMICOLON</span><span class="str">"     --&lt; "</span><span class="pun">;</span><span class="str">" 或 "</span><span class="pun">:</span><span class="str">" 键</span></code></li><li class="L1"><code class="language-lua"><span class="str">"</span><span class="pln">QUOTATION</span><span class="str">"     --&lt; 单引号或双引号键</span></code></li><li class="L2"><code class="language-lua"><span class="str">"</span><span class="pln">ACCENT</span><span class="str">"        --&lt; "`" 或 "~" 键</span></code></li><li class="L3"><code class="language-lua"><span class="str">"COMMA"         --&lt; "," 或 "&lt;" 键</span></code></li><li class="L4"><code class="language-lua"><span class="str">"DOT"           --&lt; "." 或 "&gt;" 键</span></code></li><li class="L5"><code class="language-lua"><span class="str">"SLASH"         --&lt; "/" 或 "?" 键</span></code></li><li class="L6"><code class="language-lua"><span class="str">"CAPSLOCK"      --&lt; 大小写锁定键</span></code></li><li class="L7"><code class="language-lua"><span class="str">"PAUSE"</span></code></li><li class="L8"><code class="language-lua"><span class="str">"INSERT"</span></code></li><li class="L9"><code class="language-lua"><span class="str">"HOME"          --&lt; 这个不完全等于 iOS 设备的 HOME 键</span></code></li><li class="L0"><code class="language-lua"><span class="str">"PAGEUP"</span></code></li><li class="L1"><code class="language-lua"><span class="str">"DELETE"</span></code></li><li class="L2"><code class="language-lua"><span class="str">"END"</span></code></li><li class="L3"><code class="language-lua"><span class="str">"PAGEDOWN"</span></code></li><li class="L4"><code class="language-lua"><span class="str">"RIGHTARROW"    --&lt; 向右箭头键</span></code></li><li class="L5"><code class="language-lua"><span class="str">"LEFTARROW"     --&lt; 向左箭头键</span></code></li><li class="L6"><code class="language-lua"><span class="str">"DOWNARROW"     --&lt; 向下箭头键</span></code></li><li class="L7"><code class="language-lua"><span class="str">"UPARROW"       --&lt; 向上箭头键</span></code></li><li class="L8"><code class="language-lua"><span class="str">"LEFTCONTROL"   --&lt; 左侧 Ctrl 键</span></code></li><li class="L9"><code class="language-lua"><span class="str">"LEFTSHIFT"     --&lt; 左侧 Shift 键</span></code></li><li class="L0"><code class="language-lua"><span class="str">"LEFTALT"       --&lt; 左侧 Alt 键</span></code></li><li class="L1"><code class="language-lua"><span class="str">"LEFTCOMMAND"   --&lt; 左侧 Command 键</span></code></li><li class="L2"><code class="language-lua"><span class="str">"RIGHTCONTROL"  --&lt; 右侧 Ctrl 键</span></code></li><li class="L3"><code class="language-lua"><span class="str">"RIGHTSHIFT"    --&lt; 右侧 Shift 键</span></code></li><li class="L4"><code class="language-lua"><span class="str">"RIGHTALT"      --&lt; 右侧 Alt 键</span></code></li><li class="L5"><code class="language-lua"><span class="str">"RIGHTCOMMAND"  --&lt; 右侧 Command 键</span></code></li><li class="L6"><code class="language-lua"><span class="str">"LOCK"          --&lt; 锁屏键，或电源键</span></code></li><li class="L7"><code class="language-lua"><span class="str">"HOMEBUTTON"    --&lt; 这个才等于 iOS 设备的 HOME 键</span></code></li><li class="L8"><code class="language-lua"><span class="str">"FORWARD"       --&lt; 多媒体下一首</span></code></li><li class="L9"><code class="language-lua"><span class="str">"REWIND"        --&lt; 多媒体上一首</span></code></li><li class="L0"><code class="language-lua"><span class="str">"FORWARD2"      --&lt; 多媒体下一首2</span></code></li><li class="L1"><code class="language-lua"><span class="str">"REWIND2"       --&lt; 多媒体上一首2</span></code></li><li class="L2"><code class="language-lua"><span class="str">"EJECT"</span></code></li><li class="L3"><code class="language-lua"><span class="str">"PLAYPAUSE"     --&lt; 多媒体暂停键</span></code></li><li class="L4"><code class="language-lua"><span class="str">"MUTE"          --&lt; 静音键</span></code></li><li class="L5"><code class="language-lua"><span class="str">"VOLUMEUP"      --&lt; 音量 + 键</span></code></li><li class="L6"><code class="language-lua"><span class="str">"VOLUMEDOWN"    --&lt; 音量 - 键</span></code></li><li class="L7"><code class="language-lua"><span class="str">"SPOTLIGHT"     --&lt; Spotlight 键</span></code></li><li class="L8"><code class="language-lua"><span class="str">"BRIGHTUP"      --&lt; 屏幕亮度 + 键</span></code></li><li class="L9"><code class="language-lua"><span class="str">"BRIGHTDOWN"    --&lt; 屏幕亮度 - 键</span></code></li><li class="L0"><code class="language-lua"><span class="str">"SHOW_HIDE_KEYBOARD" --&lt; 隐藏/显示键盘键</span></code></li></ol></pre></li>
</ul><hr><p data-anchor-id="r49s"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="px7h" id="模拟重力加速计模块accelerometer">模拟重力加速计模块（accelerometer）</h2><ul data-anchor-id="b8dw">
<li><h3 id="模拟加速计数据-accelerometersimulate">模拟加速计数据 (<strong>accelerometer.simulate</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">accelerometer</span><span class="pun">.</span><span class="pln">simulate</span><span class="pun">(横坐标,</span><span class="pln"> </span><span class="pun">纵坐标,</span><span class="pln"> </span><span class="pun">垂直坐标,</span><span class="pln"> </span><span class="pun">附加选项)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>横坐标 <br>
  实数型， x 轴加速度</li>
  <li>纵坐标 <br>
  实数型， y 轴加速度</li>
  <li>垂直坐标 <br>
  实数型， z 轴加速度</li>
  <li>附加选项 <br>
  <ul><li>整数型 <br>
  0 为普通 <br>
  1 为摇晃</li></ul></li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>模拟加速器数据 <br>
  <strong>这个函数不支持 iOS 10 及以上版本操作系统</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">for</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    accelerometer</span><span class="pun">.</span><span class="pln">simulate</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="bdz0"><br></p><ul data-anchor-id="iw27">
<li><h3 id="模拟摇一摇-accelerometershake">模拟摇一摇 (<strong>accelerometer.shake</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">accelerometer</span><span class="pun">.</span><span class="pln">shake</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>对 accelerometer.simulate 的封装，模拟摇一摇手机 <br>
  <strong>这个函数不支持 iOS 10 及以上版本操作系统</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">for</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">摇十下</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    accelerometer</span><span class="pun">.</span><span class="pln">shake</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ninf"><br></p><ul data-anchor-id="etf8">
<li><h3 id="改变当前重力方向为-home-在左-accelerometerrotatehomeonleft">改变当前重力方向为 home 在左 (<strong>accelerometer.rotate_home_on_left</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">accelerometer</span><span class="pun">.</span><span class="pln">rotate_home_on_left</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>对 accelerometer.simulate 的封装 <br>
  如果前台 App 并不支持横屏，那这个调用无效果 <br>
  <strong>这个函数不支持 iOS 10 及以上版本操作系统</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="vg6k"><br></p><ul data-anchor-id="1zzr">
<li><h3 id="改变当前重力方向为-home-在右-accelerometerrotatehomeonright">改变当前重力方向为 home 在右 (<strong>accelerometer.rotate_home_on_right</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">accelerometer</span><span class="pun">.</span><span class="pln">rotate_home_on_right</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>对 accelerometer.simulate 的封装 <br>
  如果前台 App 并不支持横屏，那这个调用无效果 <br>
  <strong>这个函数不支持 iOS 10 及以上版本操作系统</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="se8z"><br></p><ul data-anchor-id="1cfi">
<li><h3 id="改变当前重力方向为-home-在上-accelerometerrotatehomeontop">改变当前重力方向为 home 在上 (<strong>accelerometer.rotate_home_on_top</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">accelerometer</span><span class="pun">.</span><span class="pln">rotate_home_on_top</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>对 accelerometer.simulate 的封装 <br>
  如果前台 App 并不支持竖屏，那这个调用无效果 <br>
  <strong>这个函数不支持 iOS 10 及以上版本操作系统</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="1774"><br></p><ul data-anchor-id="1jmp">
<li><h3 id="改变当前重力方向为-home-在下-accelerometerrotatehomeonbottom">改变当前重力方向为 home 在下 (<strong>accelerometer.rotate_home_on_bottom</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">accelerometer</span><span class="pun">.</span><span class="pln">rotate_home_on_bottom</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>对 accelerometer.simulate 的封装 <br>
  如果前台 App 并不支持竖屏，那这个调用无效果 <br>
  <strong>这个函数不支持 iOS 10 及以上版本操作系统</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="9gxe"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="0zid" id="系统模块sys">系统模块（sys）</h2><ul data-anchor-id="z4zg">
<li><h3 id="显示提示文字-systoast">显示提示文字 (<strong>sys.toast</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(文字内容</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">旋转方向</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文字内容 <br>
  文本型， 代表需要显示的文字</li>
  <li>旋转方向 <br>
  整数型，屏幕旋转方向，可选参数，默认为最后一次调用 <a href="#初始化旋转坐标系-init">screen.init</a> 所设的那个方向 <br>
      有效取值范围： <br>
      <code>0</code> - 竖屏 home 在下 <br>
      <code>1</code> - 横屏 home 在右 <br>
      <code>2</code> - 横屏 home 在左 <br>
      <code>3</code> - 竖屏 home 在上 <br>
      <code>-1</code> - 立刻隐藏 toast</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>在当前旋转坐标系的屏幕下方显示提示文字 <br>
  <strong>该函数是异步进行的，提示文字总计显示时间为 2.8 秒，会影响取色，不会拦截点击</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">显示一个</span><span class="pln"> toast</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"果断 hello world"</span><span class="pun">)</span></code></li></ol></pre>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">实时显示当前日期时间</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"默认长按音量键可停止脚本\n\n"</span><span class="pun">..</span><span class="pln">os</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="str">"%Y年%m月%d日%H点%M分%S秒"</span><span class="pun">),</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">front_orien</span><span class="pun">())</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获取前台应用的画面方向-devicefrontorien"><code>device.front_orien</code></a>、<a href="#osdate-日期格式化相关"><code>os.date</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="9ox3"><br></p><ul data-anchor-id="g69o">
<li><h3 id="弹出系统提示-sysalert">弹出系统提示 (<strong>sys.alert</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">选择</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(文字内容</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">自动消失秒数,</span><span class="pln"> </span><span class="pun">标题,</span><span class="pln"> </span><span class="pun">按钮</span><span class="lit">0</span><span class="pun">标题,</span><span class="pln"> </span><span class="pun">按钮</span><span class="lit">1</span><span class="pun">标题,</span><span class="pln"> </span><span class="pun">按钮</span><span class="lit">2</span><span class="pun">标题</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文字内容 <br>
  文本型， 代表弹出提示内容</li>
  <li>自动消失秒数 <br>
  实数型， 可选参数，代表弹窗自动消失时间，单位秒，设置 <code>0</code> 不自动消失，默认 <code>0</code></li>
  <li>标题 <br>
  文本型， 可选参数，代表弹出提示的标题，默认 <code>"XXT"</code> <br>
  * 1.2-1 版以上默认标题为 <code>"脚本提示"</code></li>
  <li>按钮0（取消按钮）标题 <br>
  文本型， 可选参数，代表弹出提示窗的默认按钮的标题，默认为 <code>"好"</code></li>
  <li>按钮1标题 <br>
  文本型， 可选参数，代表弹出提示窗的额外的第 1 个按钮标题，默认不显示这个按钮</li>
  <li>按钮2标题 <br>
  文本型， 可选参数，代表弹出提示窗的额外的第 2 个按钮标题，默认不显示这个按钮</li>
  <li>选择 <br>
  <ul><li>整数型 <br>
  返回 <code>0</code> 代表选择了 按钮0（取消按钮） <br>
  返回 <code>1</code> 代表选择了 按钮1 <br>
  返回 <code>2</code> 代表选择了 按钮2 <br>
  返回 <code>3</code> 代表超时自动消失 <br>
  返回 <code>71</code> 代表春板（SpringBoard）挂了</li></ul></li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>弹出一个系统提示对话框，最多可以有 3 个按钮，阻塞所有线程等待返回</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> choice </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'你现在将要干啥？'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="str">'你的选择'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'取消'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'吃饭'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'睡觉'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> choice</span><span class="pun">==</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'你选择‘取消’'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">elseif choice</span><span class="pun">==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'你选择‘吃饭’'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">elseif choice</span><span class="pun">==</span><span class="lit">2</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'你选择‘睡觉’'</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">elseif choice</span><span class="pun">==</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'你没有选择，超时了'</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'春板挂了'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="nxxm"><br></p><ul data-anchor-id="ga8a">
<li><h3 id="弹出输入提示-sysinputbox">弹出输入提示 (<strong>sys.input_box</strong>)</h3>

<ul><li><p>说明</p>

<blockquote class="white-blockquote">
  <p>弹出一个系统输入对话框，最多可以有 3 个按钮，2 个文本框，阻塞所有线程等待返回 <br>
  标题默认为 <code>"XXT"</code> <br>
  * 1.2-1 版以上默认标题为 <code>"脚本提示"</code></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">输入的内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"描述内容"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pun">输入的内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"这是描述内容"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pun">输入的内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"这是描述内容"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pun">输入的内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"描述内容"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框阴影提示"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pun">输入的内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"描述内容"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框阴影提示"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框里面的内容"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pun">输入的内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"描述内容"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框阴影提示"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框里面的内容"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"默认按钮标题"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pun">输入的内容,</span><span class="pln"> </span><span class="pun">做出的选择</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"描述内容"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框阴影提示"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框里面的内容"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"默认按钮标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"按钮1标题"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pun">输入的内容,</span><span class="pln"> </span><span class="pun">做出的选择</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"描述内容"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框阴影提示"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框里面的内容"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"默认按钮标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"按钮1标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"按钮2标题"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pun">输入的内容</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">输入的内容</span><span class="lit">2</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"描述内容"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">"文本框1阴影提示"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框2阴影提示"</span><span class="pun">},</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pun">输入的内容</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">输入的内容</span><span class="lit">2</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"描述内容"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">"文本框1阴影提示"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框2阴影提示"</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="str">"文本框1里面的内容"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框2里面的内容"</span><span class="pun">},</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pun">输入的内容</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">输入的内容</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">做出的选择</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">input_box</span><span class="pun">(</span><span class="str">"标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"描述内容"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">"文本框1阴影提示"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框2阴影提示"</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="str">"文本框1里面的内容"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"文本框2里面的内容"</span><span class="pun">},</span><span class="pln"> </span><span class="str">"默认按钮标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"按钮1标题"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"按钮2标题"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="tjvy"><br></p><ul data-anchor-id="1uuo">
<li><h3 id="输入文字-sysinputtext">输入文字 (<strong>sys.input_text</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">input_text</span><span class="pun">(文字内容</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">输入完成按回车</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文字内容 <br>
  文本型，需要输入的文字，<strong>不支持</strong> <code>"\b"</code> (退格键）</li>
  <li>输入完成按回车 <br>
  布尔型，是否在输入完毕后按下键盘上的回车键（发送、搜索等），默认 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>在前台程序的可以输入文本的地方输入文字 <br>
  该函数原理为先将文本写入剪贴板，然后调用粘贴快捷键（<strong>command + v</strong>）粘贴文本 <br>
  <strong>该函数的调用会影响公共剪贴板，请注意在调用之前备份好剪贴板中的重要数据</strong> <br>
  <strong>在系统公共剪贴板损坏的情况下，该函数的文字输入会失效。也就是不能复制粘贴文字，就不能用</strong> <br>
  <strong>与此函数已知的冲突插件：Background Manager</strong> <br>
  如果遇到无法作用的情况可以参考 <a href="#输入文字-appinputtext"><code>app.input_text</code></a> 或许能解决</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">input_text</span><span class="pun">(</span><span class="str">"我爱你"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">在当前光标所在文本框输入“我爱你”</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">input_text</span><span class="pun">(</span><span class="str">"我爱你"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">在</span><span class="pln">QQ</span><span class="pun">聊天界面输入“我爱你”然后按下回车发送出去</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="q2ck"><br></p><ul data-anchor-id="m2z9">
<li><h3 id="毫秒级延迟-sysmsleep">! 毫秒级延迟 (<strong>sys.msleep</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(毫秒数)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>毫秒数 <br>
  实数型， 需要延迟等待的时间，单位毫秒</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>让当前线程阻塞等待一定时间 <br>
  <strong>这个方法可能会让出，在这个方法返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">秒</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="kloe"><br></p><ul data-anchor-id="hjiw">
<li><h3 id="获取当前毫秒级时间戳-sysmtime">获取当前毫秒级时间戳 (<strong>sys.mtime</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">时间戳</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">mtime</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>时间戳 <br>
  整数型， 返回毫秒级 UNIX 时间戳</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> ms </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">mtime</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">keep</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'一次 screen.keep 耗时：'</span><span class="pun">..</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">mtime</span><span class="pun">()-</span><span class="pln">ms</span><span class="pun">..</span><span class="str">'毫秒'</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#保持屏幕-screenkeep"><code>screen.keep</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="6ro1"><br></p><ul data-anchor-id="q0ph">
<li><h3 id="获取网络时间-sysnettime">! 获取网络时间 (<strong>sys.net_time</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">秒级时间戳</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">net_time</span><span class="pun">([</span><span class="pln"> </span><span class="pun">超时时间</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>超时时间 <br>
  实数型，可选参数，用于设置获取网络时间联网的最大等待时间（单位：秒），默认 2</li>
  <li>秒级时间戳 <br>
  整数型， 成功则返回当前网络时间的秒级 UNIX 时间戳，连接超时或未能成功获取网络时间返回 0</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法可能会让出，在这个方法返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> nt </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">net_time</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">获取网络时间，默认</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">秒超时，超时返回</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> nt </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">net_time</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">获取网络时间，</span><span class="lit">5</span><span class="pln"> </span><span class="pun">秒超时，超时返回</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">if</span><span class="pln"> nt</span><span class="pun">==</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'获取网络时间失败'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">os</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="str">'当前网络时间\n%Y-%m-%d %H:%M:%S'</span><span class="pun">,</span><span class="pln"> nt</span><span class="pun">))</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了 <a href="#osdate-日期格式化相关">os.date 日期格式化相关</a></p></li></ul></li>
</ul><hr><p data-anchor-id="i8we"><br></p><ul data-anchor-id="jo80">
<li><h3 id="产生一个随机数-sysrnd">产生一个随机数 (<strong>sys.rnd</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">随机数字</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">rnd</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>随机数字 <br>
  整数型，返回一个随机数字，范围 0~4294967295</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>产生一个真随机数</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">math</span><span class="pun">.</span><span class="pln">randomseed</span><span class="pun">(</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">rnd</span><span class="pun">())</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">初始化随机因子为一个真随机数</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> math</span><span class="pun">.</span><span class="pln">random</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">产生一个</span><span class="pln"> </span><span class="lit">1</span><span class="pun">~</span><span class="lit">100</span><span class="pln"> </span><span class="pun">范围的随机数</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="kuhp"><br></p><ul data-anchor-id="reg2">
<li><h3 id="获取设备当前内存状态信息-sysmemoryinfo">获取设备当前内存状态信息 (<strong>sys.memory_info</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">内存状态</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">memory_info</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>内存状态 <br>
  表型，返回的内存状态信息，里面的 key - value 对应自己理解吧</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">(</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">memory_info</span><span class="pun">()))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#深打印一个表-tabledeepprint"><code>table.deep_print</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="kds7"><br></p><ul data-anchor-id="ldvv">
<li><h3 id="获取设备当前可用内存值-sysavailablememory">获取设备当前可用内存值 (<strong>sys.available_memory</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">可用内存</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">available_memory</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>可用内存 <br>
  实数型，返回当前设备的空闲内存值（单位：MB）</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'当前可用内存为：'</span><span class="pun">..</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">available_memory</span><span class="pun">()..</span><span class="str">'MB'</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="mkuk"><br></p><ul data-anchor-id="l1px">
<li><h3 id="获取设备当前未使用的存储空间值-sysfreediskspace">获取设备当前未使用的存储空间值 (<strong>sys.free_disk_space</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">剩余空间</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">free_disk_space</span><span class="pun">([挂载点])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>挂载点 <br>
  文本型，默认有效取值范围为 <code>"/var"</code> 或是 <code>"/"</code>，分别代表用户空间和系统空间。有外部存储比如内存卡的时候可以有其它值</li>
  <li>剩余空间 <br>
  实数型，返回设备当前未使用的存储空间值（单位：MB）</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="str">'当前系统空间剩余\n'</span><span class="pun">..</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">free_disk_space</span><span class="pun">(</span><span class="str">'/'</span><span class="pun">)..</span><span class="str">'MB\n\n'</span><span class="pun">..</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="str">'当前用户空间剩余\n'</span><span class="pun">..</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">free_disk_space</span><span class="pun">(</span><span class="str">'/var'</span><span class="pun">)..</span><span class="str">'MB'</span></code></li><li class="L3"><code class="language-lua"><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="8erz"><br></p><ul data-anchor-id="ramy">
<li><h3 id="输出标准系统日志-syslog">输出标准系统日志 (<strong>sys.log</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(日志内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>日志内容 <br>
  文本型，代表需要输出的日志内容</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>输出标准系统日志 <br>
  日志可以使用电脑浏览器打开远程接口 <strong>http://&lt;设备IP地址&gt;:46952/log.html</strong> 实时查看 <br>
  日志会同时存储到设备上的 <strong>/var/mobile/Meida/1ferver/log/sys.log</strong> 文件中 <br>
  <strong>/var/mobile/Meida/1ferver/log/sys.log</strong> 记录的日志最多不会超过 4000 行，超过则删前面的</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"当然是 Hello World 啦"</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="or1k"><br></p><ul data-anchor-id="5dbh">
<li><h3 id="问系统一个问题-sysmgcopyanswer">问系统一个问题 (<strong>sys.mgcopyanswer</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">答案</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">mgcopyanswer</span><span class="pun">(问题)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>问题 <br>
  文本型，问题名字，一些 问题名字 参考 <a href="https://github.com/Cykey/ios-reversed-headers/blob/master/MobileGestalt/MobileGestalt.h" target="_blank">MobileGestalt.h</a></li>
  <li>答案 <br>
  字符串型 或 表型 或 实数型 或 整数型 或 布尔型 或 nil，系统的回复，如果问题不被支持，则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.1.2-1 版以上方可使用</strong> <br>
  获取一些系统信息，底层使用 MGCopyAnswer 完成 <br>
  获取系统信息 读取系统信息 获取设备信息 读取设备信息 设备标识</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"设备的序列号是："</span><span class="pun">..</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">mgcopyanswer</span><span class="pun">(</span><span class="str">"SerialNumber"</span><span class="pun">))</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"设备的 IMEI 是："</span><span class="pun">..</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">mgcopyanswer</span><span class="pun">(</span><span class="str">"InternationalMobileEquipmentIdentity"</span><span class="pun">))</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"设备的 MEID 是："</span><span class="pun">..</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">mgcopyanswer</span><span class="pun">(</span><span class="str">"MobileEquipmentIdentifier"</span><span class="pun">))</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="kwd">local</span><span class="pln"> infos </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">mgcopyanswer</span><span class="pun">(</span><span class="str">'CarrierBundleInfoArray'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">if</span><span class="pln"> type</span><span class="pun">(</span><span class="pln">infos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'table'</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> info </span><span class="pun">=</span><span class="pln"> infos</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="com">#infos &gt; 0 and</span></code></li><li class="L8"><code class="language-lua"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> type</span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="typ">InternationalMobileSubscriberIdentity</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'string'</span><span class="pln"> andthen</span></code></li><li class="L9"><code class="language-lua"><span class="pln">       type</span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="typ">IntegratedCircuitCardIdentity</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'string'</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"运营商 IMSI 是："</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="typ">InternationalMobileSubscriberIdentity</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"无法读取运营商 IMSI，或许你应该插入一张 SIM 卡"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="str">"IMSI："</span><span class="pun">..</span><span class="kwd">if</span><span class="pln"> type</span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="typ">InternationalMobileSubscriberIdentity</span><span class="pun">..</span><span class="str">"\n"</span><span class="pun">..</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            </span><span class="str">"ICCID："</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="typ">IntegratedCircuitCardIdentity</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'string'</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"运营商 IMSI 是："</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="typ">InternationalMobileSubscriberIdentity</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"无法读取运营商 IMSI、ICCID，或许你应该给设备插入一张正常的 SIM 卡"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"无法读取运营商信息，或许你应该给设备插入一张正常的 SIM 卡"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="0b3w"><br></p><ul data-anchor-id="7b81">
<li><h3 id="获取系统版本-sysversion">获取系统版本 (<strong>sys.version</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">系统版本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">version</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>系统版本 <br>
  文本型，返回系统版本号</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>这个函数可以在 XUI 中使用</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'当前系统版本：'</span><span class="pun">..</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">version</span><span class="pun">())</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="hq6x"><br></p><ul data-anchor-id="ggca">
<li><h3 id="获取-xxtouch-版本-sysxtversion">获取 XXTouch 版本 (<strong>sys.xtversion</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">版本号</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">xtversion</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>版本号 <br>
  文本型，返回 XXTouch 版本号</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>这个函数可以在 XUI 中使用</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'当前 XXTouch 版本：'</span><span class="pun">..</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">xtversion</span><span class="pun">())</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="8ofr"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="2tpq" id="剪贴板模块pasteboard">剪贴板模块（pasteboard）</h2><ul data-anchor-id="3euj">
<li><h3 id="写内容进剪贴板-pasteboardwrite">写内容进剪贴板 (<strong>pasteboard.write</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">pasteboard</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(数据</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">通用类型标识</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>数据 <br>
  字符串型，需要写入到剪贴板的内容</li>
  <li>通用类型标识 <br>
  文本型，可选参数，<a href="https://developer.apple.com/library/ios/documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html" target="_blank">Uniform Type Identifiers</a>，默认 "public.utf8-plain-text"</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>写内容进系统剪贴板 <br>
  （关键字：粘贴板 复制板 写入剪贴板 写入剪切板 更改剪切板 写入粘贴板 更改粘贴板 写入黏贴板 更改黏贴板）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">pasteboard</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="str">"演示啊"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">将“演示啊”（不含引号）写入到剪贴板中</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">pasteboard</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">():</span><span class="pln">png_data</span><span class="pun">(),</span><span class="pln"> </span><span class="str">'public.png'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">将当前屏幕截图写入到剪贴板</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获取屏幕图像-screenimage"><code>screen.image</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ardi"><br></p><ul data-anchor-id="alrw">
<li><h3 id="获取剪贴板中的数据-pasteboardread">获取剪贴板中的数据 (<strong>pasteboard.read</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">数据</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> pasteboard</span><span class="pun">.</span><span class="pln">read</span><span class="pun">([</span><span class="pln"> </span><span class="pun">通用类型标识</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>通用类型标识 <br>
  文本型，可选参数，<a href="https://developer.apple.com/library/ios/documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html" target="_blank">Uniform Type Identifiers</a>，默认 自动判断格式 <br>
  存在 <strong>通用类型标识</strong> 参数的情况下，会强制以该 <strong>通用类型标识</strong> 格式读取剪贴板中数据，若是剪贴板中数据无法以该 <strong>通用类型标识</strong> 读取，则返回空字符串</li>
  <li>数据 <br>
  字符串型，返回剪贴板中的数据，可能是文本，也可能是二进制数据，如果不能以该方式读取，则返回 <code>""</code>（空文本）</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>从系统剪贴板中读取内容 <br>
  （关键字：粘贴板 复制板 读取剪贴板 读取剪切板 获取剪切板 读取黏贴板 获取黏贴板）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"剪贴板中的内容："</span><span class="pun">..</span><span class="pln">pasteboard</span><span class="pun">.</span><span class="pln">read</span><span class="pun">())</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"剪贴板中的内容："</span><span class="pun">..</span><span class="pln">pasteboard</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="str">'public.text'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">富文本也强行以文本方式读取剪贴板</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="28qi"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="m3ts" id="对话框模块dialog">对话框模块（dialog）</h2><ul data-anchor-id="sqb9">
<li><h3 id="建立一个对话框对象-dialog">! 建立一个对话框对象 (<strong>dialog</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> dialog</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>对话框对象 <br>
  对话框，返回一个对话框对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>建立一个对话框对象 <br>
  <strong>注意</strong> 这个函数没有参数，<strong>请不要</strong> 给任何参数，带参数调用是弹出一个弹窗，声明如下</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">dialog</span><span class="pun">(弹窗内容:文本型,</span><span class="pln"> </span><span class="pun">超时秒:实数型)</span></code></li></ol></pre>
  
  <p>例如</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">dialog</span><span class="pun">(</span><span class="str">'Hello, XXTouch!'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">)</span></code></li></ol></pre>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">dialog</span><span class="pun">():</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>完整示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="rehg"><br></p><ul data-anchor-id="hmtr">
<li><h3 id="配置对话框配置保存文件名-config">配置对话框配置保存文件名 (<strong>:config</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">config</span><span class="pun">(配置名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>配置名 <br>
  文本型，配置对话框对象的选项配置保存名</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>对话框显示出来，并且用户按下 <strong>提交</strong> 后会保存配置选项，再次显示出来的时候默认选上保存好的配置 <br>
  配置将以文件形式保存在 /private/var/mobile/Media/1ferver/uicfg/<strong>&lt;配置名&gt;</strong>.xcfg</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">dialog</span><span class="pun">():</span><span class="pln">config</span><span class="pun">(</span><span class="str">'配置名'</span><span class="pun">):</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>完整示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="imnr"><br></p><ul data-anchor-id="k0hy">
<li><h3 id="配置对话框配置保存文件名-setconfig">配置对话框配置保存文件名 (<strong>:set_config</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">set_config</span><span class="pun">(配置名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>配置名 <br>
  文本型，配置对话框对象的选项配置保存名</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.2-1 版以上方可使用</strong> <br>
  对话框显示出来，并且用户按下 <strong>提交</strong> 后会保存配置选项，再次显示出来的时候默认选上保存好的配置 <br>
  配置将以文件形式保存在 /private/var/mobile/Media/1ferver/uicfg/<strong>&lt;配置名&gt;</strong>.xcfg <br>
  与旧版 :config 方法等效</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">dialog</span><span class="pun">():</span><span class="pln">set_config</span><span class="pun">(</span><span class="str">'配置名'</span><span class="pun">):</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>完整示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="gjus"><br></p><ul data-anchor-id="che9">
<li><h3 id="配置对话框自动消失时间-timeout">配置对话框自动消失时间 (<strong>:timeout</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">timeout</span><span class="pun">(超时秒[,</span><span class="pln"> </span><span class="pun">是否提交])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>超时秒 <br>
  实数型，对话框对象自动消失时间，单位秒</li>
  <li>是否提交 * 1.2-1 新增 <br>
  布尔型，可选参数，对话框自动消失是否算提交，true 为是，false 为否，默认 false 超时算不提交</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>配置对话框自动消失时间</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">dialog</span><span class="pun">():</span><span class="pln">timeout</span><span class="pun">(</span><span class="lit">3</span><span class="pun">):</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>完整示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="0ttm"><br></p><ul data-anchor-id="bu81">
<li><h3 id="配置对话框自动消失时间-settimeout">配置对话框自动消失时间 (<strong>:set_timeout</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">set_timeout</span><span class="pun">(超时秒[,</span><span class="pln"> </span><span class="pun">是否提交])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>超时秒 <br>
  实数型，对话框对象自动消失时间，单位秒</li>
  <li>是否提交 <br>
  布尔型，可选参数，对话框自动消失是否算提交，true 为是，false 为否，默认 false 超时算不提交</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.2-1 版以上方可使用</strong> <br>
  配置对话框自动消失时间，与旧版 :timeout 方法等效</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">dialog</span><span class="pun">():</span><span class="pln">set_timeout</span><span class="pun">(</span><span class="lit">3</span><span class="pun">):</span><span class="pln">show</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">秒超时取消提交</span></code></li><li class="L2"><code class="language-lua"><span class="pun">--</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pln">dialog</span><span class="pun">():</span><span class="pln">set_timeout</span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">):</span><span class="pln">show</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">秒超时并提交</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="jw88"><br></p><ul data-anchor-id="suwo">
<li><h3 id="配置对话框的标题-title">配置对话框的标题 (<strong>:title</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">title</span><span class="pun">(标题文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>标题文本 <br>
  文本型，对话框的标题</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>配置对话框的标题</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">dialog</span><span class="pun">():</span><span class="pln">title</span><span class="pun">(</span><span class="str">'标题'</span><span class="pun">):</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>完整示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="li7c"><br></p><ul data-anchor-id="8ezm">
<li><h3 id="配置对话框的标题-settitle">配置对话框的标题 (<strong>:set_title</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">set_title</span><span class="pun">(标题文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>标题文本 <br>
  文本型，对话框的标题</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.2-1 版以上方可使用</strong> <br>
  配置对话框的标题，与旧版 :title 方法等效</p>
</blockquote></li></ul></li>
</ul><hr><p data-anchor-id="utkl"><br></p><ul data-anchor-id="6jhp">
<li><h3 id="配置对话框的尺寸-setsize">配置对话框的尺寸 (<strong>:set_size</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">set_size</span><span class="pun">(宽度,</span><span class="pln"> </span><span class="pun">高度)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>宽度, 高度 <br>
  整数型，对话框对象宽高，如果不设置默认是全屏宽高</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.2-1 版以上方可使用</strong> <br>
  设置对话框的尺寸，如果对话框不是全屏，则会居中于屏幕，并使用半径为 10 的圆角</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> dlg </span><span class="pun">=</span><span class="pln"> dialog</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">set_size</span><span class="pun">(</span><span class="lit">600</span><span class="pun">,</span><span class="pln"> </span><span class="lit">800</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="z4k1"><br></p><ul data-anchor-id="d2lz">
<li><h3 id="配置对话框的位置及尺寸-setframe">配置对话框的位置及尺寸 (<strong>:set_frame</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">set_frame</span><span class="pun">(横坐标,</span><span class="pln"> </span><span class="pun">纵坐标,</span><span class="pln"> </span><span class="pun">宽度,</span><span class="pln"> </span><span class="pun">高度)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>横坐标, 纵坐标 <br>
  整数型，对话框对象左上角位置的横坐标及纵坐标</li>
  <li>宽度, 高度 <br>
  整数型，对话框对象宽高，如果不设置默认是全屏宽高</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.2-1 版以上方可使用</strong> <br>
  配置对话框的位置及尺寸，使用方角</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> dlg </span><span class="pun">=</span><span class="pln"> dialog</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">set_frame</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">600</span><span class="pun">,</span><span class="pln"> </span><span class="lit">800</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="d512"><br></p><ul data-anchor-id="fqho">
<li><h3 id="配置对话框的圆角半径-setcornerradius">配置对话框的圆角半径 (<strong>:set_corner_radius</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">set_corner_radius</span><span class="pun">(圆角半径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>圆弧半径 <br>
  整数型，圆角半径，0 为方角</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.2-1 版以上方可使用</strong> <br>
  配置对话框的圆角半径，需要使用圆角对话框的时候可以派上用场</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> dlg </span><span class="pun">=</span><span class="pln"> dialog</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">set_frame</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">600</span><span class="pun">,</span><span class="pln"> </span><span class="lit">800</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">set_corner_radius</span><span class="pun">(</span><span class="lit">50</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="3lzq"><br></p><ul data-anchor-id="7rjo">
<li><h3 id="给对话框加上一个文本标签-addlabel">给对话框加上一个文本标签 (<strong>:add_label</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">add_label</span><span class="pun">(标签内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>标签内容 <br>
  文本型，标签显示的文本</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>给对话框加上一个文本标签</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">dialog</span><span class="pun">():</span><span class="pln">add_label</span><span class="pun">(</span><span class="str">'一个文本标签'</span><span class="pun">):</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>完整示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="xefg"><br></p><ul data-anchor-id="xk2r">
<li><h3 id="给对话框加上一个文本输入框-addinput">给对话框加上一个文本输入框 (<strong>:add_input</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">add_input</span><span class="pun">(输入框标签</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">输入框默认内容</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>输入框标签 <br>
  文本型，文本框左侧标签显示的文本</li>
  <li>输入框默认内容 <br>
  文本型 或 实数型，文本框中的默认值</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li>
  <li>使用 :show() 返回类型 <br>
  文本型，返回输入的内容</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>给对话框加上一个文本输入框</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> dialog</span><span class="pun">():</span><span class="pln">add_input</span><span class="pun">(</span><span class="str">'一个输入框'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'默认内容'</span><span class="pun">):</span><span class="pln">show</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'输入的内容是：'</span><span class="pun">..</span><span class="pln">s</span><span class="pun">[</span><span class="str">'一个输入框'</span><span class="pun">])</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><p>完整示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="q5pw"><br></p><ul data-anchor-id="wlqh">
<li><h3 id="给对话框加上一个图片-addimage">给对话框加上一个图片 (<strong>:add_image</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">add_image</span><span class="pun">(图片)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图片 <br>
  图片对象，需要添加到对话框的图片</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.1.0-1 版以上方可使用</strong> <br>
  给对话框加上一个图片</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="65zd"><br></p><ul data-anchor-id="ihvk">
<li><h3 id="给对话框加上一个开关-addswitch">给对话框加上一个开关 (<strong>:add_switch</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">add_switch</span><span class="pun">(开关标签</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">开关默认状态</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>开关标签 <br>
  文本型，开关左侧标签显示的文本</li>
  <li>开关默认状态 <br>
  布尔型，可选参数，开关的开启状态，默认 false （关）</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li>
  <li>使用 :show() 返回类型 <br>
  布尔型，返回这个开关被开启的状态</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>给对话框加上一个开关</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="mjd3"><br></p><ul data-anchor-id="2cz3">
<li><h3 id="给对话框加上一个选择器-addpicker">给对话框加上一个选择器 (<strong>:add_picker</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">add_picker</span><span class="pun">(选择器标签,</span><span class="pln"> </span><span class="pun">选择器的选项们</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">默认选择</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>选择器标签 <br>
  文本型，选择器左侧标签显示的文本</li>
  <li>选择器的选项们 <br>
  表型，选择器中的顺序选项名列表，不能有一样的</li>
  <li>默认选择 <br>
  文本型，可选参数，选择器的默认选项名，默认为第一个</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li>
  <li>使用 :show() 返回类型 <br>
  文本型，返回被选择的选项名</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>给对话框加上一个选择器</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="exnm"><br></p><ul data-anchor-id="ikcd">
<li><h3 id="给对话框加上一个单选组-addradio">给对话框加上一个单选组 (<strong>:add_radio</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">add_radio</span><span class="pun">(单选组标签,</span><span class="pln"> </span><span class="pun">单选组选项们</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">默认选择</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>单选组标签 <br>
  文本型，单选组标题标签显示的文本</li>
  <li>单选组选项们 <br>
  表型，单选组中的顺序选项名列表，不能有一样的</li>
  <li>默认选择 <br>
  文本型，可选参数，被选中的选项名，默认为 单选组选项们 中第一项</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li>
  <li>使用 :show() 返回类型 <br>
  文本型，返回被选中的选项名</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.1.1-1 版以上方可使用</strong> <br>
  给对话框加上一个单选组</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="jaih"><br></p><ul data-anchor-id="amsq">
<li><h3 id="给对话框加上一个多选组-addcheckbox">给对话框加上一个多选组 (<strong>:add_checkbox</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">add_checkbox</span><span class="pun">(多选组标签,</span><span class="pln"> </span><span class="pun">多选组选项们</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">默认选择们</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>多选组标签 <br>
  文本型，多选组标题标签显示的文本</li>
  <li>多选组选项们 <br>
  表型，多选组中的顺序选项名列表，不能有一样的</li>
  <li>默认选择们 <br>
  表型，可选参数，多选组的默认选项名列表，默认为 空表</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li>
  <li>使用 :show() 返回类型 <br>
  表型，返回所有包含所有被选择的选项的一个顺序表</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>给对话框加上一个多选组</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="dkk1"><br></p><ul data-anchor-id="zk2q">
<li><h3 id="给对话框加上一个数值选择器-addrange">给对话框加上一个数值选择器 (<strong>:add_range</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">对话框对象</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">add_range</span><span class="pun">(范围选择器标签,</span><span class="pln"> </span><span class="pun">范围选择器参数</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">默认位置</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>范围选择器标签 <br>
  文本型，数值选择器标题标签显示的文本</li>
  <li>范围选择器参数 <br>
  表型，用于描述范围以及步进的一个表，格式为 {最小值, 最大值, 步进值} <br>
  <ul><li>最小值 <br>
  实数型，为数值选择条最左边的位置</li>
  <li>最大值 <br>
  实数型，为数值选择条最右边的位置</li>
  <li>步进值 <br>
  实数型，可选参数，为选择条拖动的最小单位，默认为 1</li></ul></li>
  <li>默认位置 <br>
  实数型，可选参数，默认值，默认为最小值</li>
  <li>对话框对象 <br>
  对话框，返回对话框本身</li>
  <li>使用 :show() 返回类型 <br>
  实数型，返回所选择的数字</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.1.1-1 版以上方可使用</strong> <br>
  给对话框加上一个数值选择器</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#将对话框弹出来并返回用户的选择-show"><code>本章结尾 :show()</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="bqra"><br></p><ul data-anchor-id="c4h6">
<li><h3 id="将对话框弹出来并返回用户的选择-show">! 将对话框弹出来并返回用户的选择 (<strong>:show</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否提交,</span><span class="pln"> </span><span class="pun">选项关联表</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>对话框对象 <br>
  对话框，需要弹出的对话框</li>
  <li>是否提交 <br>
  布尔型，返回是否按下了提交按钮，超时或点右上角叉返回 false</li>
  <li>选项关联表 <br>
  表型，返回一个以选项标签映射的键值表</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.1.1-1 版以上方可使用</strong> <br>
  将对话框弹出来并返回用户的选择 <br>
  当对话框设置了配置保存（:config(配置名)）的情况下，按下 <strong>提交</strong> 会保存配置，按下右上的 <strong>×</strong> 或超时则不会保存</p>
</blockquote></li>
<li><p>简单示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> dialog</span><span class="pun">():</span><span class="pln">add_switch</span><span class="pun">(</span><span class="str">'一个开关'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">):</span><span class="pln">show</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">s</span><span class="pun">[</span><span class="str">"一个开关"</span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>复杂示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> dlg </span><span class="pun">=</span><span class="pln"> dialog</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">创建一个</span><span class="pln"> dialog </span><span class="pun">对象</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">以下为此</span><span class="pln"> dialog </span><span class="pun">对象配置</span></code></li><li class="L3"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">config</span><span class="pun">(</span><span class="str">'test'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">配置保存</span><span class="pln">ID</span></code></li><li class="L4"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">timeout</span><span class="pun">(</span><span class="lit">30</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_label</span><span class="pun">(</span><span class="str">'简易的效果展示'</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_range</span><span class="pun">(</span><span class="str">'血量'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">},</span><span class="pln"> </span><span class="lit">300</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_input</span><span class="pun">(</span><span class="str">'账号'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'ccc'</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_input</span><span class="pun">(</span><span class="str">'密码'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'aaaa'</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_picker</span><span class="pun">(</span><span class="str">'性别'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">'男'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'女'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'未知'</span><span class="pun">},</span><span class="pln"> </span><span class="str">'男'</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_switch</span><span class="pun">(</span><span class="str">'你是变态?'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_checkbox</span><span class="pun">(</span><span class="str">'喜欢的游戏'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">'守望先锋'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'魔兽世界'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'炉石传说'</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="str">'守望先锋'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'魔兽世界'</span><span class="pun">})</span></code></li><li class="L2"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_radio</span><span class="pun">(</span><span class="str">'最喜欢的游戏'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">'守望先锋'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'魔兽世界'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'炉石传说'</span><span class="pun">},</span><span class="pln"> </span><span class="str">'魔兽世界'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="kwd">local</span><span class="pln"> confirm</span><span class="pun">,</span><span class="pln"> selects </span><span class="pun">=</span><span class="pln"> dlg</span><span class="pun">:</span><span class="pln">show</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">显示</span><span class="pln"> dialog </span><span class="pun">对象到前台并获得其返回值</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">confirm</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"你按下了提交"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"你没有按下提交"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"账号"</span><span class="pun">,</span><span class="pln"> selects</span><span class="pun">[</span><span class="str">"账号"</span><span class="pun">])</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"密码"</span><span class="pun">,</span><span class="pln"> selects</span><span class="pun">[</span><span class="str">"密码"</span><span class="pun">])</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"性别"</span><span class="pun">,</span><span class="pln"> selects</span><span class="pun">[</span><span class="str">"性别"</span><span class="pun">])</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"血量"</span><span class="pun">,</span><span class="pln"> selects</span><span class="pun">[</span><span class="str">"血量"</span><span class="pun">])</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">selects</span><span class="pun">[</span><span class="str">'你是变态?'</span><span class="pun">])</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"你承认了自己是变态"</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"你不承认自己是变态"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"你喜欢游戏列表"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln">gamename </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">selects</span><span class="pun">[</span><span class="str">'喜欢的游戏'</span><span class="pun">])</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">gamename</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"你最喜欢游戏:"</span><span class="pun">..</span><span class="pln">selects</span><span class="pun">[</span><span class="str">"最喜欢的游戏"</span><span class="pun">])</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">print</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="tzho"><br></p><ul data-anchor-id="hzid">
<li><h3 id="在不弹出对话框的情况下获得对话框配置-load">! 在不弹出对话框的情况下获得对话框配置 (<strong>:load</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否提交,</span><span class="pln"> </span><span class="pun">选项关联表</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对话框对象:</span><span class="pln">load</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>对话框对象 <br>
  对话框，需要获取返回值的对话框</li>
  <li>是否提交 <br>
  布尔型，返回是否按下了提交按钮，这里将会无限返回 false</li>
  <li>选项关联表 <br>
  表型，返回一个以选项标签映射的键值表</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个方法在 1.1.1-1 版以上方可使用</strong> <br>
  在不弹出对话框的情况下获得对话框配置，如果对话框当前没有保存配置，则加载默认值</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> dlg </span><span class="pun">=</span><span class="pln"> dialog</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">config</span><span class="pun">(</span><span class="str">'test'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">配置保存</span><span class="pln">ID</span></code></li><li class="L3"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">timeout</span><span class="pun">(</span><span class="lit">30</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_label</span><span class="pun">(</span><span class="str">'简易的效果展示'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_range</span><span class="pun">(</span><span class="str">'血量'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">},</span><span class="pln"> </span><span class="lit">300</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_input</span><span class="pun">(</span><span class="str">'账号'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'ccc'</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_input</span><span class="pun">(</span><span class="str">'密码'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'aaaa'</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_picker</span><span class="pun">(</span><span class="str">'性别'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">'男'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'女'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'未知'</span><span class="pun">},</span><span class="pln"> </span><span class="str">'男'</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_switch</span><span class="pun">(</span><span class="str">'你是变态?'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_checkbox</span><span class="pun">(</span><span class="str">'喜欢的游戏'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">'守望先锋'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'魔兽世界'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'炉石传说'</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="str">'守望先锋'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'魔兽世界'</span><span class="pun">})</span></code></li><li class="L1"><code class="language-lua"><span class="pln">dlg</span><span class="pun">:</span><span class="pln">add_radio</span><span class="pun">(</span><span class="str">'最喜欢的游戏'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">'守望先锋'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'魔兽世界'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'炉石传说'</span><span class="pun">},</span><span class="pln"> </span><span class="str">'魔兽世界'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="kwd">local</span><span class="pln"> _</span><span class="pun">,</span><span class="pln"> selects</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">utils</span><span class="pun">.</span><span class="pln">is_launch_via_app</span><span class="pun">())</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">判断当前是否从</span><span class="pln"> app </span><span class="pun">启动</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    _</span><span class="pun">,</span><span class="pln"> selects </span><span class="pun">=</span><span class="pln"> dlg</span><span class="pun">:</span><span class="pln">show</span><span class="pun">()</span><span class="pln">         </span><span class="pun">--</span><span class="pln"> </span><span class="pun">从</span><span class="pln"> app </span><span class="pun">启动的脚本则弹出配置窗</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    _</span><span class="pun">,</span><span class="pln"> selects </span><span class="pun">=</span><span class="pln"> dlg</span><span class="pun">:</span><span class="pln">load</span><span class="pun">()</span><span class="pln">         </span><span class="pun">--</span><span class="pln"> </span><span class="pun">音量键或其它方式启动的脚本则不再弹出</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"账号"</span><span class="pun">,</span><span class="pln"> selects</span><span class="pun">[</span><span class="str">"账号"</span><span class="pun">])</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"密码"</span><span class="pun">,</span><span class="pln"> selects</span><span class="pun">[</span><span class="str">"密码"</span><span class="pun">])</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"性别"</span><span class="pun">,</span><span class="pln"> selects</span><span class="pun">[</span><span class="str">"性别"</span><span class="pun">])</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"血量"</span><span class="pun">,</span><span class="pln"> selects</span><span class="pun">[</span><span class="str">"血量"</span><span class="pun">])</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">selects</span><span class="pun">[</span><span class="str">'你是变态?'</span><span class="pun">])</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"你承认了自己是变态"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"你不承认自己是变态"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"你喜欢游戏列表"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln">gamename </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">selects</span><span class="pun">[</span><span class="str">'喜欢的游戏'</span><span class="pun">])</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">gamename</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"你最喜欢游戏:"</span><span class="pun">..</span><span class="pln">selects</span><span class="pun">[</span><span class="str">"最喜欢的游戏"</span><span class="pun">])</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">print</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#判断当前脚本是否从-app-内启动-utilsislaunchviaapp"><code>utils.is_launch_via_app</code></a>、 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="37oe"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="tec1" id="清理模块clear">清理模块（clear）</h2><ul data-anchor-id="6zdi">
<li><h3 id="清理某个或某组钥匙串信息-clearkeychain">清理某个或某组钥匙串信息 (<strong>clear.keychain</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">keychain</span><span class="pun">(信息关联名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>信息关联名 <br>
  文本型，一般传入公司反域名，例如 <code>"com.tencent"</code>，切不可乱传参数</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>清理某个应用程序或分组的钥匙串信息，若不懂请直接用 <a href="#清理所有应用程序钥匙串信息-clearallkeychain"><code>clear.all_keychain</code></a> <br>
  <strong>警告：这个函数调用产生的效果不可逆转</strong> <br>
  <strong>警告：切不可乱传参数！！！</strong> <br>
  <strong>警告：该函数在给不正确的参数的情况下可能产生极其严重的后果！！！</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">keychain</span><span class="pun">(</span><span class="str">"com.tencent"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">清理掉与</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">tencent </span><span class="pun">相关的</span><span class="pln"> keychain </span><span class="pun">信息</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="w0cm"><br></p><ul data-anchor-id="07nn">
<li><h3 id="清理所有应用程序钥匙串信息-clearallkeychain">清理所有应用程序钥匙串信息 (<strong>clear.all_keychain</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">all_keychain</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>清理所有应用程序钥匙串信息 <br>
  该函数可能在 iOS 10 及以上系统中导致重启需要重新激活的问题 <br>
  <strong>警告：这个函数调用产生的效果不可逆转</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">all_keychain</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="19ks"><br></p><ul data-anchor-id="vh7w">
<li><h3 id="清理剪贴板-clearpasteboard">清理剪贴板 (<strong>clear.pasteboard</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">pasteboard</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>清理剪贴板信息，一些信息会存在剪贴板中，比如 OpenUDID <br>
  该函数在 iOS 10 及以上版本的操作系统中使用会导致剪贴板服务失去连接，表现为前台程序不能使用剪贴板，需要重启前台程序方能恢复 <br>
  <strong>警告：这个函数调用产生的效果不可逆转</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">pasteboard</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="eoxp"><br></p><ul data-anchor-id="h6eu">
<li><h3 id="清理浏览器cookies-clearcookies">清理浏览器Cookies (<strong>clear.cookies</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">cookies</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>清理浏览器Cookies <br>
  <strong>警告：这个函数调用产生的效果不可逆转</strong> <br>
  <strong>警告：暂不确定是否兼容 iOS 11</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">cookies</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="lvak"><br></p><ul data-anchor-id="j2y6">
<li><h3 id="清理系统缓存-clearcaches">清理系统缓存 (<strong>clear.caches</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">caches</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>清理系统缓存，这个函数执行会卡顿一段时间，而且卡顿期间所有线程都阻塞 <br>
  该函数耗时可能会非常长，并且该函数执行的过程中使用强行停止脚本会导致停止缓慢（被强杀）  </p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">caches</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">caches</span><span class="pun">{</span><span class="pln">no_uicache </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">}</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">1.2</span><span class="pun">-</span><span class="lit">2</span><span class="pln"> </span><span class="pun">以上版本支持不使用</span><span class="pln"> uicache </span><span class="pun">清理，</span><span class="pln">uicache </span><span class="pun">耗时很长，可使用</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'su mobile -c uicache'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">来代替</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="8zza"><br></p><ul data-anchor-id="7xlc">
<li><h3 id="清除相册中所有本地照片-clearallphotos">清除相册中所有本地照片 (<strong>clear.all_photos</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">all_photos</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>清除相册中所有本地照片，不会影响 iCloud 照片流 <br>
  该函数耗时可能会非常长，并且该函数执行的过程中使用强行停止脚本会导致停止缓慢（被强杀） <br>
  <strong>警告：这个函数调用产生的效果不可逆转</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">all_photos</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="fg77"><br></p><ul data-anchor-id="syz0">
<li><h3 id="清理某个应用的存档数据-clearappdata">清理某个应用的存档数据 (<strong>clear.app_data</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否成功</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> clear</span><span class="pun">.</span><span class="pln">app_data</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，应用程序包名</li>
  <li>是否成功 <br>
  布尔型，清理成功返回 true；否则返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>清理应用存档，清理期间所有线程都阻塞 <br>
  该函数耗时可能会非常长，并且该函数执行的过程中使用强行停止脚本会导致停止缓慢（被强杀） <br>
  <strong>警告：这个函数调用产生的效果不可逆转</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">clear</span><span class="pun">.</span><span class="pln">app_data</span><span class="pun">(</span><span class="str">"com.tencent.xin"</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="30ud"><br></p><ul data-anchor-id="cfos">
<li><h3 id="清理-idfav-clearidfav">清理 IDFA/V (<strong>clear.idfav</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">旧</span><span class="pln">IDFAV</span><span class="pun">信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> clear</span><span class="pun">.</span><span class="pln">idfav</span><span class="pun">([</span><span class="pln"> </span><span class="pun">新</span><span class="pln">IDFAV</span><span class="pun">信息</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>新IDFAV信息 <br>
  文本型，可选参数，表示指定使用这些信息作为设备的新的 idfav 信息，不传入参数表示清理后让系统自动生成。1.2-10 版新增可传入 "read" 表示不清理仅读取设备的 IDFAV 信息</li>
  <li>旧IDFAV信息 <br>
  文本型 或 nil，返回设备原来的 idfav 信息，如果操作失败，则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>重置设备 IDFA 和 IDFV 等标识信息 <br>
  传入了不正确的 idfav 信息的情况下，会操作失败返回 nil <br>
  不传入参数的情况下，会清除掉设备原来的 idfav 信息，iOS系统会在之后重新随机分配 idfav <br>
  返回的 idfav 信息文本可以自行保存在文件中，等到需要恢复的时候，再当作参数传回即可 <br>
  <strong>不兼容 iOS 10 及以上版本操作系统</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">function</span><span class="pln"> close_all_app</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">定义一个遍历关闭所有的</span><span class="pln"> app </span><span class="pun">的函数</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln">bid </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">app</span><span class="pun">.</span><span class="pln">bundles</span><span class="pun">())</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        app</span><span class="pun">.</span><span class="pln">close</span><span class="pun">(</span><span class="pln">bid</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">备份</span><span class="pln"> idfav </span><span class="pun">信息</span></code></li><li class="L7"><code class="language-lua"><span class="pln">close_all_app</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">关闭所有应用</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">local</span><span class="pln"> old_idfavs </span><span class="pun">=</span><span class="pln"> clear</span><span class="pun">.</span><span class="pln">idfav</span><span class="pun">()</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">local</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> io</span><span class="pun">.</span><span class="pln">open</span><span class="pun">(</span><span class="str">"/var/mobile/Media/1ferver/res/old_idfavs.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"wb"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> f </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    f</span><span class="pun">:</span><span class="pln">write</span><span class="pun">(</span><span class="pln">old_idfavs</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    f</span><span class="pun">:</span><span class="pln">close</span><span class="pun">()</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    clear</span><span class="pun">.</span><span class="pln">caches</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">清理一下系统缓存</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"备份成功"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    clear</span><span class="pun">.</span><span class="pln">idfav</span><span class="pun">(</span><span class="pln">old_idfavs</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">无法备份的情况下立马恢复</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    clear</span><span class="pun">.</span><span class="pln">caches</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">清理一下系统缓存</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"备份失败"</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">从文件中恢复</span><span class="pln"> idfav </span><span class="pun">信息</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> io</span><span class="pun">.</span><span class="pln">open</span><span class="pun">(</span><span class="str">"/var/mobile/Media/1ferver/res/old_idfavs.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"rb"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">if</span><span class="pln"> f </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> old_idfavs </span><span class="pun">=</span><span class="pln"> f</span><span class="pun">:</span><span class="pln">read</span><span class="pun">(</span><span class="str">"*a"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    f</span><span class="pun">:</span><span class="pln">close</span><span class="pun">()</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    close_all_app</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">关闭所有应用</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> current_idfavs </span><span class="pun">=</span><span class="pln"> clear</span><span class="pun">.</span><span class="pln">idfav</span><span class="pun">(</span><span class="pln">old_idfavs</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> current_idfavs </span><span class="kwd">then</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        f </span><span class="pun">=</span><span class="pln"> io</span><span class="pun">.</span><span class="pln">open</span><span class="pun">(</span><span class="str">"/var/mobile/Media/1ferver/res/current_idfavs.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"wb"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        f</span><span class="pun">:</span><span class="pln">write</span><span class="pun">(</span><span class="pln">current_idfavs</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">将现有的</span><span class="pln"> idfav </span><span class="pun">信息保存到另一个文件</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        f</span><span class="pun">:</span><span class="pln">close</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        clear</span><span class="pun">.</span><span class="pln">caches</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">清理一下系统缓存</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"恢复 idfav 信息成功"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"恢复 idfav 信息失败"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"文件打开失败"</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#关闭应用程序-appclose"><code>app.close</code></a>、<a href="#获取设备所有的应用的-bundle-identifier-列表-appbundles"><code>app.bundles</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="h6k5"><br> <br>
<br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="cwgi" id="应用程序模块app">应用程序模块（app）</h2><ul data-anchor-id="nyyr">
<li><h3 id="获取-app-的应用程序包路径-appbundlepath">获取 App 的应用程序包路径 (<strong>app.bundle_path</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">包路径</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">bundle_path</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，需要定位的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>包路径 <br>
  文本型 或 nil，返回的应用程序包路径，如果应用不存在则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取 App 的应用程序包路径</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">path </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">bundle_path</span><span class="pun">(</span><span class="str">"com.tencent.mqq"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">获得</span><span class="pln"> QQ </span><span class="pun">的应用包路径</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="uhqg"><br></p><ul data-anchor-id="xigo">
<li><h3 id="获取-app-的应用存档路径-appdatapath">获取 App 的应用存档路径 (<strong>app.data_path</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">存档路径</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">data_path</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，需要定位的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>存档路径 <br>
  文本型 或 nil，返回应用程序的存档路径，如果应用不存在则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取 App 的应用存档路径</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">path </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">data_path</span><span class="pun">(</span><span class="str">"com.tencent.mqq"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">获得</span><span class="pln"> QQ </span><span class="pun">的应用存档路径</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="0e1z"><br></p><ul data-anchor-id="17mh">
<li><h3 id="获取-app-的应用分组信息-appgroupinfo">获取 App 的应用分组信息 (<strong>app.group_info</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">应用分组信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">group_info</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，需要定位的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>应用分组信息 <br>
  表型，返回应用程序的分组信息，如果不存在返回空表</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>软件版本在 1.1.3-1 或以上方可使用</strong> <br>
  注意：应用程序分组信息 是 iOS 8 开始才有的概念，iOS 7 没有这个概念</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> sh_escape</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="typ">XXTouch</span><span class="pln"> </span><span class="pun">原创函数，未经</span><span class="pln"> </span><span class="typ">XXTouch</span><span class="pln"> </span><span class="pun">许可，可以用于商业用途</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    path </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">gsub</span><span class="pun">(</span><span class="pln">path</span><span class="pun">,</span><span class="pln"> </span><span class="str">"([ \\()&lt;&gt;'\"`#&amp;*;?~$])"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"\\%1"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> path</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="kwd">local</span><span class="pln"> info </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">group_info</span><span class="pun">(</span><span class="str">"com.tencent.mqq"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">获得</span><span class="pln"> QQ </span><span class="pun">的分组信息</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">循环删除所有分组目录中的内容</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln">v </span><span class="kwd">in</span><span class="pln"> pairs</span><span class="pun">(</span><span class="pln">info</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'rm -rf '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="pln">v</span><span class="pun">)..</span><span class="str">'/Library/*'</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'rm -rf '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="pln">v</span><span class="pun">)..</span><span class="str">'/Documents/*'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'rm -rf '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="pln">v</span><span class="pun">)..</span><span class="str">'/tmp/*'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'rm -rf '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="pln">v</span><span class="pun">)..</span><span class="str">'/share/*'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="3355"><br></p><ul data-anchor-id="1m0d">
<li><h3 id="弹出一个应用通知-apppopbanner">弹出一个应用通知 (<strong>app.pop_banner</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">pop_banner</span><span class="pun">(应用程序包名,</span><span class="pln"> </span><span class="pun">标题,</span><span class="pln"> </span><span class="pun">内容)</span></code></li></ol></pre></li>
<li><p>参数</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>标题 <br>
  文本型，通知的标题</li>
  <li>内容 <br>
  文本型，通知的内容</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>软件版本在 1.1.3-1 或以上方可使用</strong> <br>
  <strong>该函数不支持 iOS 8.4.x 及 iOS 11</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">pop_banner</span><span class="pun">(</span><span class="str">'com.tencent.mqq'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'QQ'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'[QQ红包]您收到一个假红包'</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="dd52"><br></p><ul data-anchor-id="e10a">
<li><h3 id="运行应用程序-apprun">运行应用程序 (<strong>app.run</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">状态</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">run</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，需要定位的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>状态 <br>
  整数型，返回运行状态 <br>
  返回 0 表示启动成功 <br>
  返回 其它值 表示启动失败</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>如果该函数在您的脚本中表现不佳，可尝试使用 runApp 函数替代它</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">打开内置天气应用，然后退出</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">run</span><span class="pun">(</span><span class="str">"com.apple.weather"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">启动应用</span><span class="pln"> </span><span class="pun">包名可在</span><span class="pln"> XXT </span><span class="pun">应用程序--更多--应用列表</span><span class="pln"> </span><span class="pun">中查看</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">10</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">if</span><span class="pln"> r </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    app</span><span class="pun">.</span><span class="pln">close</span><span class="pun">(</span><span class="str">"com.apple.weather"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">退出应用</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"启动失败"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a>、<a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="l077"><br></p><ul data-anchor-id="qs7m">
<li><h3 id="关闭应用程序-appclose">关闭应用程序 (<strong>app.close</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">close</span><span class="pun">(应用程序包名</span><span class="pln"> </span><span class="pun">或</span><span class="pln"> </span><span class="pun">进程号)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，需要关闭的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>进程号 <br>
  整数型，需要关闭的应用的 process identifier（进程标识符）</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>关闭应用程序，参数可以是 应用程序包名 也可以是 进程号，如果应用不在运行则什么都不发生，该操作不会失败 <br>
  这个关闭应用是不可拒绝的强杀，目标应用在被关闭的时候不会收到任何通知</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#运行应用程序-apprun"><code>参考 app.run 示例</code></a> <br>
<a href="#获取设备所有的应用的-bundle-identifier-列表-appbundles"><code>参考 app.bundles 示例</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="e27c"><br></p><ul data-anchor-id="lihj">
<li><h3 id="模拟使用上划退出应用程序-appquit">模拟使用上划退出应用程序 (<strong>app.quit</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">quit</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，需要退出的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看） <br>
  传入 <code>"*"</code> 表示退出所有</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>这个当然也是强杀，但是与 <a href="#关闭应用程序-appclose">app.close</a> 不同的是，应用在退出前会收到通知；并且它会清除掉多任务切换界面的标签 <br>
  <strong>请不要在锁屏状态使用，该函数可能不能良好退出 root 权限的 App，使用该函数退出 root 权限程序可能会导致屏幕卡住点图标无响应等现象，root 权限的 App 推荐使用 <a href="#关闭应用程序-appclose">app.close</a> 强杀</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">--</span><span class="pln"> </span><span class="pun">退出所有的</span><span class="pln"> </span><span class="typ">App</span></code></li><li class="L1"><code><span class="pln">app</span><span class="pun">.</span><span class="pln">quit</span><span class="pun">(</span><span class="str">"*"</span><span class="pun">)</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pun">--</span><span class="pln"> </span><span class="pun">退出</span><span class="pln">QQ</span><span class="pun">，如果</span><span class="pln">QQ</span><span class="pun">正在运行的话</span></code></li><li class="L4"><code><span class="pln">app</span><span class="pun">.</span><span class="pln">quit</span><span class="pun">(</span><span class="str">"com.tencent.mqq"</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="nkv7"><br></p><ul data-anchor-id="ksn5">
<li><h3 id="检测应用程序是否正在运行-appisrunning">检测应用程序是否正在运行 (<strong>app.is_running</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">状态</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">is_running</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，需要定位的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>状态 <br>
  布尔型，是否正在运行</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>本函数用于检查一个应用程序是否正在运行，它不区分前后台</p>
  
  <p>如果要判断一个应用是否在前台运行，可以使用 <a href="#%E8%8E%B7%E5%8F%96%E5%89%8D%E5%8F%B0%E5%BA%94%E7%94%A8%E7%9A%84-bundle-identifier-appfrontbid">app.front_bid</a> 获取前台应用 bid 进行对比，如下</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="str">"com.tencent.mqq"</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">front_bid</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'QQ 正在前台运行'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>
  
  <p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">is_running</span><span class="pun">(</span><span class="str">"com.tencent.mqq"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'QQ 正在运行'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="iyea"><br></p><ul data-anchor-id="p8ig">
<li><h3 id="输入文字-appinputtext">输入文字 (<strong>app.input_text</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">input_text</span><span class="pun">(文本内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文本内容 <br>
  文本型，需要输入的文字，支持 <code>"\b"</code>（退格键）</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>在 App 中弹出键盘的情况下输入文字 <br>
  已知的无法输入的位置有 AppStore 的评论 <br>
  如果遇到无法作用的情况可以参考 <a href="#输入文字-sysinputtext">sys.input_text</a> 或许能解决</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">1</span><span class="pun">：</span></code></li><li class="L1"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">input_text</span><span class="pun">(</span><span class="str">"嘿嘿嘿"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">弹出键盘后可以输入文字</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">2</span><span class="pun">：</span></code></li><li class="L4"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">input_text</span><span class="pun">(</span><span class="str">"\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">删除文本框原来的内容</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="14v2"><br></p><ul data-anchor-id="27ej">
<li><h3 id="通过应用程序-bid-获取应用的本地化名字-applocalizedname">通过应用程序 bid 获取应用的本地化名字 (<strong>app.localized_name</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">本地化名字</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">localized_name</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>本地化名字 <br>
  文本型 或 nil，返回应用的本地化名字，如果应用不存在则返回 nil</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">localized_name</span><span class="pun">(</span><span class="str">"com.tencent.xin"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">弹出显示</span><span class="pln"> </span><span class="pun">“微信”</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="b652"><br></p><ul data-anchor-id="mysf">
<li><h3 id="通过应用程序-bid-获取应用的图标数据-apppngdataforbid">通过应用程序 bid 获取应用的图标数据 (<strong>app.png_data_for_bid</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">PNG</span><span class="pun">图片数据</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">png_data_for_bid</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>PNG图片数据 <br>
  字符串型 或 nil，应用的图标的 png 数据（二进制数据），如果应用不存在则返回 nil</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">将微信的图标保存到相册</span></code></li><li class="L1"><code class="language-lua"><span class="pln">image</span><span class="pun">.</span><span class="pln">load_data</span><span class="pun">(</span><span class="pln">app</span><span class="pun">.</span><span class="pln">png_data_for_bid</span><span class="pun">(</span><span class="str">"com.tencent.xin"</span><span class="pun">)):</span><span class="pln">save_to_album</span><span class="pun">()</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#从数据创建图片对象-imageloaddata"><code>image.load_data</code></a>、<a href="#保存图片对象到相册-savetoalbum"><code>:save_to_album</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ftee"><br></p><ul data-anchor-id="mj73">
<li><h3 id="通过应用程序-bid-获取其-pid-apppidforbid">通过应用程序 bid 获取其 pid (<strong>app.pid_for_bid</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">进程号</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">pid_for_bid</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，需要检测的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>进程号 <br>
  整数型，如果应用程序正在运行，则返回其 pid，否则返回 0</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> qqpid </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">pid_for_bid</span><span class="pun">(</span><span class="str">"com.tencent.mqq"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> qqpid</span><span class="pun">~=</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"当前QQ正在运行，进程号是："</span><span class="pun">..</span><span class="pln">qqpid</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"当前QQ没有在运行"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="m5yi"><br></p><ul data-anchor-id="0uu4">
<li><h3 id="获取应用程序当前内存消耗-appusedmemory">获取应用程序当前内存消耗 (<strong>app.used_memory</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">内存占用</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">used_memory</span><span class="pun">(应用程序包名</span><span class="pln"> </span><span class="pun">或</span><span class="pln"> </span><span class="pun">进程号)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，需要检测的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>进程号 <br>
  整数型，需要检测的应用的 process identifier（进程标识符）</li>
  <li>内存占用 <br>
  实数型 或 nil，如果应用正在运行则返回其所占用的内存（单位 MB），否则返回 nil</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> qqmem </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">used_memory</span><span class="pun">(</span><span class="str">"com.tencent.mqq"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"当前QQ进程所占用的内存是："</span><span class="pun">..</span><span class="pln">qqmem</span><span class="pun">..</span><span class="str">"MB"</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="yd4b"><br></p><ul data-anchor-id="geis">
<li><h3 id="获取前台应用的-bundle-identifier-appfrontbid">获取前台应用的 Bundle Identifier (<strong>app.front_bid</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">应用程序包名</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">front_bid</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，返回前台应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看） <br>
  没有应用处于前台但桌面服务已加载返回 <code>"com.apple.springboard"</code> <br>
  没有应用处于前台且桌面服务尚未启动返回 <code>"com.apple.backboardd"</code></li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取前台应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> bid </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">front_bid</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"前台应用的应用包名是："</span><span class="pun">..</span><span class="pln">bid</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="4g8d"><br></p><ul data-anchor-id="30oi">
<li><h3 id="获取前台应用的-process-identifier-appfrontpid">获取前台应用的 Process Identifier (<strong>app.front_pid</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">进程号</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">front_pid</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>进程号 <br>
  整数型，返回前台应用的 process identifier（进程标识符），前台没有应用返回 0</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取前台应用的 process identifier（进程标识符） <br>
  前台没有应用返回 0 而不是桌面服务的进程号 <br>
  要获取桌面进程 pid 请用</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> desktop_pid </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">pid_for_bid</span><span class="pun">(</span><span class="str">'com.apple.springboard'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"桌面服务的进程号是："</span><span class="pun">..</span><span class="pln">desktop_pid</span><span class="pun">)</span></code></li></ol></pre>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> pid </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">front_pid</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"前台应用的进程号是："</span><span class="pun">..</span><span class="pln">pid</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="p8gc"><br></p><ul data-anchor-id="f3tg">
<li><h3 id="前台打开一个-url-appopenurl">前台打开一个 URL (<strong>app.open_url</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">open_url</span><span class="pun">(</span><span class="pln">URL</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>URL <br>
  文本型，需要打开的 URL ，可以打开 <a href="https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html" target="_blank">URL Scheme</a>（<a href="#url-scheme-的相关应用">“URL Scheme” 的相关应用</a>）</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>前台打开一个 URL，可以打开 <a href="https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html" target="_blank">URL Scheme</a>（<a href="#url-scheme-的相关应用">“URL Scheme” 的相关应用</a>） <br>
  部分 URL 用该 API 跳转可能不是想要的效果，可试试</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> sh_escape</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="typ">XXTouch</span><span class="pln"> </span><span class="pun">原创函数，未经</span><span class="pln"> </span><span class="typ">XXTouch</span><span class="pln"> </span><span class="pun">许可，可以用于商业用途</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    path </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">gsub</span><span class="pun">(</span><span class="pln">path</span><span class="pun">,</span><span class="pln"> </span><span class="str">"([ \\()&lt;&gt;'\"`#&amp;*;?~$])"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"\\%1"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> path</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'uiopen '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="str">'http://www.google.com'</span><span class="pun">))</span></code></li><li class="L5"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'uiopen '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="str">'prefs:root=General&amp;path=ACCESSIBILITY'</span><span class="pun">))</span></code></li></ol></pre>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">open_url</span><span class="pun">(</span><span class="str">"http://www.google.com"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">用</span><span class="pln"> </span><span class="typ">Safari</span><span class="pln"> </span><span class="pun">打开</span><span class="pln"> </span><span class="typ">Google</span><span class="pln"> </span><span class="pun">的主页，当然，不一定打得开</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">open_url</span><span class="pun">(</span><span class="str">"prefs:root=General&amp;path=ACCESSIBILITY"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">跳转到</span><span class="pln"> </span><span class="pun">设置--通用--辅助功能</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="blkh"><br></p><ul data-anchor-id="htig">
<li><h3 id="获取设备所有的应用的-bundle-identifier-列表-appbundles">获取设备所有的应用的 Bundle Identifier 列表 (<strong>app.bundles</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">应用程序包名数组</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">bundles</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名数组 <br>
  顺序表型，返回很多 bid 的一个表，也包括系统自带的</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取设备所有的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）列表</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">--</span><span class="pln"> </span><span class="pun">遍历关闭所有的</span><span class="pln"> app</span></code></li><li class="L1"><code><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln">bid </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">app</span><span class="pun">.</span><span class="pln">bundles</span><span class="pun">())</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L2"><code><span class="pln">    app</span><span class="pun">.</span><span class="pln">close</span><span class="pun">(</span><span class="pln">bid</span><span class="pun">)</span></code></li><li class="L3"><code><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="802c"><br></p><ul data-anchor-id="nmqn">
<li><h3 id="获取当前设备的进程列表-appallprocs">获取当前设备的进程列表 (<strong>app.all_procs</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">进程信息数组</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">all_procs</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>进程信息数组 <br>
  顺序表型，返回进程列表，结构是这样 {{pid = pid1, name = name1}, {pid = pid2, name = name2}, ...}</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">proc_list </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">all_procs</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="tj0j"><br></p><ul data-anchor-id="wkua">
<li><h3 id="设置前台应用程序加速齿轮-appsetspeedadd">设置前台应用程序加速齿轮 (<strong>app.set_speed_add</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">set_speed_add</span><span class="pun">(需要加的速度</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">强力模式</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>需要加的速度 <br>
  实数型，代表加速齿轮倍数，负数为减速，正数为加速，0为不加速也不减速。前台应用重新开启后，加速效果消失</li>
  <li>强力模式 <br>
  布尔型，可选参数，是否需要支持 unity 引擎加速，默认 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>强力模式 参数需要软件版本在 1.1.2-2 或以上方可使用</strong> <br>
  设置前台应用程序加速齿轮 <br>
  加速并不是对所有的应用都有效果，确切的说，只对小部分游戏有效 <br>
  <strong>使用该函数可能导致严重后果（包括但不限于应用卡死崩溃、系统崩溃、脚本停止、账号被封、被请喝茶）</strong> <br>
  <strong>不得将此函数用于非法用途，使用则代表同意</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">set_speed_add</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">给前台</span><span class="pln"> cocos2d </span><span class="pun">的游戏加速</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">倍</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">set_speed_add</span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">给前台</span><span class="pln"> unity3d </span><span class="pun">的游戏加速</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">倍</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="2pnf"><br></p><ul data-anchor-id="umnl">
<li><h3 id="安装ipa安装包-appinstall">安装IPA安装包 (<strong>app.install</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">安装成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">install</span><span class="pun">(文件路径</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">强行安装</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，需要安装的 App 安装包（ipa 格式）绝对路径</li>
  <li>强行安装 *1.1.3-1 新增 <br>
  布尔型，可选参数，是否强行安装，true 为强行安装，false 为大于当前 ipa 版本不覆盖安装，默认为 false</li>
  <li>安装成败 <br>
  布尔型，安装成功返回 true，安装失败返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>后台安装一个 ipa 格式的安装包 <br>
  <strong>安装的完成之前脚本不能被自然终止并会一直阻塞</strong> <br>
  调用此函数前需确保在目标设备中已安装过 AppSync 插件 <a href="https://apt-pages.xxtouch.com/others/%E5%85%BC%E5%AE%B9iOS11%E7%9A%84IPA%E8%A1%A5%E4%B8%81%28app.install%E4%BE%9D%E8%B5%96%29.deb" target="_blank">兼容 iOS 7~11 的 IPA 补丁.deb</a> <br>
  可用最新版 X.X.T. 扫描下面二维码下载并安装 AppSync 插件 <br>
  <img src="http://static.zybuluo.com/xxtouch/n08ebwtbar6wvbyoh2cyh3st/%E5%85%BC%E5%AE%B9%20iOS%2011%20%E7%9A%84%20IPA%20%E8%A1%A5%E4%B8%81.png" alt="兼容 iOS 11 的 IPA 补丁.png-8.4kB" title=""></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">app</span><span class="pun">.</span><span class="pln">install</span><span class="pun">(</span><span class="str">"/User/1.ipa"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">强行覆盖安装，用于降级安装</span><span class="pln"> </span><span class="typ">App</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="kwd">if</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">install</span><span class="pun">(</span><span class="str">"/User/1.ipa"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">安装成功</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">安装失败</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="43dq"><br></p><ul data-anchor-id="ntdt">
<li><h3 id="卸载一个应用-appuninstall">卸载一个应用 (<strong>app.uninstall</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">卸载成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">uninstall</span><span class="pun">(应用程序包名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用程序包名 <br>
  文本型，需要卸载的应用的 bundle identifier（应用包名，可在 <strong>XXT 应用程序--更多--应用列表</strong> 中查看）</li>
  <li>卸载成败 <br>
  布尔型，卸载成功返回 true，卸载失败返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>后台卸载一个应用程序 <br>
  <strong>卸载的过程脚本不能被自然终止并会一直阻塞</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> app</span><span class="pun">.</span><span class="pln">uninstall</span><span class="pun">(</span><span class="str">"com.tencent.mqq"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">卸载成功</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">卸载失败</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="bkrn"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="f77r" id="app-模块-额外说明"><strong>app 模块 额外说明</strong></h3><p data-anchor-id="0ob3">Process Identifier（进程标识符）为应用运行期的进程号，是个整数，每次运行都不一样</p><hr><p data-anchor-id="b5r4"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="slxz" id="设备相关模块device">设备相关模块（device）</h2><ul data-anchor-id="dpvl">
<li><h3 id="重置自动锁屏倒计时-deviceresetidle">重置自动锁屏倒计时 (<strong>device.reset_idle</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">reset_idle</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>重置自动锁屏倒计时（使屏幕常亮） <br>
  不推荐太高频率使用该函数，太高频率（每秒超过 10 次）使用该函数可能导致服务崩溃或系统崩溃</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">派发一个每</span><span class="pln"> </span><span class="lit">29</span><span class="pln"> </span><span class="pun">秒重置</span><span class="pln"> IDLE </span><span class="pun">倒计时的任务</span></code></li><li class="L1"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">dispatch</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        device</span><span class="pun">.</span><span class="pln">reset_idle</span><span class="pun">()</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">29</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数及方法 <a href="#派发一个任务-threaddispatch"><code>thread.dispatch</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="bp18"><br></p><ul data-anchor-id="todx">
<li><h3 id="锁定屏幕-devicelockscreen">锁定屏幕 (<strong>device.lock_screen</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">lock_screen</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">lock_screen</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="lntv"><br></p><ul data-anchor-id="tqgh">
<li><h3 id="解锁屏幕-deviceunlockscreen">解锁屏幕 (<strong>device.unlock_screen</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">unlock_screen</span><span class="pun">([</span><span class="pln"> </span><span class="pun">锁屏密码</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>锁屏密码 <br>
  文本型，可选参数，锁屏密码，如果有锁屏密码也可以使用这个参数，如果没有则不填即可，不推荐使用</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">unlock_screen</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="248u"><br></p><ul data-anchor-id="4dfa">
<li><h3 id="获取屏幕锁定状态-deviceisscreenlocked">获取屏幕锁定状态 (<strong>device.is_screen_locked</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否锁屏</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">is_screen_locked</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>是否锁屏 <br>
  布尔型，返回是否已经锁定屏幕</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>判断是否已经锁定屏幕</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">is_screen_locked</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">屏幕已锁定</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">屏幕是解锁状态</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="tucf"><br></p><ul data-anchor-id="h3gs">
<li><h3 id="获取前台应用的画面方向-devicefrontorien">获取前台应用的画面方向 (<strong>device.front_orien</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">旋转状态</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">front_orien</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>旋转状态 <br>
  <ul><li>整数型，相对于画面 <br>
  返回 0 表示 home 在下 <br>
  返回 1 表示 home 在右 <br>
  返回 2 表示 home 在左 <br>
  返回 3 表示 home 在上 <br>
  返回 4 表示 出错了</li></ul></li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">'这个提示会以前台应用的旋转方向显示'</span><span class="pun">,</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">front_orien</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="m5l7"><br></p><ul data-anchor-id="dtqa">
<li><h3 id="锁定设备屏幕旋转-devicelockorien">锁定设备屏幕旋转 (<strong>device.lock_orien</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">lock_orien</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">lock_orien</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="t3un"><br></p><ul data-anchor-id="4vgk">
<li><h3 id="解锁设备屏幕旋转锁-deviceunlockorien">解锁设备屏幕旋转锁 (<strong>device.unlock_orien</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">unlock_orien</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">unlock_orien</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="ephh"><br></p><ul data-anchor-id="v8h0">
<li><h3 id="获取屏幕旋转锁锁定状态-deviceisorienlocked">获取屏幕旋转锁锁定状态 (<strong>device.is_orien_locked</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否锁定</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">is_orien_locked</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>是否锁定 <br>
  布尔型，返回是否已经锁定屏幕旋转锁</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">is_orien_locked</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">屏幕旋转已锁定</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">屏幕旋转没锁定</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="b21g"><br></p><ul data-anchor-id="ay2i">
<li><h3 id="振动设备-devicevibrator">振动设备 (<strong>device.vibrator</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">vibrator</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>振我一下（没有振动马达的设备不能振）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">vibrator</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="rpfq"><br></p><ul data-anchor-id="u46l">
<li><h3 id="后台播放声音-deviceplaysound">后台播放声音 (<strong>device.play_sound</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">play_sound</span><span class="pun">(声音文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>声音文件路径 <br>
  文本型，声音文件的绝对路径，支持 mp3、wav、aac 音频格式</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>后台播放一段声音 <br>
  该函数不会影响脚本运行，且播放的声音会在脚本停止的时候停止，如果脚本需要播放完整声音，请做好延迟退出</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">play_sound</span><span class="pun">(</span><span class="str">"/User/十年.mp3"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">205</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">205</span><span class="pln"> </span><span class="pun">秒（</span><span class="lit">3</span><span class="pun">分</span><span class="lit">25</span><span class="pun">秒）</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="i4cl"><br></p><ul data-anchor-id="jlb0">
<li><h3 id="获取设备类型-devicetype">获取设备类型 (<strong>device.type</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">设备类型</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">type</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>设备类型 <br>
  文本型，返回设备类型，大约是 <code>"iPhone3,1"</code> 这种形式的字符串</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取设备类型 <br>
  这个函数可以在 XUI 中使用</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">type</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"iPhone3,1"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">是</span><span class="pln"> iPhone </span><span class="lit">4</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="l3ai"><br></p><ul data-anchor-id="zya8">
<li><h3 id="获取设备名-devicename">获取设备名 (<strong>device.name</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">设备名</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">name</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>设备名 <br>
  文本型，返回用户给设备取的名字</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>这个函数可以在 XUI 中使用  </p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"设备的名字是："</span><span class="pun">..</span><span class="pln">device</span><span class="pun">.</span><span class="pln">name</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="wso8"><br></p><ul data-anchor-id="ui6r">
<li><h3 id="设置设备名-devicesetname">设置设备名 (<strong>device.set_name</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">set_name</span><span class="pun">(名字)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>名字 <br>
  文本型，需要设置的设备名字</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>注意：</strong>设置设备名可能会在不同版本的系统上有不同程度的延迟生效现象 <br>
  也就是说，调用 device.set_name 后立刻使用 device.name 获取到的并不是设置的那个名字 <br>
  这种情况下，请自行根据不同操作系统版本延迟判断</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">set_name</span><span class="pun">(</span><span class="str">"iPhavonz"</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="n5y1"><br></p><ul data-anchor-id="84wh">
<li><h3 id="获取设备udid-deviceudid">获取设备UDID (<strong>device.udid</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">udid </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">udid</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>udid <br>
  文本型，返回设备的 UDID</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>UDID 参考资料：<a href="https://www.theiphonewiki.com/wiki/UDID" target="_blank">https://www.theiphonewiki.com/wiki/UDID</a></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"设备的 UDID 是："</span><span class="pun">..</span><span class="pln">device</span><span class="pun">.</span><span class="pln">udid</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="8n1q"><br></p><ul data-anchor-id="3tb2">
<li><h3 id="获取设备的序列号-deviceserialnumber">获取设备的序列号 (<strong>device.serial_number</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">序列号</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">serial_number</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>序列号 <br>
  文本型，返回设备的序列号</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"设备的序列号是："</span><span class="pun">..</span><span class="pln">device</span><span class="pun">.</span><span class="pln">serial_number</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="i6y8"><br></p><ul data-anchor-id="hu0q">
<li><h3 id="获取设备的-wifi-mac-地址-devicewifimac">获取设备的 WiFi MAC 地址 (<strong>device.wifi_mac</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">歪坏麦克</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">wifi_mac</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>歪坏麦克 <br>
  文本型，返回设备的 WiFi MAC 地址</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"设备的 WiFi MAC 地址是："</span><span class="pun">..</span><span class="pln">device</span><span class="pun">.</span><span class="pln">wifi_mac</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="vswf"><br></p><ul data-anchor-id="f9rl">
<li><h3 id="获取设备所有的接口-ip-deviceifaddrs">获取设备所有的接口 IP (<strong>device.ifaddrs</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">接口信息数组</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">ifaddrs</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>接口信息数组 <br>
  表型，返回设备的所有接口的信息结构如下 <br>
  {{"ifname1", "ip1"}, {"ifname2", "ip2"}, ...}</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取设备所有的接口 IP</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">获取设备的</span><span class="pln"> </span><span class="typ">WiFi</span><span class="pln"> IP</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> ip </span><span class="pun">=</span><span class="pln"> </span><span class="str">"没开 WiFi"</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">for</span><span class="pln"> i</span><span class="pun">,</span><span class="pln">v </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">device</span><span class="pun">.</span><span class="pln">ifaddrs</span><span class="pun">())</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]==</span><span class="str">"en0"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        ip </span><span class="pun">=</span><span class="pln"> v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L7"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">ip</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="h9f3"><br></p><ul data-anchor-id="qm47">
<li><h3 id="获取当前设备电池剩余电量-devicebatterylevel">获取当前设备电池剩余电量 (<strong>device.battery_level</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">电量</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">battery_level</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>电量 <br>
  实数型，当前设备电池剩余电量，范围 0.0~1.0</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"当前设备电池剩余电量："</span><span class="pun">..(</span><span class="pln">device</span><span class="pun">.</span><span class="pln">battery_level</span><span class="pun">()</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)..</span><span class="str">"%"</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="mltd"><br></p><ul data-anchor-id="37yz">
<li><h3 id="获取当前设备充电状态-devicebatterystate">获取当前设备充电状态 (<strong>device.battery_state</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">充电状态</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">battery_state</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>充电状态 <br>
  文本型，充电状态，有这么几种状态 <br>
  返回 "Full" 表示连接了电源并已经充满 <br>
  返回 "Charging" 表示连接了电源并正在充电中 <br>
  返回 "Unplugged" 表示没有接电源 <br>
  返回 "Unknown" 表示未知状态</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">状态表</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="typ">Full</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"连接并已充满"</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="typ">Charging</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"连接并在充电"</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="typ">Unplugged</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"没插电源"</span><span class="pun">,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="typ">Unknown</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"未知状态"</span><span class="pun">,</span></code></li><li class="L5"><code class="language-lua"><span class="pun">}</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"当前设备电池充电状态："</span><span class="pun">..状态表[</span><span class="pln">device</span><span class="pun">.</span><span class="pln">battery_state</span><span class="pun">()])</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="7ri5"><br></p><ul data-anchor-id="9f6d">
<li><h3 id="打开设备-wifi-deviceturnonwifi">打开设备 WiFi (<strong>device.turn_on_wifi</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_on_wifi</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_on_wifi</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="1jej"><br></p><ul data-anchor-id="zg28">
<li><h3 id="关闭设备-wifi-deviceturnoffwifi">关闭设备 WiFi (<strong>device.turn_off_wifi</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_off_wifi</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_off_wifi</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="pmhb"><br></p><ul data-anchor-id="t8f4">
<li><h3 id="打开设备蜂窝数据-deviceturnondata">打开设备蜂窝数据 (<strong>device.turn_on_data</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_on_data</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_on_data</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="cxiu"><br></p><ul data-anchor-id="i9zo">
<li><h3 id="关闭设备蜂窝数据-deviceturnoffdata">关闭设备蜂窝数据 (<strong>device.turn_off_data</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_off_data</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_off_data</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="6xsu"><br></p><ul data-anchor-id="c1a9">
<li><h3 id="打开设备蓝牙-deviceturnonbluetooth">打开设备蓝牙 (<strong>device.turn_on_bluetooth</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_on_bluetooth</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_on_bluetooth</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="5rx2"><br></p><ul data-anchor-id="hdwh">
<li><h3 id="关闭设备蓝牙-deviceturnoffbluetooth">关闭设备蓝牙 (<strong>device.turn_off_bluetooth</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_off_bluetooth</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_off_bluetooth</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="z3vx"><br></p><ul data-anchor-id="nyhu">
<li><h3 id="打开设备飞行模式-deviceturnonairplane">打开设备飞行模式 (<strong>device.turn_on_airplane</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_on_airplane</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>打开设备飞行模式（断网哦）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_on_airplane</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="ikw2"><br></p><ul data-anchor-id="qm5j">
<li><h3 id="关闭设备飞行模式-deviceturnoffairplane">关闭设备飞行模式 (<strong>device.turn_off_airplane</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_off_airplane</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>关闭设备飞行模式（不是关网，是开网）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_off_airplane</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="jg9i"><br></p><ul data-anchor-id="jd1a">
<li><h3 id="连接到当前设置所选-vpn-deviceturnonvpn">连接到当前设置所选 VPN (<strong>device.turn_on_vpn</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_on_vpn</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>尝试连接到所选 VPN，如果没选，则什么也不发生 <br>
  <strong>注</strong>：该函数稳定性有限，在 iOS7 上碰到 VPN 没有设置密码的情况下调用会导致进入安全模式，<strong>推荐</strong>使用更加稳定的解决方案 <a href="#vpn-%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%9D%97vpnconf">VPN 配置模块（vpnconf）</a></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_on_vpn</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="cx4o"><br></p><ul data-anchor-id="vv8n">
<li><h3 id="断开已有的-vpn-连接-deviceturnoffvpn">断开已有的 VPN 连接 (<strong>device.turn_off_vpn</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_off_vpn</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>断开已经连上的 VPN 连接，如果当前没有尝试连接或已经连接的 VPN 则什么也不发生 <br>
  <strong>注</strong>：该函数稳定性有限，有可能调用无效，<strong>推荐</strong>使用更加稳定的解决方案 <a href="#vpn-%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%9D%97vpnconf">VPN 配置模块（vpnconf）</a></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">turn_off_vpn</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="0s7o"><br></p><ul data-anchor-id="4n5q">
<li><h3 id="判断当前是否打开了-vpn-开关-deviceisvpnon">判断当前是否打开了 VPN 开关 (<strong>device.is_vpn_on</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">开关状态,</span><span class="pln"> </span><span class="pun">状态描述</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">is_vpn_on</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>开关状态 <br>
  布尔型，VPN 开关为打开（正在连接或已经连接成功）状态则返回 true，否则返回 false</li>
  <li>状态描述 <br>
  文本型 或 nil，当第一个返回值为 true 的时候，这个返回值返回一个用于描述 VPN 连接状态的字符串</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <ul><li><strong>注意</strong>： <br>
  当 VPN 正在连接（还没有连接成功）的时候，开关状态 会返回 true。 <br>
  状态描述 在不同的语言环境或系统版本中返回的同一状态描述不保证相同。 <br>
  更多 VPN 相关功能尽在 <a href="#vpn-%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%9D%97vpnconf">VPN 配置模块（vpnconf）</a></li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> is_on</span><span class="pun">,</span><span class="pln"> stat </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">is_vpn_on</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">is_on</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="pln">stat</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        device</span><span class="pun">.</span><span class="pln">turn_on_vpn</span><span class="pun">()</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="npkb"><br></p><ul data-anchor-id="1jub">
<li><h3 id="打开设备闪光灯-deviceflashon">打开设备闪光灯 (<strong>device.flash_on</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否成功</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">flash_on</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>是否成功 <br>
  布尔型，设备可以打开相机并且有闪光灯硬件返回 true，否则返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>iPad Pro 的闪光灯无法开启</strong> <br>
  打开设备闪光灯，脚本终止的时候，由脚本启动的闪光灯会自动关闭</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">flash_on</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="y2oc"><br></p><ul data-anchor-id="15dh">
<li><h3 id="关闭设备闪光灯-deviceflashoff">关闭设备闪光灯 (<strong>device.flash_off</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否成功</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">flash_off</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>是否成功 <br>
  设备可以打开相机并且有闪光灯硬件返回 true，否则返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>iPad Pro 的闪光灯无法开启</strong> <br>
  如果闪光灯是开启状态，那么该函数会关闭闪光灯，否则什么都不发生</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">flash_off</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">设备有闪光灯</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">设备没闪光灯</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="xnst"><br></p><ul data-anchor-id="qngt">
<li><h3 id="打开减少动态效果开关-devicereducemotionon">打开“减少动态效果”开关 (<strong>device.reduce_motion_on</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">reduce_motion_on</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>减少动态效果的开关在设备上的 设置--通用--辅助功能--减少动态效果</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">reduce_motion_on</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="4qst"><br></p><ul data-anchor-id="erhs">
<li><h3 id="关闭减少动态效果开关-devicereducemotionoff">关闭“减少动态效果”开关 (<strong>device.reduce_motion_off</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">reduce_motion_off</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>减少动态效果的开关在设备上的 设置--通用--辅助功能--减少动态效果</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">reduce_motion_off</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="z4qu"><br></p><ul data-anchor-id="fkip">
<li><h3 id="打开-assistivetouch-deviceassistivetouchon">打开 AssistiveTouch (<strong>device.assistive_touch_on</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">assistive_touch_on</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.1.1-1 版以上方可使用</strong> <br>
  AssistiveTouch 开关在设备上的 设置--通用--辅助功能--AssistiveTouch</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">assistive_touch_on</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="r8u9"><br></p><ul data-anchor-id="tyhr">
<li><h3 id="关闭-assistivetouch-deviceassistivetouchoff">关闭 AssistiveTouch (<strong>device.assistive_touch_off</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">assistive_touch_off</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.1.1-1 版以上方可使用</strong> <br>
  AssistiveTouch 的开关在设备上的 设置--通用--辅助功能--AssistiveTouch</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">assistive_touch_off</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="m9xi"><br></p><ul data-anchor-id="0jsf">
<li><h3 id="获取背光亮度值-devicebrightness">获取背光亮度值 (<strong>device.brightness</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">亮度</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">brightness</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>亮度 <br>
  实数型，返回当前设备的背光亮度，范围 0.0~1.0</li></ul>
</blockquote></li>
<li><p>示例 <br>
<a href="#设置背光亮度-devicesetbrightness"><code>device.set_brightness 示例</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="srl4"><br></p><ul data-anchor-id="9p27">
<li><h3 id="设置背光亮度-devicesetbrightness">设置背光亮度 (<strong>device.set_brightness</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">set_brightness</span><span class="pun">(亮度)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>亮度 <br>
  实数型，用于设置设备的背光亮度，范围 0.0~1.0</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>该函数调用会关闭设备的自动调整背光功能</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="pln">device</span><span class="pun">.</span><span class="pln">brightness</span><span class="pun">())</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">for</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    device</span><span class="pun">.</span><span class="pln">set_brightness</span><span class="pun">(</span><span class="pln">i</span><span class="pun">/</span><span class="lit">10</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">200</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">for</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    device</span><span class="pun">.</span><span class="pln">set_brightness</span><span class="pun">(</span><span class="pln">i</span><span class="pun">/</span><span class="lit">10</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">200</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="4pam"><br></p><ul data-anchor-id="z2ek">
<li><h3 id="设置自动锁屏分钟数-devicesetautolocktime">设置自动锁屏分钟数 (<strong>device.set_autolock_time</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">set_autolock_time</span><span class="pun">(分钟数)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>分钟数 <br>
  整数型，用于设置设备自动锁屏分钟数，设置为 0 则永不锁屏</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.1.2-1 版以上方可使用</strong> <br>
  只能设置为设备有的分钟等级</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">set_autolock_time</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="fvfw"><br></p><ul data-anchor-id="b1ku">
<li><h3 id="设置设备音量-devicesetvolume">设置设备音量 (<strong>device.set_volume</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">set_volume</span><span class="pun">(音量)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>音量 <br>
  实数型，用于设置设备的音量，范围 0.0~1.0</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">set_volume</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">设备静音</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="25q4"><br></p><ul data-anchor-id="hra2">
<li><h3 id="加入到一个无线局域网-devicejoinwifi">加入到一个无线局域网 (<strong>device.join_wifi</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">join_wifi</span><span class="pun">(</span><span class="pln">SSID</span><span class="pun">,</span><span class="pln"> </span><span class="pun">密码,</span><span class="pln"> </span><span class="pun">加密类型)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>SSID <br>
  文本型，无线局域网的 SSID，也就是名字</li>
  <li>密码 <br>
  文本型，无线局域网的密码</li>
  <li>加密类型 <br>
  整数型，加密类型，可以是 <br>
      <code>0</code> - 不加密网络 <br>
      <code>1</code> - 有密码网络</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-1 版以上方可使用</strong> <br>
  <strong>这个函数不支持 iOS 10 及以上版本操作系统</strong> <br>
  <strong>注意</strong>：加入无线局域网可能会需要较长时间，也可能加入失败，请自行写代码延迟并判断</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">device</span><span class="pun">.</span><span class="pln">join_wifi</span><span class="pun">(</span><span class="str">'Tenda_9B3F'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'123456'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="eq7o"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="nguj" id="图片对象模块image">图片对象模块（image）</h2><ul data-anchor-id="c5fx">
<li><h3 id="判断一个值是否是图片对象-imageis">判断一个值是否是图片对象 (<strong>image.is</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否图片</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="kwd">is</span><span class="pun">(需要判断的值)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>需要判断的值 <br>
  值，需要判断是否是图片对象的值</li>
  <li>是否图片 <br>
  布尔型，值是图片对象返回 true，否则返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>判断一个值是否是图片对象</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> image</span><span class="pun">.</span><span class="kwd">is</span><span class="pun">(</span><span class="pln">img</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> img </span><span class="pun">是个图片对象</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">--</span><span class="pln"> img </span><span class="pun">不是图片对象</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="83hc"><br></p><ul data-anchor-id="77p5">
<li><h3 id="创建指定尺寸空白图片对象-imagenew">创建指定尺寸空白图片对象 (<strong>image.new</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="kwd">new</span><span class="pun">(宽,</span><span class="pln"> </span><span class="pun">高)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>宽, 高 <br>
  整数型，新建的图片对象的宽, 高</li>
  <li>图像 <br>
  图片对象，返回新建的图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>创建空白图片对象，默认这图像上所有的点的颜色皆为0x000000（黑） <br>
  该方法会产出一个新的图片对象，如需保证高效频繁使用请搭配 <a href="#销毁一个图片对象-destroy">image:destroy</a> 方法使用</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="g87c"><br></p><ul data-anchor-id="x7hh">
<li><h3 id="图像合并-imageopermerge">图像合并 (<strong>image.oper_merge</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">oper_merge</span><span class="pun">(图片文件名数组,</span><span class="pln"> </span><span class="pun">输出路径,</span><span class="pln"> </span><span class="pun">合并类型,</span><span class="pln"> </span><span class="pun">生成质量)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图片文件名数组 <br>
  表型，需合并图片的文件名列表，支持使用绝对路径</li>
  <li>输出路径 <br>
  文本型，生成新图片的文件名，支持使用绝对路径</li>
  <li>合并类型 <br>
  整数型，合并类型，0 - 横向合并；1 - 竖向合并</li>
  <li>生成质量 <br>
  实数型，当生成图片格式为 jpg 时，可控制图片质量，范围 0.0 ~ 1.0</li>
  <li>操作成败 <br>
  整数型，0 - 成功；1 - 失败；2 - 失败；3 - 失败</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>默认图片路径为 /var/mobile/Media/1ferver/img，自建目录请填写相对路径</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">image</span><span class="pun">.</span><span class="pln">oper_merge</span><span class="pun">({</span><span class="str">"1.png"</span><span class="pun">,</span><span class="str">"2.png"</span><span class="pun">,</span><span class="str">"3.png"</span><span class="pun">},</span><span class="pln"> </span><span class="str">"4.jpg"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.5</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="6ut1"><br></p><ul data-anchor-id="nzy3">
<li><h3 id="新建一个文本图片对象-imagenewtextimage">新建一个文本图片对象 (<strong>image.new_text_image</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">new_text_image</span><span class="pun">(文本[,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">   font </span><span class="pun">=</span><span class="pln"> </span><span class="pun">字体,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">   size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">字体大小,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">   color </span><span class="pun">=</span><span class="pln"> </span><span class="pun">字体颜色,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">   alpha </span><span class="pun">=</span><span class="pln"> </span><span class="pun">字体不透明度,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">   back_color </span><span class="pun">=</span><span class="pln"> </span><span class="pun">背景色,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">   back_alpha </span><span class="pun">=</span><span class="pln"> </span><span class="pun">背景不透明度,</span></code></li><li class="L7"><code class="language-lua"><span class="pun">}])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文本 <br>
  文本型，需要绘制的文本内容</li>
  <li>字体 <br>
  文本型，可选参数，需要绘制的文本的字体，默认 "Arial"</li>
  <li>字体大小 <br>
  实数型，可选参数，需要绘制的文本的字体大小，默认 20.0</li>
  <li>字体颜色 <br>
  整数型，可选参数，需要绘制的文本的字体颜色，默认 0xffffff（白）</li>
  <li>字体不透明度 <br>
  整数型，可选参数，需要绘制的文本的字体不透明度，范围 0~255，默认 255</li>
  <li>背景色 <br>
  整数型，可选参数，图片背景色，默认 0x000000（黑）</li>
  <li>背景不透明度 <br>
  整数型，可选参数，图片背景不透明度，范围 0~255，默认 255</li>
  <li>图像 <br>
  图片对象，返回新建的图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>新建一个适合尺寸的图片对象，并将文本绘制于上 <br>
  该方法会产出一个新的图片对象，如需保证高效频繁使用请搭配 <a href="#销毁一个图片对象-destroy">image:destroy</a> 方法使用</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="84mb"><br></p><ul data-anchor-id="937f">
<li><h3 id="从文件创建图片对象-imageloadfile">从文件创建图片对象 (<strong>image.load_file</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">load_file</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，图片文件绝对路径</li>
  <li>图像 <br>
  图片对象 或 nil，返回新建的图片对象，如果文件不存在则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>从文件创建图片对象 <br>
  该方法会产出一个新的图片对象，如需保证高效频繁使用请搭配 <a href="#销毁一个图片对象-destroy">image:destroy</a> 方法使用</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#保存图片对象到相册-savetoalbum"><code>将文件转存到相册</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="83s5"><br></p><ul data-anchor-id="93s2">
<li><h3 id="从数据创建图片对象-imageloaddata">从数据创建图片对象 (<strong>image.load_data</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">load_data</span><span class="pun">(图像数据)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像数据 <br>
  字符串型，png 或 jpeg 格式的图片数据</li>
  <li>图像 <br>
  图片对象 或 nil，返回新建的图片对象，如果数据不是图像格式则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>从数据创建图片对象 <br>
  该方法会产出一个新的图片对象，如需保证高效频繁使用请搭配 <a href="#销毁一个图片对象-destroy">image:destroy</a> 方法使用</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#保存图片对象到相册-savetoalbum"><code>从网上下载个小图片直接转存到相册</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="tk3m"><br></p><ul data-anchor-id="7bgf">
<li><h3 id="从图片对象创建拷贝图片对象-copy">从图片对象创建拷贝图片对象 (<strong>:copy</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="lit">2</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像</span><span class="lit">1</span><span class="pun">:</span><span class="pln">copy</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像1 <br>
  图片对象，原始图片对象</li>
  <li>图像2 <br>
  图片对象，返回新建的图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>从图片对象创建拷贝图片对象 <br>
  该方法会产出一个新的图片对象，如需保证高效频繁使用请搭配 <a href="#销毁一个图片对象-destroy">image:destroy</a> 方法使用</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">scrn </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">img2 </span><span class="pun">=</span><span class="pln"> scrn</span><span class="pun">:</span><span class="pln">copy</span><span class="pun">()</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获取屏幕图像-screenimage"><code>screen.image</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="5xm8"><br></p><ul data-anchor-id="ozeb">
<li><h3 id="从图片对象截取部分新建拷贝图片对象-crop">从图片对象截取部分新建拷贝图片对象 (<strong>:crop</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="lit">2</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像</span><span class="lit">1</span><span class="pun">:</span><span class="pln">crop</span><span class="pun">([左,</span><span class="pln"> </span><span class="pun">上,</span><span class="pln"> </span><span class="pun">右,</span><span class="pln"> </span><span class="pun">下])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像1 <br>
  图片对象，原始图片对象</li>
  <li>左, 上, 右, 下 <br>
  整数型，可选参数，原始图像中的区域左上右下坐标，默认 0, 0, 原图宽-1, 原图高-1</li>
  <li>图像2 <br>
  图片对象，返回新建的图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>从图片对象截取部分新建拷贝图片对象 <br>
  该方法会产出一个新的图片对象，如需保证高效频繁使用请搭配 <a href="#销毁一个图片对象-destroy">image:destroy</a> 方法使用</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">scrn </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">img2 </span><span class="pun">=</span><span class="pln"> scrn</span><span class="pun">:</span><span class="pln">crop</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> </span><span class="lit">200</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获取屏幕图像-screenimage"><code>screen.image</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="k406"><br></p><ul data-anchor-id="jqdd">
<li><h3 id="保存图片对象到相册-savetoalbum">保存图片对象到相册 (<strong>:save_to_album</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像:</span><span class="pln">save_to_album</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，需要保存到相册的图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>导出图片对象的图片到系统相册</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">从网上下载个小图片直接转存到相册</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">,</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"https://www.xxtouch.com/img/Logo.png"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">==</span><span class="pln"> </span><span class="lit">200</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> img </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">load_data</span><span class="pun">(</span><span class="pln">r</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    img</span><span class="pun">:</span><span class="pln">save_to_album</span><span class="pun">()</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"图片已存到相册"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"下载失败"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#发起-get-请求-httpget"><code>http.get</code></a></p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">截全屏图像保存到相册</span></code></li><li class="L1"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">():</span><span class="pln">save_to_album</span><span class="pun">()</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获取屏幕图像-screenimage"><code>screen.image</code></a></p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">将文件转存到相册（这只是例子，文件不存在会报错，请在保存之前先做判断）</span></code></li><li class="L1"><code class="language-lua"><span class="pln">image</span><span class="pun">.</span><span class="pln">load_file</span><span class="pun">(</span><span class="str">"/var/mobile/1.png"</span><span class="pun">):</span><span class="pln">save_to_album</span><span class="pun">()</span></code></li></ol></pre>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">将文件转存到相册</span></code></li><li class="L1"><code class="language-lua"><span class="pln">img </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">load_file</span><span class="pun">(</span><span class="str">"/var/mobile/1.png"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">if</span><span class="pln"> image</span><span class="pun">.</span><span class="kwd">is</span><span class="pun">(</span><span class="pln">img</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    img</span><span class="pun">:</span><span class="pln">save_to_album</span><span class="pun">()</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="977b"><br></p><ul data-anchor-id="utf0">
<li><h3 id="输出图片对象到一个-png-格式的文件-savetopngfile">输出图片对象到一个 PNG 格式的文件 (<strong>:save_to_png_file</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像:</span><span class="pln">save_to_png_file</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，需要保存到文件的图片对象</li>
  <li>文件路径 <br>
  文本型，需要保存到图片文件的绝对路径</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>输出图片对象到一个 PNG 格式的文件，扩展名可以不是 PNG <br>
  <strong>注意：</strong>该函数无视符号链接，即覆盖写入不会覆盖符号链接所指向的文件，而是覆盖符号链接本身</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">截全屏图像保存到文件</span></code></li><li class="L1"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">():</span><span class="pln">save_to_png_file</span><span class="pun">(</span><span class="str">"/var/mobile/1.png"</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获取屏幕图像-screenimage"><code>screen.image</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="xc0r"><br></p><ul data-anchor-id="27fu">
<li><h3 id="输出图片对象到一个-jpeg-格式的文件-savetojpegfile">输出图片对象到一个 JPEG 格式的文件 (<strong>:save_to_jpeg_file</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像:</span><span class="pln">save_to_jpeg_file</span><span class="pun">(文件路径</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">图像质量</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，需要保存到文件的图片对象</li>
  <li>文件路径 <br>
  文本型，需要保存到图片文件的绝对路径</li>
  <li>图像质量 <br>
  实数型，可选参数，图片质量，取值范围 0.0~1.0，默认 1.0</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>输出图片对象到一个 JPEG 格式的文件，扩展名可以不是 JPG <br>
  <strong>注意：</strong>该函数无视符号链接，即覆盖写入不会覆盖符号链接所指向的文件，而是覆盖符号链接本身</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">截全屏图像保存到文件</span></code></li><li class="L1"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">():</span><span class="pln">save_to_jpeg_file</span><span class="pun">(</span><span class="str">"/var/mobile/1.jpg"</span><span class="pun">)</span></code></li></ol></pre>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">截全屏图像保存到文件并设置图片为低质量</span><span class="pln"> </span><span class="pun">(关键字：有损压缩</span><span class="pln"> </span><span class="pun">图像压缩</span><span class="pln"> </span><span class="pun">图片压缩</span><span class="pln"> </span><span class="pun">图片质量)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">():</span><span class="pln">save_to_jpeg_file</span><span class="pun">(</span><span class="str">"/var/mobile/1.jpg"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.4</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获取屏幕图像-screenimage"><code>screen.image</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="cc3r"><br></p><ul data-anchor-id="71ud">
<li><h3 id="获取图片对象的-png-格式数据-pngdata">获取图片对象的 PNG 格式数据 (<strong>:png_data</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln">PNG</span><span class="pun">数据</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">png_data</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>图像PNG数据 <br>
  字符串型，返回 PNG 数据，对这份数据的修改不会影响图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取图片对象的 PNG 格式数据 <br>
  性能上，该函数操作过程产生两次数据拷贝</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">file</span><span class="pun">.</span><span class="pln">writes</span><span class="pun">(</span><span class="str">'/var/mobile/1.png'</span><span class="pun">,</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">():</span><span class="pln">png_data</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获取屏幕图像-screenimage"><code>screen.image</code></a>、<a href="#将数据覆盖写入到文件-filewrites"><code>file.writes</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="pat4"><br></p><ul data-anchor-id="7qog">
<li><h3 id="获取图片对象的-jpeg-格式数据-jpegdata">获取图片对象的 JPEG 格式数据 (<strong>:jpeg_data</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln">JPG</span><span class="pun">数据</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> img</span><span class="pun">:</span><span class="pln">jpeg_data</span><span class="pun">([</span><span class="pln"> </span><span class="pun">图像质量</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>图像质量 <br>
  实数型，可选参数，图片质量，取值范围 0.0~1.0，默认 1.0</li>
  <li>图像JPG数据 <br>
  字符串型，返回 JPEG 数据，对这份数据的修改不会影响图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取图片对象的 JPEG 格式数据 <br>
  性能上，该函数操作过程产生两次数据拷贝</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">截全屏图像保存到文件并设置图片为</span><span class="pln"> </span><span class="lit">80</span><span class="pun">%</span><span class="pln"> </span><span class="pun">质量</span><span class="pln"> </span><span class="pun">(关键字：有损压缩</span><span class="pln"> </span><span class="pun">图像压缩</span><span class="pln"> </span><span class="pun">图片压缩</span><span class="pln"> </span><span class="pun">图片质量)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">file</span><span class="pun">.</span><span class="pln">writes</span><span class="pun">(</span><span class="str">'/var/mobile/1.jpg'</span><span class="pun">,</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">():</span><span class="pln">jpeg_data</span><span class="pun">(</span><span class="lit">0.8</span><span class="pun">))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获取屏幕图像-screenimage"><code>screen.image</code></a>、<a href="#将数据覆盖写入到文件-filewrites"><code>file.writes</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="bwbz"><br></p><ul data-anchor-id="lz0u">
<li><h3 id="90度左旋图片对象-turnleft">90度左旋图片对象 (<strong>:turn_left</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">turn_left</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>90 度左旋图片对象 <br>
  会对对象本身产生影响 <br>
  性能上，该函数操作过程不产生数据拷贝</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">没有</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="wix6"><br></p><ul data-anchor-id="aq9v">
<li><h3 id="90度右旋图片对象-turnright">90度右旋图片对象 (<strong>:turn_right</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">turn_right</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>90 度右旋图片对象 <br>
  会对对象本身产生影响 <br>
  性能上，该函数操作过程不产生数据拷贝</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">没有</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="a3h2"><br></p><ul data-anchor-id="szfp">
<li><h3 id="180度旋转图片对象-turnupondown">180度旋转图片对象 (<strong>:turn_upondown</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">turn_upondown</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>180 度旋转图片对象 <br>
  会对对象本身产生影响 <br>
  性能上，该函数操作过程不产生数据拷贝</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">没有</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="r6mq"><br></p><ul data-anchor-id="boe1">
<li><h3 id="获取图片对象的尺寸-size">获取图片对象的尺寸 (<strong>:size</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">宽,</span><span class="pln"> </span><span class="pun">高</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">size</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>宽, 高 <br>
  整数型，当前操作的图片对象的 宽、高</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取图片对象的尺寸，注意这里返回的 w 不一定比 h 短，旋转会发生改变</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> img </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">load_file</span><span class="pun">(</span><span class="str">"/var/mobile/1.png"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h </span><span class="pun">=</span><span class="pln"> img</span><span class="pun">:</span><span class="pln">size</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"图像的宽："</span><span class="pun">..</span><span class="pln">w</span><span class="pun">..</span><span class="str">"\n图像的高："</span><span class="pun">..</span><span class="pln">h</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="hntq"><br></p><ul data-anchor-id="hvfy">
<li><h3 id="获取图片对象某点颜色-getcolor">获取图片对象某点颜色 (<strong>:get_color</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">颜色,</span><span class="pln"> </span><span class="pun">不透明度</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">get_color</span><span class="pun">(横坐标,</span><span class="pln"> </span><span class="pun">纵坐标)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>横坐标, 纵坐标 <br>
  整数型，需要获取颜色的点于当前图片对象上的坐标</li>
  <li>颜色 <br>
  整数型，返回当前图片对象上的这个坐标的颜色值，值得一提的是，假如颜色不透明度不是 255，则该点颜色红绿蓝实际会需要考虑除以不透明率（不透明度/255）</li>
  <li>不透明度 <br>
  整数型，返回当前图片对象上的这个坐标的不透明度，取值范围 0~255</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取图片对象某点颜色，不同于屏幕取色之处在于，图像中的像素还多了透明度属性</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> img </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">load_file</span><span class="pun">(</span><span class="str">"/var/mobile/1.png"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> clr </span><span class="pun">=</span><span class="pln"> img</span><span class="pun">:</span><span class="pln">get_color</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="str">"图像上坐标 (100, 100) 的颜色为：0x%06x"</span><span class="pun">,</span><span class="pln"> clr</span><span class="pun">))</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="gbbw"><br></p><ul data-anchor-id="dujq">
<li><h3 id="设置图片对象某点颜色-setcolor">设置图片对象某点颜色 (<strong>:set_color</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">set_color</span><span class="pun">(横坐标,</span><span class="pln"> </span><span class="pun">纵坐标,</span><span class="pln"> </span><span class="pun">颜色)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>横坐标, 纵坐标 <br>
  整数型，需要设置颜色的点于当前图片对象上的坐标</li>
  <li>颜色 <br>
  整数型，需要设置的颜色值</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>设置图片对象某点颜色 <br>
  会对对象本身产生影响 <br>
  性能上，该函数操作过程不产生数据拷贝</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">没有</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="smak"><br></p><ul data-anchor-id="65da">
<li><h3 id="颜色替换-replacecolor">颜色替换 (<strong>:replace_color</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">replace_color</span><span class="pun">(原色,</span><span class="pln"> </span><span class="pun">替换色[,</span><span class="pln"> </span><span class="pun">原色相似度])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>原色 <br>
  整数型，原来的颜色</li>
  <li>替换色 <br>
  整数型，需要变成的颜色</li>
  <li>原色相似度 <br>
  整数型，可选参数，颜色相似度，范围 0~100，默认 100</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将图片对象上某种颜色（或及近似色）替换为另外的颜色 <br>
  会对对象本身产生影响 <br>
  性能上，该函数操作过程不产生数据拷贝</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#将文本编码成二维码图片-utilsqrencode"><code>二维码背景色替换</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="lt5p"><br></p><ul data-anchor-id="e0v5">
<li><h3 id="图中贴图-drawimage">图中贴图 (<strong>:draw_image</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">大图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">大图像:</span><span class="pln">draw_image</span><span class="pun">(小图像[,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">   left </span><span class="pun">=</span><span class="pln"> </span><span class="pun">左上的</span><span class="pln"> x </span><span class="pun">坐标,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">   top </span><span class="pun">=</span><span class="pln"> </span><span class="pun">左上的</span><span class="pln"> y </span><span class="pun">坐标,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">   alpha </span><span class="pun">=</span><span class="pln"> </span><span class="pun">不透明度,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">   background </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-lua"><span class="pln">      </span><span class="pun">{颜色*,</span><span class="pln"> </span><span class="pun">色偏*},</span></code></li><li class="L6"><code class="language-lua"><span class="pln">      </span><span class="pun">{颜色*,</span><span class="pln"> </span><span class="pun">色偏*},</span></code></li><li class="L7"><code class="language-lua"><span class="pln">      </span><span class="pun">...</span></code></li><li class="L8"><code class="language-lua"><span class="pln">   </span><span class="pun">},</span></code></li><li class="L9"><code class="language-lua"><span class="pun">}])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>大图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>小图像 <br>
  图片对象，需要绘制到 大图像 上的图像</li>
  <li>左上的 x 坐标 <br>
  整数型，可选参数，需要将 小图像 绘制到 大图像 的左上角的 x 坐标，默认 0</li>
  <li>左上的 y 坐标 <br>
  整数型，可选参数，需要将 小图像 绘制到 大图像 的左上角的 y 坐标，默认 0</li>
  <li>不透明度 <br>
  整数型，可选参数，小图像 的不透明度，范围 0~255，默认 255</li>
  <li>颜色*, 色偏* <br>
  顺序表型，可选参数，小图像 上的与 颜色* 色差在 色偏* 范围内的颜色将不会绘制到 大图像 上，默认 不忽略任何颜色</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>在图像上绘制另外一个图像 <br>
  会对对象本身产生影响 <br>
  性能上，该函数操作过程不产生数据拷贝</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">没有</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="sev5"><br></p><ul data-anchor-id="oxx3">
<li><h3 id="二值化处理图片对象-binaryzation">二值化处理图片对象 (<strong>:binaryzation</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">binaryzation</span><span class="pun">({</span></code></li><li class="L1"><code class="language-lua"><span class="pln">   </span><span class="pun">{颜色*,</span><span class="pln"> </span><span class="pun">色偏*},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">   </span><span class="pun">{颜色*,</span><span class="pln"> </span><span class="pun">色偏*},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">   </span><span class="pun">...</span></code></li><li class="L4"><code class="language-lua"><span class="pun">})</span></code></li></ol></pre>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">binaryzation</span><span class="pun">(</span><span class="str">"cx*-cox*,cx*-cox*..."</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>颜色*, 色偏* <br>
  整数型，颜色值白名单，颜色* 是颜色值本身，色偏* 是 颜色* 的最大色差值</li>
  <li>cx*-cox* <br>
  文本型，颜色值白名单，cx* 是颜色值本身的16进制文本描述，cox* 是 cx* 的最大色差值16进制文本描述</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>二值化处理图片对象 <br>
  会对对象本身产生影响 <br>
  性能上，该函数操作过程不产生数据拷贝</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">1</span><span class="pun">：</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> pic </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">(</span><span class="lit">462</span><span class="pun">,</span><span class="pln"> </span><span class="lit">242</span><span class="pun">,</span><span class="pln"> </span><span class="lit">569</span><span class="pun">,</span><span class="pln"> </span><span class="lit">272</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">pic </span><span class="pun">=</span><span class="pln"> pic</span><span class="pun">:</span><span class="pln">binaryzation</span><span class="pun">({</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="lit">0x9D5D39</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x0F1F26</span><span class="pun">},</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="lit">0xD3D3D2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x2C2C2D</span><span class="pun">},</span></code></li><li class="L5"><code class="language-lua"><span class="pun">})</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">2</span><span class="pun">：</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">local</span><span class="pln"> pic </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">(</span><span class="lit">462</span><span class="pun">,</span><span class="pln"> </span><span class="lit">242</span><span class="pun">,</span><span class="pln"> </span><span class="lit">569</span><span class="pun">,</span><span class="pln"> </span><span class="lit">272</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">pic </span><span class="pun">=</span><span class="pln"> pic</span><span class="pun">:</span><span class="pln">binaryzation</span><span class="pun">(</span><span class="str">"9D5D39-0F1F26,D3D3D2-2C2C2D"</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="7wra"><br></p><ul data-anchor-id="toft">
<li><h3 id="在图上找色-findcolor">在图上找色 (<strong>:find_color</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">横坐标,</span><span class="pln"> </span><span class="pun">纵坐标</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">find_color</span><span class="pun">(...)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象 <br>
  详细用法参考 <a href="#单点相似度模式找色-screenfindcolor">screen.find_color</a></li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>在图上找色</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">没有</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="z0d1"><br></p><ul data-anchor-id="c931">
<li><h3 id="图片多点颜色匹配-iscolors">图片多点颜色匹配 (<strong>:is_colors</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否完全匹配</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">is_colors</span><span class="pun">(...)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象 <br>
  详细用法参考 <a href="#屏幕多点颜色匹配-screeniscolors">screen.is_colors</a></li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>图片多点颜色匹配</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">没有</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="mjuw"><br></p><ul data-anchor-id="9ft2">
<li><h3 id="解码一个二维码图片-qrdecode">解码一个二维码图片 (<strong>:qr_decode</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">识别文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">qr_decode</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>识别文本 <br>
  文本型 或 nil，返回当前二维码解码之后的文字，如果不是二维码或不能解码则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>解码一个包含二维码图片，不一定需要纯二维码图像，有杂物可能也能正确识别</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">解码一个本地二维码图片文件</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> img </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">load_file</span><span class="pun">(</span><span class="str">"/User/qr.png"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">if</span><span class="pln"> img </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> img</span><span class="pun">:</span><span class="pln">qr_decode</span><span class="pun">()</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    img</span><span class="pun">:</span><span class="pln">destroy</span><span class="pun">()</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> str </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"识别成功\n识别结果是："</span><span class="pun">..</span><span class="pln">str</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"识别失败"</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"图片文件加载失败，文件或许不存在"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">解码当前屏幕上显示的二维码</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">():</span><span class="pln">qr_decode</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">if</span><span class="pln"> str </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"识别成功\n识别结果是："</span><span class="pun">..</span><span class="pln">str</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"识别失败"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="zrzg"><br></p><ul data-anchor-id="iwqu">
<li><h3 id="销毁一个图片对象-destroy">销毁一个图片对象 (<strong>:destroy</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像:</span><span class="pln">destroy</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>立即释放图片对象的内存占用，被销毁的图片对象不能再使用 <br>
  该方法属性能优化方法，在频繁创建新图片对象的情形下，建议一定要使用该方法释放掉不再使用的图片对象以防止内存占用过高导致设备卡死崩溃等问题 <br>
  不是频繁创建图片对象的情况下可以不使用当前方法，并不会有内存泄露，lua  自带的垃圾回收机制会延迟一段时间将不再使用的数据回收</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"点击确定1秒后开始监控屏幕状态"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="kwd">local</span><span class="pln"> img </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">()</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">while</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> scn </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">()</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> scn</span><span class="pun">:</span><span class="pln">cv_find_image</span><span class="pun">(</span><span class="pln">img</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    scn</span><span class="pun">:</span><span class="pln">destroy</span><span class="pun">()</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> s </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">95</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        </span><span class="kwd">break</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"屏幕动了"</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="3i5a"><br></p><ul data-anchor-id="0q7y">
<li><h3 id="cv-图中找图-cvfindimage">cv - 图中找图 (<strong>:cv_find_image</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">require</span><span class="pun">(</span><span class="str">"image.cv"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">需要提前加载</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pun">横坐标,</span><span class="pln"> </span><span class="pun">纵坐标,</span><span class="pln"> </span><span class="pun">相似度</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">大图像:</span><span class="pln">cv_find_image</span><span class="pun">(小图像)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>大图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>小图像 <br>
  图片对象，需要找的小图</li>
  <li>横坐标, 纵坐标 <br>
  整数型，找到的小图在大图上的最匹配的位置的左上角坐标</li>
  <li>相似度 <br>
  实数型，返回找到的小图在大图上的最匹配的位置的相似度，范围 0~100</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>opencv 扩展功能，在一个图片对象中找另外一个图片对象位置</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="vo1g"><br></p><ul data-anchor-id="9qqm">
<li><h3 id="cv-图片自动二值化-cvbinaryzation">cv - 图片自动二值化 (<strong>:cv_binaryzation</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">require</span><span class="pun">(</span><span class="str">"image.cv"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">需要提前加载</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">cv_binaryzation</span><span class="pun">([</span><span class="pln"> </span><span class="pun">二值化阈值</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>二值化阈值 <br>
  实数型，可选参数，阈值，范围 0~255，默认选理论上最合适的阈值</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>opencv 扩展功能，图片自动二值化 <br>
  会对对象本身产生影响 <br>
  性能上，该函数操作过程不产生数据拷贝</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="hoqb"><br></p><ul data-anchor-id="2cfe">
<li><h3 id="cv-从图片创建一个拉伸的另外尺寸的图片-cvresize">cv - 从图片创建一个拉伸的另外尺寸的图片 (<strong>:cv_resize</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">require</span><span class="pun">(</span><span class="str">"image.cv"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">需要提前加载</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pun">新图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">cv_resize</span><span class="pun">(宽,</span><span class="pln"> </span><span class="pun">高)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>宽, 高 <br>
  整数型，设定的新图片宽高</li>
  <li>新图像 <br>
  图片对象，返回一个全新尺寸的图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>opencv 扩展功能，从图片创建一个拉伸的另外尺寸的图片 <br>
  会对对象本身产生影响</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="w3y6"><br></p><ul data-anchor-id="b7z6">
<li><h3 id="tesseract-对图片进行-ocr-识别-tessocr">tesseract - 对图片进行 ocr 识别 (<strong>:tess_ocr</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">require</span><span class="pun">(</span><span class="str">"image.tess_ocr"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">需要提前加载</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pun">识别结果,</span><span class="pln"> </span><span class="pun">结果详情</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">图像:</span><span class="pln">tess_ocr</span><span class="pun">([{</span></code></li><li class="L3"><code class="language-lua"><span class="pln">  </span><span class="pun">[</span><span class="pln">lang </span><span class="pun">=</span><span class="pln"> </span><span class="pun">语言,]</span></code></li><li class="L4"><code class="language-lua"><span class="pln">  </span><span class="pun">[</span><span class="pln">white_list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">白名单,]</span></code></li><li class="L5"><code class="language-lua"><span class="pln">  </span><span class="pun">[</span><span class="pln">black_list </span><span class="pun">=</span><span class="pln"> </span><span class="pun">黑名单,]</span></code></li><li class="L6"><code class="language-lua"><span class="pun">}])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>图像 <br>
  图片对象，当前操作的图片对象</li>
  <li>语言 <br>
  文本型，可选参数，使用的字库名称，默认 "eng"</li>
  <li>白名单 <br>
  文本型，可选参数，只允许展示的白名单，默认 无</li>
  <li>黑名单 <br>
  文本型，可选参数，只过滤的黑名单，默认 ""</li>
  <li>识别结果 <br>
  文本型，返回识别的结果</li>
  <li>结果详情 *1.1.3-1 新增 <br>
  表型，识别结果的每个可见字符的位置描述</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>tesseract 扩展功能，识别文字（XXTouch 已内置 eng 识别库 [A-Za-z0-9] 能识别常规英文和数字） <br>
  内置 tesseract 引擎版本为 3.02，版本不对或者字库文件损坏会导致 XXTouch 脚本服务崩溃 <br>
  这里提供适用于 XXTouch 的 tesseract 引擎版本为 3.05 版的 OCR 识别库 <a href="http://static.zybuluo.com/xxtouch/fxnwlp9ic4mzf01shxegkier/tess_ocr_1.2_with_tesseract_3.05.01.zip" target="_blank">tess_ocr_1.2_with_tesseract_3.05.01.zip-1853.9kB（点击下载）</a> <br>
  白名单参数和黑名单参数不可同时存在 <br>
  会对对象本身产生影响 <br>
  性能上，该函数操作过程不产生数据拷贝 <br>
  如果需要做简体中文或是其它语言文字识别 <br>
  需要手动导入相关的字库文件到设备的 <code>/var/mobile/Media/1ferver/tessdata/</code> 目录 <br>
  这里提供 <a href="https://apt-pages.xxtouch.com/others/chi_sim.traineddata" target="_blank">简体中文字库（点击下载）</a> <br>
  如果想自己进行 tesseract 字库训练可以 <a href="https://www.baidu.com/s?wd=tesseract%20训练" target="_blank">百度搜索“tesseract 训练”</a></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">require</span><span class="pun">(</span><span class="str">"image.tess_ocr"</span><span class="pun">)</span><span class="pln">           </span><span class="pun">--</span><span class="pln"> </span><span class="pun">需要提前加载</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">text </span><span class="pun">=</span><span class="pln"> img</span><span class="pun">:</span><span class="pln">tess_ocr</span><span class="pun">()</span><span class="pln">               </span><span class="pun">--</span><span class="pln"> </span><span class="pun">默认为</span><span class="pln"> </span><span class="str">"eng"</span><span class="pun">，英文识别</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pln">text </span><span class="pun">=</span><span class="pln"> img</span><span class="pun">:</span><span class="pln">tess_ocr</span><span class="pun">(</span><span class="str">'chi_sim'</span><span class="pun">)</span><span class="pln">      </span><span class="pun">--</span><span class="pln"> </span><span class="pun">简体中文识别</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pln">text </span><span class="pun">=</span><span class="pln"> img</span><span class="pun">:</span><span class="pln">tess_ocr</span><span class="pun">{</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    lang </span><span class="pun">=</span><span class="pln"> </span><span class="str">"eng"</span><span class="pun">,</span><span class="pln">                   </span><span class="pun">--</span><span class="pln"> </span><span class="pun">英文字库</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    white_list </span><span class="pun">=</span><span class="pln"> </span><span class="str">"0123456789"</span><span class="pun">,</span><span class="pln">      </span><span class="pun">--</span><span class="pln"> </span><span class="pun">白名单</span></code></li><li class="L9"><code class="language-lua"><span class="pun">}</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">text </span><span class="pun">=</span><span class="pln"> img</span><span class="pun">:</span><span class="pln">tess_ocr</span><span class="pun">{</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    lang </span><span class="pun">=</span><span class="pln"> </span><span class="str">"eng"</span><span class="pun">,</span><span class="pln">                   </span><span class="pun">--</span><span class="pln"> </span><span class="pun">英文字库</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    black_list </span><span class="pun">=</span><span class="pln"> </span><span class="str">"abcdefghijk"</span><span class="pun">,</span><span class="pln">     </span><span class="pun">--</span><span class="pln"> </span><span class="pun">黑名单</span></code></li><li class="L4"><code class="language-lua"><span class="pun">}</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pln">text </span><span class="pun">=</span><span class="pln"> img</span><span class="pun">:</span><span class="pln">tess_ocr</span><span class="pun">{</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    lang </span><span class="pun">=</span><span class="pln"> </span><span class="str">"chi_sim"</span><span class="pun">,</span><span class="pln">               </span><span class="pun">--</span><span class="pln"> </span><span class="pun">简体中文字库</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    white_list </span><span class="pun">=</span><span class="pln"> </span><span class="str">"0123456789.元"</span><span class="pun">,</span><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">白名单</span></code></li><li class="L9"><code class="language-lua"><span class="pun">}</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="jj69"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="p0s8" id="进程字典">进程字典</h2><ul data-anchor-id="tnwr">
<li><h3 id="存储值到进程字典-procput">存储值到进程字典 (<strong>proc_put</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">old_value </span><span class="pun">=</span><span class="pln"> proc_put</span><span class="pun">(</span><span class="pln">key</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>key <br>
  字符串型，代表键</li>
  <li>value <br>
  字符串型，代表需要设置的值</li>
  <li>old_value <br>
  字符串型，返回这个键位置的旧的值，如果没有则返回空字符串</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>所有以 "xxtouch." 或 "1ferver." 开头的进程词典全部被保留</strong> <br>
  存储值到进程字典并返回该键位置原来的值 <br>
  如果该键位置原先没有值，则返回空字符串 <br>
  存储空字符串代表清空该键位置</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> bill </span><span class="pun">=</span><span class="pln"> </span><span class="str">""</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">while</span><span class="pln"> bill</span><span class="pun">==</span><span class="str">""</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    bill </span><span class="pun">=</span><span class="pln"> proc_put</span><span class="pun">(</span><span class="str">"billno"</span><span class="pun">,</span><span class="pln"> </span><span class="str">""</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"billno: "</span><span class="pun">..</span><span class="pln"> bill</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="cwbn"><br></p><ul data-anchor-id="hvvt">
<li><h3 id="查看进程字典存储的值-procget">查看进程字典存储的值 (<strong>proc_get</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">value </span><span class="pun">=</span><span class="pln"> proc_get</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>key <br>
  字符串型，代表键</li>
  <li>value <br>
  字符串型，返回该键位置存储的值，如果该键位置没有值则返回空字符串</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数已不推荐使用，可以尝试使用 <a href="#存储值到进程字典-procput">proc_put</a> 来代替</strong> <br>
  <strong>所有以 "xxtouch." 或 "1ferver." 开头的进程词典全部被保留</strong> <br>
  从进程词典的指定键位中读取值 <br>
  如果该键位置原先没有值，则返回空字符串</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> bill </span><span class="pun">=</span><span class="pln"> proc_get</span><span class="pun">(</span><span class="str">"billno"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> bill</span><span class="pun">~=</span><span class="str">""</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"has a bill: "</span><span class="pun">..</span><span class="pln"> bill</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"no bill"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="7n5i"><br></p><ul data-anchor-id="twyn">
<li><h3 id="向进程队列词典中压入一个值-procqueuepush">向进程队列词典中压入一个值 (<strong>proc_queue_push</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">size </span><span class="pun">=</span><span class="pln"> proc_queue_push</span><span class="pun">(</span><span class="pln">key</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>key <br>
  字符串型，代表键</li>
  <li>value <br>
  字符串型，代表需要压入的值</li>
  <li>size <br>
  整数型，压入值之后，返回该队列的尺寸，如果返回 0 ，则为压入失败</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>此函数效果等同 <a href="#向进程队列词典尾部压入一个值-procqueuepushback">proc_queue_push_back</a></strong> <br>
  <strong>所有以 "xxtouch." 或 "1ferver." 开头的进程队列词典全部被保留</strong> <br>
  <strong>进程队列词典的队列尺寸不能大于 10000，尺寸超过的队列将丢弃最先压入的值</strong> <br>
  往进程队列词典中压入一个值，压入值之后，返回该队列的尺寸 <br>
  不能压入空字符串</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> proc_queue_push</span><span class="pun">(</span><span class="str">"billnos"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> size</span><span class="pun">~=</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"has "</span><span class="pun">..</span><span class="pln">size</span><span class="pun">..</span><span class="str">" bill(s)"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"failed"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="kxcw"><br></p><ul data-anchor-id="yp7b">
<li><h3 id="从进程队列词典中弹出一个值-procqueuepop">从进程队列词典中弹出一个值 (<strong>proc_queue_pop</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">value </span><span class="pun">=</span><span class="pln"> proc_queue_pop</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>key <br>
  字符串型，代表键</li>
  <li>value <br>
  字符串型，返回弹出的值，如果队列不存在或为空，则返回空字符串</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>此函数效果等同 <a href="#从进程队列词典头部弹出一个值-procqueuepopfront">proc_queue_pop_front</a></strong> <br>
  <strong>所有以 "xxtouch." 或 "1ferver." 开头的进程队列词典全部被保留</strong> <br>
  从进程队列词典中弹出一个值 <br>
  如果队列不存在或为空，则弹出一个空字符串</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> billno </span><span class="pun">=</span><span class="pln"> proc_queue_pop</span><span class="pun">(</span><span class="str">"billnos"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> billno</span><span class="pun">~=</span><span class="str">""</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">billno</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"no bill"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="xg67"><br></p><ul data-anchor-id="nd2l">
<li><h3 id="从进程队列词典中弹出所有值-procqueueclear">从进程队列词典中弹出所有值 (<strong>proc_queue_clear</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">values </span><span class="pun">=</span><span class="pln"> proc_queue_clear</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>key <br>
  字符串型，代表键</li>
  <li>values <br>
  顺序表型，返回包含弹出的所有值的顺序表，如果队列不存在或为空，则返回空表</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>所有以 "xxtouch." 或 "1ferver." 开头的进程队列词典全部被保留</strong> <br>
  从进程队列词典中弹出所有值，清空指定队列</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> billnos </span><span class="pun">=</span><span class="pln"> proc_queue_clear</span><span class="pun">(</span><span class="str">"billnos"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="com">#billnos~=0 then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> billno </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">billnos</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> billno</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"no bill"</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="qc9q"><br></p><ul data-anchor-id="w6vf">
<li><h3 id="获取进程队列词典的尺寸-procqueuesize">获取进程队列词典的尺寸 (<strong>proc_queue_size</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">size </span><span class="pun">=</span><span class="pln"> proc_queue_size</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>key <br>
  字符串型，代表键</li>
  <li>size <br>
  整数型，返回该进程队列词典中的有效条目数</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>所有以 "xxtouch." 或 "1ferver." 开头的进程队列词典全部被保留</strong> <br>
  获取进程队列词典的尺寸</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> proc_queue_size</span><span class="pun">(</span><span class="str">"billnos"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> size</span><span class="pun">~=</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"has "</span><span class="pun">..</span><span class="pln">size</span><span class="pun">..</span><span class="str">" bill(s)"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"no bill"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="y2r3"><br></p><ul data-anchor-id="ismv">
<li><h3 id="向进程队列词典头部压入一个值-procqueuepushfront">向进程队列词典头部压入一个值 (<strong>proc_queue_push_front</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">size </span><span class="pun">=</span><span class="pln"> proc_queue_push_front</span><span class="pun">(</span><span class="pln">key</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>key <br>
  字符串型，代表键</li>
  <li>value <br>
  字符串型，代表需要压入的值</li>
  <li>size <br>
  整数型，压入值之后，返回该队列的尺寸，如果返回 0 ，则为压入失败</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.1.2-1 版以上方可使用</strong> <br>
  <strong>所有以 "xxtouch." 或 "1ferver." 开头的进程队列词典全部被保留</strong> <br>
  <strong>进程队列词典的队列尺寸不能大于 10000，尺寸超过的队列将丢弃最先压入的值</strong> <br>
  往进程队列词典头部压入一个值，压入值之后，返回该队列的尺寸 <br>
  不能压入空字符串</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> proc_queue_push_front</span><span class="pun">(</span><span class="str">"billnos"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> size</span><span class="pun">~=</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"has "</span><span class="pun">..</span><span class="pln">size</span><span class="pun">..</span><span class="str">" bill(s)"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"failed"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="c2we"><br></p><ul data-anchor-id="oevj">
<li><h3 id="向进程队列词典尾部压入一个值-procqueuepushback">向进程队列词典尾部压入一个值 (<strong>proc_queue_push_back</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">size </span><span class="pun">=</span><span class="pln"> proc_queue_push_back</span><span class="pun">(</span><span class="pln">key</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>key <br>
  字符串型，代表键</li>
  <li>value <br>
  字符串型，代表需要压入的值</li>
  <li>size <br>
  整数型，压入值之后，返回该队列的尺寸，如果返回 0 ，则为压入失败</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.1.2-1 版以上方可使用</strong> <br>
  <strong>此函数效果等同 <a href="#向进程队列词典中压入一个值-procqueuepush">proc_queue_push</a></strong> <br>
  <strong>所有以 "xxtouch." 或 "1ferver." 开头的进程队列词典全部被保留</strong> <br>
  <strong>进程队列词典的队列尺寸不能大于 10000，尺寸超过的队列将丢弃最先压入的值</strong> <br>
  往进程队列词典尾部压入一个值，压入值之后，返回该队列的尺寸 <br>
  不能压入空字符串</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> proc_queue_push_back</span><span class="pun">(</span><span class="str">"billnos"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> size</span><span class="pun">~=</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"has "</span><span class="pun">..</span><span class="pln">size</span><span class="pun">..</span><span class="str">" bill(s)"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"failed"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="60kn"><br></p><ul data-anchor-id="67tr">
<li><h3 id="从进程队列词典头部弹出一个值-procqueuepopfront">从进程队列词典头部弹出一个值 (<strong>proc_queue_pop_front</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">value </span><span class="pun">=</span><span class="pln"> proc_queue_pop_front</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>key <br>
  字符串型，代表键</li>
  <li>value <br>
  字符串型，返回弹出的值，如果队列不存在或为空，则返回空字符串</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.1.2-1 版以上方可使用</strong> <br>
  <strong>此函数效果等同 <a href="#从进程队列词典中弹出一个值-procqueuepop">proc_queue_pop</a></strong> <br>
  <strong>所有以 "xxtouch." 或 "1ferver." 开头的进程队列词典全部被保留</strong> <br>
  从进程队列词典头部弹出一个值 <br>
  如果队列不存在或为空，则弹出一个空字符串</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> billno </span><span class="pun">=</span><span class="pln"> proc_queue_pop_front</span><span class="pun">(</span><span class="str">"billnos"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> billno</span><span class="pun">~=</span><span class="str">""</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">billno</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"no bill"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="23h6"><br></p><ul data-anchor-id="8mjz">
<li><h3 id="从进程队列词典尾部弹出一个值-procqueuepopback">从进程队列词典尾部弹出一个值 (<strong>proc_queue_pop_back</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">value </span><span class="pun">=</span><span class="pln"> proc_queue_pop_back</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>key <br>
  字符串型，代表键</li>
  <li>value <br>
  字符串型，返回弹出的值，如果队列不存在或为空，则返回空字符串</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.1.2-1 版以上方可使用</strong> <br>
  <strong>所有以 "xxtouch." 或 "1ferver." 开头的进程队列词典全部被保留</strong> <br>
  从进程队列词典尾部弹出一个值 <br>
  如果队列不存在或为空，则弹出一个空字符串</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> billno </span><span class="pun">=</span><span class="pln"> proc_queue_pop_back</span><span class="pun">(</span><span class="str">"billnos"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> billno</span><span class="pun">~=</span><span class="str">""</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">billno</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"no bill"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="n3uw"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="nwfl" id="线程模块thread">线程模块（thread）</h2><p data-anchor-id="0otv">thread 模块使用 Lua 自带协程（coroutine）模块实现，非通常意义上的多线程</p><ul data-anchor-id="6v4y">
<li><h3 id="派发一个任务-threaddispatch">派发一个任务 (<strong>thread.dispatch</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">tid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">dispatch</span><span class="pun">(</span><span class="pln">task </span><span class="pun">[,</span><span class="pln"> error_callback </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>task <br>
  函数型，这个函数将加入任务队列</li>
  <li>error_callback <br>
  函数型，错误回调，当执行任务时发生异常，则会回调这个函数并不再抛出，可选参数，默认在异常时抛出错误</li>
  <li>tid <br>
  整数型，任务 id，这个 id 可用于结束或是等待一个任务</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>派发一个任务到队列，当其它任务空闲时则会开始该项任务</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#thread-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="bxt5"><br></p><ul data-anchor-id="dkf1">
<li><h3 id="获取当前任务的-id-threadcurrentid">获取当前任务的 ID (<strong>thread.current_id</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">tid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">current_id</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>tid <br>
  整数型，任务 id，这个 id 可用于结束或是等待一个任务</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取当前任务的 id</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#thread-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="pey3"><br></p><ul data-anchor-id="u95o">
<li><h3 id="从队列中移除一项任务-threadkill">从队列中移除一项任务 (<strong>thread.kill</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">kill</span><span class="pun">(</span><span class="pln">tid</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>tid <br>
  整数型，任务 id，这个 id 可用于结束或是等待一个任务</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>从队列中移除一项任务，不管它是否已经开始，是否已经完成</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#thread-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="2gjl"><br></p><ul data-anchor-id="7z9d">
<li><h3 id="阻塞等待一个任务完成-threadwait">阻塞等待一个任务完成 (<strong>thread.wait</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">wait</span><span class="pun">(</span><span class="pln">tid</span><span class="pun">,</span><span class="pln"> timeout</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>timeout <br>
  实数型，等待超时时间，超时后将返回，单位：秒</li>
  <li>tid <br>
  整数型，任务 id，这个 id 可用于结束或是等待一个任务</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>当前线程阻塞等待一个任务完成</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#thread-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="wa7z"><br></p><ul data-anchor-id="jsj4">
<li><h3 id="注册监听一个事件-threadregisterevent">注册监听一个事件 (<strong>thread.register_event</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">eid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="kwd">event</span><span class="pun">,</span><span class="pln"> callback </span><span class="pun">[,</span><span class="pln"> error_callback </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>event <br>
  字符串型，代表事件名</li>
  <li>callback <br>
  函数型，事件将会触发的回调函数</li>
  <li>error_callback <br>
  函数型，错误回调，当执行任务时发生异常，则会回调这个函数并不再抛出，可选参数，默认在异常时抛出错误</li>
  <li>eid <br>
  整数型，事件 id，可以用于反注册监听该事件</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>注册监听一个事件</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#thread-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="h6b8"><br></p><ul data-anchor-id="ouss">
<li><h3 id="反注册监听一个事件-threadunregisterevent">反注册监听一个事件 (<strong>thread.unregister_event</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">eid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">unregister_event</span><span class="pun">(</span><span class="kwd">event</span><span class="pun">,</span><span class="pln"> eid</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>event <br>
  字符串型，代表事件名</li>
  <li>eid <br>
  整数型，事件 id，可以用于反注册监听该事件</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>反注册监听一个事件</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#thread-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="f9ux"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="o0mp" id="thread-示例代码">thread 示例代码</h3><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="unqq" style=""><ol class="linenums"><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">tmid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">dispatch</span><span class="pun">(</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">派发一个异步任务</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">function</span><span class="pun">()</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">2700</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"这是第 2.7 秒"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pln">tid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">dispatch</span><span class="pun">(</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">派发一个异步任务</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="kwd">function</span><span class="pun">()</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">300</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">10</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L2"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"线程 2: "</span><span class="pun">..</span><span class="pln">i</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"应该运行不到这里"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L7"><code class="language-lua"><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> iPhone </span><span class="lit">5C</span><span class="pln"> </span><span class="pun">双指合拢缩小相册图片示例</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">dispatch</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">派发一个滑动任务</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">59</span><span class="pun">,</span><span class="lit">165</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="pun">:</span><span class="pln">move</span><span class="pun">(</span><span class="lit">297</span><span class="pun">,</span><span class="lit">522</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="pun">:</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">500</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">off</span><span class="pun">()</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">dispatch</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">再派发一个滑动任务</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">580</span><span class="pun">,</span><span class="lit">1049</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        </span><span class="pun">:</span><span class="pln">move</span><span class="pun">(</span><span class="lit">371</span><span class="pun">,</span><span class="lit">1049</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="pun">:</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">500</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">:</span><span class="pln">off</span><span class="pun">()</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="pln">proc_queue_clear</span><span class="pun">(</span><span class="str">"来自远方的消息"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">eid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">注册监听字典状态有值事件</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="str">"来自远方的消息"</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"收到消息："</span><span class="pun">..</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">300</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">wait</span><span class="pun">(</span><span class="pln">tmid</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="kwd">for</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">10</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"线程 1: "</span><span class="pun">..</span><span class="pln">i</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">400</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">kill</span><span class="pun">(</span><span class="pln">tid</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">杀死</span><span class="pln"> </span><span class="pun">线程</span><span class="pln"> </span><span class="lit">2</span></code></li><li class="L2"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">unregister_event</span><span class="pun">(</span><span class="str">"来自远方的消息"</span><span class="pun">,</span><span class="pln"> eid</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">取消一个字典状态有值事件</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"完了"</span><span class="pun">)</span></code></li></ol></pre><p data-anchor-id="syif"><strong>注</strong>：上述代码中使用了非本章函数及方法  <a href="#从进程队列词典中弹出所有值-procqueueclear"><code>proc_queue_clear</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a>、<a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#模拟手指接触屏幕-touchon"><code>touch.on</code></a>、<a href="#模拟手指在屏幕上移动-move"><code>:move</code></a>、<a href="#毫秒级延迟-msleep"><code>:msleep</code></a>、<a href="#模拟手指离开屏幕-off"><code>:off</code></a></p><hr><p data-anchor-id="ou4u"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="wraa" id="web-视图模块webview">Web 视图模块（webview）</h2><ul data-anchor-id="0ap9">
<li><h3 id="展现一个-webview-webviewshow">展现一个 webview (<strong>webview.show</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">webview</span><span class="pun">.</span><span class="pln">show </span><span class="pun">{</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">所有参数皆为可选参数</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    html </span><span class="pun">=</span><span class="pln"> HTML</span><span class="pun">内容,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    x </span><span class="pun">=</span><span class="pln"> </span><span class="pun">原点横坐标,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    y </span><span class="pun">=</span><span class="pln"> </span><span class="pun">原点纵坐标,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    width </span><span class="pun">=</span><span class="pln"> </span><span class="pun">宽度,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    height </span><span class="pun">=</span><span class="pln"> </span><span class="pun">高度,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    corner_radius </span><span class="pun">=</span><span class="pln"> </span><span class="pun">圆角半径,</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    alpha </span><span class="pun">=</span><span class="pln"> </span><span class="pun">不透明度,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    animation_duration </span><span class="pun">=</span><span class="pln"> </span><span class="pun">动画时间,</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    rotate </span><span class="pun">=</span><span class="pln"> </span><span class="pun">旋转角度,</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    level </span><span class="pun">=</span><span class="pln"> </span><span class="pun">窗体层级,</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    opaque </span><span class="pun">=</span><span class="pln"> </span><span class="pun">范围不透明,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    ignores_hit </span><span class="pun">=</span><span class="pln"> </span><span class="pun">是否忽略触摸事件,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    can_drag </span><span class="pun">=</span><span class="pln"> </span><span class="pun">是否能被拖动,</span></code></li><li class="L4"><code class="language-lua"><span class="pun">}</span></code></li></ol></pre></li>
<li><p>字段说明</p>

<blockquote class="white-blockquote">
  <ul><li>html <br>
  文本型，可选参数，页面 html 内容。默认为 上次调用 webview.show 时候所设</li>
  <li>id <br>
  整数型，可选参数，表示当前 webview 的 id，可使用不同的 id 来同时展现多个 webview，范围 1 ~ 1000，默认为 1</li>
  <li>x <br>
  整数型，可选参数，距离左侧的距离。默认为 0</li>
  <li>y <br>
  整数型，可选参数，距离顶端的距离。默认为 0</li>
  <li>width <br>
  整数型，可选参数，弹出窗口的宽度。默认为 屏幕宽度</li>
  <li>height <br>
  整数型，可选参数，弹出的窗口高度。默认为 屏幕高度</li>
  <li>alpha <br>
  实数型，可选参数，不透明度，范围 0.0 ~ 1.0。默认为 1.0</li>
  <li>corner_radius <br>
  实数型，可选参数，圆角半径，0.0 则是方角。默认为 0.0</li>
  <li>animation_duration <br>
  实数型，可选参数，从上次状态到参数所设状态的动画时间。默认为 0.0</li>
  <li>rotate <br>
  实数型，可选参数，旋转状态， 0.0（竖屏）、90.0（横屏 Home 在右）、180.0（竖屏翻转）、270.0（横屏 Home 在左）。默认为 0.0</li>
  <li>level <br>
  实数型，可选参数，窗体层级，默认 1100.0</li>
  <li>opaque <br>
  布尔型，可选参数，背景不透明选项，默认为 true 背景不透明</li>
  <li>ignores_hit <br>
  布尔型，可选参数，用于设置忽略（不拦截）触摸事件，默认为 false 不忽略，这个属性在 webview 创建后不能更改，而且 opaque 必须设为 false</li>
  <li>can_drag <br>
  布尔型，可选参数，用于设置是否可拖拽移动 webview，默认为 false 不能拖动</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>让 webview 以参数设置的那样出现 <br>
  除了 html 参数会保持上一次 show 的状态，其它参数一律会在调用时重设成默认值</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#webview-使用示例"><code>本章结尾</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="xyl5"><br></p><ul data-anchor-id="2xdq">
<li><h3 id="隐藏一个-webview-webviewhide">隐藏一个 webview (<strong>webview.hide</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">webview</span><span class="pun">.</span><span class="pln">hide</span><span class="pun">([</span><span class="pln"> id </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>id <br>
  整数型，可选参数，表示当前 webview 的 id，范围 1 ~ 1000，默认为 1</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>暂时隐藏一个 webview</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#webview-使用示例"><code>本章结尾</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="6ud8"><br></p><ul data-anchor-id="ayfx">
<li><h3 id="在一个-webview-上执行一段-js-webvieweval">在一个 webview 上执行一段 JS (<strong>webview.eval</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">str </span><span class="pun">=</span><span class="pln"> webview</span><span class="pun">.</span><span class="kwd">eval</span><span class="pun">(</span><span class="pln">js </span><span class="pun">[,</span><span class="pln"> id </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>js <br>
  文本型，需要执行的 JS 代码</li>
  <li>id <br>
  整数型，可选参数，表示当前 webview 的 id，范围 1 ~ 1000，默认为 1</li>
  <li>str <br>
  文本型，返回执行 JS 代码产生的返回值</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>在一个 webview 上执行一段 JS 并获得返回值文字</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">r </span><span class="pun">=</span><span class="pln"> webview</span><span class="pun">.</span><span class="kwd">eval</span><span class="pun">(</span><span class="str">"a = 3; b = 2; a * b;"</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="u4ui"><br></p><ul data-anchor-id="56p7">
<li><h3 id="获取一个-webview-的区域及层级信息-webviewframe">获取一个 webview 的区域及层级信息 (<strong>webview.frame</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">frame </span><span class="pun">=</span><span class="pln"> webview</span><span class="pun">.</span><span class="pln">frame</span><span class="pun">([</span><span class="pln"> id </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>id <br>
  整数型，可选参数，表示当前 webview 的 id，范围 1 ~ 1000，默认为 1</li>
  <li>frame <br>
  表型，返回当前 webview 的区域及层级信息</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取一个 webview 的区域及层级信息</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> frame </span><span class="pun">=</span><span class="pln"> webview</span><span class="pun">.</span><span class="pln">frame</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="str">"位置为:"</span><span class="pun">..</span><span class="str">"("</span><span class="pun">..</span><span class="pln">frame</span><span class="pun">.</span><span class="pln">x</span><span class="pun">..</span><span class="str">","</span><span class="pun">..</span><span class="pln">frame</span><span class="pun">.</span><span class="pln">y</span><span class="pun">..</span><span class="str">")\n"</span><span class="pun">..</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="str">"大小为:"</span><span class="pun">..</span><span class="str">"(宽:"</span><span class="pun">..</span><span class="pln">frame</span><span class="pun">.</span><span class="pln">width</span><span class="pun">..</span><span class="str">",高:"</span><span class="pun">..</span><span class="pln">frame</span><span class="pun">.</span><span class="pln">height</span><span class="pun">..</span><span class="str">")\n"</span><span class="pun">..</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="str">"层级为:"</span><span class="pun">..</span><span class="str">"("</span><span class="pun">..</span><span class="pln">frame</span><span class="pun">.</span><span class="pln">level</span><span class="pun">..</span><span class="str">")"</span></code></li><li class="L5"><code class="language-lua"><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="uj4b"><br></p><ul data-anchor-id="1eyf">
<li><h3 id="销毁一个-webview-webviewdestroy">销毁一个 webview (<strong>webview.destroy</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">webview</span><span class="pun">.</span><span class="pln">destroy</span><span class="pun">([</span><span class="pln"> id </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>id <br>
  整数型，可选参数，表示当前 webview 的 id，可使用不同的 id 来同时展现多个 webview，范围 1 ~ 1000，默认为 1</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>销毁一个 webview <br>
  脚本停止的时候，会自动调用销毁所有展现过的 webview</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#webview-使用示例"><code>本章结尾</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="wr81"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="sphi" id="webview-使用示例">webview 使用示例</h3><ul data-anchor-id="yi4t">
<li><p>更多示例脚本下载 <br>
<a href="http://static.zybuluo.com/xxtouch/mfgflfblg1j3jlpeb6okqll4/%5B%E6%BC%94%E7%A4%BA%5DWV%E9%AB%98%E9%98%B6UI-%E8%87%AA%E5%88%B6toast.lua" target="_blank">[演示]WV高阶UI-自制toast.lua-1.9kB</a> <br>
<a href="http://static.zybuluo.com/xxtouch/xy2t1kbh0cn87catwzgm9pxq/%5B%E5%AE%9E%E4%BE%8B%5DWV%E9%AB%98%E9%98%B6UI-%E4%BF%AE%E6%94%B9GPS%E4%BD%8D%E7%BD%AE.lua" target="_blank">[实例]WV高阶UI-修改GPS位置.lua-3.8kB</a></p></li>
<li><p>一个演示</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> html </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[=[</span></code></li><li class="L1"><code class="language-lua"><span class="pun">&lt;!</span><span class="pln">DOCTYPE html</span><span class="pun">&gt;</span></code></li><li class="L2"><code class="language-lua"><span class="str">&lt;html&gt;</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="str">&lt;head&gt;</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">script src</span><span class="pun">=</span><span class="str">"/js/jquery.min.js"</span><span class="pun">&gt;&lt;/</span><span class="pln">script</span><span class="pun">&gt;</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">script src</span><span class="pun">=</span><span class="str">"/js/jquery.json.min.js"</span><span class="pun">&gt;&lt;/</span><span class="pln">script</span><span class="pun">&gt;</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">script type</span><span class="pun">=</span><span class="str">"text/javascript"</span><span class="pun">&gt;</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    $</span><span class="pun">(</span><span class="pln">document</span><span class="pun">).</span><span class="pln">ready</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(){</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            $</span><span class="pun">(</span><span class="str">"#toast_content"</span><span class="pun">).</span><span class="pln">val</span><span class="pun">(</span><span class="str">"toast内容"</span><span class="pun">);</span></code></li><li class="L9"><code class="language-lua"><span class="pln">            $</span><span class="pun">(</span><span class="str">"#close_page"</span><span class="pun">).</span><span class="pln">click</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(){</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    			$</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span></code></li><li class="L1"><code class="language-lua"><span class="pln">                </span><span class="str">"/proc_queue_push"</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">                </span><span class="str">'{"key": "来自webview的消息","value": "关闭页面"}'</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">                </span><span class="kwd">function</span><span class="pun">(){}</span></code></li><li class="L4"><code class="language-lua"><span class="pln">            </span><span class="pun">);</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        </span><span class="pun">});</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pln">        $</span><span class="pun">(</span><span class="str">"#show_toast"</span><span class="pun">).</span><span class="pln">click</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(){</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    			$</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    				</span><span class="str">"/proc_put"</span><span class="pun">,</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    				$</span><span class="pun">.</span><span class="pln">toJSON</span><span class="pun">({</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    					key</span><span class="pun">:</span><span class="str">"toast内容"</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    					value</span><span class="pun">:</span><span class="pln">$</span><span class="pun">(</span><span class="str">"#toast_content"</span><span class="pun">).</span><span class="pln">val</span><span class="pun">()</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    				</span><span class="pun">}),</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    				</span><span class="kwd">function</span><span class="pun">(){}</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    			</span><span class="pun">);</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    			$</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span></code></li><li class="L7"><code class="language-lua"><span class="pln">                </span><span class="str">"/proc_queue_push"</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">                </span><span class="str">'{"key": "来自webview的消息","value": "显示toast"}'</span><span class="pun">,</span></code></li><li class="L9"><code class="language-lua"><span class="pln">                </span><span class="kwd">function</span><span class="pun">(){}</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            </span><span class="pun">);</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="pun">});</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pln">        $</span><span class="pun">(</span><span class="str">"#slide_down"</span><span class="pun">).</span><span class="pln">click</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(){</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    			$</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    				</span><span class="str">"/proc_queue_push"</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    				</span><span class="str">'{"key": "来自webview的消息","value": "往下滑动"}'</span><span class="pun">,</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    				</span><span class="kwd">function</span><span class="pun">(){}</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    			</span><span class="pun">);</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    			$</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">).</span><span class="pln">hide</span><span class="pun">();</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        </span><span class="pun">});</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">        $</span><span class="pun">(</span><span class="str">"#full_vertical"</span><span class="pun">).</span><span class="pln">click</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(){</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    			$</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span></code></li><li class="L4"><code class="language-lua"><span class="pln">                </span><span class="str">"/proc_queue_push"</span><span class="pun">,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">                </span><span class="str">'{"key": "来自webview的消息","value": "竖屏全屏"}'</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">                </span><span class="kwd">function</span><span class="pun">(){}</span></code></li><li class="L7"><code class="language-lua"><span class="pln">            </span><span class="pun">);</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        </span><span class="pun">});</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pln">        $</span><span class="pun">(</span><span class="str">"#full_landscape"</span><span class="pun">).</span><span class="pln">click</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(){</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    			$</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span></code></li><li class="L2"><code class="language-lua"><span class="pln">                </span><span class="str">"/proc_queue_push"</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">                </span><span class="str">'{"key": "来自webview的消息","value": "横屏全屏"}'</span><span class="pun">,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">                </span><span class="kwd">function</span><span class="pun">(){}</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            </span><span class="pun">);</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="pun">});</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">});</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">script</span><span class="pun">&gt;</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">head</span><span class="pun">&gt;</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="str">&lt;body&gt;</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;p&gt;</span><span class="pun">动脚</span><span class="pln">webview</span><span class="pun">演示&lt;/</span><span class="pln">p</span><span class="pun">&gt;</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;p&gt;</span><span class="pun">&lt;</span><span class="pln">button id</span><span class="pun">=</span><span class="str">"close_page"</span><span class="pln"> type</span><span class="pun">=</span><span class="str">"button"</span><span class="pun">&gt;点我关闭页面&lt;</span><span class="str">/button&gt;&lt;/</span><span class="pln">p</span><span class="pun">&gt;</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;p&gt;</span><span class="pun">&lt;</span><span class="pln">button id</span><span class="pun">=</span><span class="str">"show_toast"</span><span class="pln"> type</span><span class="pun">=</span><span class="str">"button"</span><span class="pun">&gt;显示一个</span><span class="pln">toast</span><span class="pun">&lt;</span><span class="str">/button&gt;&lt;input type="text" id="toast_content" /</span><span class="pun">&gt;&lt;/</span><span class="pln">p</span><span class="pun">&gt;</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;p&gt;</span><span class="pun">&lt;</span><span class="pln">button id</span><span class="pun">=</span><span class="str">"full_vertical"</span><span class="pln"> type</span><span class="pun">=</span><span class="str">"button"</span><span class="pun">&gt;竖屏全屏&lt;</span><span class="str">/button&gt;&lt;button id="full_landscape" type="button"&gt;横屏全屏&lt;/</span><span class="pln">button</span><span class="pun">&gt;&lt;/</span><span class="pln">p</span><span class="pun">&gt;</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;p&gt;</span><span class="pun">&lt;</span><span class="pln">button id</span><span class="pun">=</span><span class="str">"slide_down"</span><span class="pln"> type</span><span class="pun">=</span><span class="str">"button"</span><span class="pun">&gt;视图往下滑动&lt;</span><span class="str">/button&gt;&lt;/</span><span class="pln">p</span><span class="pun">&gt;</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;select&gt;</span></code></li><li class="L7"><code class="language-lua"><span class="pln">            </span><span class="pun">&lt;</span><span class="pln">option value</span><span class="pun">=</span><span class="str">"o1"</span><span class="pun">&gt;第</span><span class="lit">1</span><span class="pun">个选项&lt;/</span><span class="pln">option</span><span class="pun">&gt;</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            </span><span class="pun">&lt;</span><span class="pln">option value</span><span class="pun">=</span><span class="str">"o2"</span><span class="pun">&gt;第</span><span class="lit">2</span><span class="pun">个选项&lt;/</span><span class="pln">option</span><span class="pun">&gt;</span></code></li><li class="L9"><code class="language-lua"><span class="pln">            </span><span class="pun">&lt;</span><span class="pln">option value</span><span class="pun">=</span><span class="str">"o3"</span><span class="pun">&gt;第</span><span class="lit">3</span><span class="pun">个选项&lt;/</span><span class="pln">option</span><span class="pun">&gt;</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            </span><span class="pun">&lt;</span><span class="pln">option value</span><span class="pun">=</span><span class="str">"o4"</span><span class="pun">&gt;第</span><span class="lit">4</span><span class="pun">个选项&lt;/</span><span class="pln">option</span><span class="pun">&gt;</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="pun">&lt;/</span><span class="kwd">select</span><span class="pun">&gt;</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">body</span><span class="pun">&gt;</span></code></li><li class="L3"><code class="language-lua"><span class="pun">&lt;/</span><span class="pln">html</span><span class="pun">&gt;</span></code></li><li class="L4"><code class="language-lua"><span class="pun">]=]</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="kwd">local</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="kwd">local</span><span class="pln"> factor </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">默认高度为</span><span class="pln"> </span><span class="lit">2x</span><span class="pln"> </span><span class="pun">设备所设</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">if</span><span class="pln"> w </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1242</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> w </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1080</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    factor </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.5</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> iPhone </span><span class="lit">6</span><span class="pun">(</span><span class="pln">S</span><span class="pun">)+</span><span class="pln"> </span><span class="pun">的分辨率是</span><span class="pln"> </span><span class="lit">3x</span><span class="pln"> </span><span class="pun">的</span></code></li><li class="L1"><code class="language-lua"><span class="pln">elseif w </span><span class="pun">==</span><span class="pln"> </span><span class="lit">320</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> w </span><span class="pun">==</span><span class="pln"> </span><span class="lit">768</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    factor </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.5</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="lit">3Gs</span><span class="pln"> </span><span class="pun">以前的</span><span class="pln"> iPhone </span><span class="pun">的分辨率是</span><span class="pln"> </span><span class="lit">1x</span><span class="pln"> </span><span class="pun">的</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="pln">webview</span><span class="pun">.</span><span class="pln">show</span><span class="pun">{</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">重置</span><span class="pln"> webview </span><span class="pun">位置到左上角</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    width </span><span class="pun">=</span><span class="pln"> w </span><span class="pun">-</span><span class="pln"> </span><span class="lit">40</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">,</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    height </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">500</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">,</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    alpha </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    animation_duration </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pun">}</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pln">webview</span><span class="pun">.</span><span class="pln">show</span><span class="pun">{</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">从左上角用</span><span class="lit">0.3</span><span class="pun">秒的时间滑动出来</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    html </span><span class="pun">=</span><span class="pln"> html</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">,</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    width </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">w </span><span class="pun">-</span><span class="pln"> </span><span class="lit">40</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">),</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    height </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">500</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">,</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    corner_radius </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    alpha </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.7</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    animation_duration </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.3</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pun">}</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="pln">proc_queue_clear</span><span class="pun">(</span><span class="str">"来自webview的消息"</span><span class="pun">,</span><span class="pln"> </span><span class="str">""</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">清空需要监听的字典的值</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">local</span><span class="pln"> eid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">注册监听字典状态有值事件</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="str">"来自webview的消息"</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"关闭页面"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            webview</span><span class="pun">.</span><span class="pln">show</span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">                x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">                y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">500</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">                width </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">w </span><span class="pun">-</span><span class="pln"> </span><span class="lit">40</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">),</span></code></li><li class="L4"><code class="language-lua"><span class="pln">                height </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">500</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">70</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">                corner_radius </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">                alpha </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L7"><code class="language-lua"><span class="pln">                animation_duration </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.8</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            </span><span class="pun">}</span></code></li><li class="L9"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">800</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            webview</span><span class="pun">.</span><span class="pln">destroy</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"页面线程结束"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">返回</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">停止当前监听</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        elseif val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"往下滑动"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">            webview</span><span class="pun">.</span><span class="pln">show</span><span class="pun">{</span></code></li><li class="L5"><code class="language-lua"><span class="pln">                x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">                y </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">50</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">300</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">纵坐标</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">300</span></code></li><li class="L7"><code class="language-lua"><span class="pln">                width </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">w </span><span class="pun">-</span><span class="pln"> </span><span class="lit">40</span><span class="pln">  </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">),</span></code></li><li class="L8"><code class="language-lua"><span class="pln">                height </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">500</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">70</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> factor</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">往下滑动按钮被隐藏了，高度调整</span></code></li><li class="L9"><code class="language-lua"><span class="pln">                corner_radius </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span></code></li><li class="L0"><code class="language-lua"><span class="pln">                alpha </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.7</span><span class="pun">,</span></code></li><li class="L1"><code class="language-lua"><span class="pln">                animation_duration </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">耗时</span><span class="pln"> </span><span class="lit">0.5</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L2"><code class="language-lua"><span class="pln">            </span><span class="pun">}</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        elseif val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"竖屏全屏"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">            webview</span><span class="pun">.</span><span class="pln">show</span><span class="pun">{}</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">此处将会把</span><span class="pln"> webview </span><span class="pun">置为全屏</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        elseif val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"横屏全屏"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">            webview</span><span class="pun">.</span><span class="pln">show</span><span class="pun">{</span><span class="pln">rotate</span><span class="pun">=</span><span class="lit">90</span><span class="pun">}</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">此处将会把</span><span class="pln"> webview </span><span class="pun">置为横屏全屏</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        elseif val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"显示toast"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="pln">proc_get</span><span class="pun">(</span><span class="str">"toast内容"</span><span class="pun">))</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">3000</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"主线程结束"</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#获取屏幕尺寸-screensize"><code>screen.size</code></a>、<a href="##从进程队列词典中弹出所有值-procqueueclear"><code>proc_queue_clear</code></a>、<a href="#注册监听一个事件-threadregisterevent"><code>thread.register_event</code></a>、<a href="#查看进程字典存储的值-procget"><code>proc_get</code></a>、<a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a></p></li>
</ul><hr><p data-anchor-id="5wvi"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="sru6" id="脚本包模块xpp">脚本包模块（xpp）</h2><ul data-anchor-id="5p9c">
<li><h3 id="获取当前脚本包的元信息-xppinfo">获取当前脚本包的元信息 (<strong>xpp.info</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">元信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> xpp</span><span class="pun">.</span><span class="pln">info</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>元信息 <br>
  表型，返回当前脚本包的元信息，如果当前正在运行的脚本不是脚本包，返回一个空表</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-3 版以上方可使用</strong> <br>
  用于从运行着的脚本中获取当前脚本的元信息</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> info </span><span class="pun">=</span><span class="pln"> xpp</span><span class="pun">.</span><span class="pln">info</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="buh5"><br></p><ul data-anchor-id="ipto">
<li><h3 id="获取当前脚本包的包路径-xppbundlepath">获取当前脚本包的包路径 (<strong>xpp.bundle_path</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">包路径</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> xpp</span><span class="pun">.</span><span class="pln">bundle_path</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>包路径 <br>
  文本型，返回当前脚本包的包路径，如果当前正在运行的脚本不是脚本包，返回当前运行的脚本路径</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-3 版以上方可使用</strong> <br>
  用于从运行着的脚本中获取当前脚本的路径</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> xpp</span><span class="pun">.</span><span class="pln">bundle_path</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="995f"><br></p><ul data-anchor-id="lb8k">
<li><h3 id="获取当前脚本包中的资源路径-xppresourcepath">获取当前脚本包中的资源路径 (<strong>xpp.resource_path</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">资源路径</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> xpp</span><span class="pun">.</span><span class="pln">resource_path</span><span class="pun">(资源文件名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>资源路径 <br>
  文本型 或 nil，返回当前脚本包的某个资源文件的路径，如果资源不存在，则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-3 版以上方可使用</strong> <br>
  用于从运行着的脚本中获取当前脚本包中的某个资源文件的路径，支持本地化</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> xpp</span><span class="pun">.</span><span class="pln">resource_path</span><span class="pun">(</span><span class="str">'appicon.png'</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="m1g7"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="apze" id="脚本配置界面模块xui">脚本配置界面模块（xui）</h2><ul data-anchor-id="acmj">
<li><h3 id="展示一个配置界面-xuishow">展示一个配置界面 (<strong>xui.show</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">show</span><span class="pun">(配置界面文件名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>配置界面文件名 <br>
  文本型，需要展示的当前脚本包中的配置界面文件（.xui）的文件名，只能是当前脚本包内的配置界面文件（.xui）</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-10 版以上方可使用</strong> <br>
  立刻使用 App 展示展示配置界面 <br>
  该函数不会阻塞，没有返回值，会调起 App 尝试展示，展示失败会在 App 内显示</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">show</span><span class="pun">(</span><span class="str">'interface.xui'</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="y3f5"><br></p><ul data-anchor-id="wy6f">
<li><h3 id="收起正在展示的配置界面-xuidismiss">收起正在展示的配置界面 (<strong>xui.dismiss</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">dismiss</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-10 版以上方可使用</strong> <br>
  尝试让 App 收起配置界面回到主界面 <br>
  该函数不会阻塞，没有返回值，会调起 App 尝试收起配置界面，如果没有配置界面正在展示则跳转到 App 什么都不发生</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">dismiss</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="fodz"><br></p><ul data-anchor-id="meyy">
<li><h3 id="校验配置界面的配置-xuisetup">校验配置界面的配置 (<strong>xui.setup</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">setup</span><span class="pun">(配置界面文件名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>配置界面文件名 <br>
  文本型，需要校验的当前脚本包中的配置界面文件（.xui）的文件名，只能是当前脚本包内的配置界面文件（.xui）</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-10 版以上方可使用</strong> <br>
  如果配置界面没有被配置过，则此函数用于生成该配置界面的默认配置，并且同时它会根据配置界面中的控件校验并修正存储的配置的值类型</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">setup</span><span class="pun">(</span><span class="str">'interface.xui'</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="nrn9"><br></p><ul data-anchor-id="xetu">
<li><h3 id="重新加载当前正在展示的配置界面-xuireload">重新加载当前正在展示的配置界面 (<strong>xui.reload</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">reload</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-10 版以上方可使用</strong> <br>
  如果当前没有正在展示配置界面，则什么都不发生 <br>
  注意控制好这个函数的调用频率，频率太高会导致 App 卡死</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">reload</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="3vr0"><br></p><ul data-anchor-id="pbhz">
<li><h3 id="获取配置界面的配置值-xuiget">获取配置界面的配置值 (<strong>xui.get</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">值</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> xui</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(配置分区,</span><span class="pln"> </span><span class="pun">配置键)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>配置分区 <br>
  文本型，配置界面中的配置分区（defaults）标识符</li>
  <li>配置键 <br>
  文本型，配置界面中的控件的配置键（key）标识符</li>
  <li>值 <br>
  任意类型，不同的控件类型会返回不同的值，如果没有该配置值，返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-10 版以上方可使用</strong> <br>
  该函数不负责过滤值类型，如果需要保证获取的值类型合法，可先使用 xui.setup 来校验修正再读取</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">setup</span><span class="pun">(</span><span class="str">'interface.xui'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> enabled </span><span class="pun">=</span><span class="pln"> xui</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'com.yourcompany.A-Script-Bundle'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'enabled'</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="guuy"><br></p><ul data-anchor-id="ebtn">
<li><h3 id="设置配置界面上的某个控件的值-xuiset">设置配置界面上的某个控件的值 (<strong>xui.set</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(配置分区,</span><span class="pln"> </span><span class="pun">配置键,</span><span class="pln"> </span><span class="pun">值)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>配置分区 <br>
  文本型，配置界面中的配置分区（defaults）标识符</li>
  <li>配置键 <br>
  文本型，配置界面中的控件的配置键（key）标识符</li>
  <li>值 <br>
  任意类型，不同的控件类型可以设置不同的值</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-10 版以上方可使用</strong> <br>
  如果当前正显示着配置界面，则该函数会立刻更新界面上的显示值 <br>
  该函数不负责过滤值类型，如果需要保证值类型合法，可于设置后使用 xui.setup 来校验修正</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'com.yourcompany.A-Script-Bundle'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'enabled'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">setup</span><span class="pun">(</span><span class="str">'interface.xui'</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="a4em"><br></p><ul data-anchor-id="gcqj">
<li><h3 id="读取某个配置分区所有配置-xuiread">读取某个配置分区所有配置 (<strong>xui.read</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">配置</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> xui</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(配置分区)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>配置分区 <br>
  文本型，配置界面中的配置分区（defaults）标识符</li>
  <li>配置 <br>
  表型，这个配置分区所有配置的键值对，如果没有该配置分区，则返回空表</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-10 版以上方可使用</strong> <br>
  该函数用于优化读取多个配置 <br>
  该函数不负责过滤值类型，如果需要保证获取的值类型合法，可先使用 xui.setup 来校验修正再读取</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">setup</span><span class="pun">(</span><span class="str">'interface.xui'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> dict </span><span class="pun">=</span><span class="pln"> xui</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="str">'com.yourcompany.A-Script-Bundle'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> enabled </span><span class="pun">=</span><span class="pln"> dict</span><span class="pun">[</span><span class="str">'enabled'</span><span class="pun">]</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="xq52"><br></p><ul data-anchor-id="yc7i">
<li><h3 id="覆盖写入配置表到某个配置分区-xuiwrite">覆盖写入配置表到某个配置分区 (<strong>xui.write</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> xui</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(配置分区,</span><span class="pln"> </span><span class="pun">配置)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>配置分区 <br>
  文本型，配置界面中的配置分区（defaults）标识符</li>
  <li>配置 <br>
  表型，配置的键值对</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-10 版以上方可使用</strong> <br>
  该函数用于优化同时设置多项配置，如果当前正显示着配置界面，则该函数会立刻更新界面上的显示值 <br>
  该函数不负责过滤值类型，如果需要保证值类型合法，可于写入后使用 xui.setup 来校验修正</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">setup</span><span class="pun">(</span><span class="str">'interface.xui'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> dict </span><span class="pun">=</span><span class="pln"> xui</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="str">'com.yourcompany.A-Script-Bundle'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">dict</span><span class="pun">[</span><span class="str">'enabled'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span></code></li><li class="L3"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="str">'com.yourcompany.A-Script-Bundle'</span><span class="pun">,</span><span class="pln"> dict</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">setup</span><span class="pun">(</span><span class="str">'interface.xui'</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="1wjf"><br></p><ul data-anchor-id="6lo0">
<li><h3 id="清除某个配置分区所有的配置-xuiclear">清除某个配置分区所有的配置 (<strong>xui.clear</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> xui</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">(配置分区)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>配置分区 <br>
  文本型，配置界面中的配置分区（defaults）标识符</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-10 版以上方可使用</strong> <br>
  该函数用于优化同时设置多项配置，如果当前正显示着配置界面，则该函数会立刻更新界面上的显示值 <br>
  可于清除后使用 xui.setup 再次生成配置界面的默认配置</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">(</span><span class="str">'com.yourcompany.A-Script-Bundle'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">xui</span><span class="pun">.</span><span class="pln">setup</span><span class="pun">(</span><span class="str">'interface.xui'</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="7dgk"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="nid8" id="扩展-table-模块">扩展 table 模块</h2><p data-anchor-id="7ggf"><strong><a href="http://cloudwu.github.io/lua53doc/manual.html#6.6" target="_blank">table</a> 模块是 Lua 基础模块，XXTouch 在其基础上做了一些扩展。</strong></p><ul data-anchor-id="41ak">
<li><h3 id="深拷贝一个表-tabledeepcopy">深拷贝一个表 (<strong>table.deep_copy</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">被复制的表</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">deep_copy</span><span class="pun">(一个表)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>一个表 <br>
  表型，需要拷贝的表</li>
  <li>被复制的表 <br>
  表型，返回表的拷贝份</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>迭代拷贝一个表到另外一个表，表中除 function 和 userdata 以外的所有值都会拷贝 <br>
  拷贝出来的表中如果有循环引用，那么引用关系也会获得拷贝</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> _g </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">deep_copy</span><span class="pun">(</span><span class="pln">_G</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="jmps"><br></p><ul data-anchor-id="690y">
<li><h3 id="深打印一个表-tabledeepprint">深打印一个表 (<strong>table.deep_print</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">表文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">(关联表)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>关联表 <br>
  表型，需要打印成字符串的表</li>
  <li>表文本 <br>
  文本型，返回表的树形结构的文本，这个文本不保证格式兼容</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将一个表的树形结构打印出来 <br>
  打印出来的结构<strong>不保证格式兼容</strong>，不同版本打印出来可能不一样 <br>
  非表型引用类型（用户数据、函数）不可通过 <a href="#从字符串加载一个表-tableloadstring">table.load_string</a> 反序列，只保证人类可读性 <br>
  这个函数会将内容输出到 <a href="#打印内容到缓冲区-print">print 缓冲区</a></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">(</span><span class="pln">_G</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="mlpn"><br></p><ul data-anchor-id="lzlo">
<li><h3 id="从字符串加载一个表-tableloadstring">从字符串加载一个表 (<strong>table.load_string</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">关联表</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">load_string</span><span class="pun">(表文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>表文本 <br>
  文本型，表的树形结构的文本，只能包含静态数据，不能包含任何动态代码</li>
  <li>关联表 <br>
  表型 或 nil，加载成功返回表结构，失败返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.1.2-6 版以上方可使用</strong> <br>
  将一个树形结构文本描述转换成一个表对象 <br>
  一定意义上，<a href="#从字符串加载一个表-tableloadstring">table.load_string</a> 是 <a href="#深打印一个表-tabledeepprint">table.deep_print</a> 的反函数（这取决有没有循环引用或非表引用类型） <br>
  它与 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-load" target="_blank">load</a> 的区别在于，它不会运行文本中的代码，只会使用静态数据 <br>
  例如以下示例包含奇怪代码，结果是 b 为 nil</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">b </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">load_string</span><span class="pun">[[</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    a </span><span class="pun">=</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'reboot'</span><span class="pun">),</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">这里的代码将不会运行，并且会返回</span><span class="pln"> </span><span class="kwd">nil</span></code></li><li class="L2"><code class="language-lua"><span class="pun">}</span><span class="pln"> </span><span class="pun">]]</span></code></li></ol></pre>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">load_string</span><span class="pun">[[</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span></code></li><li class="L4"><code class="language-lua"><span class="pun">}</span><span class="pln"> </span><span class="pun">]]</span></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">t</span><span class="pun">.</span><span class="pln">b</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="lvub"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="8zcn" id="扩展-string-模块">扩展 string 模块</h2><p data-anchor-id="1e9j"><strong><a href="http://cloudwu.github.io/lua53doc/manual.html#6.4" target="_blank">string</a> 模块是 Lua 基础模块，XXTouch 在其基础上做了一些扩展。</strong></p><ul data-anchor-id="76qn">
<li><h3 id="转成-16-进制文本-stringtohex">转成 16 进制文本 (<strong>string.to_hex</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="lit">16</span><span class="pun">进制文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">to_hex</span><span class="pun">(数据内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>数据内容 <br>
  字符串型，需要转换成 16 进制的字符串</li>
  <li>16进制文本 <br>
  文本型，返回 16 进制文本</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将字符串（或二进制数据块）转换成可打印的 16 进制文本 <br>
  关键词：图片十六进制 十六进制图片 文件十六进制 十六进制文件 数据十六进制 十六进制数据  </p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">1</span><span class="pun">：</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">to_hex</span><span class="pun">(</span><span class="str">'一些数据'</span><span class="pun">))</span></code></li><li class="L2"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"e4b880e4ba9be695b0e68dae"</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">2</span><span class="pun">：</span></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">((</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">to_hex</span><span class="pun">(</span><span class="str">'一些数据'</span><span class="pun">):</span><span class="pln">gsub</span><span class="pun">(</span><span class="str">'(..)'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'\\x%1'</span><span class="pun">)))</span></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"\xe4\xb8\x80\xe4\xba\x9b\xe6\x95\xb0\xe6\x8d\xae"</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><p>更多示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ogjh"><br></p><ul data-anchor-id="tikq">
<li><h3 id="从-16-进制文本转回-stringfromhex">从 16 进制文本转回 (<strong>string.from_hex</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">数据内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">from_hex</span><span class="pun">(</span><span class="lit">16</span><span class="pun">进制文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>16进制文本 <br>
  文本型，需要转换成字符串的 16 进制文本</li>
  <li>数据内容 <br>
  字符串型 或 nil，返回字符串，如果输入参数不是 16 进制文本，则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>string.to_hex 的反函数，将可打印的 16 进制文本转换成字符串（或二进制数据块）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">from_hex</span><span class="pun">(</span><span class="str">'e4b880e4ba9be695b0e68dae'</span><span class="pun">))</span></code></li><li class="L1"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"一些数据"</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><p>更多示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="pbvl"><br></p><ul data-anchor-id="3vqq">
<li><h3 id="将-gbk-编码的文本转成-utf-8-编码的文本-stringfromgbk">将 GBK 编码的文本转成 UTF-8 编码的文本 (<strong>string.from_gbk</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">可以直接用的文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">from_gbk</span><span class="pun">(</span><span class="pln">GBK</span><span class="pun">编码的文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>GBK编码的文本 <br>
  文本型，需要转换成 UTF-8 编码的 GBK 编码文本</li>
  <li>可以直接用的文本 <br>
  字符串型 或 nil，返回 UTF-8 编码的文本，如果编码错误导致转换无法完成，返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将 GBK 编码的文本转成 UTF-8 编码的文本，转换返回乱码字符串可能是编码不正确，但是能完成编码对应转换，这不是函数的问题 <br>
  更复杂的编码转换需求请参考 <a href="#luaiconv-扩展库编码转换库">luaiconv（编码转换库）</a> <br>
  注：GBK 编码包含 GB2312 编码，所以如果需要 GB2312 编码的文本转换也是这个函数</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">中文编码</span><span class="pln"> </span><span class="pun">中文标准编码</span><span class="pln"> </span><span class="pun">国标扩展编码</span><span class="pln"> GB2312</span></code></li><li class="L1"><code class="language-lua"><span class="pln">gbkstr </span><span class="pun">=</span><span class="pln"> </span><span class="str">'\x58\x58\x54\x6f\x75\x63\x68\x20\xba\xdc\xc7\xbf'</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">gbkstr</span><span class="pun">)</span><span class="pln">                  </span><span class="pun">--</span><span class="pln"> GBK </span><span class="pun">编码的字符串无法显示</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">from_gbk</span><span class="pun">(</span><span class="pln">gbkstr</span><span class="pun">))</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"XXTouch 很强"</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a> <br>
<strong>说明</strong>：在 Lua 源码中，字符串中 <code>\x</code> 开头，后面跟两位 16 进制数表示以该数字编码的单个字节。例如：<code>\x58</code> 表示 <code>X</code> 这个字符，可打印字符部分参考<a href="https://baike.baidu.com/item/ASCII/309296" target="_blank">《ASCII 编码》</a></p></li></ul></li>
</ul><hr><p data-anchor-id="ajdv"><br></p><ul data-anchor-id="fqvp">
<li><h3 id="计算字符串的-md5-哈希值-stringmd5">计算字符串的 md5 哈希值 (<strong>string.md5</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">哈希值</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">md5</span><span class="pun">(数据内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>数据内容 <br>
  字符串型，原始字符串</li>
  <li>哈希值 <br>
  文本型，返回字符串的 md5 哈希值的 16 进制文本</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>计算字符串（或二进制数据块）的 md5 校验值</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">md5</span><span class="pun">(</span><span class="str">'XXTouch 真棒'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"4921dbf380df452fa959dc47cef30e4b"</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><p>更多示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="9888"><br></p><ul data-anchor-id="llui">
<li><h3 id="计算字符串的-sha1-哈希值-stringsha1">计算字符串的 sha1 哈希值 (<strong>string.sha1</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">哈希值</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">sha1</span><span class="pun">(数据内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>数据内容 <br>
  字符串型，原始字符串</li>
  <li>哈希值 <br>
  文本型，返回字符串的 sha1 哈希值的 16 进制文本</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>计算字符串（或二进制数据块）的 sha1 校验值</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">sha1</span><span class="pun">(</span><span class="str">'XXTouch 真棒'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"a959c48d904c1075c7ddfdb1fda49effb2142493"</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><p>更多示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="dfth"><br></p><ul data-anchor-id="87aa">
<li><h3 id="对字符串进行-base64-编码-stringbase64encode">对字符串进行 base64 编码 (<strong>string.base64_encode</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">b64</span><span class="pun">文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">base64_encode</span><span class="pun">(数据内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>数据内容 <br>
  字符串型，原始字符串</li>
  <li>b64文本 <br>
  文本型，返回字符串的 base64 编码文本</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>对字符串（或二进制数据块）进行 base64 编码 <br>
  关键词：图片Base64 Base64图片 文件Base64 Base64文件 数据Base64 Base64数据 二进制Base64 Base64二进制  </p>
</blockquote></li>
<li><p>示例  </p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">取屏幕区域</span><span class="pln"> png </span><span class="pun">格式数据进行</span><span class="pln"> base64 </span><span class="pun">编码</span></code></li><li class="L1"><code class="language-lua"><span class="pln">b64s </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">image</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">png_data</span><span class="pun">():</span><span class="pln">base64_encode</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">读取文件数据并进行</span><span class="pln"> base64 </span><span class="pun">编码</span></code></li><li class="L4"><code class="language-lua"><span class="pln">b64s </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">reads</span><span class="pun">(</span><span class="str">'/var/mobile/1.png'</span><span class="pun">):</span><span class="pln">base64_encode</span><span class="pun">()</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#屏幕找图-screenfindimage"><code>screen.image</code></a>、<a href="#获取图片对象的-png-格式数据-pngdata"><code>:png_data</code></a>、<a href="#读取一个文件中的所有数据-filereads"><code>file.reads</code></a>  </p></li>
<li><p>更多示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="lfj1"><br></p><ul data-anchor-id="axza">
<li><h3 id="对-base64-编码的文本进行解码-stringbase64decode">对 base64 编码的文本进行解码 (<strong>string.base64_decode</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">数据内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">base64_decode</span><span class="pun">(</span><span class="pln">b64</span><span class="pun">文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>b64文本 <br>
  文本型，base64 编码的文本</li>
  <li>数据内容 <br>
  字符串型，返回解码后的字符串</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>string.base64_encode 的反函数，将 base64 编码的文本转换回字符串（或二进制数据块）</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ex9a"><br></p><ul data-anchor-id="guh9">
<li><h3 id="对字符串进行加密-stringaes128encrypt">对字符串进行加密 (<strong>string.aes128_encrypt</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">加密的数据</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">aes128_encrypt</span><span class="pun">(数据内容,</span><span class="pln"> </span><span class="pun">密钥)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>数据内容 <br>
  字符串型，需要加密的字符串</li>
  <li>密钥 <br>
  字符串型，密码</li>
  <li>加密的数据 <br>
  字符串型，加密后的二进制数据块</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用 AES128 算法 ECB 模式将字符串（或二进制数据块）加密 <br>
  注：AES128 算法 ECB 模式不存在 iv（偏移向量） 参数，如果对接开发中一定需要写，那么是 0</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="0c39"><br></p><ul data-anchor-id="xt1p">
<li><h3 id="解密一段已加密的字符串-stringaes128decrypt">解密一段已加密的字符串 (<strong>string.aes128_decrypt</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">数据内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">aes128_decrypt</span><span class="pun">(加密的数据,</span><span class="pln"> </span><span class="pun">密钥)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>加密的数据 <br>
  字符串型，已经加密的字符串</li>
  <li>密钥 <br>
  字符串型，密码</li>
  <li>数据内容 <br>
  字符串型，解密之后的字符串</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用 AES128 算法 ECB 模式将加密的字符串（或二进制数据块）解密 <br>
  注：AES128 算法 ECB 模式不存在 iv（偏移向量） 参数，如果对接开发中一定需要写，那么是 0</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="8opp"><br></p><ul data-anchor-id="62k9">
<li><h3 id="用分隔符规则分割一个字符串-stringsplit">用分隔符规则分割一个字符串 (<strong>string.split</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">分割好的文本数组</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(待分割文本,</span><span class="pln"> </span><span class="pun">分隔符)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>待分割文本 <br>
  文本型，需要分割的字符串</li>
  <li>分隔符 <br>
  文本型，分隔符</li>
  <li>分割好的文本数组 <br>
  表型，分割后的字符串片段按顺序排列于此表</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>用分隔符规则分割一个字符串 <br>
  字符串分割 文本分割 字符串分割 文本切割 文本分段</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">1</span><span class="pun">（分割账号密码）：</span></code></li><li class="L1"><code class="language-lua"><span class="pln">t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">'lfue6841214----123456'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'----'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'账号是：'</span><span class="pun">..</span><span class="pln">t</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">2</span><span class="pun">（取文本中间部分，两个</span><span class="pln"> </span><span class="com"># 之间的文字）：</span></code></li><li class="L5"><code class="language-lua"><span class="pln">t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">'您好，验证码是#4937#，15分钟内有效。【爆炸科技】'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'#'</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'验证码是：'</span><span class="pun">..</span><span class="pln">t</span><span class="pun">[</span><span class="lit">2</span><span class="pun">])</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">3</span><span class="pun">（复杂点的取文本中间部分）：</span></code></li><li class="L9"><code class="language-lua"><span class="pln">t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">'您好，验证码是4937，15分钟内有效。【爆炸科技】'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'验证码是'</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">t</span><span class="pun">[</span><span class="lit">2</span><span class="pun">],</span><span class="pln"> </span><span class="str">'，15分钟'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'验证码是：'</span><span class="pun">..</span><span class="pln">t</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">取文本中间部分的封装（找不到匹配返回</span><span class="pln"> </span><span class="kwd">nil</span><span class="pun">）</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">function</span><span class="pln"> str_middle</span><span class="pun">(</span><span class="pln">str</span><span class="pun">,</span><span class="pln"> sep1</span><span class="pun">,</span><span class="pln"> sep2</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">type</span><span class="pun">(</span><span class="pln">str</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'string'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'`str_middle` 第 #1 参数必须是字符串'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">type</span><span class="pun">(</span><span class="pln">sep1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'string'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'`str_middle` 第 #2 参数必须是字符串'</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">type</span><span class="pun">(</span><span class="pln">sep2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'nil'</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> type</span><span class="pun">(</span><span class="pln">sep2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'string'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'`str_middle` 第 #3 参数可选，但必须是字符串'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">str</span><span class="pun">,</span><span class="pln"> sep1</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> sep2 </span><span class="kwd">or</span><span class="pln"> sep1</span><span class="pun">==</span><span class="pln">sep2 </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> t</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> t</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">nil</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">nil</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="kwd">else</span></code></li><li class="L2"><code class="language-lua"><span class="pln">            t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">t</span><span class="pun">[</span><span class="lit">2</span><span class="pun">],</span><span class="pln"> sep2</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> t</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">nil</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">nil</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            </span><span class="kwd">else</span></code></li><li class="L6"><code class="language-lua"><span class="pln">                </span><span class="kwd">return</span><span class="pln"> t</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span></code></li><li class="L7"><code class="language-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">以上封装可复制到脚本中用</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pln">r </span><span class="pun">=</span><span class="pln"> str_middle</span><span class="pun">(</span><span class="str">'您好，验证码是4937，15分钟内有效。【爆炸科技】'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'码是'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'，15分'</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'验证码是：'</span><span class="pun">..</span><span class="pln">r</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"验证码是：4937"</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pln">r </span><span class="pun">=</span><span class="pln"> str_middle</span><span class="pun">(</span><span class="str">'您好，验证码是#8346#，15分钟内有效。【爆炸科技】'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'#'</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'验证码是：'</span><span class="pun">..</span><span class="pln">r</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"验证码是：8346"</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">取绝对路径的文件名</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">function</span><span class="pln"> strip_dirname</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">path</span><span class="pun">,</span><span class="pln"> </span><span class="str">'/'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> d</span><span class="pun">[#</span><span class="pln">d</span><span class="pun">]</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">取绝对路径的目录</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">function</span><span class="pln"> strip_filename</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">path</span><span class="pun">,</span><span class="pln"> </span><span class="str">'/'</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    d</span><span class="pun">[#</span><span class="pln">d</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">nil</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="pln">d</span><span class="pun">,</span><span class="pln"> </span><span class="str">'/'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">剔除路径最后一部分的扩展名（后缀名）</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">function</span><span class="pln"> strip_extension</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">path</span><span class="pun">,</span><span class="pln"> </span><span class="str">'/'</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> fnt </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">d</span><span class="pun">[#</span><span class="pln">d</span><span class="pun">],</span><span class="pln"> </span><span class="str">'.'</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    d</span><span class="pun">[#</span><span class="pln">d</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> fnt</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="pln">d</span><span class="pun">,</span><span class="pln"> </span><span class="str">'/'</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">获取路径最后一部分的扩展名（后缀名）</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">function</span><span class="pln"> get_extension</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> d </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">path</span><span class="pun">,</span><span class="pln"> </span><span class="str">'/'</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> fnt </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">d</span><span class="pun">[#</span><span class="pln">d</span><span class="pun">],</span><span class="pln"> </span><span class="str">'.'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    table</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">fnt</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="pln">fnt</span><span class="pun">,</span><span class="pln"> </span><span class="str">'.'</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">strip_dirname</span><span class="pun">(</span><span class="str">"/private/var/mobile/Media/1ferver/lua/scripts/1.lua.xxt"</span><span class="pun">))</span></code></li><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"1.lua.xxt"</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">strip_filename</span><span class="pun">(</span><span class="str">"/private/var/mobile/Media/1ferver/lua/scripts/1.lua.xxt"</span><span class="pun">))</span></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"/private/var/mobile/Media/1ferver/lua/scripts"</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">strip_extension</span><span class="pun">(</span><span class="str">"/private/var/mobile/Media/1ferver/lua/scripts/1.lua.xxt"</span><span class="pun">))</span></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"/private/var/mobile/Media/1ferver/lua/scripts/1"</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">get_extension</span><span class="pun">(</span><span class="str">"/private/var/mobile/Media/1ferver/lua/scripts/1.lua.xxt"</span><span class="pun">))</span></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"lua.xxt"</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">strip_extension</span><span class="pun">(</span><span class="pln">strip_dirname</span><span class="pun">(</span><span class="str">"/private/var/mobile/Media/1ferver/lua/scripts/1.lua.xxt"</span><span class="pun">)))</span></code></li><li class="L2"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"1"</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-table.concat" target="_blank">table.concat</a></p></li>
<li><p>可能相关的示例（将中英混合的字符串爆开成一个个的字符）</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">这不是使用</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">split </span><span class="pun">实现的例子</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">function</span><span class="pln"> string_explode</span><span class="pun">(</span><span class="pln">str</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> ret </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> p</span><span class="pun">,</span><span class="pln"> c </span><span class="kwd">in</span><span class="pln"> utf8</span><span class="pun">.</span><span class="pln">codes</span><span class="pun">(</span><span class="pln">str</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        ret</span><span class="pun">[#</span><span class="pln">ret </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> utf8</span><span class="pun">.</span><span class="kwd">char</span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> ret</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="kwd">local</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> string_explode</span><span class="pun">(</span><span class="str">'你好，XXTouch'</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">table</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="pln">t</span><span class="pun">,</span><span class="pln"> </span><span class="str">'/'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"你/好/，/X/X/T/o/u/c/h"</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-table.concat" target="_blank">table.concat</a>、<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-utf8.char" target="_blank">utf8.char</a>、<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-utf8.codes" target="_blank">utf8.codes</a></p></li>
<li><p>更多示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="cm2i"><br></p><ul data-anchor-id="syjo">
<li><h3 id="去除文本左边空白字符-stringltrim">去除文本左边空白字符 (<strong>string.ltrim</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">处理后文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">ltrim</span><span class="pun">(处理前文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>处理前文本 <br>
  文本型，需要去除左边空白字符的文本</li>
  <li>处理后文本 <br>
  文本型，返回已经去除左边空白字符的文本</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>去除文本左边空白字符 <br>
  空白字符包括 <code>"\r"</code> <code>"\n"</code> <code>"\t"</code></p>
</blockquote></li>
<li><p>示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="0vgv"><br></p><ul data-anchor-id="qgk8">
<li><h3 id="去除文本右边空白字符-stringrtrim">去除文本右边空白字符 (<strong>string.rtrim</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">处理后文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">rtrim</span><span class="pun">(处理前文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>处理前文本 <br>
  文本型，需要去除右边空白字符的文本</li>
  <li>处理后文本 <br>
  文本型，返回已经去除右边空白字符的文本</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>去除文本右边空白字符 <br>
  空白字符包括 <code>"\r"</code> <code>"\n"</code> <code>"\t"</code></p>
</blockquote></li>
<li><p>示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="kfec"><br></p><ul data-anchor-id="wpji">
<li><h3 id="去除文本左右两边空白字符-stringtrim">去除文本左右两边空白字符 (<strong>string.trim</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">处理后文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">trim</span><span class="pun">(处理前文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>处理前文本 <br>
  文本型，需要去除左右两边空白字符的文本</li>
  <li>处理后文本 <br>
  文本型，返回已经去除左右两边空白字符的文本</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>去除文本左右两边空白字符 <br>
  空白字符包括 <code>"\r"</code> <code>"\n"</code> <code>"\t"</code></p>
</blockquote></li>
<li><p>示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ni8e"><br></p><ul data-anchor-id="adfl">
<li><h3 id="去除文本中所有的空白字符-stringatrim">去除文本中所有的空白字符 (<strong>string.atrim</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">处理后文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">atrim</span><span class="pun">(处理前文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>处理前文本 <br>
  文本型，需要去除所有的空白字符的文本</li>
  <li>处理后文本 <br>
  文本型，返回已经去除所有的空白字符的文本</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>去除文本所有的空白字符 <br>
  空白字符包括 <code>"\r"</code> <code>"\n"</code> <code>"\t"</code></p>
</blockquote></li>
<li><p>示例 <br>
<a href="#扩展-string-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="6ais"><br></p><ul data-anchor-id="1fu7">
<li><h3 id="去除掉文本前的-utf8-bom-stringstriputf8bom">去除掉文本前的 UTF8-BOM (<strong>string.strip_utf8_bom</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">处理后文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">strip_utf8_bom</span><span class="pun">(处理前文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>处理前文本 <br>
  文本型，需要剔除掉 UTF8-BOM 字符的文本</li>
  <li>处理后文本 <br>
  文本型，返回已经剔除掉 UTF8-BOM 字符的文本</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>UTF8-BOM 的表现形式是文档开头的三个看不见的字符 <code>"\xEF\xBB\xBF"</code> （在 Lua 源码中，字符串中 <code>\x</code> 开头，后面跟两位 16 进制数表示以该数字编码的单个字节。例如：<code>\x58</code> 表示 <code>X</code> 这个字符，可打印字符部分参考<a href="https://baike.baidu.com/item/ASCII/309296" target="_blank">《ASCII 编码》</a>） <br>
  <strong>这个函数在 1.1.3-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">txt </span><span class="pun">=</span><span class="pln"> </span><span class="str">"\xEF\xBB\xBFXXTouch"</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">txt</span><span class="pun">..</span><span class="str">', '</span><span class="pun">..#</span><span class="pln">txt</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"XXTouch, 10"</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pln">txt </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">strip_utf8_bom</span><span class="pun">(</span><span class="pln">txt</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">txt</span><span class="pun">..</span><span class="str">', '</span><span class="pun">..#</span><span class="pln">txt</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"XXTouch, 7"</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><p>小知识</p>

<blockquote class="white-blockquote">
  <p>UTF-8 <strong>不需要</strong> BOM，尽管 Unicode 标准允许在 UTF-8 中使用 BOM。 <br>
  所以不含 BOM 的 UTF-8 才是标准形式，在 UTF-8 文件中放置 BOM 主要是微软的习惯（顺便提一下：把带有 BOM 的小端序 UTF-16 称作「Unicode」而又不详细说明，这也是微软的习惯）。 <br>
  BOM（byte order mark）是为 UTF-16 和 UTF-32 准备的，用于标记字节序（byte order）。微软在 UTF-8 中使用 BOM 是因为这样可以把 UTF-8 和 ASCII 等编码明确区分开，但这样的文件在 Windows 之外的操作系统里会带来问题。（<a href="https://www.baidu.com/s?wd=UTF8-BOM" target="_blank">百度搜索 UTF8-BOM 查看更多资料</a>）</p>
</blockquote></li></ul></li>
</ul><hr><p data-anchor-id="rneb"><br></p><ul data-anchor-id="kbvc">
<li><h3 id="生成随机字符串-stringrandom">生成随机字符串 (<strong>string.random</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">随机字符串</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">random</span><span class="pun">(字符池</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">生成字符个数,</span><span class="pln"> </span><span class="pun">每字符的字节数</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>字符池 <br>
  文本型，需要生成字符串的字典</li>
  <li>生成字符个数 <br>
  整数型，可选参数，需要生成的随机字符串中的字符个数，默认 6</li>
  <li>每字符的字节数 <br>
  整数型，可选参数，每个字符的长度，默认 1</li>
  <li>随机字符串 <br>
  文本型，返回生成的随机字符串</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>生成随机字符串，UTF-8 编码的中文每个字符的长度为 3</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">rs </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">random</span><span class="pun">(</span><span class="str">"qwertyuiopasdfghjklzxcvbnm"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">20</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">rs </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">random</span><span class="pun">(</span><span class="str">"一二三四五六七八九十"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">20</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="58j4"><br></p><ul data-anchor-id="pk34">
<li><h3 id="比较两个版本号大小-stringcompareversion">比较两个版本号大小 (<strong>string.compare_version</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">比较结果</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(版本号甲,</span><span class="pln"> </span><span class="pun">版本号乙)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>版本号甲, 版本号乙 <br>
  文本型，需要比较大小的两个版本号</li>
  <li>比较结果 <br>
  整数型，版本号甲大于版本号乙返回 1，版本号甲小于版本号乙返回 -1，版本号相等返回 0</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>比较两个版本号字符串大小，遵守如下比较规则 <br>
  使用点 (.) 或减号 (-) 或空格隔开的纯数字值 <br>
  不同分隔符效果相等，多个分隔符连在一起被认为是一个分隔符 <br>
  权值随分段从左至右逐步降低 <br>
  遇到任何非法字符将截断不对比后面的内容 <br>
  如果段数不等，则不够段数用 '0' 补齐对比 <br>
  空字符串或非法串会被认为版本号是 '0' <br>
  例如 '1.1' 与 '1.1.0' 是相等的两个版本号 <br>
  例如 '1.1' 与 '1.1-0' 是相等的两个版本号 <br>
  例如 '1.1' 与 '1-1' 是相等的两个版本号 <br>
  例如 '1.0' 与 '1 0' (1 和 0 之间有个空格) 是相等的两个版本号 <br>
  例如 '1.0' 大于 '0.99999' <br>
  <strong>这个函数在 1.2-3 版以上方可使用</strong> <br>
  这个函数在 1.2-10 版以上可以在 XUI 中使用  </p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">""</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">""</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.0"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.0"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1."</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1."</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1."</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.0"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.0"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1."</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.0"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.0"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.0.0"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.0.0"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.0"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.0"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.1"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.10"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.2"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.11"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.1.1"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.2"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.1.1"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.0"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"0.99999"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.10.1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.10"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.2-4"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.2-3"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.2-3"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.2.3"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.2-4"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.2.3.0"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.2-4"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.2.3.10"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.2-4"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.2.30.10"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"1.2-3"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.2.4"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"2.2"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"1.2"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"2.2"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"10.2"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"2..2"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"2.2"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"2.2.x.3"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"2.2"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">.</span><span class="pln">compare_version</span><span class="pun">(</span><span class="str">"x"</span><span class="pun">,</span><span class="pln"> </span><span class="str">""</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="q7c9"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="9mq4" id="扩展-string-示例代码">扩展 string 示例代码</h3><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="3dwu" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">哈希校验</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> str </span><span class="pun">=</span><span class="pln"> </span><span class="str">"sozereal"</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'"'</span><span class="pun">..</span><span class="pln">str</span><span class="pun">..</span><span class="str">'" 的 16 进制编码为: &lt;'</span><span class="pun">..</span><span class="pln">str</span><span class="pun">:</span><span class="pln">to_hex</span><span class="pun">()..</span><span class="str">'&gt;'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'&lt;'</span><span class="pun">..</span><span class="pln">str</span><span class="pun">:</span><span class="pln">to_hex</span><span class="pun">()..</span><span class="str">'&gt; 转换成明文为: "'</span><span class="pun">..</span><span class="pln">str</span><span class="pun">:</span><span class="pln">to_hex</span><span class="pun">():</span><span class="pln">from_hex</span><span class="pun">()..</span><span class="str">'"'</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'"'</span><span class="pun">..</span><span class="pln">str</span><span class="pun">..</span><span class="str">'" 的 MD5 值是: '</span><span class="pun">..</span><span class="pln">str</span><span class="pun">:</span><span class="pln">md5</span><span class="pun">())</span></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'"'</span><span class="pun">..</span><span class="pln">str</span><span class="pun">..</span><span class="str">'" 的 SHA1 值是: '</span><span class="pun">..</span><span class="pln">str</span><span class="pun">:</span><span class="pln">sha1</span><span class="pun">())</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">local</span><span class="pln"> binstr </span><span class="pun">=</span><span class="pln"> </span><span class="str">"\0\1\2\3\4\5"</span></code></li><li class="L7"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'&lt;'</span><span class="pun">..</span><span class="pln">binstr</span><span class="pun">:</span><span class="pln">to_hex</span><span class="pun">()..</span><span class="str">'&gt; 的 MD5 值是: '</span><span class="pun">..</span><span class="pln">binstr</span><span class="pun">:</span><span class="pln">md5</span><span class="pun">())</span></code></li><li class="L8"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'&lt;'</span><span class="pun">..</span><span class="pln">binstr</span><span class="pun">:</span><span class="pln">to_hex</span><span class="pun">()..</span><span class="str">'&gt; 的 SHA1 值是: '</span><span class="pun">..</span><span class="pln">binstr</span><span class="pun">:</span><span class="pln">sha1</span><span class="pun">())</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">数据加/解密</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> msg </span><span class="pun">=</span><span class="pln"> </span><span class="str">"\5\4\3\2\1\0"</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> key </span><span class="pun">=</span><span class="pln"> </span><span class="str">"sozereal"</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">local</span><span class="pln"> emsg </span><span class="pun">=</span><span class="pln"> msg</span><span class="pun">:</span><span class="pln">aes128_encrypt</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">local</span><span class="pln"> emsgb64 </span><span class="pun">=</span><span class="pln"> emsg</span><span class="pun">:</span><span class="pln">base64_encode</span><span class="pun">()</span></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'二进制数据&lt;'</span><span class="pun">..</span><span class="pln">msg</span><span class="pun">:</span><span class="pln">to_hex</span><span class="pun">()..</span><span class="str">'&gt; \n 使用 AES128 算法 密钥 "'</span><span class="pun">..</span><span class="pln">key</span><span class="pun">..</span><span class="str">'" 加密 值是: &lt;'</span><span class="pun">..</span><span class="pln">emsg</span><span class="pun">:</span><span class="pln">to_hex</span><span class="pun">()..</span><span class="str">'&gt; \n base64 串为 "'</span><span class="pun">..</span><span class="pln">emsgb64</span><span class="pun">..</span><span class="str">'"'</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">local</span><span class="pln"> tmp </span><span class="pun">=</span><span class="pln"> emsgb64</span><span class="pun">:</span><span class="pln">base64_decode</span><span class="pun">()</span></code></li><li class="L7"><code class="language-lua"><span class="pln">msg </span><span class="pun">=</span><span class="pln"> tmp</span><span class="pun">:</span><span class="pln">aes128_decrypt</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'"'</span><span class="pun">..</span><span class="pln">emsgb64</span><span class="pun">..</span><span class="str">'" base64 解码后的数据为 &lt;'</span><span class="pun">..</span><span class="pln">tmp</span><span class="pun">:</span><span class="pln">to_hex</span><span class="pun">()..</span><span class="str">'&gt; \n使用 AES128 算法 密钥 "'</span><span class="pun">..</span><span class="pln">key</span><span class="pun">..</span><span class="str">'" 解密 值是: &lt;'</span><span class="pun">..</span><span class="pln">msg</span><span class="pun">:</span><span class="pln">to_hex</span><span class="pun">()..</span><span class="str">'&gt;'</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">字符串小工具</span></code></li><li class="L1"><code class="language-lua"><span class="pln">str </span><span class="pun">=</span><span class="pln"> </span><span class="str">"  哈哈,he he,1,3,6  "</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">new</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">:</span><span class="pln">split</span><span class="pun">(</span><span class="str">","</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--将字符串</span><span class="pln">str</span><span class="pun">按照</span><span class="pln"> </span><span class="str">`,`</span><span class="pln"> </span><span class="pun">分割并返回一个表</span></code></li><li class="L3"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">new</span><span class="pun">[</span><span class="lit">2</span><span class="pun">])</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">str</span><span class="pun">:</span><span class="pln">rtrim</span><span class="pun">())</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">结果</span><span class="pln"> </span><span class="str">"  哈哈,he he,1,3,6"</span><span class="pln"> </span><span class="pun">,删除字符串尾部的空白字符</span></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">str</span><span class="pun">:</span><span class="pln">ltrim</span><span class="pun">())</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">结果</span><span class="pln"> </span><span class="str">"哈哈,he he,1,3,6  "</span><span class="pln"> </span><span class="pun">,删除字符串首部的空白字符</span></code></li><li class="L6"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">str</span><span class="pun">:</span><span class="pln">trim</span><span class="pun">())</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">结果</span><span class="pln"> </span><span class="str">"哈哈,he he,1,3,6"</span><span class="pln">    </span><span class="pun">,删除字符串首尾的空白字符</span></code></li><li class="L7"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">str</span><span class="pun">:</span><span class="pln">atrim</span><span class="pun">())</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">结果</span><span class="pln"> </span><span class="str">"哈哈,hehe,1,3,6"</span><span class="pln">    </span><span class="pun">,删除字符串所有的空白字符</span></code></li></ol></pre><p data-anchor-id="tx8v"><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p><hr><p data-anchor-id="yye7"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="0mvh" id="http-模块http">! HTTP 模块（http）</h2><p data-anchor-id="bvep">当前模块并不支持 HTTP/1.0 或更低版本的 HTTP 协议，需求若无法使用当前模块完成，也可以使用 <a href="#lcurl-模块"><code>lcurl 模块</code></a> 来实现。</p><ul data-anchor-id="1wh5">
<li><h3 id="发起-get-请求-httpget">发起 GET 请求 (<strong>http.get</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">HTTP</span><span class="pun">状态码,</span><span class="pln"> </span><span class="pun">返回头</span><span class="pln">JSON</span><span class="pun">文本,</span><span class="pln"> </span><span class="pun">返回主体</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">URL </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">超时秒,</span><span class="pln"> </span><span class="pun">请求头,</span><span class="pln"> URL</span><span class="pun">不</span><span class="pln">ESCAPE </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>URL <br>
  文本型，需要请求的 URL 地址，该方法默认会对 URL 进行百分号 escape 处理，如不需要可参考 <strong>URL不ESCAPE</strong> 参数说明</li>
  <li>超时秒 <br>
  实数型，可选参数，请求超时时间，单位秒，默认 2 <br>
  *1.2-3 版以上默认超时改为 10 秒</li>
  <li>请求头 <br>
  表型，可选参数，发出的请求的头部信息，形式 {field1 = value1, field2 = value2, ...}，默认 {}</li>
  <li><strong>URL不ESCAPE</strong> *1.1.3-1 新增 <br>
  布尔型，可选参数，true 表示不对 URL 进行 escape 直接请求，默认 false <br>
  对 URL 进行自定义 escape 可参考 <a href="#lcurl-模块">lcurl 模块</a> 的 <a href="http://lua-curl.github.io/lcurl/modules/lcurl.html#easy%3aescape" target="_blank">easy:escape</a>、<a href="http://lua-curl.github.io/lcurl/modules/lcurl.html#easy%3aunescape" target="_blank">easy:unescape</a></li>
  <li>HTTP状态码 <br>
  整数型，返回当次请求的 http 状态码，请求超时返回 -1</li>
  <li>返回头JSON文本 <br>
  文本型 或 nil，请求完成返回的 JSON 形式头部信息，请求超时返回 nil</li>
  <li>返回主体 <br>
  字符串型 或 nil，请求完成返回的内容，请求超时返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用 HTTP/1.1 协议的 GET 方法请求获取网络资源 <br>
  这个函数不会将资源存储到磁盘上，如果需要下载较大的网络资源，建议使用 <a href="#http-文件下载-httpdownload">http.download</a> <br>
  <strong>这个函数可能会让出，在这个函数返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong> <br>
  若服务器协议版本为 HTTP/1.0 或 HTTP/0.9，可使用</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">返回主体</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> httpGet</span><span class="pun">(</span><span class="pln">URL</span><span class="pun">,</span><span class="pln"> </span><span class="pun">超时秒)</span></code></li></ol></pre>
  
  <p>这个方法替代</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> code</span><span class="pun">,</span><span class="pln"> res_headers</span><span class="pun">,</span><span class="pln"> body </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"http://www.baidu.com"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="str">"User-Agent"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)"</span><span class="pun">;</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟</span><span class="pln"> IE8 </span><span class="pun">的请求</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="str">"Cookie"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"大佬你会不会啊？"</span><span class="pun">;</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">顺带</span><span class="pln"> </span><span class="typ">Cookie</span><span class="pln"> </span><span class="pun">提交</span></code></li><li class="L3"><code class="language-lua"><span class="pun">})</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">if</span><span class="pln"> code </span><span class="pun">==</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">如果返回的状态码是</span><span class="pln"> HTTP_OK</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">body</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出百度首页的网页</span><span class="pln"> HTML </span><span class="pun">内容</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">中文</span><span class="pln"> URL </span><span class="pun">默认自动会</span><span class="pln"> escape</span><span class="pun">，包含中文的</span><span class="pln"> URL </span><span class="pun">可直接像下面这样调用</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">,</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"https://www.xxtouch.com/测试文本.txt"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">if</span><span class="pln"> c</span><span class="pun">==</span><span class="lit">200</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">如果返回的状态码是</span><span class="pln"> HTTP_OK</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">r</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出内容</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="lit">1.1</span><span class="pun">.</span><span class="lit">3</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">新增</span><span class="pln"> no_escape</span><span class="pun">（</span><span class="pln">URL</span><span class="pun">不</span><span class="pln">ESCAPE</span><span class="pun">）</span><span class="pln"> </span><span class="pun">参数示例，下面的例子与上面例子等效</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">local</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">,</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"https://www.xxtouch.com/%E6%B5%8B%E8%AF%95%E6%96%87%E6%9C%AC.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{},</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">--[[这里]])</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">if</span><span class="pln"> c</span><span class="pun">==</span><span class="lit">200</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">如果返回的状态码是</span><span class="pln"> HTTP_OK</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">r</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出内容</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><h4 id="httpget-封装获取外网ip实例">http.get 封装获取外网IP实例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">function</span><span class="pln"> get_ip</span><span class="pun">()</span></code></li><li class="L1"><code><span class="pln">    </span><span class="kwd">local</span><span class="pln"> </span><span class="kwd">done</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span></code></li><li class="L2"><code><span class="pln">    thread</span><span class="pun">.</span><span class="pln">dispatch</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span></code></li><li class="L3"><code><span class="pln">        </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L4"><code><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">done</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L5"><code><span class="pln">                sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L6"><code><span class="pln">                </span><span class="kwd">return</span></code></li><li class="L7"><code><span class="pln">            </span><span class="kwd">else</span></code></li><li class="L8"><code><span class="pln">                sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"正在获取 IP 地址..."</span><span class="pun">,</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">front_orien</span><span class="pun">())</span></code></li><li class="L9"><code><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L0"><code><span class="pln">            sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">2000</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L4"><code><span class="pln">        </span><span class="kwd">local</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"http://ip.chinaz.com/getip.aspx?ts="</span><span class="pun">..</span><span class="pln">tostring</span><span class="pun">(</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">rnd</span><span class="pun">()),</span><span class="pln"> </span><span class="lit">60</span><span class="pun">)</span></code></li><li class="L5"><code><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c</span><span class="pun">==</span><span class="lit">200</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L7"><code><span class="pln">            </span><span class="kwd">done</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span></code></li><li class="L8"><code><span class="pln">            </span><span class="kwd">return</span><span class="pln"> b</span><span class="pun">:</span><span class="pln">match</span><span class="pun">(</span><span class="str">'%d+%.%d+%.%d+%.%d+'</span><span class="pun">)</span></code></li><li class="L9"><code><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L0"><code><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code><span class="kwd">end</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pun">--</span><span class="pln"> </span><span class="pun">将以上代码拷贝到自己的脚本最前面，然后在脚本中使用</span></code></li><li class="L4"><code><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">get_ip</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a>、<a href="#产生一个随机数-sysrnd"><code>sys.rnd</code></a>、<a href="#派发一个任务-threaddispatch"><code>thread.dispatch</code></a>、<a href="#获取前台应用的画面方向-devicefrontorien"><code>device.front_orien</code></a></p></li>
<li><h4 id="httpget-根据当前网络获取-gps-位置及城市名称实例">http.get 根据当前网络获取 GPS 位置及城市名称实例</h4>

<p>转至论坛：<a href="https://club.xxtouch.com/forum.php?mod=viewthread&amp;tid=247" target="_blank">https://club.xxtouch.com/forum.php?mod=viewthread&amp;tid=247</a></p></li></ul></li>
</ul><hr><p data-anchor-id="qjt4"><br></p><ul data-anchor-id="bbl1">
<li><h3 id="发起-post-请求-httppost">发起 POST 请求 (<strong>http.post</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">HTTP</span><span class="pun">状态码,</span><span class="pln"> </span><span class="pun">返回头</span><span class="pln">JSON</span><span class="pun">文本,</span><span class="pln"> </span><span class="pun">返回主体</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span><span class="pln">URL </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">超时秒,</span><span class="pln"> </span><span class="pun">请求头,</span><span class="pln"> </span><span class="pun">请求主体,</span><span class="pln"> URL</span><span class="pun">不</span><span class="pln">ESCAPE </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>URL <br>
  文本型，需要请求的 URL 地址，该方法默认会对 URL 进行 escape 处理，如不需要可参考 <strong>URL不ESCAPE</strong> 参数说明</li>
  <li>超时秒 <br>
  实数型，可选参数，请求超时时间，单位秒，默认 2 <br>
  *1.2-3 版以上默认超时改为 10 秒</li>
  <li>请求头 <br>
  表型，可选参数，发出的请求的头部信息，形式 {field1 = value1, field2 = value2, ...}，默认 {}</li>
  <li>请求主体 <br>
  字符串型，可选参数，使用 post 发送出去的内容，默认是空字符串</li>
  <li><strong>URL不ESCAPE</strong> *1.1.3-1 新增 <br>
  布尔型，可选参数，true 表示不对 URL 进行 escape 直接请求，默认 false <br>
  对 URL 进行自定义 escape 可参考 <a href="#lcurl-模块">lcurl 模块</a> 的 <a href="http://lua-curl.github.io/lcurl/modules/lcurl.html#easy%3aescape" target="_blank">easy:escape</a>、<a href="http://lua-curl.github.io/lcurl/modules/lcurl.html#easy%3aunescape" target="_blank">easy:unescape</a></li>
  <li>HTTP状态码 <br>
  整数型，返回当次请求的 http 状态码，请求超时返回 -1</li>
  <li>返回头JSON文本 <br>
  文本型 或 nil，请求完成返回的 JSON 形式头部信息，请求超时返回 nil</li>
  <li>返回主体 <br>
  字符串型 或 nil，请求完成返回的内容，请求超时返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用 HTTP/1.1 协议的 POST 方法发送数据到网络中 <br>
  <strong>这个函数可能会让出，在这个函数返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong> <br>
  若服务器协议版本为 HTTP/1.0 或 HTTP/0.9，可使用</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">返回主体</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> httpPost</span><span class="pun">(</span><span class="pln">URL</span><span class="pun">,</span><span class="pln"> </span><span class="pun">请求主体,</span><span class="pln"> </span><span class="pun">超时秒)</span></code></li></ol></pre>
  
  <p>这个方法替代</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> code</span><span class="pun">,</span><span class="pln"> res_headers</span><span class="pun">,</span><span class="pln"> body </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span><span class="str">"http://www.baidu.com"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="str">"User-Agent"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟</span><span class="pln"> IE8 </span><span class="pun">的请求</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="str">"Cookie"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"大佬你会不会啊？"</span><span class="pun">;</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">顺带</span><span class="pln"> </span><span class="typ">Cookie</span><span class="pln"> </span><span class="pun">提交</span></code></li><li class="L3"><code class="language-lua"><span class="pun">},</span><span class="pln"> </span><span class="str">"需要发送过去的数据"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">if</span><span class="pln"> code </span><span class="pun">==</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">如果返回的状态码是</span><span class="pln"> HTTP_OK</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">body</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出百度首页的网页</span><span class="pln"> HTML </span><span class="pun">内容</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><p>POST 提交表单示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">,</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span><span class="str">'http://httpbin.org/post'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">60</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{},</span><span class="pln"> </span><span class="str">'name=havonz&amp;qq=1004695100&amp;wechat=havonz'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">==</span><span class="pln"> </span><span class="lit">200</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">r</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'提交成功'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'请求失败，请检查网络连接'</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'连接超时'</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'错误代码 #'</span><span class="pun">..</span><span class="pln">c</span><span class="pun">..</span><span class="str">'\n'</span><span class="pun">..</span><span class="pln">r</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'HTTP 错误'</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ekvh"><br></p><ul data-anchor-id="nu6e">
<li><h3 id="http-文件下载-httpdownload">HTTP 文件下载 (<strong>http.download</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">下载成败,</span><span class="pln"> </span><span class="pun">下载信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="pln">download</span><span class="pun">(</span><span class="pln">URL</span><span class="pun">,</span><span class="pln"> </span><span class="pun">本地文件路径</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">连接超时秒,</span><span class="pln"> </span><span class="pun">断点续传模式,</span><span class="pln"> </span><span class="pun">分块回调函数,</span><span class="pln"> </span><span class="pun">缓冲区尺寸</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>URL <br>
  文本型，远端文件地址</li>
  <li>本地文件路径 <br>
  文本型，需要保存到的本地路径</li>
  <li>连接超时秒 <br>
  实数型，可选参数，连接超时时间，单位秒，默认 10</li>
  <li>断点续传模式 <br>
  布尔型，可选参数，是否需要支持断点续传，是为 true，否为 false，默认 false</li>
  <li>分块回调函数 <br>
  <ul><li>函数型 <br>
  <ul><li>可选参数，分块回调函数，每下载完一个分块都会回调一次这个函数，默认 空函数</li>
  <li>分块回调函数第一个参数为当前下载的信息，回调函数返回 true 则打断这次下载</li></ul></li></ul></li>
  <li>缓冲区尺寸 <br>
  整数型，可选参数，缓冲区大小字节数，默认自动最优配置</li>
  <li>下载成败 <br>
  布尔型，连接是否成功</li>
  <li>下载信息 <br>
  表型 或 文本型，如果连接成功则返回表型下载信息，否则返回连接失败原因文本描述</li></ul>
</blockquote></li>
<li><p>说明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">第二个返回值下载信息结构如下</span></code></li><li class="L1"><code class="language-lua"><span class="pun">{</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    resource_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">远端资源总字节数,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    start_pos </span><span class="pun">=</span><span class="pln"> </span><span class="pun">本次下载从资源的开始的位置,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    size_download </span><span class="pun">=</span><span class="pln"> </span><span class="pun">本次下载的字节数,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    speed_download </span><span class="pun">=</span><span class="pln"> </span><span class="pun">本次下载的速度（单位：字节/秒）,</span></code></li><li class="L6"><code class="language-lua"><span class="pun">}</span></code></li></ol></pre>

<blockquote class="white-blockquote">
  <p>这个函数适合大文件下载，在传输的过程中停止脚本可能会缓慢 <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong> <br>
  <strong>这个函数可能会让出，在这个函数返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>简单示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> </span><span class="kwd">done</span><span class="pun">,</span><span class="pln"> info </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="pln">download</span><span class="pun">(</span><span class="str">"http://192.168.31.13/1.zip"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"/var/mobile/1.zip"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">done</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"如果没有意外，已经下载好了"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"连接失败："</span><span class="pun">..</span><span class="pln">info</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li>
<li><p>复杂示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> </span><span class="kwd">done</span><span class="pun">,</span><span class="pln"> info </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="pln">download</span><span class="pun">(</span><span class="str">"http://192.168.31.13/1.zip"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"/var/mobile/1.zip"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">binfo</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> percent </span><span class="pun">=</span><span class="pln"> math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(((</span><span class="pln">binfo</span><span class="pun">.</span><span class="pln">start_pos </span><span class="pun">+</span><span class="pln"> binfo</span><span class="pun">.</span><span class="pln">size_download</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> binfo</span><span class="pun">.</span><span class="pln">resource_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"下载进度 "</span><span class="pun">..</span><span class="pln">percent</span><span class="pun">..</span><span class="str">"%"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4096</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">done</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos </span><span class="pun">+</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">size_download </span><span class="pun">&lt;</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">resource_size</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            </span><span class="str">"下载中断\n本次下载 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">size_download</span><span class="pun">..</span><span class="str">" 字节"</span></code></li><li class="L9"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n从第 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos</span><span class="pun">..</span><span class="str">" 字节开始下载"</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n平均速度为 "</span><span class="pun">..</span><span class="pln">math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">speed_download</span><span class="pun">/</span><span class="lit">1024</span><span class="pun">)..</span><span class="str">" kB/s"</span></code></li><li class="L1"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n还有剩 "</span><span class="pun">..(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">resource_size </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos </span><span class="pun">+</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">size_download</span><span class="pun">))..</span><span class="str">" 字节"</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        </span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            </span><span class="str">"下载完成\n本次下载 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">size_download</span><span class="pun">..</span><span class="str">" 字节"</span></code></li><li class="L6"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n从第 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos</span><span class="pun">..</span><span class="str">" 字节开始下载"</span></code></li><li class="L7"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n平均速度为 "</span><span class="pun">..</span><span class="pln">math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">speed_download</span><span class="pun">/</span><span class="lit">1024</span><span class="pun">)..</span><span class="str">" kB/s"</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        </span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"连接失败："</span><span class="pun">..</span><span class="pln">info</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#显示提示文字-systoast"><code>sys.toast</code></a></p></li>
<li><p>错误信息参考 <br>
<strong>Requested range was not delivered by the server</strong> 这个错误表示服务器可能不支持断点续传，将断点续传选项设为 false 即可</p></li></ul></li>
</ul><hr><p data-anchor-id="yfbl"><br></p><ul data-anchor-id="cu0u">
<li><h3 id="发起-head-请求-httphead">发起 HEAD 请求 (<strong>http.head</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">HTTP</span><span class="pun">状态码,</span><span class="pln"> </span><span class="pun">返回头</span><span class="pln">JSON</span><span class="pun">文本</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="pln">head</span><span class="pun">(</span><span class="pln">URL </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">超时秒,</span><span class="pln"> </span><span class="pun">请求头,</span><span class="pln"> URL</span><span class="pun">不</span><span class="pln">ESCAPE </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>URL <br>
  文本型，需要请求的 URL 地址，该方法默认会对 URL 进行 escape 处理，如不需要可参考 <strong>URL不ESCAPE</strong> 参数说明</li>
  <li>超时秒 <br>
  实数型，可选参数，请求超时时间，单位秒，默认 2 <br>
  *1.2-3 版以上默认超时改为 10 秒</li>
  <li>请求头 <br>
  表型，可选参数，发出的请求的头部信息，形式 {field1 = value1, field2 = value2, ...}，默认 {}</li>
  <li><strong>URL不ESCAPE</strong> *1.1.3-1 新增 <br>
  布尔型，可选参数，true 表示不对 URL 进行 escape 直接请求，默认 false <br>
  对 URL 进行自定义 escape 可参考 <a href="#lcurl-模块">lcurl 模块</a> 的 <a href="http://lua-curl.github.io/lcurl/modules/lcurl.html#easy%3aescape" target="_blank">easy:escape</a>、<a href="http://lua-curl.github.io/lcurl/modules/lcurl.html#easy%3aunescape" target="_blank">easy:unescape</a></li>
  <li>HTTP状态码 <br>
  整数型，返回当次请求的 http 状态码，请求超时返回 -1</li>
  <li>返回头JSON文本 <br>
  文本型 或 nil，请求完成返回的 JSON 形式头部信息，请求超时返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用 HTTP/1.1 协议的 HEAD 方法请求获取网络资源的头部信息 <br>
  HEAD 协议通常和 GET 请求会获得同样的返回头，但 HEAD 请求不会返回实际主体内容 <br>
  <strong>这个函数在 1.1.1-1 版以上方可使用</strong> <br>
  <strong>这个函数可能会让出，在这个函数返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">local</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> h </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="pln">head</span><span class="pun">(</span><span class="str">"https://www.xxtouch.com/测试文本.txt"</span><span class="pun">)</span></code></li><li class="L1"><code><span class="kwd">if</span><span class="pln"> c</span><span class="pun">==</span><span class="lit">200</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">如果返回的状态码是</span><span class="pln"> HTTP_OK</span></code></li><li class="L2"><code><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">h</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出请求到的头信息</span></code></li><li class="L3"><code><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="fyz0"><br></p><ul data-anchor-id="55cf">
<li><h3 id="发起-delete-请求-httpdelete">发起 DELETE 请求 (<strong>http.delete</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">HTTP</span><span class="pun">状态码,</span><span class="pln"> </span><span class="pun">返回头</span><span class="pln">JSON</span><span class="pun">文本,</span><span class="pln"> </span><span class="pun">返回主体</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="pln">URL </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">超时秒,</span><span class="pln"> </span><span class="pun">请求头,</span><span class="pln"> URL</span><span class="pun">不</span><span class="pln">ESCAPE </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>URL <br>
  文本型，需要请求的 URL 地址，该方法默认会对 URL 进行 escape 处理，如不需要可参考 <strong>URL不ESCAPE</strong> 参数说明</li>
  <li>超时秒 <br>
  实数型，可选参数，请求超时时间，单位秒，默认 2</li>
  <li>请求头 <br>
  表型，可选参数，发出的请求的头部信息，形式 {field1 = value1, field2 = value2, ...}，默认 {}</li>
  <li><strong>URL不ESCAPE</strong> *1.1.3-1 新增 <br>
  布尔型，可选参数，true 表示不对 URL 进行 escape 直接请求，默认 false <br>
  对 URL 进行自定义 escape 可参考 <a href="#lcurl-模块">lcurl 模块</a> 的 <a href="http://lua-curl.github.io/lcurl/modules/lcurl.html#easy%3aescape" target="_blank">easy:escape</a>、<a href="http://lua-curl.github.io/lcurl/modules/lcurl.html#easy%3aunescape" target="_blank">easy:unescape</a></li>
  <li>HTTP状态码 <br>
  整数型，返回当次请求的 http 状态码，请求超时返回 -1</li>
  <li>返回头JSON文本 <br>
  文本型 或 nil，请求完成返回的 JSON 形式头部信息，请求超时返回 nil</li>
  <li>返回主体 <br>
  字符串型 或 nil，请求完成返回的内容，请求超时返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用 HTTP/1.1 协议的 DELETE 方法请求获取网络资源，它通常用于删除一个网络资源，该协议一般会有权限验证 <br>
  <strong>这个函数在 1.1.1-1 版以上方可使用</strong> <br>
  <strong>这个函数可能会让出，在这个函数返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">local</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">,</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="str">"https://www.xxtouch.com/测试文本.txt"</span><span class="pun">)</span></code></li><li class="L1"><code><span class="kwd">if</span><span class="pln"> c</span><span class="pun">==</span><span class="lit">200</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">如果返回的状态码是</span><span class="pln"> HTTP_OK</span></code></li><li class="L2"><code><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">r</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出结果</span></code></li><li class="L3"><code><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="h2e4"><br></p><ul data-anchor-id="3trd">
<li><h3 id="发起-put-请求-httpput">发起 PUT 请求 (<strong>http.put</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">HTTP</span><span class="pun">状态码,</span><span class="pln"> </span><span class="pun">返回头</span><span class="pln">JSON</span><span class="pun">文本,</span><span class="pln"> </span><span class="pun">返回主体</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln">URL </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">超时秒,</span><span class="pln"> </span><span class="pun">请求头,</span><span class="pln"> </span><span class="pun">请求主体,</span><span class="pln"> URL</span><span class="pun">不</span><span class="pln">ESCAPE </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>URL <br>
  文本型，需要请求的 URL 地址，该方法默认会对 URL 进行 escape 处理，如不需要可参考 <strong>URL不ESCAPE</strong> 参数说明</li>
  <li>超时秒 <br>
  实数型，可选参数，请求超时时间，单位秒，默认 2 <br>
  *1.2-3 版以上默认超时改为 10 秒</li>
  <li>请求头 <br>
  表型，可选参数，发出的请求的头部信息，形式 {field1 = value1, field2 = value2, ...}，默认 {}</li>
  <li>请求主体 <br>
  字符串型，可选参数，使用 put 发送出去的内容，默认是空字符串</li>
  <li><strong>URL不ESCAPE</strong> *1.1.3-1 新增 <br>
  布尔型，可选参数，true 表示不对 URL 进行 escape 直接请求，默认 false <br>
  对 URL 进行自定义 escape 可参考 <a href="#lcurl-模块">lcurl 模块</a> 的 <a href="http://lua-curl.github.io/lcurl/modules/lcurl.html#easy%3aescape" target="_blank">easy:escape</a>、<a href="http://lua-curl.github.io/lcurl/modules/lcurl.html#easy%3aunescape" target="_blank">easy:unescape</a></li>
  <li>HTTP状态码 <br>
  整数型，返回当次请求的 http 状态码，请求超时返回 -1</li>
  <li>返回头JSON文本 <br>
  文本型 或 nil，请求完成返回的 JSON 形式头部信息，请求超时返回 nil</li>
  <li>返回主体 <br>
  字符串型 或 nil，请求完成返回的内容，请求超时返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用 HTTP/1.1 协议的 PUT 方法发送数据到网络中，它与 POST 用法一致 <br>
  <strong>这个函数在 1.1.1-1 版以上方可使用</strong> <br>
  <strong>这个函数可能会让出，在这个函数返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> code</span><span class="pun">,</span><span class="pln"> res_headers</span><span class="pun">,</span><span class="pln"> body </span><span class="pun">=</span><span class="pln"> http</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="str">"http://www.baidu.com"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="str">"User-Agent"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">模拟</span><span class="pln"> IE8 </span><span class="pun">的请求</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="str">"Cookie"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"大佬你会不会啊？"</span><span class="pun">;</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">顺带</span><span class="pln"> </span><span class="typ">Cookie</span><span class="pln"> </span><span class="pun">提交</span></code></li><li class="L3"><code class="language-lua"><span class="pun">},</span><span class="pln"> </span><span class="str">"需要发送过去的数据"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">if</span><span class="pln"> code</span><span class="pun">==</span><span class="lit">200</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">如果返回的状态码是</span><span class="pln"> HTTP_OK</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">body</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出百度首页的网页</span><span class="pln">html</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="wb0a"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="000p" id="ftp-模块ftp">! FTP 模块（ftp）</h2><ul data-anchor-id="wyaw">
<li><h3 id="ftp-文件下载-ftpdownload">FTP 文件下载 (<strong>ftp.download</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">下载成败,</span><span class="pln"> </span><span class="pun">下载信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> ftp</span><span class="pun">.</span><span class="pln">download</span><span class="pun">(</span><span class="pln">URL</span><span class="pun">,</span><span class="pln"> </span><span class="pun">本地文件路径</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">连接超时秒,</span><span class="pln"> </span><span class="pun">断点续传模式,</span><span class="pln"> </span><span class="pun">分块回调函数,</span><span class="pln"> </span><span class="pun">缓冲区尺寸</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>URL <br>
  文本型，远端文件地址，账号及密码被包含在这一参数中</li>
  <li>本地文件路径 <br>
  文本型，需要保存到的本地路径</li>
  <li>连接超时秒 <br>
  实数型，可选参数，连接超时时间，单位秒，默认 10</li>
  <li>断点续传模式 <br>
  布尔型，可选参数，是否需要支持断点续传，是为 true，否为 false，默认 false</li>
  <li>分块回调函数 <br>
  <ul><li>函数型 <br>
  <ul><li>可选参数，分块回调函数，每下载完一个分块都会回调一次这个函数，默认 空函数</li>
  <li>分块回调函数第一个参数为当前下载的信息，回调函数返回 true 则打断这次下载</li></ul></li></ul></li>
  <li>缓冲区尺寸 <br>
  整数型，可选参数，缓冲区大小字节数，默认自动最优配置</li>
  <li>下载成败 <br>
  布尔型，连接是否成功</li>
  <li>下载信息 <br>
  表型 或 文本型，如果连接成功则返回表型下载信息，否则返回连接失败原因文本描述</li></ul>
</blockquote></li>
<li><p>说明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">第二个返回值下载信息结构如下</span></code></li><li class="L1"><code class="language-lua"><span class="pun">{</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    resource_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">远端资源总字节数,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    start_pos </span><span class="pun">=</span><span class="pln"> </span><span class="pun">本次下载从资源的开始的位置,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    size_download </span><span class="pun">=</span><span class="pln"> </span><span class="pun">本次下载的字节数,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    speed_download </span><span class="pun">=</span><span class="pln"> </span><span class="pun">本次下载的速度（单位：字节/秒）,</span></code></li><li class="L6"><code class="language-lua"><span class="pun">}</span></code></li></ol></pre>

<blockquote class="white-blockquote">
  <p>这个函数适合大文件下载，在传输的过程中停止脚本可能会缓慢 <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong> <br>
  <strong>这个函数可能会让出，在这个函数返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>简单示例</p>

<blockquote class="white-blockquote">
  <p>账号密码写在 URL 中，具体 URL 格式如下（中括号内是可选参数）</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">ftp</span><span class="pun">:</span><span class="com">//[账号:密码@]地址[:端口]/路径</span></code></li></ol></pre>
  
  <p>账号或密码中包含 <code>@</code>、<code>:</code>、<code>/</code> 这三个字符可分别用 <code>%40</code>、<code>%3A</code>、<code>%2F</code>（若还有其它 URL 中不能包含的字符可使用 URLEncode 进行编码） <br>
  例如账号是 <code>havonz</code> 密码是 <code>11@@22</code> 参考下例</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> </span><span class="kwd">done</span><span class="pun">,</span><span class="pln"> info </span><span class="pun">=</span><span class="pln"> ftp</span><span class="pun">.</span><span class="pln">download</span><span class="pun">(</span><span class="str">"ftp://havonz:11%40%4022@192.168.31.13/1.zip"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"/var/mobile/1.zip"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">done</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"如果没有意外，已经下载好了"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"连接失败："</span><span class="pun">..</span><span class="pln">info</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>
</blockquote></li>
<li><p>复杂示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> </span><span class="kwd">done</span><span class="pun">,</span><span class="pln"> info </span><span class="pun">=</span><span class="pln"> ftp</span><span class="pun">.</span><span class="pln">download</span><span class="pun">(</span><span class="str">"ftp://havonz:123456@192.168.31.13/1.zip"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"/var/mobile/1.zip"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">binfo</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> percent </span><span class="pun">=</span><span class="pln"> math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(((</span><span class="pln">binfo</span><span class="pun">.</span><span class="pln">start_pos </span><span class="pun">+</span><span class="pln"> binfo</span><span class="pun">.</span><span class="pln">size_download</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> binfo</span><span class="pun">.</span><span class="pln">resource_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"下载进度 "</span><span class="pun">..</span><span class="pln">percent</span><span class="pun">..</span><span class="str">"%"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4096</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">done</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos </span><span class="pun">+</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">size_download </span><span class="pun">&lt;</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">resource_size</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            </span><span class="str">"下载中断\n本次下载 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">size_download</span><span class="pun">..</span><span class="str">" 字节"</span></code></li><li class="L9"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n从第 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos</span><span class="pun">..</span><span class="str">" 字节开始下载"</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n平均速度为 "</span><span class="pun">..</span><span class="pln">math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">speed_download</span><span class="pun">/</span><span class="lit">1024</span><span class="pun">)..</span><span class="str">" kB/s"</span></code></li><li class="L1"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n还有剩 "</span><span class="pun">..(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">resource_size </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos </span><span class="pun">+</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">size_download</span><span class="pun">))..</span><span class="str">" 字节"</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        </span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            </span><span class="str">"下载完成\n本次下载 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">size_download</span><span class="pun">..</span><span class="str">" 字节"</span></code></li><li class="L6"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n从第 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos</span><span class="pun">..</span><span class="str">" 字节开始下载"</span></code></li><li class="L7"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n平均速度为 "</span><span class="pun">..</span><span class="pln">math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">speed_download</span><span class="pun">/</span><span class="lit">1024</span><span class="pun">)..</span><span class="str">" kB/s"</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        </span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"连接失败："</span><span class="pun">..</span><span class="pln">info</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#显示提示文字-systoast"><code>sys.toast</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="3xa9"><br></p><ul data-anchor-id="k3kx">
<li><h3 id="ftp-文件上传-ftpupload">FTP 文件上传 (<strong>ftp.upload</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">上传成败,</span><span class="pln"> </span><span class="pun">上传信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> ftp</span><span class="pun">.</span><span class="pln">upload</span><span class="pun">(本地文件路径,</span><span class="pln"> URL </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">连接超时秒,</span><span class="pln"> </span><span class="pun">断点续传模式,</span><span class="pln"> </span><span class="pun">分块回调函数,</span><span class="pln"> </span><span class="pun">缓冲区尺寸</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>本地文件路径 <br>
  文本型，本地文件路径</li>
  <li>URL <br>
  文本型，需要上传到的远端地址，账号及密码被包含在这一参数中</li>
  <li>连接超时秒 <br>
  实数型，可选参数，连接超时时间，单位秒，默认 10</li>
  <li>断点续传模式 <br>
  布尔型，可选参数，是否需要支持断点续传，是为 true，否为 false，默认 false</li>
  <li>分块回调函数 <br>
  <ul><li>函数型 <br>
  <ul><li>可选参数，分块回调函数，每上传完一个分块都会回调一次这个函数，默认 空函数</li>
  <li>分块回调函数第一个参数为当前上传的信息，回调函数返回 true 则打断这次上传</li></ul></li></ul></li>
  <li>缓冲区尺寸 <br>
  整数型，可选参数，缓冲区大小字节数，默认自动最优配置</li>
  <li>上传成败 <br>
  布尔型，连接是否成功</li>
  <li>上传信息 <br>
  表型 或 文本型，如果连接成功则返回表型上传信息，否则返回连接失败原因文本描述</li></ul>
</blockquote></li>
<li><p>说明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">第二个返回值下载信息结构如下</span></code></li><li class="L1"><code class="language-lua"><span class="pun">{</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    resource_size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">本地文件总字节数,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    start_pos </span><span class="pun">=</span><span class="pln"> </span><span class="pun">本次上传从本地文件的开始的位置,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    size_upload </span><span class="pun">=</span><span class="pln"> </span><span class="pun">本次上传的字节数,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    speed_upload </span><span class="pun">=</span><span class="pln"> </span><span class="pun">本次上传的速度（单位：字节/秒）,</span></code></li><li class="L6"><code class="language-lua"><span class="pun">}</span></code></li></ol></pre>

<blockquote class="white-blockquote">
  <p>这个函数适合大文件上传，在传输的过程中停止脚本可能会缓慢 <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong> <br>
  <strong>这个函数可能会让出，在这个函数返回之前，其它的 <a href="#线程模块thread">线程</a> 可能会得到运行机会</strong></p>
</blockquote></li>
<li><p>简单示例</p>

<blockquote class="white-blockquote">
  <p>账号密码写在 URL 中，具体 URL 格式如下（中括号内是可选参数）</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">ftp</span><span class="pun">:</span><span class="com">//[账号:密码@]地址[:端口]/路径</span></code></li></ol></pre>
  
  <p>账号或密码中包含 <code>@</code>、<code>:</code>、<code>/</code> 这三个字符可分别用 <code>%40</code>、<code>%3A</code>、<code>%2F</code>（若还有其它 URL 中不能包含的字符可使用 URLEncode 进行编码） <br>
  例如账号是 <code>havonz</code> 密码是 <code>11@@22</code> 参考下例</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> </span><span class="kwd">done</span><span class="pun">,</span><span class="pln"> info </span><span class="pun">=</span><span class="pln"> ftp</span><span class="pun">.</span><span class="pln">upload</span><span class="pun">(</span><span class="str">"/var/mobile/1.zip"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"ftp://havonz:11%40%4022@192.168.31.13/1.zip"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">done</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"如果没有意外，已经上传好了"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"连接失败："</span><span class="pun">..</span><span class="pln">info</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>
</blockquote></li>
<li><p>复杂示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> </span><span class="kwd">done</span><span class="pun">,</span><span class="pln"> info </span><span class="pun">=</span><span class="pln"> ftp</span><span class="pun">.</span><span class="pln">upload</span><span class="pun">(</span><span class="str">"/var/mobile/1.zip"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"ftp://havonz:123456@192.168.31.13/1.zip"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">binfo</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> percent </span><span class="pun">=</span><span class="pln"> math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(((</span><span class="pln">binfo</span><span class="pun">.</span><span class="pln">start_pos </span><span class="pun">+</span><span class="pln"> binfo</span><span class="pun">.</span><span class="pln">size_upload</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> binfo</span><span class="pun">.</span><span class="pln">resource_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"上传进度 "</span><span class="pun">..</span><span class="pln">percent</span><span class="pun">..</span><span class="str">"%"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4096</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">done</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos </span><span class="pun">+</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">size_upload </span><span class="pun">&lt;</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">resource_size</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            </span><span class="str">"上传中断\n本次上传 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">size_upload</span><span class="pun">..</span><span class="str">" 字节"</span></code></li><li class="L9"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n从第 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos</span><span class="pun">..</span><span class="str">" 字节开始上传"</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n平均速度为 "</span><span class="pun">..</span><span class="pln">math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">speed_upload</span><span class="pun">/</span><span class="lit">1024</span><span class="pun">)..</span><span class="str">" kB/s"</span></code></li><li class="L1"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n还有剩 "</span><span class="pun">..(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">resource_size </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos </span><span class="pun">+</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">size_upload</span><span class="pun">))..</span><span class="str">" 字节"</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        </span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            </span><span class="str">"上传完成\n本次上传 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">size_upload</span><span class="pun">..</span><span class="str">" 字节"</span></code></li><li class="L6"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n从第 "</span><span class="pun">..</span><span class="pln">info</span><span class="pun">.</span><span class="pln">start_pos</span><span class="pun">..</span><span class="str">" 字节开始上传"</span></code></li><li class="L7"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"\n平均速度为 "</span><span class="pun">..</span><span class="pln">math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">speed_upload</span><span class="pun">/</span><span class="lit">1024</span><span class="pun">)..</span><span class="str">" kB/s"</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        </span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"连接失败："</span><span class="pun">..</span><span class="pln">info</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#显示提示文字-systoast"><code>sys.toast</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="75k2"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="klnv" id="json-模块json">JSON 模块（json）</h2><p data-anchor-id="9j4d">JSON (JavaScript Object Notation, JS 对象标记) 是一种轻量级的数据交换格式。详情见：<a href="http://www.json.org/" target="_blank">http://www.json.org/</a></p><p data-anchor-id="rzvc">该 JSON 模块 完全等同于 <a href="#luacjson-扩展库">LuaCJSON 扩展库</a>，非原创模块</p><ul data-anchor-id="as72">
<li><h3 id="将-lua-值转成-json-字符串-jsonencode">将 Lua 值转成 JSON 字符串 (<strong>json.encode</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">JSON</span><span class="pun">文本,</span><span class="pln"> </span><span class="pun">错误信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">encode</span><span class="pun">(值)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>值 <br>
  表型 或 文本型 或 数值型 或 布尔型 或 json.null，需要转换成 json 文本的 lua 值</li>
  <li><strong>JSON文本</strong> <br>
  文本型 或 nil，转换成功则返回一个 json 字符串，否则返回 nil</li>
  <li>错误信息 <br>
  文本型 或 nil， 转换失败 <strong>JSON文本</strong> 的值为 nil 的情况下，这个返回值则是具体的错误信息</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将 lua 中的数据值转成 json 形式可以方便与其它语言交互传输 <br>
  <strong>注意</strong> 不是任何 lua 值都可以转成 json。例如：用户数据或函数及包含用户数据或函数的表 <br>
  这个函数可以在 XUI 中使用  </p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> tb </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="str">"膜"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"图样图森破桑叹斯乃衣服"</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">[</span><span class="str">"蛤"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"比你们高到不知道哪里去了"</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    moha </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">9</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">},</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    nullvalue </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="kwd">null</span><span class="pun">,</span></code></li><li class="L7"><code class="language-lua"><span class="pun">}</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">local</span><span class="pln"> jsonstr </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">encode</span><span class="pun">(</span><span class="pln">tb</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">jsonstr</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> tmp </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="pln">jsonstr</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">tmp</span><span class="pun">.</span><span class="pln">moha</span><span class="pun">[</span><span class="lit">5</span><span class="pun">])</span></code></li><li class="L3"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">tostring</span><span class="pun">(</span><span class="pln">tmp</span><span class="pun">.</span><span class="pln">nullvalue</span><span class="pun">))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="dywn"><br></p><ul data-anchor-id="jhew">
<li><h3 id="将-json-字符串转换成-lua-值-jsondecode">将 JSON 字符串转换成 Lua 值 (<strong>json.decode</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">值,</span><span class="pln"> </span><span class="pun">错误信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="pln">JSON</span><span class="pun">文本)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>JSON文本 <br>
  文本型，需要转换成表的 json 文本</li>
  <li><strong>值</strong> <br>
  表型 或 文本型 或 数值型 或 布尔型 或 json.null 或 nil，转换成功则返回一个与 json 字符串结构相对应的 lua 值，否则返回 nil</li>
  <li>错误信息 <br>
  文本型 或 nil， 转换失败 <strong>值</strong> 为 nil 的情况下，这个返回值则是具体的错误信息</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将 json 文本转换成 lua 的中对应的数据值 <br>
  这个函数可以在 XUI 中使用  </p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="str">'true'</span><span class="pun">))</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="str">'17'</span><span class="pun">))</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="str">'"哈哈"'</span><span class="pun">))</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="str">'null'</span><span class="pun">))</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="str">''</span><span class="pun">))</span></code></li><li class="L5"><code class="language-lua"><span class="pln">table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="str">'{}'</span><span class="pun">))</span></code></li><li class="L6"><code class="language-lua"><span class="pln">table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="str">'{"娘子":"啊哈","你好":"世界"}'</span><span class="pun">))</span></code></li><li class="L7"><code class="language-lua"><span class="pln">table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="str">'[]'</span><span class="pun">))</span></code></li><li class="L8"><code class="language-lua"><span class="pln">table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="str">'[1, 0, 0, "4695100"]'</span><span class="pun">))</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">print</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#深打印一个表-tabledeepprint"><code>table.deep_print</code></a> 、<a href="#打印内容到缓冲区-print"><code>print.out</code></a>、<a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">使用</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode </span><span class="pun">转换</span><span class="pln"> </span><span class="typ">Unicode</span><span class="pln"> </span><span class="pun">编码为文字</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">([[</span><span class="str">"\u82cf\u6cfd"</span><span class="pun">]]))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="7hjw"><br></p><ul data-anchor-id="cpml">
<li><h3 id="json-中的-null-常量-jsonnull">JSON 中的 NULL 常量 (<strong>json.null</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">json</span><span class="pun">.</span><span class="kwd">null</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>这不是一个函数，是一个常量。以文本形式打印为 “<code>userdata: 0x0</code>” <br>
  它用于表示 json 中对应的 null 值 <br>
  <strong>为什么它有必要存在</strong> 因为 lua table 中的 nil 会被判定为不存在，转换成 json 之后，key 会消失，所以需要一个特定的值来表示这个 null <br>
  这个值可以在 XUI 中使用  </p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> tb </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="str">'{"nullvalue":null}'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> tb</span><span class="pun">[</span><span class="str">'nullvalue'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> json</span><span class="pun">.</span><span class="kwd">null</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">json</span><span class="pun">.</span><span class="kwd">null</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="5ayt"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="ylim" id="plist-文件读写模块plist">PLIST 文件读写模块（plist）</h2><ul data-anchor-id="7c9n">
<li><h3 id="读取-plist-文件-plistread">读取 plist 文件 (<strong>plist.read</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">plist </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"plist"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">需要先引入</span><span class="pln"> plist </span><span class="pun">模块</span></code></li><li class="L1"><code class="language-lua"><span class="pun">关联表</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> plist</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，需要读取的 plist 文件的绝对路径</li>
  <li>关联表 <br>
  表型 或 nil，读取成功则返回 plist 的树形结构对应的一个表，否则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>读取 plist 文件转换成表 <br>
  plist 文件中的非通用数据类型值不支持读取，会被忽略 <br>
  这个函数可以在 XUI 中使用  </p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> plist </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"plist"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> plfilename </span><span class="pun">=</span><span class="pln"> </span><span class="str">"/var/mobile/Library/Caches/com.apple.mobile.installation.plist"</span><span class="pln"> </span><span class="pun">--设置</span><span class="pln">plist</span><span class="pun">路径</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> tmp2 </span><span class="pun">=</span><span class="pln"> plist</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">plfilename</span><span class="pun">)</span><span class="pln">           </span><span class="pun">--读取</span><span class="pln">plist</span><span class="pun">文件内容并返回一个</span><span class="pln">TABLE</span></code></li><li class="L3"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">tmp2</span><span class="pun">.</span><span class="typ">Metadata</span><span class="pun">.</span><span class="typ">ProductBuildVersion</span><span class="pun">)</span><span class="pln">  </span><span class="pun">--显示</span><span class="typ">ProductBuildVersion</span><span class="pun">的键值</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ygo6"><br></p><ul data-anchor-id="0p1t">
<li><h3 id="写入-plist-文件-plistwrite">写入 plist 文件 (<strong>plist.write</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">plist </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"plist"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">需要先引入</span><span class="pln"> plist </span><span class="pun">模块</span></code></li><li class="L1"><code class="language-lua"><span class="pln">plist</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(文件路径,</span><span class="pln"> </span><span class="pun">关联表)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，需要写入的 plist 文件的绝对路径</li>
  <li>关联表 <br>
  表型，这个表的树形结构将会转换成 plist</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将一个表的树形结构写入到 plist 文件中 <br>
  <strong>注意：</strong>该函数无视符号链接，即覆盖写入不会覆盖符号链接所指向的文件，而是覆盖符号链接本身 <br>
  <strong>请注意不要传入有引用环的表，会导致脚本无法终止甚至卡死</strong> <br>
  <strong>使用该函数操作文件会导致文件所有者变 root，如果需要更改用户级应用的 plist 需要在修改后将权限修正方可生效</strong> <br>
  这个函数可以在 XUI 中使用  </p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> plist </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"plist"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> plfilename </span><span class="pun">=</span><span class="pln"> </span><span class="str">"/var/mobile/Library/Caches/com.apple.mobile.installation.plist"</span><span class="pln"> </span><span class="pun">--设置</span><span class="pln">plist</span><span class="pun">路径</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> tmp2 </span><span class="pun">=</span><span class="pln"> plist</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">plfilename</span><span class="pun">)</span><span class="pln">                </span><span class="pun">--读取</span><span class="pln">plist</span><span class="pun">文件内容并返回一个</span><span class="pln">TABLE</span></code></li><li class="L3"><code class="language-lua"><span class="pln">tmp2</span><span class="pun">[</span><span class="str">"Metadata"</span><span class="pun">][</span><span class="str">"ProductBuildVersion"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"havonz"</span><span class="pln"> </span><span class="pun">--将表中</span><span class="typ">ProductBuildVersion</span><span class="pun">键值改为</span><span class="pln">havonz</span></code></li><li class="L4"><code class="language-lua"><span class="pln">plist</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">plfilename</span><span class="pun">,</span><span class="pln"> tmp2</span><span class="pun">)</span><span class="pln">                      </span><span class="pun">--将修改后的表写入</span><span class="pln">PLIST</span><span class="pun">文件</span></code></li><li class="L5"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">"chown mobile:mobile "</span><span class="pun">..</span><span class="pln">plfilename</span><span class="pun">)</span><span class="pln">     </span><span class="pun">--</span><span class="pln"> </span><span class="pun">修正文件权限</span></code></li><li class="L6"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">"chmod 644 "</span><span class="pun">..</span><span class="pln">plfilename</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="db4t"><br></p><ul data-anchor-id="4r6u">
<li><h3 id="读取属性表数据-plistload">读取属性表数据 (<strong>plist.load</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">关联表</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> plist</span><span class="pun">.</span><span class="pln">load</span><span class="pun">(属性表数据)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>属性表数据 <br>
  字符串型，需要读取的属性表数据</li>
  <li>关联表 <br>
  表型 或 nil，加载成功则返回属性表数据的树形结构对应的一个表，否则返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>plist.dump 的反函数，将属性表数据转换成表 <br>
  <strong>这个函数在 1.2-3 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> jtmp </span><span class="pun">=</span><span class="pln"> plist</span><span class="pun">.</span><span class="pln">load</span><span class="pun">([[</span></code></li><li class="L2"><code class="language-lua"><span class="pun">{</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="lit">46</span><span class="pun">,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        </span><span class="lit">99</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="lit">7</span><span class="pun">,</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="pun">);</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    dict </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">55</span><span class="pun">;</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">65</span><span class="pun">;</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">9</span><span class="pun">;</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">};</span></code></li><li class="L3"><code class="language-lua"><span class="pun">}</span></code></li><li class="L4"><code class="language-lua"><span class="pun">]])</span></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">jtmp</span><span class="pun">.</span><span class="pln">arr</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="lit">46</span></code></li><li class="L6"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">jtmp</span><span class="pun">.</span><span class="pln">dict</span><span class="pun">.</span><span class="pln">c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="lit">9</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">示例</span><span class="pln"> </span><span class="lit">2</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">local</span><span class="pln"> xtmp </span><span class="pun">=</span><span class="pln"> plist</span><span class="pun">.</span><span class="pln">load</span><span class="pun">([[</span></code></li><li class="L0"><code class="language-lua"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span></code></li><li class="L1"><code class="language-lua"><span class="pun">&lt;!</span><span class="pln">DOCTYPE plist PUBLIC </span><span class="str">"-//Apple//DTD PLIST 1.0//EN"</span><span class="pln"> </span><span class="str">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span><span class="pun">&gt;</span></code></li><li class="L2"><code class="language-lua"><span class="pun">&lt;</span><span class="pln">plist version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pun">&gt;</span></code></li><li class="L3"><code class="language-lua"><span class="str">&lt;dict&gt;</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="str">&lt;key&gt;</span><span class="pln">arr</span><span class="pun">&lt;/</span><span class="pln">key</span><span class="pun">&gt;</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="str">&lt;array&gt;</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;string&gt;</span><span class="lit">46</span><span class="pun">&lt;/</span><span class="kwd">string</span><span class="pun">&gt;</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;string&gt;</span><span class="lit">99</span><span class="pun">&lt;/</span><span class="kwd">string</span><span class="pun">&gt;</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;string&gt;</span><span class="lit">7</span><span class="pun">&lt;/</span><span class="kwd">string</span><span class="pun">&gt;</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">array</span><span class="pun">&gt;</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="str">&lt;key&gt;</span><span class="pln">dict</span><span class="pun">&lt;/</span><span class="pln">key</span><span class="pun">&gt;</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="str">&lt;dict&gt;</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;key&gt;</span><span class="pln">a</span><span class="pun">&lt;/</span><span class="pln">key</span><span class="pun">&gt;</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;string&gt;</span><span class="lit">55</span><span class="pun">&lt;/</span><span class="kwd">string</span><span class="pun">&gt;</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;key&gt;</span><span class="pln">b</span><span class="pun">&lt;/</span><span class="pln">key</span><span class="pun">&gt;</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;string&gt;</span><span class="lit">65</span><span class="pun">&lt;/</span><span class="kwd">string</span><span class="pun">&gt;</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;key&gt;</span><span class="pln">c</span><span class="pun">&lt;/</span><span class="pln">key</span><span class="pun">&gt;</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        </span><span class="str">&lt;string&gt;</span><span class="lit">9</span><span class="pun">&lt;/</span><span class="kwd">string</span><span class="pun">&gt;</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">dict</span><span class="pun">&gt;</span></code></li><li class="L9"><code class="language-lua"><span class="pun">&lt;/</span><span class="pln">dict</span><span class="pun">&gt;</span></code></li><li class="L0"><code class="language-lua"><span class="pun">&lt;/</span><span class="pln">plist</span><span class="pun">&gt;</span></code></li><li class="L1"><code class="language-lua"><span class="pun">]])</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">xtmp</span><span class="pun">.</span><span class="pln">arr</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="lit">46</span></code></li><li class="L3"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">xtmp</span><span class="pun">.</span><span class="pln">dict</span><span class="pun">.</span><span class="pln">c</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="lit">9</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="yudj"><br></p><ul data-anchor-id="of30">
<li><h3 id="取-lua-表的属性表数据-plistdump">取 Lua 表的属性表数据 (<strong>plist.dump</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">属性表数据</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> plist</span><span class="pun">.</span><span class="kwd">dump</span><span class="pun">(关联表[,</span><span class="pln"> </span><span class="pun">属性表数据格式])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>关联表 <br>
  表型，需要转换成属性表数据的 Lua 表</li>
  <li>属性表数据格式 <br>
  文本型，可选参数，只能是 "binary" 或者 "XML"，以及 1.2-10 版新增 "openstep"，默认为 "XML"</li>
  <li>属性表数据 <br>
  字符串型 | nil，转换成功返回数据内容，转换失败返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>plist.load 的反函数，将表转换成属性表数据 <br>
  <strong>这个函数在 1.2-3 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> tab </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        </span><span class="lit">46</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="lit">99</span><span class="pun">,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="lit">7</span><span class="pun">,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">};</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    dict </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">55</span><span class="pun">;</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">65</span><span class="pun">;</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">9</span><span class="pun">;</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="pun">};</span></code></li><li class="L1"><code class="language-lua"><span class="pun">}</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="kwd">local</span><span class="pln"> xplist </span><span class="pun">=</span><span class="pln"> plist</span><span class="pun">.</span><span class="kwd">dump</span><span class="pun">(</span><span class="pln">tab</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">xplist</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> XML </span><span class="pun">格式的属性表数据</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="kwd">local</span><span class="pln"> bplist </span><span class="pun">=</span><span class="pln"> plist</span><span class="pun">.</span><span class="kwd">dump</span><span class="pun">(</span><span class="pln">tab</span><span class="pun">,</span><span class="pln"> </span><span class="str">"binary"</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">bplist</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">二进制格式的属性表数据，打印出来会乱码</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="o26r"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="57vv" id="小工具模块utils">小工具模块（utils）</h2><ul data-anchor-id="rvzo">
<li><h3 id="给通讯录添加一个或多个联系人-utilsaddcontacts">! 给通讯录添加一个或多个联系人 (<strong>utils.add_contacts</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">success </span><span class="pun">=</span><span class="pln"> utils</span><span class="pun">.</span><span class="pln">add_contacts</span><span class="pun">({</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        firstName </span><span class="pun">=</span><span class="pln"> </span><span class="str">"姓1"</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        lastName </span><span class="pun">=</span><span class="pln"> </span><span class="str">"名1"</span><span class="pun">,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        phoneNumbers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            </span><span class="str">"联系人1号码1"</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">            </span><span class="str">"联系人1号码2"</span><span class="pun">,</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        </span><span class="pun">},</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        emails </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-lua"><span class="pln">            </span><span class="str">"联系人1邮箱1"</span><span class="pun">,</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            </span><span class="str">"联系人1邮箱2"</span><span class="pun">,</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="pun">},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        firstName </span><span class="pun">=</span><span class="pln"> </span><span class="str">"姓2"</span><span class="pun">,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        lastName </span><span class="pun">=</span><span class="pln"> </span><span class="str">"名2"</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        phoneNumbers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-lua"><span class="pln">            </span><span class="str">"联系人2号码1"</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            </span><span class="str">"联系人2号码2"</span><span class="pun">,</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="pun">},</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        emails </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">            </span><span class="str">"联系人2邮箱1"</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">            </span><span class="str">"联系人2邮箱2"</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="pun">},</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">},</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="pun">...</span></code></li><li class="L6"><code class="language-lua"><span class="pun">})</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>firstName <br>
  文本型，联系人姓</li>
  <li>lastName <br>
  文本型，联系人名</li>
  <li>phoneNumbers <br>
  表型，这个人的号码列表</li>
  <li>emails <br>
  表型，这个人的邮箱号列表</li>
  <li>success <br>
  布尔型，添加成功返回 true，失败返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将一个或多个联系人记录添加到系统通讯录 <br>
  <strong>注意：大批量导入很慢，特大批量导入会导致注销</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">utils</span><span class="pun">.</span><span class="pln">add_contacts</span><span class="pun">({</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        firstName </span><span class="pun">=</span><span class="pln"> </span><span class="str">"小"</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        lastName </span><span class="pun">=</span><span class="pln"> </span><span class="str">"明"</span><span class="pun">,</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        phoneNumbers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            </span><span class="str">"13800001111"</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">            </span><span class="str">"13800002222"</span><span class="pun">,</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        </span><span class="pun">},</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        emails </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-lua"><span class="pln">            </span><span class="str">"xiaoming@qq.com"</span><span class="pun">,</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            </span><span class="str">"xiaoming@163.com"</span><span class="pun">,</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="pun">},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        firstName </span><span class="pun">=</span><span class="pln"> </span><span class="str">"小"</span><span class="pun">,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        lastName </span><span class="pun">=</span><span class="pln"> </span><span class="str">"红"</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        phoneNumbers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-lua"><span class="pln">            </span><span class="str">"13800003333"</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            </span><span class="str">"13800004444"</span><span class="pun">,</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="pun">},</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        emails </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">            </span><span class="str">"xiaohong@qq.com"</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">            </span><span class="str">"xiaohong@163.com"</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="pun">},</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">},</span></code></li><li class="L5"><code class="language-lua"><span class="pun">})</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="xguy"><br></p><ul data-anchor-id="es6u">
<li><h3 id="删除通讯录所有联系人-utilsremoveallcontacts">! 删除通讯录所有联系人 (<strong>utils.remove_all_contacts</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> utils</span><span class="pun">.</span><span class="pln">remove_all_contacts</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>操作成败 <br>
  布尔型，删除成功返回 true，失败返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>删除通讯录所有联系人 <br>
  联系人很多的时候会需要消耗一些时间</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">utils</span><span class="pun">.</span><span class="pln">remove_all_contacts</span><span class="pun">()</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="56i9"><br></p><ul data-anchor-id="dfmc">
<li><h3 id="打开扫码器-utilsopencodescanner">打开扫码器 (<strong>utils.open_code_scanner</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">打开成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> utils</span><span class="pun">.</span><span class="pln">open_code_scanner</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>打开成败 <br>
  布尔型，相机打开成功会返回 true，否则返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>iOS 9 以上的 iPad 无法开启扫码器</strong> <br>
  打开条码/二维码扫描器，会启动相机，与所有需要用到摄像头的应用不能同时使用 <br>
  这个函数调用不会返回扫描的结果 <br>
  扫描器的结果将通过 <a href="#系统回调消息">系统消息</a> <a href="#扫码结果回调消息">`xxtouch.scan_code_callback</a> 传回</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#扫码结果回调消息"><code>扫码消息回调示例</code></a></p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">简易二维码扫描器演示</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">proc_queue_clear</span><span class="pun">(</span><span class="str">"xxtouch.scan_code_callback"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">清空消息队列</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> utils</span><span class="pun">.</span><span class="pln">open_code_scanner</span><span class="pun">()</span><span class="pln">      </span><span class="pun">--</span><span class="pln"> </span><span class="pun">打开扫码相机</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"可以于 “设置-通用-访问限制” 中取消 “相机” 的访问限制"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"无法访问系统相机"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">return</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="kwd">local</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h </span><span class="pun">=</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span></code></li><li class="L0"><code class="language-lua"><span class="pln">webview</span><span class="pun">.</span><span class="pln">show</span><span class="pun">({</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">屏幕上方创建一个半透明的条</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    html </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[&lt;</span><span class="pln">html</span><span class="pun">&gt;</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="str">&lt;h2&gt;&lt;center&gt;</span><span class="pun">二维码置入镜头范围&lt;</span><span class="str">/center&gt;&lt;/</span><span class="pln">h2</span><span class="pun">&gt;</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">html</span><span class="pun">&gt;]],</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    width </span><span class="pun">=</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> height </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    alpha </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.2</span><span class="pun">,</span><span class="pln"> opaque </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    animation_duration </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.2</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pun">})</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">循环等待消息</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> ret </span><span class="pun">=</span><span class="pln"> proc_queue_pop</span><span class="pun">(</span><span class="str">"xxtouch.scan_code_callback"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ret </span><span class="pun">~=</span><span class="pln"> </span><span class="str">""</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="kwd">local</span><span class="pln"> rt </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="pln">ret</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">rt</span><span class="pun">.</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> </span><span class="str">"org.iso.QRCode"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            utils</span><span class="pun">.</span><span class="pln">close_code_scanner</span><span class="pun">()</span></code></li><li class="L6"><code class="language-lua"><span class="pln">            webview</span><span class="pun">.</span><span class="pln">show</span><span class="pun">({</span></code></li><li class="L7"><code class="language-lua"><span class="pln">                x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">                width </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> height </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L9"><code class="language-lua"><span class="pln">                animation_duration </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.2</span><span class="pun">,</span><span class="pln"> opaque </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            </span><span class="pun">})</span></code></li><li class="L1"><code class="language-lua"><span class="pln">            </span><span class="kwd">local</span><span class="pln"> choice </span><span class="pun">=</span><span class="pln"> sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">rt</span><span class="pun">.</span><span class="kwd">string</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"扫描到二维码内容"</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">                                    </span><span class="str">"取消"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"拷贝"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"转存相册"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">choice </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">                pasteboard</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">rt</span><span class="pun">.</span><span class="kwd">string</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            elseif </span><span class="pun">(</span><span class="pln">choice </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">                utils</span><span class="pun">.</span><span class="pln">qr_encode</span><span class="pun">(</span><span class="pln">rt</span><span class="pun">.</span><span class="kwd">string</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-lua"><span class="pln">                    size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">320</span><span class="pun">,</span></code></li><li class="L8"><code class="language-lua"><span class="pln">                    fill_color </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xff409bff</span><span class="pun">,</span></code></li><li class="L9"><code class="language-lua"><span class="pln">                    shadow_color </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xff308bef</span><span class="pun">,</span></code></li><li class="L0"><code class="language-lua"><span class="pln">                </span><span class="pun">}):</span><span class="pln">save_to_album</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="pln">                sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"已经保存到相册"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L3"><code class="language-lua"><span class="pln">            </span><span class="kwd">break</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="kwd">else</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span></code></li><li class="L6"><code class="language-lua"><span class="pln">                </span><span class="str">"扫描到条码："</span><span class="pun">..</span><span class="pln">rt</span><span class="pun">.</span><span class="pln">type</span><span class="pun">..</span><span class="str">"\n"</span><span class="pun">..</span></code></li><li class="L7"><code class="language-lua"><span class="pln">                </span><span class="str">"条码内容为："</span><span class="pun">..</span><span class="pln">rt</span><span class="pun">.</span><span class="kwd">string</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            </span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a>、<a href="#从进程队列词典中弹出所有值-procqueueclear"><code>proc_queue_clear</code></a>、<a href="#从进程队列词典中弹出一个值-procqueuepop"><code>proc_queue_pop</code></a>、<a href="#将-json-字符串转换成-lua-值-jsondecode"><code>json.decode</code></a>、<a href="#保存图片对象到相册-savetoalbum"><code>:save_to_album</code></a>、 <br>
<a href="#写内容进剪贴板-pasteboardwrite"><code>pasteboard.write</code></a>、<a href="#展现一个-webview-webviewshow"><code>webview.show</code></a>、<a href="#获取屏幕尺寸-screensize"><code>screen.size</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="pkds"><br></p><ul data-anchor-id="7nzu">
<li><h3 id="关闭扫码器-utilsclosecodescanner">关闭扫码器 (<strong>utils.close_code_scanner</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">utils</span><span class="pun">.</span><span class="pln">close_code_scanner</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>关闭条码/二维码扫描器</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#打开扫码器-utilsopencodescanner"><code>utils.open_code_scanner 示例</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="opfj"><br></p><ul data-anchor-id="ecv6">
<li><h3 id="将文本编码成二维码图片-utilsqrencode">将文本编码成二维码图片 (<strong>utils.qr_encode</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">图像</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> utils</span><span class="pun">.</span><span class="pln">qr_encode</span><span class="pun">(文本内容[,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    size </span><span class="pun">=</span><span class="pln"> </span><span class="pun">尺寸,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    fill_color </span><span class="pun">=</span><span class="pln"> </span><span class="pun">填充颜色,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    shadow_color </span><span class="pun">=</span><span class="pln"> </span><span class="pun">阴影颜色,</span></code></li><li class="L4"><code class="language-lua"><span class="pun">}])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文本内容 <br>
  文本型，需要编码成二维码的文本内容</li>
  <li>size <br>
  整数型，需要编码成二维码的边长，默认 320</li>
  <li>fill_color <br>
  整数型，填充二维码图像的颜色，默认 0xff000000（黑色不透明）</li>
  <li>shadow_color <br>
  整数型，二维码阴影，默认 0x00000000（完全透明）</li>
  <li>图像 <br>
  图片对象，返回生成的二维码图片对象</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将文本编码成一个指定尺寸背景色透明的二维码图片</p>
</blockquote></li>
<li><p>示例</p>

<ul><li><p><a href="#打开扫码器-utilsopencodescanner"><code>utils.open_code_scanner 示例</code></a></p></li>
<li><p>生成一个尺寸为 320 蓝色的二维码存到相册</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> img </span><span class="pun">=</span><span class="pln"> utils</span><span class="pun">.</span><span class="pln">qr_encode</span><span class="pun">(</span><span class="str">"XXTouch 真棒"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">320</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    fill_color </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xff409bff</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    shadow_color </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xff308bef</span><span class="pun">,</span></code></li><li class="L4"><code class="language-lua"><span class="pun">})</span></code></li><li class="L5"><code class="language-lua"><span class="pln">img</span><span class="pun">:</span><span class="pln">save_to_album</span><span class="pun">()</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#保存图片对象到相册-savetoalbum"><code>:save_to_album</code></a></p></li>
<li><p>微信等 App 无法识别透明色、深色背景的二维码，可以使用 <a href="#颜色替换-replacecolor"><code>:replace_color</code></a> 将背景色替换成白色以解决：</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> img </span><span class="pun">=</span><span class="pln"> utils</span><span class="pun">.</span><span class="pln">qr_encode</span><span class="pun">(</span><span class="str">"XXTouch 真棒"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">320</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    fill_color </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xff409bff</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pun">})</span></code></li><li class="L4"><code class="language-lua"><span class="pln">img</span><span class="pun">:</span><span class="pln">replace_color</span><span class="pun">(</span><span class="lit">0x00000000</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffffff</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">透明色替换成白色</span></code></li><li class="L5"><code class="language-lua"><span class="pln">img</span><span class="pun">:</span><span class="pln">save_to_album</span><span class="pun">()</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#颜色替换-replacecolor"><code>:replace_color</code></a>、<a href="#保存图片对象到相册-savetoalbum"><code>:save_to_album</code></a></p></li></ul></li></ul></li>
</ul><hr><p data-anchor-id="bfp9"><br></p><ul data-anchor-id="4gev">
<li><h3 id="获得当前脚本的启动参数-utilslaunchargs">获得当前脚本的启动参数 (<strong>utils.launch_args</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">启动参数关联表</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> utils</span><span class="pun">.</span><span class="pln">launch_args</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>启动参数关联表 <br>
  表型，返回一个用于描述当次启动的参数表，结构可以自行用 <a href="#深打印一个表-tabledeepprint">table.deep_print</a> 打印查看</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>在 1.1.0-1 版或以上版本 App 内启动有额外的参数</strong> <br>
  获得当前脚本的启动参数，推荐配合 <a href="http://cydia.saurik.com/package/libactivator/" target="_blank">Activator</a> 激活脚本</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">(</span><span class="pln">utils</span><span class="pun">.</span><span class="pln">launch_args</span><span class="pun">()))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#深打印一个表-tabledeepprint"><code>table.deep_print</code></a></p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">获取当前脚本文件路径（注：不是任何情况下脚本都有一个文件路径）</span></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"当前的脚本路径是："</span><span class="pun">..</span><span class="pln">tostring</span><span class="pun">(</span><span class="pln">utils</span><span class="pun">.</span><span class="pln">launch_args</span><span class="pun">().</span><span class="pln">path</span><span class="pun">))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-tostring" target="_blank">tostring</a></p></li></ul></li>
</ul><hr><p data-anchor-id="o99k"><br></p><ul data-anchor-id="u9pr">
<li><h3 id="判断当前脚本是否从-app-内启动-utilsislaunchviaapp">判断当前脚本是否从 App 内启动 (<strong>utils.is_launch_via_app</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">是否从</span><span class="typ">App</span><span class="pun">内启动</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> utils</span><span class="pun">.</span><span class="pln">is_launch_via_app</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>是否从App内启动 <br>
  布尔型，如果当前脚本是从 App 内的启动按钮启动，则返回 true，否则返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>判断当前脚本是否从 App 内的启动按钮启动 <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例 <br>
<a href="#在不弹出对话框的情况下获得对话框配置-load"><code>dialog:load</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="jruo"><br></p><ul data-anchor-id="3xz5">
<li><h3 id="导入一个视频文件到相册-utilsvideotoalbum">! 导入一个视频文件到相册 (<strong>utils.video_to_album</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">utils</span><span class="pun">.</span><span class="pln">video_to_album</span><span class="pun">(视频文件名)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>视频文件名 <br>
  文本型，视频文件的文件名，支持的格式有 mp4、m4v、mov</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.1.2-1 版以上方可使用</strong> <br>
  将 mp4、m4v、mov 视频保存到相册，该函数仅支持绝对路径</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">utils</span><span class="pun">.</span><span class="pln">video_to_album</span><span class="pun">(</span><span class="str">"/var/mobile/1.mp4"</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="kalu"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="75m9" id="文件操作模块file">文件操作模块（file）</h2><ul data-anchor-id="exno">
<li><h3 id="判断一个文件或目录是否存在-fileexists">判断一个文件或目录是否存在 (<strong>file.exists</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">存在信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">exists</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件或目录绝对路径</li>
  <li>存在信息 <br>
  <ul><li>false 或 "file" 或 "directory" <br>
  <ul><li>false，路径不存在</li>
  <li>"file"， 路径是一个文件</li>
  <li>"directory"， 路径是一个目录</li></ul></li></ul></li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>用于判断一个路径是文件还是目录还是不存在 <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">if</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">exists</span><span class="pun">(</span><span class="str">"/var/mobile/1.zip"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 存在"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 不存在"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="kwd">if</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">exists</span><span class="pun">(</span><span class="str">"/var/mobile/1.zip"</span><span class="pun">)==</span><span class="str">"file"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 存在并且是个文件"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 不是文件"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="kwd">if</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">exists</span><span class="pun">(</span><span class="str">"/var/mobile/123/"</span><span class="pun">)==</span><span class="str">"directory"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/123/` 存在并且是个目录"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/123/` 不是目录"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="02ac"><br></p><ul data-anchor-id="uela">
<li><h3 id="获取目录所有文件名列表-filelist">获取目录所有文件名列表 (<strong>file.list</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">文件列表</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">list</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，目录绝对路径</li>
  <li>文件列表 <br>
  顺序表型 或 nil，如果目录不存在或路径是一个文件则返回 nil，否则返回目录文件列表</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取目录所有文件名列表 <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">list</span><span class="pun">(</span><span class="str">"/var/mobile/"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> list </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"目录 `/var/mobile/` 中有"</span><span class="pun">..#</span><span class="pln">list</span><span class="pun">..</span><span class="str">"个文件或目录"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln"> name </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">list</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">print</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">())</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/` 不是目录"</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ci0y"><br></p><ul data-anchor-id="auuk">
<li><h3 id="获得一个文件的尺寸-filesize">获得一个文件的尺寸 (<strong>file.size</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">尺寸</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">size</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>尺寸 <br>
  整数型 或 nil，如果文件不存在或文件名是一个目录则返回 nil，否则返回文件尺寸（单位: 字节）</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获得一个文件的尺寸 <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> fsize </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">size</span><span class="pun">(</span><span class="str">"/var/mobile/1.zip"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> fsize </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 的尺寸为："</span><span class="pun">..</span><span class="pln">fsize</span><span class="pun">..</span><span class="str">"字节"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 不是文件"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="lly7"><br></p><ul data-anchor-id="sffw">
<li><h3 id="读取一个文件中的所有数据-filereads">读取一个文件中的所有数据 (<strong>file.reads</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">reads</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>内容 <br>
  字符串型 或 nil，文件不存在返回 nil，否则返回整个文件的数据</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>读取一个文件中的所有数据 <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> data </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">reads</span><span class="pun">(</span><span class="str">"/var/mobile/1.zip"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> data </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 的尺寸为："</span><span class="pun">..#</span><span class="pln">data</span><span class="pun">..</span><span class="str">"字节"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 不是文件"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="hzi4"><br></p><ul data-anchor-id="hfcp">
<li><h3 id="将数据覆盖写入到文件-filewrites">将数据覆盖写入到文件 (<strong>file.writes</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">写入成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">writes</span><span class="pun">(文件路径,</span><span class="pln"> </span><span class="pun">待写入内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>待写入内容 <br>
  字符串型，需要写入的数据</li>
  <li>写入成败 <br>
  布尔型，操作成功返回 true，操作失败返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将数据覆盖写入到文件，文件不存在会创建文件，目录不存在会返回 false <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">writes</span><span class="pun">(</span><span class="str">"/var/mobile/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"苟"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"写入成功"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"写入失败"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="yv57"><br></p><ul data-anchor-id="lzsg">
<li><h3 id="将数据追加到文件末尾-fileappends">将数据追加到文件末尾 (<strong>file.appends</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">appends</span><span class="pun">(文件路径,</span><span class="pln"> </span><span class="pun">待追加内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>待追加内容 <br>
  字符串型，需要追加写入的数据</li>
  <li>操作成败 <br>
  布尔型，操作成功返回 true，操作失败返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将数据追加到文件末尾，文件不存在会创建文件，目录不存在会返回 false <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">appends</span><span class="pun">(</span><span class="str">"/var/mobile/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"利国家生死矣"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"写入成功"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"写入失败"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="vcgm"><br></p><ul data-anchor-id="lstf">
<li><h3 id="统计一个文本文件的总行数-filelinecount">统计一个文本文件的总行数 (<strong>file.line_count</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">行数</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">line_count</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>行数 <br>
  整数型 或 nil，返回文件总行数，空文件将返回 0，文件不存在返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>统计一个文本文件的总行数，空文件将返回 0 <br>
  <strong>这个函数在 1.1.1-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> linecount </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">line_count</span><span class="pun">(</span><span class="str">"/var/mobile/1.txt"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> linecount </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.txt` 一共有 "</span><span class="pun">..</span><span class="pln">linecount</span><span class="pun">..</span><span class="str">" 行"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.txt` 不是文件"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="t93b"><br></p><ul data-anchor-id="w3bn">
<li><h3 id="获取一个文本文件指定行的数据-filegetline">获取一个文本文件指定行的数据 (<strong>file.get_line</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">行内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">get_line</span><span class="pun">(文件路径,</span><span class="pln"> </span><span class="pun">行号)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>行号 <br>
  整数型，指定行号，0 为最后一行 +1，负数则为倒数行号</li>
  <li>行内容 <br>
  字符串型 或 nil，行数不够返回空字符串，文件不存在返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取一个文本文件指定行的数据 <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong> <br>
  <strong>这个函数在 1.2-1 版以上将自动剔除 UTF8-BOM</strong>（<a href="https://www.baidu.com/s?wd=UTF8-BOM" target="_blank">百度搜索 UTF8-BOM 查看更多资料</a>）</p>
</blockquote></li>
<li><p>常见问题</p>

<blockquote class="white-blockquote">
  <p>如果读取到文本的第一行包含不可见字符，请检查是否处理了 UTF8-BOM，可使用 <a href="#去除掉文本前的-utf8-bom-stringstriputf8bom"><code>string.strip_utf8_bom</code></a> 剔除</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> data </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">get_line</span><span class="pun">(</span><span class="str">"/var/mobile/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> data </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    data </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">strip_utf8_bom</span><span class="pun">(</span><span class="pln">data</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">处理掉可能存在的</span><span class="pln"> UTF8</span><span class="pun">-</span><span class="pln">BOM</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.txt` 第一行的内容是 "</span><span class="pun">..</span><span class="pln">data</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.txt` 不是文件"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#去除掉文本前的-utf8-bom-stringstriputf8bom"><code>string.strip_utf8_bom</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="rvwx"><br></p><ul data-anchor-id="6bs5">
<li><h3 id="设置文本文件指定行的内容-filesetline">设置文本文件指定行的内容 (<strong>file.set_line</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">写入成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">set_line</span><span class="pun">(文件路径,</span><span class="pln"> </span><span class="pun">行号,</span><span class="pln"> </span><span class="pun">待写入内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>行号 <br>
  整数型，指定行号，0 为最后一行 +1，负数则为倒数行号</li>
  <li>待写入内容 <br>
  字符串型，需要设置为指定行的数据</li>
  <li>写入成败 <br>
  布尔型，操作成功返回 true，操作失败返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>设置文本文件指定行的内容，行数不够用空行补足，文件不存在会创建文件，目录不存在会返回 false <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong> <br>
  <strong>这个函数在 1.2-1 版以上将自动剔除 UTF8-BOM</strong>（<a href="https://www.baidu.com/s?wd=UTF8-BOM" target="_blank">百度搜索 UTF8-BOM 查看更多资料</a>）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">set_line</span><span class="pun">(</span><span class="str">"/var/mobile/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="str">"哈哈哈"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"操作成功"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"操作失败"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="nm6c"><br></p><ul data-anchor-id="44cp">
<li><h3 id="在文本文件指定行前插入内容-fileinsertline">在文本文件指定行前插入内容 (<strong>file.insert_line</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">写入成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">insert_line</span><span class="pun">(文件路径,</span><span class="pln"> </span><span class="pun">行号,</span><span class="pln"> </span><span class="pun">待插入的内容)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>行号 <br>
  整数型，指定行号，0 为最后一行 +1，负数则为倒数行号</li>
  <li>待插入的内容 <br>
  字符串型，需要插入到指定行前的数据</li>
  <li>写入成败 <br>
  布尔型，操作成功返回 true，操作失败返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>在文本文件指定行前插入内容，行数不够用空行补足，文件不存在会创建文件，目录不存在会返回 false <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong> <br>
  <strong>这个函数在 1.2-1 版以上将自动剔除 UTF8-BOM</strong>（<a href="https://www.baidu.com/s?wd=UTF8-BOM" target="_blank">百度搜索 UTF8-BOM 查看更多资料</a>）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">insert_line</span><span class="pun">(</span><span class="str">"/var/mobile/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="str">"岂因祸福避趋之"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"操作成功"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"操作失败"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="1hza"><br></p><ul data-anchor-id="prkn">
<li><h3 id="移除文件中指定行-fileremoveline">移除文件中指定行 (<strong>file.remove_line</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败,</span><span class="pln"> </span><span class="pun">被删除行的内容</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">remove_line</span><span class="pun">(文件路径,</span><span class="pln"> </span><span class="pun">行号)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>行号 <br>
  整数型，指定行号，0 为最后一行 +1，负数则为倒数行号</li>
  <li>操作成败 <br>
  布尔型，操作成功返回 true，操作失败返回 false</li>
  <li>被删除行的内容 <br>
  字符串型，当操作成功的时候，返回被移除的行</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>移除文件中指定行，如果被移除的行之后还有行，那么后面行会往前移 <br>
  <strong>这个函数在 1.1.1-1 版以上方可使用</strong> <br>
  <strong>这个函数在 1.2-1 版以上将自动剔除 UTF8-BOM</strong>（<a href="https://www.baidu.com/s?wd=UTF8-BOM" target="_blank">百度搜索 UTF8-BOM 查看更多资料</a>）</p>
</blockquote></li>
<li><p>常见问题</p>

<blockquote class="white-blockquote">
  <p>如果读取到文本的第一行包含不可见字符，请检查是否处理了 UTF8-BOM，可使用 <a href="#去除掉文本前的-utf8-bom-stringstriputf8bom"><code>string.strip_utf8_bom</code></a> 剔除</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success</span><span class="pun">,</span><span class="pln"> line </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">remove_line</span><span class="pun">(</span><span class="str">"/var/mobile/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"操作成功，被删除的行的内容是："</span><span class="pun">..</span><span class="pln">line</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"操作失败"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="7fa9"><br></p><ul data-anchor-id="ysxe">
<li><h3 id="获取一个文本文件的所有行-filegetlines">获取一个文本文件的所有行 (<strong>file.get_lines</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">行数组</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">get_lines</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>行数组 <br>
  顺序表型 或 nil，返回一个顺序表，文件不存在返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>获取一个文本文件的所有行，空文件返回 0 行 <br>
  <strong>这个函数在 1.1.1-1 版以上方可使用</strong> <br>
  <strong>这个函数在 1.2-1 版以上将自动剔除 UTF8-BOM</strong>（<a href="https://www.baidu.com/s?wd=UTF8-BOM" target="_blank">百度搜索 UTF8-BOM 查看更多资料</a>）</p>
</blockquote></li>
<li><p>常见问题</p>

<blockquote class="white-blockquote">
  <p>如果读取到文本的第一行包含不可见字符，请检查是否处理了 UTF8-BOM，可使用 <a href="#去除掉文本前的-utf8-bom-stringstriputf8bom"><code>string.strip_utf8_bom</code></a> 剔除</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> lines </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">get_lines</span><span class="pun">(</span><span class="str">"/var/mobile/1.txt"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> lines </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="com">#lines &gt; 0 then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        lines</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">strip_utf8_bom</span><span class="pun">(</span><span class="pln">lines</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">处理掉可能存在的</span><span class="pln"> UTF8</span><span class="pun">-</span><span class="pln">BOM</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"文件第一行的内容是 "</span><span class="pun">..</span><span class="pln">lines</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"文件是空的"</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"操作失败"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#去除掉文本前的-utf8-bom-stringstriputf8bom"><code>string.strip_utf8_bom</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="d2xe"><br></p><ul data-anchor-id="k8mc">
<li><h3 id="将一个顺序表转换逐行覆盖写入到文件中-filesetlines">将一个顺序表转换逐行覆盖写入到文件中 (<strong>file.set_lines</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">写入成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">set_lines</span><span class="pun">(文件路径,</span><span class="pln"> </span><span class="pun">行数组)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>行数组 <br>
  顺序表型，需要转换写入到文件的表</li>
  <li>写入成败 <br>
  布尔型，操作成功返回 true，操作失败返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将一个顺序表转换逐行覆盖写入到文件中，文件不存在会创建文件，目录不存在会返回 false <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong> <br>
  <strong>这个函数在 1.2-1 版以上将自动剔除 UTF8-BOM</strong>（<a href="https://www.baidu.com/s?wd=UTF8-BOM" target="_blank">百度搜索 UTF8-BOM 查看更多资料</a>）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">set_lines</span><span class="pun">(</span><span class="str">"/var/mobile/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="str">"苟利国家生死以"</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="str">"岂因祸福避趋之"</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pun">})</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"+1s"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"操作失败"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="gg51"><br></p><ul data-anchor-id="y7pz">
<li><h3 id="将一个顺序表转换逐行插入到文件指定行前-fileinsertlines">将一个顺序表转换逐行插入到文件指定行前 (<strong>file.insert_lines</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">写入成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">insert_lines</span><span class="pun">(文件路径,</span><span class="pln"> </span><span class="pun">行号,</span><span class="pln"> </span><span class="pun">行数组)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>行号 <br>
  整数型，指定行号，0 为最后一行 +1，负数则为倒数行号</li>
  <li>行数组 <br>
  顺序表型，需要转换插入到文件的表</li>
  <li>写入成败 <br>
  布尔型，操作成功返回 true，操作失败返回 false</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>将一个顺序表转换逐行插入到文件指定行前，文件不存在会创建文件，目录不存在会返回 false <br>
  <strong>这个函数在 1.1.0-1 版以上方可使用</strong> <br>
  <strong>这个函数在 1.2-1 版以上将自动剔除 UTF8-BOM</strong>（<a href="https://www.baidu.com/s?wd=UTF8-BOM" target="_blank">百度搜索 UTF8-BOM 查看更多资料</a>）</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">insert_lines</span><span class="pun">(</span><span class="str">"/var/mobile/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">将下面两行字追加到文件末尾</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="str">"I will do whatever it takes to serve my country even at the cost of my own life,"</span><span class="pun">,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="str">"regardless of fortune or misfortune to myself."</span><span class="pun">,</span></code></li><li class="L3"><code class="language-lua"><span class="pun">})</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"+1s"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"操作失败"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="vg1o"><br></p><ul data-anchor-id="2bof">
<li><h3 id="计算一个文件的-md5-filemd5">计算一个文件的 MD5 (<strong>file.md5</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">校验值</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">md5</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>校验值 <br>
  字符串型 或 nil，文件不存在返回 nil，否则返回其 MD5 校验值</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>计算一个文件的 MD5 <br>
  <strong>这个函数在 1.2-3 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> hash </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">md5</span><span class="pun">(</span><span class="str">"/var/mobile/1.zip"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> hash </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 的 MD5 校验值："</span><span class="pun">..</span><span class="pln">hash</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 不是文件"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="ai2x"><br></p><ul data-anchor-id="67eu">
<li><h3 id="计算一个文件的-sha1-filesha1">计算一个文件的 SHA1 (<strong>file.sha1</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">校验值</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">sha1</span><span class="pun">(文件路径)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>文件路径 <br>
  文本型，文件绝对路径</li>
  <li>校验值 <br>
  字符串型 或 nil，文件不存在返回 nil，否则返回其 SHA1 校验值</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>计算一个文件的 MD5 <br>
  <strong>这个函数在 1.2-3 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> hash </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">sha1</span><span class="pun">(</span><span class="str">"/var/mobile/1.zip"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> hash </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 的 SHA1 校验值："</span><span class="pun">..</span><span class="pln">hash</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"`/var/mobile/1.zip` 不是文件"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="onts"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="dfot" id="vpn-配置模块vpnconf">VPN 配置模块（vpnconf）</h2><ul data-anchor-id="o7yq">
<li><h3 id="创建一个-vpn-配置vpnconfcreate">创建一个 VPN 配置(<strong>vpnconf.create</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">创建成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(配置表)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>配置表 <br>
  表型，用于描述需要创建的 VPN 配置的描述的字典</li>
  <li>创建成败 <br>
  布尔型，创建成功返回 true，创建失败返回 false，创建失败通常是因为参数不全或错误</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-3 版以上方可使用</strong> <br>
  用于快速创建一个 VPN 配置，不支持 IKEv2 类型创建，如果是旧版 XXTouch 或需要创建 IKEv2 类型的 VPN 可使用 <a href="https://club.xxtouch.com/forum.php?mod=viewthread&amp;tid=61" target="_blank">VPN 扩展模块</a></p>
</blockquote></li>
<li><p>配置表支持的字段及意义</p>

<table class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>字段名</th>
 <th>类型</th>
 <th>意义</th>
</tr>
</thead>
<tbody><tr>
 <td>dispName</td>
 <td>文本型</td>
 <td>VPN 的显示名</td>
</tr>
<tr>
 <td>VPNType</td>
 <td>文本型</td>
 <td>VPN 的类型，支持 <code>"PPTP"</code>、<code>"L2TP"</code>、<code>"IPSec"</code></td>
</tr>
<tr>
 <td>server</td>
 <td>文本型</td>
 <td>服务器地址</td>
</tr>
<tr>
 <td>authorization</td>
 <td>文本型</td>
 <td>账号</td>
</tr>
<tr>
 <td>password</td>
 <td>文本型</td>
 <td>密码</td>
</tr>
<tr>
 <td>secret</td>
 <td>文本型，可选参数</td>
 <td>密钥，PPTP 可不填</td>
</tr>
<tr>
 <td>encrypLevel</td>
 <td>整数型，可选参数</td>
 <td>加密级别，默认 <code>1</code></td>
</tr>
<tr>
 <td>group</td>
 <td>文本型，可选参数</td>
 <td>群组名称，默认 <code>""</code></td>
</tr>
<tr>
 <td>VPNSendAllTraffic</td>
 <td>整数型，可选参数</td>
 <td>是否发送所有流量，默认 <code>1</code></td>
</tr>
</tbody></table>
</li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">create</span><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    dispName </span><span class="pun">=</span><span class="pln"> </span><span class="str">'1个测试VPN'</span><span class="pun">,</span><span class="pln">       </span><span class="pun">--</span><span class="pln"> VPN </span><span class="pun">的显示名</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="typ">VPNType</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"L2TP"</span><span class="pun">,</span><span class="pln">              </span><span class="pun">--</span><span class="pln"> VPN </span><span class="pun">的类型，支持</span><span class="pln"> PPTP</span><span class="pun">、</span><span class="pln">L2TP</span><span class="pun">、</span><span class="typ">IPSec</span><span class="pun">、</span><span class="typ">IKEv2</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    server </span><span class="pun">=</span><span class="pln"> </span><span class="str">'www.xxtouch.com'</span><span class="pun">,</span><span class="pln">    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">服务器地址</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    authorization </span><span class="pun">=</span><span class="pln"> </span><span class="str">'havonz'</span><span class="pun">,</span><span class="pln">      </span><span class="pun">--</span><span class="pln"> </span><span class="pun">账号</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    password </span><span class="pun">=</span><span class="pln"> </span><span class="str">'123456'</span><span class="pun">,</span><span class="pln">           </span><span class="pun">--</span><span class="pln"> </span><span class="pun">密码</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    secret </span><span class="pun">=</span><span class="pln"> </span><span class="str">'XXTOUCH'</span><span class="pun">,</span><span class="pln">            </span><span class="pun">--</span><span class="pln"> </span><span class="pun">密钥，</span><span class="pln">PPTP </span><span class="pun">可不填</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    encrypLevel </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">               </span><span class="pun">--</span><span class="pln"> </span><span class="pun">加密级别，选填，默认</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">group</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln">                    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">群组名称，选填，默认</span><span class="pln"> </span><span class="str">""</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="typ">VPNSendAllTraffic</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">         </span><span class="pun">--</span><span class="pln"> </span><span class="pun">是否发送所有流量，选填，默认</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L0"><code class="language-lua"><span class="pun">}</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'创建成功'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'创建失败，确定人品没有问题？'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="wyao"><br></p><ul data-anchor-id="c1e1">
<li><h3 id="获取当前系统-vpn-的列表vpnconflist">获取当前系统 VPN 的列表(<strong>vpnconf.list</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">VPN</span><span class="pun">列表</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">list</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>VPN列表 <br>
  表型 或 nil，获取成功返回当前系统 VPN 的顺序表，获取失败返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-3 版以上方可使用</strong> <br>
  返回的 VPN 列表结构如下</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">dispName </span><span class="pun">=</span><span class="pln"> </span><span class="pun">显示名</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> VPNID </span><span class="pun">=</span><span class="pln"> VPNID1</span><span class="pun">},</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">{</span><span class="pln">dispName </span><span class="pun">=</span><span class="pln"> </span><span class="pun">显示名</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> VPNID </span><span class="pun">=</span><span class="pln"> VPNID2</span><span class="pun">},</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="pun">...</span></code></li><li class="L4"><code class="language-lua"><span class="pun">}</span></code></li></ol></pre>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">list</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> list </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">(</span><span class="pln">list</span><span class="pun">))</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'获取失败，确定人品没有问题？'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#深打印一个表-tabledeepprint"><code>table.deep_print</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="6k19"><br></p><ul data-anchor-id="d8j1">
<li><h3 id="选择一个-vpn-配置vpnconfselect">选择一个 VPN 配置(<strong>vpnconf.select</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="kwd">select</span><span class="pun">(显示名或</span><span class="pln">VPNID</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>显示名或VPNID <br>
  文本型，选择一个 VPN，多个同显示名 VPN 不保证选择哪个。如果需要精确选择可传入 VPNID</li>
  <li>操作成败 <br>
  布尔型，操作成功返回 true，操作失败返回 false，操作失败通常是因为指定配置不存在</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-3 版以上方可使用</strong> <br>
  VPNID 可通过 <a href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F-vpn-%E7%9A%84%E5%88%97%E8%A1%A8vpnconflist">vpnconf.list</a> 函数获得</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="kwd">select</span><span class="pun">(</span><span class="str">'1个测试VPN'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'操作成功'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'操作失败，确认你要选中的 VPN 配置存在？'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="a7z0"><br></p><ul data-anchor-id="4ehp">
<li><h3 id="删除一个-vpn-配置vpnconfdelete">删除一个 VPN 配置(<strong>vpnconf.delete</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(显示名或</span><span class="pln">VPNID</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>显示名或VPNID <br>
  文本型，删除一个 VPN，多个同显示名 VPN 不保证删除哪个。如果需要精确删除可传入 VPNID</li>
  <li>操作成败 <br>
  布尔型，操作成功返回 true，操作失败返回 false，操作失败通常是因为指定配置不存在</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-3 版以上方可使用</strong> <br>
  VPNID 可通过 <a href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F-vpn-%E7%9A%84%E5%88%97%E8%A1%A8vpnconflist">vpnconf.list</a> 函数获得</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="str">'1个测试VPN'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'操作成功'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'操作失败，确认你要删除的 VPN 配置存在？'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><p>遍历删除所有 VPN 配置示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">删除所有</span><span class="pln">VPN </span><span class="pun">删除全部</span><span class="pln">VPN VPN</span><span class="pun">全部删除</span><span class="pln"> </span><span class="pun">全部</span><span class="pln">VPN</span><span class="pun">删除</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> vpnlist </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">list</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">if</span><span class="pln"> vpnlist </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln">v </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">vpnlist</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">vpnconf</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="pln">v</span><span class="pun">.</span><span class="pln">VPNID</span><span class="pun">))</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'成功删除：'</span><span class="pun">..</span><span class="pln">v</span><span class="pun">.</span><span class="pln">dispName</span><span class="pun">..</span><span class="str">'('</span><span class="pun">..</span><span class="pln">v</span><span class="pun">.</span><span class="pln">VPNID</span><span class="pun">..</span><span class="str">')'</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="kwd">else</span></code></li><li class="L7"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'无法删除：'</span><span class="pun">..</span><span class="pln">v</span><span class="pun">.</span><span class="pln">dispName</span><span class="pun">..</span><span class="str">'('</span><span class="pun">..</span><span class="pln">v</span><span class="pun">.</span><span class="pln">VPNID</span><span class="pun">..</span><span class="str">')'</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'操作完成！'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'获取列表失败，确定人品没有问题？'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#输出标准系统日志-syslog"><code>sys.log</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="3w5v"><br></p><ul data-anchor-id="tvs3">
<li><h3 id="以当前选择的-vpn-建立连接vpnconfconnect">以当前选择的 VPN 建立连接(<strong>vpnconf.connect</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>操作成败 <br>
  布尔型，操作成功（不是连接成功）返回 true，操作失败返回 false，操作失败通常是因为没有选中的配置</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-3 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'操作成功，正在建立连接……'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'当前并无选中任何 VPN 配置，成功创建 VPN 之后，记得调用 vpnconf.select 选中它'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="65wc"><br></p><ul data-anchor-id="nkxf">
<li><h3 id="断开当前的-vpn-连接vpnconfdisconnect">断开当前的 VPN 连接(<strong>vpnconf.disconnect</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">操作成败</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">disconnect</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>操作成败 <br>
  布尔型，操作成功（不是断开连接成功）返回 true，操作失败返回 false，操作失败通常是因为没有选中的配置</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-3 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">disconnect</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'操作成功，正在断开连接……'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'当前并无选中任何 VPN 配置，成功创建 VPN 之后，记得调用 vpnconf.select 选中它'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="zwuj"><br></p><ul data-anchor-id="sjny">
<li><h3 id="获取当前选择的-vpn-的状态vpnconfstatus">获取当前选择的 VPN 的状态(<strong>vpnconf.status</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">状态</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">status</span><span class="pun">()</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>状态 <br>
  表型 或 nil，操作成功返回状态描述表，没有选择任何 VPN 返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p><strong>这个函数在 1.2-3 版以上方可使用</strong> <br>
  返回的状态表结构如下</p>
  
  <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">{</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    text </span><span class="pun">=</span><span class="pln"> </span><span class="pun">当前状态的文字描述,</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    connected </span><span class="pun">=</span><span class="pln"> </span><span class="pun">是否已经连接成功,</span></code></li><li class="L3"><code class="language-lua"><span class="pun">}</span></code></li></ol></pre>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> status </span><span class="pun">=</span><span class="pln"> vpnconf</span><span class="pun">.</span><span class="pln">status</span><span class="pun">()</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">if</span><span class="pln"> status </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">(</span><span class="pln">status</span><span class="pun">))</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'当前并无选中任何 VPN 配置，成功创建 VPN 之后，记得调用 vpnconf.select 选中它'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#深打印一个表-tabledeepprint"><code>table.deep_print</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="dvw1"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="smqp" id="云打码模块cloudocr">云打码模块（cloud_ocr）</h2><ul data-anchor-id="1j5d">
<li><h3 id="初始化一个云打码平台cloudocrocr">初始化一个云打码平台(<strong>cloud_ocr.ocr</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> cloud_ocr </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'cloud_ocr'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> plat </span><span class="pun">=</span><span class="pln"> cloud_ocr</span><span class="pun">.</span><span class="pln">ocr</span><span class="pun">(平台名,</span><span class="pln"> </span><span class="pun">账号,</span><span class="pln"> </span><span class="pun">密码)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>平台名 <br>
  文本型，平台（目前支持 'ruokuai', 'dama2', '好爱'）</li>
  <li>账号 <br>
  文本型，云验证码识别网站账号</li>
  <li>密码 <br>
  文本型，云验证码识别网站密码</li>
  <li>plat <br>
  表型，云打码平台对象，用于后面几个 API</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>初始化一个云打码平台，云平台账号需要在各自平台官网注册</p>
  
  <ul><li>XXTouch 目前已经集成的云打码平台有若快打码、打码兔、好爱答题 <br>
  <ul><li>ruokuai（若快打码） <br>
  <ul><li>平台官网：<a href="http://www.ruokuai.com/" target="_blank">http://www.ruokuai.com/</a></li>
  <li>注意：若快的开发者账号不能用于打码，需要注册一个用户账号用于打码</li></ul></li>
  <li>dama2（打码兔） <br>
  <ul><li>平台官网：<a href="http://www.dama2.com/" target="_blank">http://www.dama2.com/</a></li></ul></li>
  <li>好爱 <br>
  <ul><li>平台官网：<a href="http://www.haoi23.net/" target="_blank">http://www.haoi23.net/</a></li>
  <li><strong>好爱 平台支持在软件版本 1.2-1 或以上集成</strong></li></ul></li></ul></li></ul>
</blockquote></li>
<li><p>示例 <br>
<a href="#cloudocr-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="holy"><br></p><ul data-anchor-id="m1rc">
<li><h3 id="识别屏幕上的范围-platocrscreen">识别屏幕上的范围 (<strong>plat.ocr_screen</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">识别结果,</span><span class="pln"> </span><span class="pun">结果标签或错误信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> plat</span><span class="pun">.</span><span class="pln">ocr_screen</span><span class="pun">(左,</span><span class="pln"> </span><span class="pun">上,</span><span class="pln"> </span><span class="pun">右,</span><span class="pln"> </span><span class="pun">下,</span><span class="pln"> </span><span class="pun">打码类型</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">超时秒数,</span><span class="pln"> </span><span class="pun">缩放比例</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>plat <br>
  表型，云打码平台对象，可以使用 <a href="#初始化一个云打码平台cloudocrocr">初始化一个云打码平台</a> 来获得</li>
  <li>左, 上, 右, 下 <br>
  整数型，需要打码的图像在屏幕上的范围</li>
  <li>打码类型 <br>
  文本型，打码类型</li>
  <li>超时秒数 <br>
  整数型，可选参数，超时时间设置，单位秒，默认 30</li>
  <li>缩放比例 <br>
  整数型，可选参数，缩放比例，默认 100 不处理</li>
  <li>识别结果 <br>
  文本型 或 nil，识别成功返回打码结果文字，识别失败返回 nil</li>
  <li><strong>结果标签</strong>或错误信息 <br>
  文本型，识别成功返回 <strong>结果标签</strong>，识别失败返回错误信息文本描述</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用打码平台识别屏幕上的范围</p>
  
  <ul><li>打码题型参考 <br>
  <ul><li>若快题型及价格：<a href="http://www.ruokuai.com/home/pricetype" target="_blank">http://www.ruokuai.com/home/pricetype</a></li>
  <li>打码兔题型及价格：<a href="http://wiki.dama2.com/index.php?n=ApiDoc.Pricedesc" target="_blank">http://wiki.dama2.com/index.php?n=ApiDoc.Pricedesc</a></li></ul></li></ul>
</blockquote></li>
<li><p>示例 <br>
<a href="#cloudocr-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="eim9"><br></p><ul data-anchor-id="129h">
<li><h3 id="识别图片文件-platocrimage">识别图片文件 (<strong>plat.ocr_image</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">识别结果,</span><span class="pln"> </span><span class="pun">结果标签或错误信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> plat</span><span class="pun">.</span><span class="pln">ocr_image</span><span class="pun">(文件路径,</span><span class="pln"> </span><span class="pun">打码类型</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">超时秒数,</span><span class="pln"> </span><span class="pun">缩放比例</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>plat <br>
  表型，云打码平台对象，可以使用 <a href="#初始化一个云打码平台cloudocrocr">初始化一个云打码平台</a> 来获得</li>
  <li>文件路径 <br>
  文本型，需要打码的图像文件名</li>
  <li>打码类型 <br>
  文本型，打码类型</li>
  <li>超时秒数 <br>
  整数型，可选参数，超时时间设置，单位秒，默认 30</li>
  <li>缩放比例 <br>
  整数型，可选参数，缩放比例，默认 100 不处理</li>
  <li>识别结果 <br>
  文本型 或 nil，识别成功返回打码结果文字，识别失败返回 nil</li>
  <li><strong>结果标签</strong>或错误信息 <br>
  文本型，识别成功返回 <strong>结果标签</strong>，识别失败返回错误信息文本描述</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用打码平台识别图像文件 <br>
  文件名如果不使用绝对路径，那么加载 <code>/var/mobile/Media/1ferver/res/</code> 这个目录的图片文件</p>
  
  <ul><li>打码题型参考 <br>
  <ul><li>若快题型及价格：<a href="http://www.ruokuai.com/home/pricetype" target="_blank">http://www.ruokuai.com/home/pricetype</a></li>
  <li>打码兔题型及价格：<a href="http://wiki.dama2.com/index.php?n=ApiDoc.Pricedesc" target="_blank">http://wiki.dama2.com/index.php?n=ApiDoc.Pricedesc</a></li></ul></li></ul>
</blockquote></li>
<li><p>示例 <br>
<a href="#cloudocr-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="2fc7"><br></p><ul data-anchor-id="k8lb">
<li><h3 id="识别图片对象-platocrobj">识别图片对象 (<strong>plat.ocr_obj</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">识别结果,</span><span class="pln"> </span><span class="pun">结果标签或错误信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> plat</span><span class="pun">.</span><span class="pln">ocr_obj</span><span class="pun">(图像,</span><span class="pln"> </span><span class="pun">打码类型</span><span class="pln"> </span><span class="pun">[,</span><span class="pln"> </span><span class="pun">超时秒数,</span><span class="pln"> </span><span class="pun">缩放比例</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>plat <br>
  表型，云打码平台对象，可以使用 <a href="#初始化一个云打码平台cloudocrocr">初始化一个云打码平台</a> 来获得</li>
  <li>图像 <br>
  <a href="#image图片对象-模块">图片对象</a>，需要打码的图片对象</li>
  <li>打码类型 <br>
  文本型，打码类型</li>
  <li>超时秒数 <br>
  整数型，可选参数，超时时间设置，单位秒，默认 30</li>
  <li>缩放比例 <br>
  整数型，可选参数，缩放比例，默认 100 不处理</li>
  <li>识别结果 <br>
  文本型 或 nil，识别成功返回打码结果文字，识别失败返回 nil</li>
  <li><strong>结果标签</strong>或错误信息 <br>
  文本型，识别成功返回 <strong>结果标签</strong>，识别失败返回错误信息文本描述</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>使用打码平台识别图片对象</p>
  
  <ul><li>打码题型参考 <br>
  <ul><li>若快题型及价格：<a href="http://www.ruokuai.com/home/pricetype" target="_blank">http://www.ruokuai.com/home/pricetype</a></li>
  <li>打码兔题型及价格：<a href="http://wiki.dama2.com/index.php?n=ApiDoc.Pricedesc" target="_blank">http://wiki.dama2.com/index.php?n=ApiDoc.Pricedesc</a></li></ul></li></ul>
</blockquote></li>
<li><p>示例 <br>
<a href="#cloudocr-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="5hww"><br></p><ul data-anchor-id="yuw0">
<li><h3 id="提交错误的识别-platreporterror">提交错误的识别 (<strong>plat.report_error</strong>)</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">提交成败,</span><span class="pln"> </span><span class="pun">状态信息</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> plat</span><span class="pun">.</span><span class="pln">report_error</span><span class="pun">([</span><span class="pln"> </span><span class="pun">结果标签</span><span class="pln"> </span><span class="pun">])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>plat <br>
  表型，云打码平台对象，可以使用 <a href="#初始化一个云打码平台cloudocrocr">初始化一个云打码平台</a> 来获得</li>
  <li><strong>结果标签</strong> <br>
  文本型，可选参数，对应打码返回的 <strong>结果标签</strong>，默认提交上次成功的 <strong>结果标签</strong></li>
  <li>提交成败 <br>
  布尔型，返回是否提交成功</li>
  <li>状态信息 <br>
  文本型 或 nil，正确返回状态信息（可不判断），错误返回 nil</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>提交错误的识别到打码平台</p>
</blockquote></li>
<li><p>示例 <br>
<a href="#cloudocr-示例代码"><code>本章最后</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="2zsz"><br></p><ul data-anchor-id="fkbi">
<li><h3 id="cloudocr-示例代码">cloud_ocr 示例代码</h3>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> cloud_ocr </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'cloud_ocr'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> plat </span><span class="pun">=</span><span class="pln"> cloud_ocr</span><span class="pun">.</span><span class="pln">ocr</span><span class="pun">(</span><span class="str">'ruokuai'</span><span class="pun">,</span><span class="str">'平台账号'</span><span class="pun">,</span><span class="str">'平台密码'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">初始化一个平台对象</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> text</span><span class="pun">,</span><span class="pln"> id_or_err </span><span class="pun">=</span><span class="pln"> plat</span><span class="pun">.</span><span class="pln">ocr_screen</span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">448</span><span class="pun">,</span><span class="pln"> </span><span class="lit">628</span><span class="pun">,</span><span class="pln"> </span><span class="lit">724</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1040</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">使用这个平台打屏幕上的码获得结果</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">if</span><span class="pln"> text </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'识别成功\n'</span><span class="pun">..</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        </span><span class="str">'结果标签:'</span><span class="pun">..</span><span class="pln">id_or_err</span><span class="pun">..</span><span class="str">'\n'</span><span class="pun">..</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="str">'识别结果:'</span><span class="pun">..</span><span class="pln">text</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">'识别失败\n'</span><span class="pun">..</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="str">'错误信息:'</span><span class="pun">..</span><span class="pln">id_or_err</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
</ul><hr><p data-anchor-id="g8f0"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="tfx1" id="系统回调消息">系统回调消息</h2><ul data-anchor-id="y4b3">
<li>当系统发生一些事件的时候，会产生一些消息，脚本可以监听这些消息来完成一些希望做的事</li>
<li>消息回调机制需要结合 <a href="#进程字典">进程词典</a>、<a href="#线程模块thread">thread</a> 等模块使用</li>
<li><p><strong>本章没有自定义函数</strong></p></li>
<li><h3 id="电话呼入呼出回调消息">电话呼入呼出回调消息</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="str">"xxtouch.call_callback"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"in"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        </span><span class="pun">--</span><span class="pln"> </span><span class="pun">有电话呼入</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    elseif </span><span class="pun">(</span><span class="pln">val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"out"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="pun">--</span><span class="pln"> </span><span class="pun">有电话呼出</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    elseif </span><span class="pun">(</span><span class="pln">val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"disconnected"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="pun">--</span><span class="pln"> </span><span class="pun">电话被挂断</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>状态</p>

<blockquote class="white-blockquote">
  <ul><li>in <br>
  来电呼入的时候，以 xxtouch.call_callback 标识的进程队列词典会推入这个值</li>
  <li>out <br>
  呼出电话的时候，以 xxtouch.call_callback 标识的进程队列词典会推入这个值</li>
  <li>disconnected <br>
  当来电或去电挂断的时候，以 xxtouch.call_callback 标识的进程队列词典会推入这个值</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>当收到系统电话呼入呼出消息的时候，这个消息标识的进程队列词典会推入一个状态</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">清空消息队列</span></code></li><li class="L1"><code class="language-lua"><span class="pln">proc_queue_clear</span><span class="pun">(</span><span class="str">"xxtouch.call_callback"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"脚本从现在开始监听来电事件，二十秒后取消监听"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">开始建立监听回调</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">local</span><span class="pln"> eid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="str">"xxtouch.call_callback"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"in"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"来电话了"</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    elseif </span><span class="pun">(</span><span class="pln">val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"out"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"正在打电话出去"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    elseif </span><span class="pun">(</span><span class="pln">val </span><span class="pun">==</span><span class="pln"> </span><span class="str">"disconnected"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"电话挂断了"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">20000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">反注册回调函数，如果不反注册监听，那么脚本不会在此结束</span></code></li><li class="L9"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">unregister_event</span><span class="pun">(</span><span class="str">"xxtouch.call_callback"</span><span class="pun">,</span><span class="pln"> eid</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a>、<a href="#从进程队列词典中弹出所有值-procqueueclear"><code>proc_queue_clear</code></a>、<a href="#注册监听一个事件-threadregisterevent"><code>thread.register_event</code></a>、<a href="#反注册监听一个事件-threadunregisterevent"><code>thread.unregister_event</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="pky0"><br></p><ul data-anchor-id="fasc">
<li><h3 id="扫码结果回调消息">扫码结果回调消息</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="str">"xxtouch.scan_code_callback"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> ret </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">返回的是一个</span><span class="pln"> json </span><span class="pun">字符串</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ret</span><span class="pun">.</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> </span><span class="str">"org.iso.QRCode"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="pun">--</span><span class="pln"> </span><span class="pun">扫到一个二维码回调</span><span class="pln"> ret</span><span class="pun">.</span><span class="kwd">string</span><span class="pln"> </span><span class="pun">是结果</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        </span><span class="pun">--</span><span class="pln"> </span><span class="pun">其它类型回调可以根据</span><span class="pln"> ret</span><span class="pun">.</span><span class="pln">type </span><span class="pun">来区分</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>状态</p>

<blockquote class="white-blockquote">
  <ul><li>val <br>
  当使用扫码器扫到一个能识别的值的时候，以 xxtouch.scan_code_callback 标识的进程队列词典会推入这个值以及它的相关信息</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>当扫码器扫到一个能识别的值的时候，这个消息标识的进程队列词典会推入一个状态</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">清空消息队列</span></code></li><li class="L1"><code class="language-lua"><span class="pln">proc_queue_clear</span><span class="pun">(</span><span class="str">"xxtouch.scan_code_callback"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="kwd">local</span><span class="pln"> success </span><span class="pun">=</span><span class="pln"> utils</span><span class="pun">.</span><span class="pln">open_code_scanner</span><span class="pun">()</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> success </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"可以于 “设置-通用-访问限制” 中取消 “相机” 的访问限制"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"无法访问系统相机"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">return</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"脚本从现在开始监扫码结果事件，二十秒后取消监听"</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">开始建立监听回调</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> eid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="str">"xxtouch.scan_code_callback"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> ret </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ret</span><span class="pun">.</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> </span><span class="str">"org.iso.QRCode"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"扫到一个二维码\n"</span><span class="pun">..</span><span class="pln">ret</span><span class="pun">.</span><span class="kwd">string</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"扫到一个条码\n"</span><span class="pun">..</span><span class="pln">ret</span><span class="pun">.</span><span class="kwd">string</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">20000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">反注册回调函数，如果不反注册监听，那么脚本不会在此结束</span></code></li><li class="L4"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">unregister_event</span><span class="pun">(</span><span class="str">"xxtouch.scan_code_callback"</span><span class="pun">,</span><span class="pln"> eid</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#打开扫码器-utilsopencodescanner"><code>utils.open_code_scanner</code></a>、<a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a>、<a href="#从进程队列词典中弹出所有值-procqueueclear"><code>proc_queue_clear</code></a>、<a href="#注册监听一个事件-threadregisterevent"><code>thread.register_event</code></a>、 <br>
<a href="#反注册监听一个事件-threadunregisterevent"><code>thread.unregister_event</code></a>、<a href="#将-json-字符串转换成-lua-值-jsondecode"><code>json.decode</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="8m0o"><br></p><ul data-anchor-id="pdza">
<li><h3 id="activator-事件回调消息">Activator 事件回调消息</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="str">"xxtouch.activator_callback"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> ret </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"mode:"</span><span class="pun">..</span><span class="pln">ret</span><span class="pun">.</span><span class="pln">mode</span><span class="pun">..</span><span class="str">"\n"</span></code></li><li class="L3"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"event:"</span><span class="pun">..</span><span class="pln">ret</span><span class="pun">.</span><span class="kwd">event</span><span class="pun">..</span><span class="str">"\n"</span></code></li><li class="L4"><code class="language-lua"><span class="pln">            </span><span class="pun">..</span><span class="str">"time:"</span><span class="pun">..</span><span class="pln">ret</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>状态</p>

<blockquote class="white-blockquote">
  <ul><li>val <br>
  当配置了 <a href="http://cydia.saurik.com/package/libactivator/" target="_blank">Activator</a> 回调并且触发了响应的 <a href="http://cydia.saurik.com/package/libactivator/" target="_blank">Activator</a> 事件的时候，事件的详情会传到这里</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>需要安装 <a href="http://cydia.saurik.com/package/libactivator/" target="_blank">Activator</a> 并于 <a href="http://cydia.saurik.com/package/libactivator/" target="_blank">Activator</a> 中做好相应的配置配合使用</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">清空消息队列</span></code></li><li class="L1"><code class="language-lua"><span class="pln">proc_queue_clear</span><span class="pun">(</span><span class="str">"xxtouch.activator_callback"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">开始建立监听回调</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">local</span><span class="pln"> eid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="str">"xxtouch.activator_callback"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> ret </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> ret</span><span class="pun">.</span><span class="kwd">event</span><span class="pun">==</span><span class="str">"libactivator.statusbar.tap.double"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"双击状态栏回调"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">20000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">反注册回调函数，如果不反注册监听，那么脚本不会在此结束</span></code></li><li class="L4"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">unregister_event</span><span class="pun">(</span><span class="str">"xxtouch.activator_callback"</span><span class="pun">,</span><span class="pln"> eid</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a>、<a href="#从进程队列词典中弹出所有值-procqueueclear"><code>proc_queue_clear</code></a>、<a href="#注册监听一个事件-threadregisterevent"><code>thread.register_event</code></a>、<a href="#反注册监听一个事件-threadunregisterevent"><code>thread.unregister_event</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="09j2"><br></p><ul data-anchor-id="ezy1">
<li><h3 id="hid-事件消息">HID 事件消息</h3>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="str">"xxtouch.hid_event"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> </span><span class="kwd">event</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_type</span><span class="pun">==</span><span class="str">"touch"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_name</span><span class="pun">==</span><span class="str">"touch.on"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"触摸接触位置: ("</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">x</span><span class="pun">..</span><span class="str">", "</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">y</span><span class="pun">..</span><span class="str">")\n"</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        elseif </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_name</span><span class="pun">==</span><span class="str">"touch.move"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"触摸移动到位置: ("</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">x</span><span class="pun">..</span><span class="str">", "</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">y</span><span class="pun">..</span><span class="str">")\n"</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        elseif </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_name</span><span class="pun">==</span><span class="str">"touch.off"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"触摸从位置: ("</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">x</span><span class="pun">..</span><span class="str">", "</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">y</span><span class="pun">..</span><span class="str">") 离开屏幕\n"</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_name</span><span class="pun">==</span><span class="str">"key.down"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"按下按键: "</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">key_name</span><span class="pun">..</span><span class="str">"\n"</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        elseif </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_name</span><span class="pun">==</span><span class="str">"key.up"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"抬起按键: "</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">key_name</span><span class="pun">..</span><span class="str">"\n"</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li></ol></pre></li>
<li><p>状态</p>

<blockquote class="white-blockquote">
  <ul><li>val <br>
  注册监听则所有的 hid 事件信息都会传递到这里，极度影响脚本运行效率，不需要了请及时反注册 <br>
  HID 事件中所有的触摸坐标都是以竖屏 HOME 键在下为初始化坐标系，如果需要，可以使用 <a href="#坐标旋转转换-screenrotatexy">screen.rotate_xy</a> 转换后使用</li></ul>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">清空消息队列</span></code></li><li class="L1"><code class="language-lua"><span class="pln">proc_queue_clear</span><span class="pun">(</span><span class="str">"xxtouch.hid_event"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">建立监听回调</span></code></li><li class="L4"><code class="language-lua"><span class="kwd">local</span><span class="pln"> eid </span><span class="pun">=</span><span class="pln"> thread</span><span class="pun">.</span><span class="pln">register_event</span><span class="pun">(</span><span class="str">"xxtouch.hid_event"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> </span><span class="kwd">event</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> json</span><span class="pun">.</span><span class="pln">decode</span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_type</span><span class="pun">==</span><span class="str">"touch"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_name</span><span class="pun">==</span><span class="str">"touch.on"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"触摸接触位置: ("</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">x</span><span class="pun">..</span><span class="str">", "</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">y</span><span class="pun">..</span><span class="str">")\n"</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        elseif </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_name</span><span class="pun">==</span><span class="str">"touch.move"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L0"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"触摸移动到位置: ("</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">x</span><span class="pun">..</span><span class="str">", "</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">y</span><span class="pun">..</span><span class="str">")\n"</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        elseif </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_name</span><span class="pun">==</span><span class="str">"touch.off"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"触摸从位置: ("</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">x</span><span class="pun">..</span><span class="str">", "</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">y</span><span class="pun">..</span><span class="str">") 离开屏幕\n"</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L5"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_name</span><span class="pun">==</span><span class="str">"key.down"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"按下按键: "</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">key_name</span><span class="pun">..</span><span class="str">"\n"</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">        elseif </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">event_name</span><span class="pun">==</span><span class="str">"key.up"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="language-lua"><span class="pln">            sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"抬起按键: "</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">key_name</span><span class="pun">..</span><span class="str">"\n"</span><span class="pun">..</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">time</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pln">touch</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">):</span><span class="pln">off</span><span class="pun">()</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">key</span><span class="pun">.</span><span class="pln">press</span><span class="pun">(</span><span class="str">'homebutton'</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">20000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">等待</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">秒</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">反注册回调函数，如果不反注册监听，那么脚本不会在此结束</span></code></li><li class="L0"><code class="language-lua"><span class="pln">thread</span><span class="pun">.</span><span class="pln">unregister_event</span><span class="pun">(</span><span class="str">"xxtouch.hid_event"</span><span class="pun">,</span><span class="pln"> eid</span><span class="pun">)</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="#毫秒级延迟-sysmsleep"><code>sys.msleep</code></a>、<a href="#从进程队列词典中弹出所有值-procqueueclear"><code>proc_queue_clear</code></a>、<a href="#注册监听一个事件-threadregisterevent"><code>thread.register_event</code></a>、<a href="#反注册监听一个事件-threadunregisterevent"><code>thread.unregister_event</code></a></p></li></ul></li>
</ul><hr><p data-anchor-id="qdz4"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="4g8e" id="外部扩展">外部扩展</h2><hr><p data-anchor-id="2t1f"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="y2tj" id="地理位置伪装模块gps">地理位置伪装模块（gps）</h3><ul data-anchor-id="h8yc">
<li><h4 id="伪装gps位置-gpsfake">伪装GPS位置 (<strong>gps.fake</strong>)</h4>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">gps</span><span class="pun">.</span><span class="pln">fake</span><span class="pun">(应用包名,</span><span class="pln"> </span><span class="pun">纬度,</span><span class="pln"> </span><span class="pun">经度)</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用包名 <br>
  文本型，指定应用包名</li>
  <li>纬度 <br>
  实数型，纬度</li>
  <li>经度 <br>
  实数型，经度</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>对指定应用伪装 GPS 位置，脚本或者服务停止后依然有效 <br>
  更新、重装或是卸载 XXTouch 会清空所有的伪装信息 <br>
  电脑端拾取经纬度坐标可以用 <a href="http://api.map.baidu.com/lbsapi/getpoint/index.html" target="_blank">这个（百度地图坐标拾取）</a></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">gps</span><span class="pun">.</span><span class="pln">fake</span><span class="pun">(</span><span class="str">"com.baidu.map"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">39.806139606082951</span><span class="pun">,</span><span class="pln"> </span><span class="lit">116.2303211298582</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="snu0"><br></p><ul data-anchor-id="57ga">
<li><h4 id="清除gps伪装信息-gpsclear">清除GPS伪装信息 (<strong>gps.clear</strong>)</h4>

<ul><li><p>声明</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">gps</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">([应用包名])</span></code></li></ol></pre></li>
<li><p>参数及返回值</p>

<blockquote class="white-blockquote">
  <ul><li>应用包名 <br>
  文本型，可选参数，指定应用包名，如果不填，则清除所有应用的 GPS 伪装信息</li></ul>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>清除指定应用的 GPS 伪装信息 <br>
  更新、重装或是卸载 XXTouch 会清空所有的伪装信息</p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">gps</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">(</span><span class="str">"com.baidu.map"</span><span class="pun">)</span></code></li></ol></pre></li></ul></li>
</ul><hr><p data-anchor-id="249n"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h3 data-anchor-id="1gga" id="大漠找字文字识别-模块">大漠找字/文字识别 模块</h3><ul data-anchor-id="qrtc">
<li><p>工具下载</p>

<blockquote class="white-blockquote">
  <p><a href="http://static.zybuluo.com/xxtouch/qykkpnzm830xhzr5mv8uadfv/%E5%A4%A7%E6%BC%A0%E7%BB%BC%E5%90%88%E5%B7%A5%E5%85%B7.zip" target="_blank">大漠综合工具.zip-1520.5kB</a></p>
</blockquote></li>
<li><p>说明</p>

<blockquote class="white-blockquote">
  <p>大漠找字识字不用我解释是什么了吧？ <br>
  这个模块使用废弃的 <a href="https://www.zybuluo.com/xxtouch/note/520999#matrixdict字库对象-模块-已废弃" target="_blank">matrix_dict 模块</a> 封装，源代码开放。 <br>
  安装 XXTouch 之后可以在设备 <code>/var/mobile/Media/1ferver/lua/dm.lua</code> 查看源代码 <br>
  <strong>这个模块在 1.1.0-1 版以上方可使用</strong></p>
</blockquote></li>
<li><p>示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">看例子！！</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> dm </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"dm"</span><span class="pun">)</span><span class="pln">                    </span><span class="pun">--</span><span class="pln"> </span><span class="pun">引用</span><span class="pln"> dm </span><span class="pun">库</span></code></li><li class="L2"><code class="language-lua"><span class="pln">dm</span><span class="pun">.</span><span class="typ">SetPath</span><span class="pun">(</span><span class="str">"/var/mobile/Media/1ferver/res"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">设置字库查找目录，默认</span><span class="pln"> </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">mobile</span><span class="pun">/</span><span class="typ">Media</span><span class="pun">/</span><span class="lit">1ferver</span><span class="pun">/</span><span class="pln">res</span></code></li><li class="L3"><code class="language-lua"><span class="pln">dm</span><span class="pun">.</span><span class="typ">SetDict</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">"dm_soft.txt"</span><span class="pun">)</span><span class="pln">                </span><span class="pun">--</span><span class="pln"> </span><span class="pun">设置一个编号对应的字库文件</span></code></li><li class="L4"><code class="language-lua"><span class="pln">dm</span><span class="pun">.</span><span class="typ">UseDict</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln">                               </span><span class="pun">--</span><span class="pln"> </span><span class="pun">选择字库编号，默认</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="kwd">local</span><span class="pln"> found</span><span class="pun">,</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> dm</span><span class="pun">.</span><span class="typ">FindStr</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">307</span><span class="pun">,</span><span class="pln"> </span><span class="lit">215</span><span class="pun">,</span><span class="pln"> </span><span class="str">"相机"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"4d4226-404010"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">local</span><span class="pln"> text </span><span class="pun">=</span><span class="pln"> dm</span><span class="pun">.</span><span class="typ">Ocr</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">307</span><span class="pun">,</span><span class="pln"> </span><span class="lit">215</span><span class="pun">,</span><span class="pln"> </span><span class="str">"4d4226-404010"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">table</span><span class="pun">.</span><span class="pln">deep_print</span><span class="pun">({</span><span class="pln">found</span><span class="pun">,</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> text</span><span class="pun">}))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="#深打印一个表-tabledeepprint"><code>table.deep_print</code></a></p></li>
</ul><hr><p data-anchor-id="8epm"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="135z" id="已集成的开源扩展库">已集成的开源扩展库</h2><hr><p data-anchor-id="ekqv"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="9va5" id="luacjson-扩展库">LuaCJSON 扩展库</h3><ul data-anchor-id="jigo">
<li><a href="http://www.kyne.com.au/~mark/software/lua-cjson-manual.html" target="_blank">LuaCJSON 手册地址</a></li>
</ul><p data-anchor-id="opa8"><strong>注：</strong> XXTouch 内置的 JSON 模块就是 LuaCJSON，参考 <a href="#json-模块json">JSON 模块（json）</a></p><hr><p data-anchor-id="1u44"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="524t" id="luasocket-扩展库">LuaSocket 扩展库</h3><ul data-anchor-id="6kjy">
<li><p><a href="http://w3.impa.br/~diego/software/luasocket/reference.html" target="_blank">LuaSocket 手册地址</a></p></li>
<li><h4 id="连接超时示例">连接超时示例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> socket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"socket"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> sock </span><span class="pun">=</span><span class="pln"> socket</span><span class="pun">.</span><span class="pln">tcp</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="pln">sock</span><span class="pun">:</span><span class="pln">settimeout</span><span class="pun">(</span><span class="lit">0.2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">设置连接超时秒数</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">sock</span><span class="pun">:</span><span class="pln">connect</span><span class="pun">(</span><span class="str">"220.181.57.217"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">80</span><span class="pun">))</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    sock</span><span class="pun">:</span><span class="pln">close</span><span class="pun">()</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">关闭连接</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"能连上"</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">else</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="str">"超时了"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><h4 id="模拟-http-请求百度首页示例">模拟 HTTP 请求百度首页示例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> socket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'socket'</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> sock </span><span class="pun">=</span><span class="pln"> socket</span><span class="pun">.</span><span class="pln">tcp</span><span class="pun">()</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">local</span><span class="pln"> ip </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">socket</span><span class="pun">.</span><span class="pln">dns</span><span class="pun">.</span><span class="pln">toip</span><span class="pun">(</span><span class="str">'www.baidu.com'</span><span class="pun">),</span><span class="pln"> </span><span class="str">'域名解析失败'</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sock</span><span class="pun">:</span><span class="pln">settimeout</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span><span class="pln">sock</span><span class="pun">:</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">ip</span><span class="pun">,</span><span class="pln"> </span><span class="lit">80</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'连接失败或超时'</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="kwd">assert</span><span class="pun">(</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    sock</span><span class="pun">:</span><span class="pln">send</span><span class="pun">(</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="str">'GET / HTTP/1.1\r\n'</span><span class="pun">..</span></code></li><li class="L0"><code class="language-lua"><span class="pln">        </span><span class="str">'Host: www.baidu.com\r\n'</span><span class="pun">..</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="str">'Accept: */*\r\n'</span><span class="pun">..</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        </span><span class="str">'Connection: close\r\n'</span><span class="pun">..</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="str">'\r\n'</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="pun">),</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="str">'发送数据超时'</span></code></li><li class="L6"><code class="language-lua"><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="kwd">local</span><span class="pln"> buf </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L9"><code class="language-lua"><span class="pln">repeat</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> chunk</span><span class="pun">,</span><span class="pln"> status</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">partial</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sock</span><span class="pun">:</span><span class="pln">receive</span><span class="pun">(</span><span class="lit">4096</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">chunk</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        buf</span><span class="pun">[#</span><span class="pln">buf </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> chunk</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">partial</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            buf</span><span class="pun">[#</span><span class="pln">buf </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">partial</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">until</span><span class="pln"> status </span><span class="pun">==</span><span class="pln"> </span><span class="str">"closed"</span></code></li><li class="L9"><code class="language-lua"><span class="pln">sock</span><span class="pun">:</span><span class="pln">close</span><span class="pun">()</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">table</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="pln">buf</span><span class="pun">))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a>、<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-table.concat" target="_blank">table.concat</a></p></li>
</ul><hr><p data-anchor-id="jntt"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="nbkg" id="luaiconv-扩展库编码转换库">luaiconv 扩展库（编码转换库）</h3><ul data-anchor-id="2bb9">
<li><p><a href="http://ittner.github.io/lua-iconv/#api-documentation" target="_blank">luaiconv 手册地址</a></p></li>
<li><h4 id="gbk-编码转-utf-8-编码示例">GBK 编码转 UTF-8 编码示例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> iconv </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"iconv"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> cd </span><span class="pun">=</span><span class="pln"> iconv</span><span class="pun">.</span><span class="kwd">new</span><span class="pun">(</span><span class="str">"utf-8"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"gbk"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">新建一个</span><span class="pln"> GBK </span><span class="pun">编码到</span><span class="pln"> UTF8 </span><span class="pun">编码的转换器</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> io</span><span class="pun">.</span><span class="pln">open</span><span class="pun">(</span><span class="str">"/User/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"rb"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">local</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> f</span><span class="pun">:</span><span class="pln">read</span><span class="pun">(</span><span class="str">"*a"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">f</span><span class="pun">:</span><span class="pln">close</span><span class="pun">()</span></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">cd</span><span class="pun">:</span><span class="pln">iconv</span><span class="pun">(</span><span class="pln">s</span><span class="pun">))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><h4 id="unicode-little-endianutf-16le-编码转-utf-8-编码示例">Unicode Little Endian（UTF-16LE） 编码转 UTF-8 编码示例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> iconv </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"iconv"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> cd </span><span class="pun">=</span><span class="pln"> iconv</span><span class="pun">.</span><span class="kwd">new</span><span class="pun">(</span><span class="str">"utf-8"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"utf-16le"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">新建一个</span><span class="pln"> UTF</span><span class="pun">-</span><span class="lit">16LE</span><span class="pln"> </span><span class="pun">编码到</span><span class="pln"> UTF8 </span><span class="pun">编码的转换器</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> io</span><span class="pun">.</span><span class="pln">open</span><span class="pun">(</span><span class="str">"/User/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"rb"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">local</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> f</span><span class="pun">:</span><span class="pln">read</span><span class="pun">(</span><span class="str">"*a"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">f</span><span class="pun">:</span><span class="pln">close</span><span class="pun">()</span></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">cd</span><span class="pun">:</span><span class="pln">iconv</span><span class="pun">(</span><span class="pln">s</span><span class="pun">))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><h4 id="unicode-big-endianutf-16be-编码转-utf-8-编码示例">Unicode Big Endian（UTF-16BE） 编码转 UTF-8 编码示例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> iconv </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"iconv"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> cd </span><span class="pun">=</span><span class="pln"> iconv</span><span class="pun">.</span><span class="kwd">new</span><span class="pun">(</span><span class="str">"utf-8"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"utf-16be"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">新建一个</span><span class="pln"> UTF</span><span class="pun">-</span><span class="lit">16BE</span><span class="pln"> </span><span class="pun">编码到</span><span class="pln"> UTF8 </span><span class="pun">编码的转换器</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> io</span><span class="pun">.</span><span class="pln">open</span><span class="pun">(</span><span class="str">"/User/1.txt"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"rb"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">local</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> f</span><span class="pun">:</span><span class="pln">read</span><span class="pun">(</span><span class="str">"*a"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">f</span><span class="pun">:</span><span class="pln">close</span><span class="pun">()</span></code></li><li class="L5"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">cd</span><span class="pun">:</span><span class="pln">iconv</span><span class="pun">(</span><span class="pln">s</span><span class="pun">))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
</ul><hr><p data-anchor-id="wx1k"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="jnyu" id="lpeg-扩展库">lpeg 扩展库</h3><ul data-anchor-id="lhot">
<li><a href="http://www.inf.puc-rio.br/~roberto/lpeg/lpeg.html" target="_blank">lpeg 手册地址</a></li>
</ul><hr><p data-anchor-id="fwhf"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="9cv8" id="luafilesystem-扩展库">LuaFileSystem 扩展库</h3><ul data-anchor-id="mmhb">
<li><p><a href="http://keplerproject.github.io/luafilesystem/manual.html" target="_blank">LuaFileSystem 手册地址</a></p></li>
<li><h4 id="获取路径中所有文件名示例">获取路径中所有文件名示例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> lfs </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"lfs"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">for</span><span class="pln"> filename </span><span class="kwd">in</span><span class="pln"> lfs</span><span class="pun">.</span><span class="pln">dir</span><span class="pun">(</span><span class="str">"/var/mobile"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">filename </span><span class="pun">~=</span><span class="pln"> </span><span class="str">".."</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> filename </span><span class="pun">~=</span><span class="pln"> </span><span class="str">"."</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">print</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><h4 id="获取文件夹属性示例">获取文件（夹）属性示例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> lfs </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"lfs"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> attr </span><span class="pun">=</span><span class="pln"> lfs</span><span class="pun">.</span><span class="pln">attributes</span><span class="pun">(</span><span class="str">"/var/mobile"</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"类型"</span><span class="pun">,</span><span class="pln"> attr</span><span class="pun">.</span><span class="pln">mode</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"最后访问时间"</span><span class="pun">,</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="str">"%Y-%m-%d %H:%M:%S"</span><span class="pun">,</span><span class="pln"> attr</span><span class="pun">.</span><span class="pln">access</span><span class="pun">))</span></code></li><li class="L6"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"最后修改时间"</span><span class="pun">,</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="str">"%Y-%m-%d %H:%M:%S"</span><span class="pun">,</span><span class="pln"> attr</span><span class="pun">.</span><span class="pln">modification</span><span class="pun">))</span></code></li><li class="L7"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="str">"最后状态变更时间"</span><span class="pun">,</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="str">"%Y-%m-%d %H:%M:%S"</span><span class="pun">,</span><span class="pln"> attr</span><span class="pun">.</span><span class="pln">change</span><span class="pun">))</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">print</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><h4 id="获取及切换脚本当前目录示例">获取及切换脚本当前目录示例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> lfs </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pln"> </span><span class="str">'lfs'</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">lfs</span><span class="pun">.</span><span class="pln">currentdir</span><span class="pun">())</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"/"</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="pln">lfs</span><span class="pun">.</span><span class="pln">chdir</span><span class="pun">(</span><span class="str">'/var/mobile/Media/1ferver/lua/scripts'</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="pln">lfs</span><span class="pun">.</span><span class="pln">currentdir</span><span class="pun">())</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"/var/mobile/Media/1ferver/lua/scripts"</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
</ul><hr><p data-anchor-id="lea4"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="vvhv" id="luasqlite3-模块">LuaSQLite3 模块</h3><ul data-anchor-id="pg11">
<li><p><a href="http://lua.sqlite.org/index.cgi/doc/tip/doc/lsqlite3.wiki" target="_blank">LuaSQLite3 手册地址</a></p></li>
<li><p>引用示例</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">local</span><span class="pln"> sqlite3 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'sqlite3'</span><span class="pun">)</span></code></li></ol></pre></li>
<li><h4 id="读取短信示例">读取短信示例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">local</span><span class="pln"> sqlite3 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'sqlite3'</span><span class="pun">)</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="kwd">local</span><span class="pln"> db </span><span class="pun">=</span><span class="pln"> sqlite3</span><span class="pun">.</span><span class="pln">open</span><span class="pun">(</span><span class="str">'/private/var/mobile/Library/SMS/sms.db'</span><span class="pun">)</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="kwd">local</span><span class="pln"> handle_map </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L5"><code><span class="kwd">local</span><span class="pln"> messages </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pln">db</span><span class="pun">:</span><span class="kwd">exec</span><span class="pun">(</span><span class="str">'select handle_id, text, date from message'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ud</span><span class="pun">,</span><span class="pln"> ncols</span><span class="pun">,</span><span class="pln"> values</span><span class="pun">,</span><span class="pln"> names</span><span class="pun">)</span></code></li><li class="L8"><code><span class="pln">    messages</span><span class="pun">[#</span><span class="pln">messages </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">        handle_id </span><span class="pun">=</span><span class="pln"> values</span><span class="pun">[</span><span class="lit">1</span><span class="pun">],</span></code></li><li class="L0"><code><span class="pln">        text </span><span class="pun">=</span><span class="pln"> values</span><span class="pun">[</span><span class="lit">2</span><span class="pun">],</span></code></li><li class="L1"><code><span class="pln">        date </span><span class="pun">=</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="str">"%Y-%m-%d %H:%M:%S"</span><span class="pun">,</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">time</span><span class="pun">({</span><span class="pln">year </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2001</span><span class="pun">,</span><span class="pln"> month </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> day </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">})</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> tonumber</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]))</span></code></li><li class="L2"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> sqlite3</span><span class="pun">.</span><span class="pln">OK</span></code></li><li class="L4"><code><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln">db</span><span class="pun">:</span><span class="kwd">exec</span><span class="pun">(</span><span class="str">'select ROWID, id from handle'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ud</span><span class="pun">,</span><span class="pln"> ncols</span><span class="pun">,</span><span class="pln"> values</span><span class="pun">,</span><span class="pln"> names</span><span class="pun">)</span></code></li><li class="L7"><code><span class="pln">    handle_map</span><span class="pun">[</span><span class="pln">values</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> values</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span></code></li><li class="L8"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> sqlite3</span><span class="pun">.</span><span class="pln">OK</span></code></li><li class="L9"><code><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln">v </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">messages</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L2"><code><span class="pln">    v</span><span class="pun">.</span><span class="pln">id </span><span class="pun">=</span><span class="pln"> handle_map</span><span class="pun">[</span><span class="pln">v</span><span class="pun">.</span><span class="pln">handle_id</span><span class="pun">]</span></code></li><li class="L3"><code><span class="pln">    v</span><span class="pun">.</span><span class="pln">handle_id </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">nil</span></code></li><li class="L4"><code><span class="kwd">end</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="kwd">local</span><span class="pln"> results </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L7"><code><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln">v </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">messages</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L8"><code><span class="pln">    results</span><span class="pun">[#</span><span class="pln">results </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="str">"[%s](%s):%s"</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">.</span><span class="pln">date</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">.</span><span class="pln">id</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">.</span><span class="pln">text</span><span class="pun">)</span></code></li><li class="L9"><code><span class="kwd">end</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="pln">table</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="pln">results</span><span class="pun">,</span><span class="pln"> </span><span class="str">'\n'</span><span class="pun">))</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#显示提示文字-systoast"><code>sys.toast</code></a>、<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-table.concat" target="_blank">table.concat</a></p></li>
</ul><hr><p data-anchor-id="0hh3"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="ox8g" id="lcurl-模块">lcurl 模块</h3><p data-anchor-id="4hxa"><strong>这个模块在 1.1.0-1 版以上方可使用</strong></p><ul data-anchor-id="m5ib">
<li><p><a href="http://lua-curl.github.io/lcurl/modules/lcurl.html" target="_blank">lcurl 手册地址</a></p></li>
<li><h4 id="uriencode-和-uridecode">URIEncode 和 URIDecode</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> URL</span><span class="pun">编码</span><span class="pln"> URI</span><span class="pun">编码</span><span class="pln"> </span><span class="pun">百分号编码</span><span class="pln"> </span><span class="typ">URLEncode</span><span class="pln"> </span><span class="typ">URLDecode</span><span class="pln"> </span><span class="typ">URLEscape</span><span class="pln"> </span><span class="typ">URIEscape</span><span class="pln"> </span><span class="typ">PercentEscape</span></code></li><li class="L1"><code class="language-lua"><span class="kwd">local</span><span class="pln"> curl </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'lcurl'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="kwd">local</span><span class="pln"> e </span><span class="pun">=</span><span class="pln"> curl</span><span class="pun">.</span><span class="pln">easy</span><span class="pun">()</span></code></li><li class="L3"><code class="language-lua"></code></li><li class="L4"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="pln">e</span><span class="pun">:</span><span class="pln">escape</span><span class="pun">(</span><span class="str">'abcd$%^&amp;*()'</span><span class="pun">))</span><span class="pln">                 </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"abcd%24%25%5E%26%2A%28%29"</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="kwd">print</span><span class="pun">(</span><span class="pln">e</span><span class="pun">:</span><span class="pln">unescape</span><span class="pun">(</span><span class="str">'abcd%24%25%5E%26%2A%28%29'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">输出</span><span class="pln"> </span><span class="str">"abcd$%^&amp;*()"</span></code></li><li class="L7"><code class="language-lua"></code></li><li class="L8"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">alert</span><span class="pun">(</span><span class="kwd">print</span><span class="pun">.</span><span class="kwd">out</span><span class="pun">())</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="#弹出系统提示-sysalert"><code>sys.alert</code></a></p></li>
<li><h4 id="模拟触摸精灵-httpget-实现示例">模拟触摸精灵 httpGet 实现示例</h4>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">function</span><span class="pln"> httpGet</span><span class="pun">(</span><span class="pln">url</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">也能请求</span><span class="pln"> ftp </span><span class="pun">资源（此函数已内置，不需要再拷贝到自己脚本中，只是</span><span class="pln"> lcurl </span><span class="pun">使用实例而已）</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">url</span><span class="pun">:</span><span class="kwd">sub</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">)</span><span class="pln"> </span><span class="pun">~=</span><span class="pln"> </span><span class="str">"ftp://"</span><span class="pln"> </span><span class="kwd">and</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        url</span><span class="pun">:</span><span class="kwd">sub</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">)</span><span class="pln"> </span><span class="pun">~=</span><span class="pln"> </span><span class="str">"http://"</span><span class="pln"> </span><span class="kwd">and</span></code></li><li class="L3"><code class="language-lua"><span class="pln">        url</span><span class="pun">:</span><span class="kwd">sub</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">)</span><span class="pln"> </span><span class="pun">~=</span><span class="pln"> </span><span class="str">"https://"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="language-lua"><span class="pln">        url </span><span class="pun">=</span><span class="pln"> </span><span class="str">"http://"</span><span class="pun">..</span><span class="pln">url</span></code></li><li class="L5"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> curl </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">"curl.safe"</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> </span><span class="typ">buffer_t</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> write_f </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="typ">buffer_t</span><span class="pun">[#</span><span class="typ">buffer_t</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> s</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> noerr</span><span class="pun">,</span><span class="pln"> err </span><span class="pun">=</span><span class="pln"> pcall</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="pln">        curl</span><span class="pun">.</span><span class="pln">easy</span><span class="pun">()</span></code></li><li class="L3"><code class="language-lua"><span class="pln">            </span><span class="pun">:</span><span class="pln">setopt</span><span class="pun">(</span><span class="pln">curl</span><span class="pun">.</span><span class="pln">OPT_URL</span><span class="pun">,</span><span class="pln"> url</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">            </span><span class="pun">:</span><span class="pln">setopt</span><span class="pun">(</span><span class="pln">curl</span><span class="pun">.</span><span class="pln">OPT_CONNECTTIMEOUT</span><span class="pun">,</span><span class="pln"> </span><span class="lit">60</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pln">            </span><span class="pun">:</span><span class="pln">setopt_writefunction</span><span class="pun">(</span><span class="pln">write_f</span><span class="pun">)</span></code></li><li class="L6"><code class="language-lua"><span class="pln">        </span><span class="pun">:</span><span class="pln">perform</span><span class="pun">()</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">noerr</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L9"><code class="language-lua"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> table</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">(</span><span class="typ">buffer_t</span><span class="pun">)</span></code></li><li class="L0"><code class="language-lua"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L1"><code class="language-lua"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">nil</span><span class="pun">,</span><span class="pln"> err</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li></ol></pre>

<p><strong>注</strong>：上述代码中使用了非本章函数 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-table.concat" target="_blank">table.concat</a></p></li>
</ul><hr><p data-anchor-id="8ksn"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="izl1" id="更多的编译好的开源扩展库">更多的编译好的开源扩展库</h2><hr><p data-anchor-id="xcz1"><br></p><ul data-anchor-id="1t3v">
<li><a href="http://static.zybuluo.com/xxtouch/cxbtsovntpnmu0brgf8j1zheqydt6wsx5fy8t6wb6goldxx7/XML%E6%A0%BC%E5%BC%8F%E6%89%A9%E5%B1%95%E5%BA%93.zip" target="_blank">XML格式扩展库.zip-15.43kB</a> <br>
已兼容 iOS 11 <br>
项目源码：<a href="https://github.com/LuaDist/luaxml" target="_blank">https://github.com/LuaDist/luaxml</a></li>
</ul><hr><ul data-anchor-id="6eho">
<li><a href="http://static.zybuluo.com/xxtouch/ewzac9vbpv0xo317kn2sngc9qlhziy6v8b6p2vg1hy5p8vxi/ZIP%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%BA%93.zip" target="_blank">ZIP压缩文件操作库.zip-74.140.4kB</a> <br>
已兼容 iOS 11 <br>
项目源码：<a href="https://github.com/brimworks/lua-zip" target="_blank">https://github.com/brimworks/lua-zip</a></li>
</ul><hr><ul data-anchor-id="aijv">
<li><a href="http://static.zybuluo.com/xxtouch/fv8gj5ok4n4nhiv80qye1zph2c147n6mkszsposb3v7ortn5/zlib%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8E%8B%E7%BC%A9%E8%A7%A3%E5%8E%8B%E5%BA%93.zip" target="_blank">zlib字符串压缩解压库.zip-176.9kB</a> <br>
已兼容 iOS 11 <br>
项目源码：<a href="https://github.com/LuaDist/lzlib" target="_blank">https://github.com/LuaDist/lzlib</a></li>
</ul><hr><ul data-anchor-id="0cz9">
<li><a href="http://static.zybuluo.com/xxtouch/m8ewask2hrdxs4xpp5hfentf0falhsej8xfqgd63vbnhoqdb/ZeroMQ_ZMQ_%C3%98MQ_%E6%89%A9%E5%B1%95%E5%BA%93.zip" target="_blank">ZeroMQ_ZMQ_ØMQ_扩展库.zip-477.96.6kB</a> <br>
已兼容 iOS 11 <br>
项目源码：<a href="https://github.com/zeromq/lzmq" target="_blank">https://github.com/zeromq/lzmq</a></li>
</ul><hr><ul data-anchor-id="nmo0">
<li><a href="http://static.zybuluo.com/xxtouch/mu8qj56vm83c3f6i7rjdwxcgoaaudnfjrl40mm45co9sgyu4/OpenSSL%E6%89%A9%E5%B1%95%E5%BA%93.zip" target="_blank">OpenSSL扩展库.zip-1603.52kB</a> <br>
已兼容 iOS 11 <br>
项目源码：<a href="https://github.com/zhaozg/lua-openssl" target="_blank">https://github.com/zhaozg/lua-openssl</a></li>
</ul><hr><ul data-anchor-id="5ybl">
<li><a href="http://static.zybuluo.com/xxtouch/qcroam449jtiq2j3rbzcuy4olyvkg7xbrshlkt5chrbnxhvn/UNIX%E7%B3%BB%E7%BB%9FAPI%E5%AF%B9%E6%8E%A5%E5%BA%93.zip" target="_blank">UNIX系统API对接库.zip-986.9kB</a> <br>
已兼容 iOS 11 <br>
项目源码：<a href="https://github.com/wahern/lunix" target="_blank">https://github.com/wahern/lunix</a> <br>
使用文档：<a href="http://25thandclement.com/~william/projects/lunix.pdf" target="_blank">http://25thandclement.com/~william/projects/lunix.pdf</a></li>
</ul><hr><ul data-anchor-id="r3bi">
<li><a href="http://static.zybuluo.com/xxtouch/5vc0t7hb9vhnnln8nlwcfagkecyewvmj70om4tfziuhigohr/POSIX%E6%A0%87%E5%87%86API%E6%89%A9%E5%B1%95%E5%BA%93.zip" target="_blank">POSIX标准API扩展库.zip-3664.7kB</a> <br>
已兼容 iOS 11 <br>
项目源码：<a href="https://github.com/luaposix/luaposix" target="_blank">https://github.com/luaposix/luaposix</a> <br>
使用文档：<a href="http://luaposix.github.io/luaposix" target="_blank">http://luaposix.github.io/luaposix</a></li>
</ul><hr><ul data-anchor-id="i0b4">
<li><a href="http://static.zybuluo.com/xxtouch/ez5rlsx3v5ci2i5eacb92fgooq5fee07d9a2uknl6faipj8g/MySQL%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%89%A9%E5%B1%95%E5%BA%93.zip" target="_blank">MySQL客户端扩展库.zip-1767.26.4kB</a> <br>
已兼容 iOS 11 <br>
项目源码：<a href="https://github.com/keplerproject/luasql" target="_blank">https://github.com/keplerproject/luasql</a> <br>
使用文档：<a href="http://keplerproject.github.io/luasql/manual.html" target="_blank">http://keplerproject.github.io/luasql/manual.html</a></li>
</ul><hr><p data-anchor-id="4mdh"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h2 data-anchor-id="lqpk" id="附录">附录</h2><div class="md-section-divider"></div><h3 data-anchor-id="wkj4" id="开发及周边工具下载">开发及周边工具下载</h3><ul data-anchor-id="w39b">
<li><p><a href="https://www.xxtouch.com/xxtstudio" target="_blank">全平台编辑器、脚本制作工具、集成开发环境下载页</a></p></li>
<li><p>Windows 平台工具</p>

<blockquote class="white-blockquote">
  <ul><li><a href="https://www.xxtouch.com/xxtcc" target="_blank">XXT 局域网集中控下载页</a></li>
  <li><a href="https://apt-pages.xxtouch.com/others/XXTouch%E7%94%B5%E8%84%91%E7%AB%AF%E5%B7%A5%E5%85%B7%E9%9B%86/XXT%20%E5%8F%96%E8%89%B2%E5%99%A8%201.0.12%20Windows%20%E7%89%88.zip" target="_blank">XXT 取色器 1.0.12 Windows 版.zip-51.63MB</a></li>
  <li><a href="http://static.zybuluo.com/xxtouch/lxhbvpm1d123y0mhwps3fpl7/XXT%20%E7%BD%91%E7%BB%9C%E6%8E%88%E6%9D%83%201.12.0.1.zip" target="_blank">XXT 网络授权 1.12.0.1.zip-2397.9kB</a></li>
  <li><a href="http://static.zybuluo.com/xxtouch/yv2hetf34597w9m25aetw7sa/%E5%A4%A7%E6%BC%A0%E7%BB%BC%E5%90%88%E5%B7%A5%E5%85%B7.zip" target="_blank">大漠综合工具.zip-1520.5kB</a></li></ul>
</blockquote></li>
<li><p>其它平台工具</p>

<blockquote class="white-blockquote">
  <ul><li><a href="http://static.zybuluo.com/xxtouch/ga7c9j9u599z1zc4b8ct9bcv/XXT%20%E5%8F%96%E8%89%B2%E5%99%A8%201.0.12%20MacOS%20%E7%89%88%EF%BC%88%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85%20Java%EF%BC%89.zip" target="_blank">XXT 取色器 1.0.12 macOS 版（需要安装 Java）.zip-5981.3kB</a></li>
  <li><a href="http://static.zybuluo.com/xxtouch/hoaoqgzr8twdlu34h9xmmjyd/XXT%20%E5%8F%96%E8%89%B2%E5%99%A8%201.0.12%20Java%20%E6%97%A0%E7%BB%91%E7%89%88.zip" target="_blank">XXT 取色器 1.0.12 Java 无绑版.zip-5733.2kB</a></li></ul>
</blockquote></li>
</ul><hr><p data-anchor-id="cowf"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="lirf" id="扩展库及远程扩展接口">扩展库及远程扩展接口</h3><ul data-anchor-id="a8o3">
<li>扩展库 <br>
<ul><li>除 XXTouch 团队已编译的强大的扩展库以外</li>
<li>开发者还可自行为 XXTouch 扩展更多的功能</li>
<li>有兴趣赶快下载下面模板尝试一下吧！ <br>


<blockquote class="white-blockquote">
  <p><a href="http://static.zybuluo.com/xxtouch/ja3d8p1gwzkxf6zmo6vozkgt/Lua%E6%8F%92%E4%BB%B6%E6%A8%A1%E6%9D%BF.zip" target="_blank">Lua插件模板.zip-1844.3kB</a></p></blockquote></li></ul></li>
  </ul><br><br><p></p><ul data-anchor-id="mg79">
<li>远程扩展接口 <br>
<ul><li>如果有兴趣给 XXTouch 开发周边平台配套软件</li>
<li>例如：基于局域网的 集中控制系统、截图取色工具、脚本开发调试环境、设备间数据共享</li>
<li>可以看这里：<a href="https://www.xxtouch.com/docs/openapi" target="_blank">https://www.xxtouch.com/docs/openapi</a></li></ul></li>
</ul><p data-anchor-id="z078"><br></p><hr><p data-anchor-id="nxo5"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="fn5r" id="脚本守护模式是什么">脚本守护模式是什么？</h3><ul data-anchor-id="vapn">
<li>脚本守护模式会保证脚本在被外力因素（如服务程序崩溃、设备断电）终止后，设备再次恢复正常状态的时候能够再次启动脚本。例外情形如下： <br>
<ul><li>设备断电后再无充电</li>
<li>设备开不了机</li>
<li>设备重启后丢失越狱状态</li>
<li>设备处于安全模式</li>
<li>设备有锁屏密码并重启</li>
<li>用户终止</li>
<li>脚本因运行期错误终止</li></ul></li>
<li><p>守护模式会先于开机启动脚本启动，所以在设备发生故障重启后可以在脚本头部加上如下代码以确保当次脚本启动的时候，屏幕已经处于解锁状态</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">device</span><span class="pun">.</span><span class="pln">is_screen_locked</span><span class="pun">())</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    device</span><span class="pun">.</span><span class="pln">unlock_screen</span><span class="pun">()</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    sys</span><span class="pun">.</span><span class="pln">msleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"><span class="pln">sys</span><span class="pun">.</span><span class="pln">toast</span><span class="pun">(</span><span class="str">"屏幕已解锁，脚本开始"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">这下面就可以开始脚本</span></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">...</span></code></li></ol></pre></li>
</ul><hr><p data-anchor-id="zl3i"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="8evd" id="开机启动的时机说明">开机启动的时机说明</h3><ul data-anchor-id="fu4w">
<li>开机启动脚本需要主屏幕完全准备好之后才会运作，一般而言会在开机之后延迟一会儿再启动。</li>
<li>较为常见的开机不启动情形如下： <br>
<ul><li>无法进入桌面</li>
<li>开机后进入安全模式</li>
<li>设置了锁屏密码</li></ul></li>
</ul><hr><p data-anchor-id="1enr"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="bs2s" id="url-scheme-的相关应用">"URL Scheme" 的相关应用</h3><p data-anchor-id="j2y0">具体使用方法参考：<a href="#前台打开一个-url-appopenurl">app.open_url</a></p><table data-anchor-id="y2v5" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>URL Scheme</th>
 <th>跳转到</th>
</tr>
</thead>
<tbody><tr>
 <td>prefs:root=WIFI</td>
 <td>设置-WiFi（或无线局域网）</td>
</tr>
<tr>
 <td>prefs:root=Bluetooth</td>
 <td>设置-蓝牙</td>
</tr>
<tr>
 <td>prefs:root=INTERNET_TETHERING</td>
 <td>设置-个人热点</td>
</tr>
<tr>
 <td>prefs:root=Wallpaper</td>
 <td>设置-墙纸与亮度</td>
</tr>
<tr>
 <td>prefs:root=Sounds</td>
 <td>设置-声音</td>
</tr>
<tr>
 <td>prefs:root=Sounds&amp;path=Ringtone</td>
 <td>设置-声音-电话铃声</td>
</tr>
<tr>
 <td>prefs:root=Photos</td>
 <td>设置-照片与相机</td>
</tr>
<tr>
 <td>prefs:root=STORE</td>
 <td>设置-iTunes Store 和 App Store</td>
</tr>
<tr>
 <td>prefs:root=Safari</td>
 <td>设置-Safari</td>
</tr>
<tr>
 <td>prefs:root=MUSIC</td>
 <td>设置-音乐</td>
</tr>
<tr>
 <td>prefs:root=MUSIC&amp;path=EQ</td>
 <td>设置-音乐-均衡器</td>
</tr>
<tr>
 <td>prefs:root=VIDEO</td>
 <td>设置-视频</td>
</tr>
<tr>
 <td>prefs:root=NOTES</td>
 <td>设置-备忘录</td>
</tr>
<tr>
 <td>prefs:root=Phone</td>
 <td>设置-电话</td>
</tr>
<tr>
 <td>prefs:root=CASTLE</td>
 <td>设置-iCloud</td>
</tr>
<tr>
 <td>prefs:root=CASTLE&amp;path=STORAGE_AND_BACKUP</td>
 <td>设置-iCloud-存储与备份</td>
</tr>
<tr>
 <td>prefs:root=NOTIFICATIONS_ID</td>
 <td>设置-通知中心</td>
</tr>
<tr>
 <td>prefs:root=ACCOUNT_SETTINGS</td>
 <td>设置-邮件、日历、通讯录</td>
</tr>
<tr>
 <td>prefs:root=LOCATION_SERVICES</td>
 <td>设置-定位服务</td>
</tr>
<tr>
 <td>prefs:root=MESSAGES</td>
 <td>设置-信息</td>
</tr>
<tr>
 <td>prefs:root=GAMECENTER</td>
 <td>设置-Game Center</td>
</tr>
<tr>
 <td>prefs:root=General</td>
 <td>设置-通用</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=About</td>
 <td>设置-通用-关于本机</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=SOFTWARE_UPDATE_LINK</td>
 <td>设置-通用-软件更新</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=ACCESSIBILITY</td>
 <td>设置-通用-辅助功能</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=ACCESSIBILITY/REDUCE_MOTION</td>
 <td>设置-通用-辅助功能-减少动态效果</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=ACCESSIBILITY/ENHANCE_BACKGROUND_CONTRAST</td>
 <td>设置-通用-辅助功能-增强对比度</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=AUTO_CONTENT_DOWNLOAD</td>
 <td>设置-通用-后台应用刷新</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=USAGE</td>
 <td>设置-通用-用量</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=AUTOLOCK</td>
 <td>设置-通用-自动锁定</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=DATE_AND_TIME</td>
 <td>设置-通用-日期与时间</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=Keyboard</td>
 <td>设置-通用-键盘</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=INTERNATIONAL</td>
 <td>设置-通用-多语言环境</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=VPN</td>
 <td>设置-通用-VPN</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=Bluetooth</td>
 <td>设置-通用-蓝牙</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=Network</td>
 <td>设置-通用-网络</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=Network/VPN</td>
 <td>设置-通用-网络-VPN</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=ManagedConfigurationList</td>
 <td>设置-通用-描述文件</td>
</tr>
<tr>
 <td>prefs:root=General&amp;path=Reset</td>
 <td>设置-通用-还原</td>
</tr>
</tbody></table><hr><p data-anchor-id="d57g"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="n0ml" id="osdate-日期格式化相关">"<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-os.date" target="_blank">os.date</a>" 日期格式化相关</h3><p data-anchor-id="r7x1"><a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-os.date" target="_blank">os.date</a> 第二个参数是可选参数，默认为当前时间</p><table data-anchor-id="h48e" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>格式</th>
 <th>示例</th>
 <th>描述</th>
 <th>结果</th>
</tr>
</thead>
<tbody><tr>
 <td>%Y-%m-%d %H:%M:%S</td>
 <td>os.date("%Y-%m-%d %H:%M:%S", 1487356783)</td>
 <td>一种常用日期时间格式</td>
 <td>2017-02-18 02:39:43</td>
</tr>
<tr>
 <td>%Y-%m-%d</td>
 <td>os.date("%Y-%m-%d", 1487356783)</td>
 <td>一种常用日期格式</td>
 <td>2017-02-18</td>
</tr>
<tr>
 <td>%a</td>
 <td>os.date("%a", 1487356783)</td>
 <td>短星期名</td>
 <td>Sat</td>
</tr>
<tr>
 <td>%A</td>
 <td>os.date("%A", 1487356783)</td>
 <td>全星期名</td>
 <td>Saturday</td>
</tr>
<tr>
 <td>%b</td>
 <td>os.date("%b", 1487356783)</td>
 <td>简写的月份名</td>
 <td>Feb</td>
</tr>
<tr>
 <td>%B</td>
 <td>os.date("%B", 1487356783)</td>
 <td>月份的全称</td>
 <td>February</td>
</tr>
<tr>
 <td>%c</td>
 <td>os.date("%c", 1487356783)</td>
 <td>标准的日期的时间串</td>
 <td>Sat Feb 18 02:39:43 2017</td>
</tr>
<tr>
 <td>%d</td>
 <td>os.date("%d", 1487356783)</td>
 <td>月的天[01-31]</td>
 <td>18</td>
</tr>
<tr>
 <td>%H</td>
 <td>os.date("%H", 1487356783)</td>
 <td>24小时制的时[00-23]</td>
 <td>02</td>
</tr>
<tr>
 <td>%I</td>
 <td>os.date("%I", 1487356783)</td>
 <td>12小时制的时[01-12]</td>
 <td>02</td>
</tr>
<tr>
 <td>%j</td>
 <td>os.date("%j", 1487356783)</td>
 <td>年的天[001-366]</td>
 <td>049</td>
</tr>
<tr>
 <td>%M</td>
 <td>os.date("%M", 1487356783)</td>
 <td>分钟[00-59]</td>
 <td>39</td>
</tr>
<tr>
 <td>%m</td>
 <td>os.date("%m", 1487356783)</td>
 <td>月份[01-12]</td>
 <td>02</td>
</tr>
<tr>
 <td>%p</td>
 <td>os.date("%p", 1487356783)</td>
 <td>上午AM 下午PM</td>
 <td>AM</td>
</tr>
<tr>
 <td>%S</td>
 <td>os.date("%S", 1487356783)</td>
 <td>秒钟[00-61]</td>
 <td>43</td>
</tr>
<tr>
 <td>%w</td>
 <td>os.date("%w", 1487356783)</td>
 <td>星期几（星期日为0）[0-6]</td>
 <td>6</td>
</tr>
<tr>
 <td>%x</td>
 <td>os.date("%x", 1487356783)</td>
 <td>标准的日期串</td>
 <td>02/18/17</td>
</tr>
<tr>
 <td>%X</td>
 <td>os.date("%X", 1487356783)</td>
 <td>标准的时间串</td>
 <td>02:39:43</td>
</tr>
<tr>
 <td>%y</td>
 <td>os.date("%y", 1487356783)</td>
 <td>不带世纪的年份</td>
 <td>17</td>
</tr>
<tr>
 <td>%Y</td>
 <td>os.date("%Y", 1487356783)</td>
 <td>带世纪部分的年份</td>
 <td>2017</td>
</tr>
<tr>
 <td>%%</td>
 <td>os.date("%%", 1487356783)</td>
 <td>百分号</td>
 <td>%</td>
</tr>
</tbody></table><p data-anchor-id="607t">更多 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-os.date" target="_blank">os.date</a> 使用示例 <br>
<a href="#显示提示文字-systoast"><code>实时显示当前日期时间</code></a></p><hr><p data-anchor-id="fif0"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="ehps" id="osexecute-相关示例代码">"<a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-os.execute" target="_blank">os.execute</a>" 相关示例代码</h3><div class="md-section-divider"></div><h4 data-anchor-id="r7pt" id="重启设备">重启设备</h4><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="dvy2" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'reboot'</span><span class="pun">)</span></code></li></ol></pre><div class="md-section-divider"></div><h4 data-anchor-id="8n9g" id="注销设备">注销设备</h4><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="q5xs" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'killall -9 SpringBoard backboardd'</span><span class="pun">)</span></code></li></ol></pre><div class="md-section-divider"></div><h4 data-anchor-id="htn9" id="重建图标缓存">重建图标缓存</h4><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="om2x" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'su mobile -c uicache'</span><span class="pun">)</span></code></li></ol></pre><div class="md-section-divider"></div><h4 data-anchor-id="gtig" id="创建脚本日志符号链接到脚本目录">创建脚本日志符号链接到脚本目录</h4><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ig62" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pln">os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'ln -s /private/var/mobile/Media/1ferver/log/sys.log /private/var/mobile/Media/1ferver/lua/scripts/脚本日志.txt'</span><span class="pun">)</span></code></li></ol></pre><div class="md-section-divider"></div><h4 data-anchor-id="mfc7" id="常用操作封装">常用操作封装</h4><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="jftg" style=""><ol class="linenums"><li class="L0"><code class="language-lua"><span class="pun">--[[</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="pun">删除文件</span><span class="pln"> </span><span class="pun">文件删除</span><span class="pln"> </span><span class="pun">删除目录</span><span class="pln"> </span><span class="pun">重命名文件</span><span class="pln"> </span><span class="pun">文件重命名</span><span class="pln"> </span><span class="pun">目录重命名</span><span class="pln"> </span><span class="pun">重命名目录</span><span class="pln"> </span><span class="pun">文件夹重命名</span><span class="pln"> </span><span class="pun">重命名文件夹</span><span class="pln"> </span><span class="pun">移动文件</span><span class="pln"> </span><span class="pun">文件移动</span><span class="pln"> </span><span class="pun">移动目录</span><span class="pln"> </span><span class="pun">目录移动</span><span class="pln"> </span><span class="pun">移动文件夹</span><span class="pln"> </span><span class="pun">文件夹移动</span><span class="pln"> </span><span class="pun">拷贝文件</span><span class="pln"> </span><span class="pun">文件拷贝</span><span class="pln"> </span><span class="pun">复制文件</span><span class="pln"> </span><span class="pun">文件复制</span><span class="pln"> </span><span class="pun">新建目录</span><span class="pln"> </span><span class="pun">创建目录</span><span class="pln"> </span><span class="pun">拷贝目录</span><span class="pln"> </span><span class="pun">目录拷贝</span><span class="pln"> </span><span class="pun">复制目录</span><span class="pln"> </span><span class="pun">目录复制</span><span class="pln"> </span><span class="pun">新建文件夹</span><span class="pln"> </span><span class="pun">创建文件夹</span><span class="pln"> </span><span class="pun">拷贝文件夹</span><span class="pln"> </span><span class="pun">文件夹拷贝</span><span class="pln"> </span><span class="pun">复制文件夹</span><span class="pln"> </span><span class="pun">文件夹复制</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="pun">以上是关键词，便于在手册中搜索到此处</span></code></li><li class="L3"><code class="language-lua"><span class="pun">--]]</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="kwd">local</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> sh_escape</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="typ">XXTouch</span><span class="pln"> </span><span class="pun">原创函数，未经</span><span class="pln"> </span><span class="typ">XXTouch</span><span class="pln"> </span><span class="pun">许可，可以用于商业用途</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    path </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">.</span><span class="pln">gsub</span><span class="pun">(</span><span class="pln">path</span><span class="pun">,</span><span class="pln"> </span><span class="str">"([ \\()&lt;&gt;'\"`#&amp;*;?~$])"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"\\%1"</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> path</span></code></li><li class="L8"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="kwd">function</span><span class="pln"> fdelete</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">删除一个文件或目录（递归删除子项）</span></code></li><li class="L1"><code class="language-lua"><span class="pln">    </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">type</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)==</span><span class="str">"string"</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> path</span><span class="pun">~=</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">'fremove 参数异常'</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"><span class="pln">    os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'rm -rf '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="pln">path</span><span class="pun">))</span></code></li><li class="L3"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="kwd">function</span><span class="pln"> frename</span><span class="pun">(</span><span class="kwd">from</span><span class="pun">,</span><span class="pln"> to</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">重命名（移动）一个文件或目录</span></code></li><li class="L6"><code class="language-lua"><span class="pln">    </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">type</span><span class="pun">(</span><span class="kwd">from</span><span class="pun">)==</span><span class="str">"string"</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">from</span><span class="pun">~=</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">'frename 参数 1 异常'</span><span class="pun">)</span></code></li><li class="L7"><code class="language-lua"><span class="pln">    </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">type</span><span class="pun">(</span><span class="pln">to</span><span class="pun">)==</span><span class="str">"string"</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> to</span><span class="pun">~=</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">'frename 参数 2 异常'</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'mv -f '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="kwd">from</span><span class="pun">)..</span><span class="str">" "</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="pln">to</span><span class="pun">))</span></code></li><li class="L9"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L0"><code class="language-lua"></code></li><li class="L1"><code class="language-lua"><span class="kwd">function</span><span class="pln"> fcopy</span><span class="pun">(</span><span class="kwd">from</span><span class="pun">,</span><span class="pln"> to</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">拷贝一个文件或目录</span><span class="pln"> </span><span class="pun">(递归拷贝子项)</span><span class="pln"> </span></code></li><li class="L2"><code class="language-lua"><span class="pln">    </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">type</span><span class="pun">(</span><span class="kwd">from</span><span class="pun">)==</span><span class="str">"string"</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">from</span><span class="pun">~=</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">'fcopy 参数 1 异常'</span><span class="pun">)</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">type</span><span class="pun">(</span><span class="pln">to</span><span class="pun">)==</span><span class="str">"string"</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> to</span><span class="pun">~=</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">'fcopy 参数 2 异常'</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'cp -rf '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="kwd">from</span><span class="pun">)..</span><span class="str">" "</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="pln">to</span><span class="pun">))</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="kwd">function</span><span class="pln"> mkdir</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">新建一个目录（递归创建子目录）</span></code></li><li class="L8"><code class="language-lua"><span class="pln">    </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">type</span><span class="pun">(</span><span class="pln">path</span><span class="pun">)==</span><span class="str">"string"</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> path</span><span class="pun">~=</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">'mkdir 参数异常'</span><span class="pun">)</span></code></li><li class="L9"><code class="language-lua"><span class="pln">    os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'mkdir -p '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="pln">path</span><span class="pun">))</span></code></li><li class="L0"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="kwd">function</span><span class="pln"> openurl</span><span class="pun">(</span><span class="pln">url</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">跳转到一个链接</span></code></li><li class="L3"><code class="language-lua"><span class="pln">    </span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">type</span><span class="pun">(</span><span class="pln">url</span><span class="pun">)==</span><span class="str">"string"</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> url</span><span class="pun">~=</span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">'openurl 参数异常'</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"><span class="pln">    os</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="str">'uiopen '</span><span class="pun">..</span><span class="pln">sh_escape</span><span class="pun">(</span><span class="pln">url</span><span class="pun">))</span></code></li><li class="L5"><code class="language-lua"><span class="kwd">end</span></code></li><li class="L6"><code class="language-lua"></code></li><li class="L7"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">以上是封装好的函数，拷贝到自己脚本前就可以用。</span></code></li><li class="L8"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">以下是使用方式（不用拷贝）</span></code></li><li class="L9"><code class="language-lua"></code></li><li class="L0"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">删除</span><span class="pln"> </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">mobile</span><span class="pun">/</span><span class="lit">1.png</span></code></li><li class="L1"><code class="language-lua"><span class="pln">fdelete</span><span class="pun">(</span><span class="str">"/var/mobile/1.png"</span><span class="pun">)</span></code></li><li class="L2"><code class="language-lua"></code></li><li class="L3"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">将</span><span class="pln"> </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">mobile</span><span class="pun">/</span><span class="lit">2.png</span><span class="pln"> </span><span class="pun">重命名为</span><span class="pln"> </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">mobile</span><span class="pun">/</span><span class="lit">1.png</span></code></li><li class="L4"><code class="language-lua"><span class="pln">frename</span><span class="pun">(</span><span class="str">"/var/mobile/2.png"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"/var/mobile/1.png"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-lua"></code></li><li class="L6"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">将</span><span class="pln"> </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">mobile</span><span class="pun">/</span><span class="lit">1.png</span><span class="pln"> </span><span class="pun">移动到</span><span class="pln"> </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">mobile</span><span class="pun">/</span><span class="typ">Media</span><span class="pun">/</span><span class="lit">1ferver</span><span class="pun">/</span><span class="pln">res</span><span class="pun">/</span><span class="lit">3.png</span></code></li><li class="L7"><code class="language-lua"><span class="pln">frename</span><span class="pun">(</span><span class="str">"/var/mobile/1.png"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"/var/mobile/Media/1ferver/res/3.png"</span><span class="pun">)</span></code></li><li class="L8"><code class="language-lua"></code></li><li class="L9"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">将</span><span class="pln"> </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">mobile</span><span class="pun">/</span><span class="lit">1.png</span><span class="pln"> </span><span class="pun">拷贝到</span><span class="pln"> </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">mobile</span><span class="pun">/</span><span class="typ">Media</span><span class="pun">/</span><span class="lit">1ferver</span><span class="pun">/</span><span class="pln">res</span><span class="pun">/</span><span class="lit">4.png</span></code></li><li class="L0"><code class="language-lua"><span class="pln">fcopy</span><span class="pun">(</span><span class="str">"/var/mobile/1.png"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"/var/mobile/Media/1ferver/res/4.png"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-lua"></code></li><li class="L2"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">建立</span><span class="pln"> </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">mobile</span><span class="pun">/</span><span class="lit">1</span><span class="pun">/</span><span class="lit">2</span><span class="pun">/</span><span class="lit">3</span><span class="pun">/</span><span class="lit">4</span><span class="pun">/</span><span class="pln"> </span><span class="pun">目录</span></code></li><li class="L3"><code class="language-lua"><span class="pln">mkdir</span><span class="pun">(</span><span class="str">"/var/mobile/1/2/3/4"</span><span class="pun">)</span></code></li><li class="L4"><code class="language-lua"></code></li><li class="L5"><code class="language-lua"><span class="pun">--</span><span class="pln"> </span><span class="pun">跳转到</span><span class="pln"> www</span><span class="pun">.</span><span class="pln">google</span><span class="pun">.</span><span class="pln">com</span></code></li><li class="L6"><code class="language-lua"><span class="pln">openurl</span><span class="pun">(</span><span class="str">"http://www.google.com"</span><span class="pun">)</span></code></li></ol></pre><hr><p data-anchor-id="ac6f"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="iz8v" id="string库-的相关应用">"<a href="http://cloudwu.github.io/lua53doc/manual.html#6.4" target="_blank">string库</a>" 的相关应用</h3><ul data-anchor-id="9md9">
<li>基本函数</li>
</ul><table data-anchor-id="hjh0" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>函数</th>
 <th>描述</th>
 <th>示例</th>
 <th>结果</th>
</tr>
</thead>
<tbody><tr>
 <td>len</td>
 <td>计算字符串长度</td>
 <td>string.len("abcd")</td>
 <td>4</td>
</tr>
<tr>
 <td>rep</td>
 <td>返回字符串s的n个拷贝</td>
 <td>string.rep("abcd",2)</td>
 <td>abcdabcd</td>
</tr>
<tr>
 <td>lower</td>
 <td>返回字符串全部字母小写</td>
 <td>string.lower("AbcD")</td>
 <td>abcd</td>
</tr>
<tr>
 <td>upper</td>
 <td>返回字符串全部字母大写</td>
 <td>string.upper("AbcD")</td>
 <td>ABCD</td>
</tr>
<tr>
 <td>format</td>
 <td>格式化字符串</td>
 <td>string.format("the value is:%d",4)</td>
 <td>the value is:4</td>
</tr>
<tr>
 <td>sub</td>
 <td>从字符串里截取字符串</td>
 <td>string.sub("abcd",2)</td>
 <td>bcd</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.sub("abcd",-2)</td>
 <td>cd</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.sub("abcd",2,-2)</td>
 <td>bc</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.sub("abcd",2,3)</td>
 <td>bc</td>
</tr>
<tr>
 <td>find</td>
 <td>在字符串中查找(显示位置)</td>
 <td>string.find("cdcdcdcd","ab")</td>
 <td>nil</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.find("cdcdcdcd","cd")</td>
 <td>1 2</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.find("cdcdcdcd","cd",7)</td>
 <td>7 8</td>
</tr>
<tr>
 <td>match</td>
 <td>在字符串中查找(显示内容)</td>
 <td>string.match("cdcdcdcd","ab")</td>
 <td>nil</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.match("cdcdcdcd","cd")</td>
 <td>cd</td>
</tr>
<tr>
 <td>gsub</td>
 <td>在字符串中替换</td>
 <td>string.gsub("abcdabcd","a","z")</td>
 <td>zbcdzbcd 2</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.gsub("aaaa","a","z",3)</td>
 <td>zzza 3</td>
</tr>
<tr>
 <td>byte</td>
 <td>返回字符的整数形式</td>
 <td>string.byte("ABCD",4)</td>
 <td>68</td>
</tr>
<tr>
 <td>char</td>
 <td>将整型数字转成字符并连接</td>
 <td>string.char(97,98,99,100)</td>
 <td>abcd</td>
</tr>
</tbody></table><ul data-anchor-id="u85r">
<li>基本模式串</li>
</ul><table data-anchor-id="7lqh" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>字符类</th>
 <th>描述</th>
 <th>示例</th>
 <th>结果</th>
</tr>
</thead>
<tbody><tr>
 <td>.</td>
 <td>任意字符</td>
 <td>string.find("",".")</td>
 <td>nil</td>
</tr>
<tr>
 <td>%s</td>
 <td>空白符</td>
 <td>string.find("ab cd","%s%s")</td>
 <td>3 4</td>
</tr>
<tr>
 <td>%S</td>
 <td>非空白符</td>
 <td>string.find("ab cd","%S%S")</td>
 <td>1 2</td>
</tr>
<tr>
 <td>%p</td>
 <td>标点字符</td>
 <td>string.find("ab,.cd","%p%p")</td>
 <td>3 4</td>
</tr>
<tr>
 <td>%P</td>
 <td>非标点字符</td>
 <td>string.find("ab,.cd","%P%P")</td>
 <td>1 2</td>
</tr>
<tr>
 <td>%c</td>
 <td>控制字符</td>
 <td>string.find("abcd\t\n","%c%c")</td>
 <td>5 6</td>
</tr>
<tr>
 <td>%C</td>
 <td>非控制字符</td>
 <td>string.find("\t\nabcd","%C%C")</td>
 <td>3 4</td>
</tr>
<tr>
 <td>%d</td>
 <td>数字</td>
 <td>string.find("abcd12","%d%d")</td>
 <td>5 6</td>
</tr>
<tr>
 <td>%D</td>
 <td>非数字</td>
 <td>string.find("12abcd","%D%D")</td>
 <td>3 4</td>
</tr>
<tr>
 <td>%x</td>
 <td>十六进制数字</td>
 <td>string.find("efgh","%x%x")</td>
 <td>1 2</td>
</tr>
<tr>
 <td>%X</td>
 <td>非十六进制数字</td>
 <td>string.find("efgh","%X%X")</td>
 <td>3 4</td>
</tr>
<tr>
 <td>%a</td>
 <td>字母</td>
 <td>string.find("AB12","%a%a")</td>
 <td>1 2</td>
</tr>
<tr>
 <td>%A</td>
 <td>非字母</td>
 <td>string.find("AB12","%A%A")</td>
 <td>3 4</td>
</tr>
<tr>
 <td>%l</td>
 <td>小写字母</td>
 <td>string.find("ABab","%l%l")</td>
 <td>3 4</td>
</tr>
<tr>
 <td>%L</td>
 <td>大写字母</td>
 <td>string.find("ABab","%L%L")</td>
 <td>1 2</td>
</tr>
<tr>
 <td>%u</td>
 <td>大写字母</td>
 <td>string.find("ABab","%u%u")</td>
 <td>1 2</td>
</tr>
<tr>
 <td>%U</td>
 <td>非大写字母</td>
 <td>string.find("ABab","%U%U")</td>
 <td>3 4</td>
</tr>
<tr>
 <td>%w</td>
 <td>字母和数字</td>
 <td>string.find("a1()","%w%w")</td>
 <td>1 2</td>
</tr>
<tr>
 <td>%W</td>
 <td>非字母非数字</td>
 <td>string.find("a1()","%W%W")</td>
 <td>3 4</td>
</tr>
</tbody></table><ul data-anchor-id="86nb">
<li>转义字符%</li>
</ul><table data-anchor-id="a2ux" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>字符类</th>
 <th>描述</th>
 <th>示例</th>
 <th>结果</th>
</tr>
</thead>
<tbody><tr>
 <td>%</td>
 <td>转义字符</td>
 <td>string.find("abc%..","%%")</td>
 <td>4 4</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.find("abc..d","%.%.")</td>
 <td>4 5</td>
</tr>
</tbody></table><ul data-anchor-id="6t6d">
<li>用[]创建字符集，"-"为连字符，"^"表示字符集的补集</li>
</ul><table data-anchor-id="2yhk" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>字符类</th>
 <th>描述</th>
 <th>示例</th>
 <th>结果</th>
</tr>
</thead>
<tbody><tr>
 <td>[01]</td>
 <td>匹配二进制数</td>
 <td>string.find("32123","[01]")</td>
 <td>3 3</td>
</tr>
<tr>
 <td>[AB][CD]</td>
 <td>匹配AC、AD、BC、BD</td>
 <td>string.find("ABCDEF","[AB][CD]")</td>
 <td>2 3</td>
</tr>
<tr>
 <td>[[]]</td>
 <td>匹配一对方括号[]</td>
 <td>string.find("ABC[]D","[[]]")</td>
 <td>4 5</td>
</tr>
<tr>
 <td>[1-3]</td>
 <td>匹配数字1-3</td>
 <td>string.find("312","[1-3][1-3][1-3]")</td>
 <td>1 3</td>
</tr>
<tr>
 <td>[b-d]</td>
 <td>匹配字母b-d</td>
 <td>string.find("dbc","[b-d][b-d][b-d]")</td>
 <td>1 3</td>
</tr>
<tr>
 <td>[^%s]</td>
 <td>匹配任意非空字符</td>
 <td>string.find(" a ","[^%s]")</td>
 <td>3 3</td>
</tr>
<tr>
 <td>[^%d]</td>
 <td>匹配任意非数字字符</td>
 <td>string.find("123a","[^%d]")</td>
 <td>4 4</td>
</tr>
<tr>
 <td>[^%a]</td>
 <td>匹配任意非字母字符</td>
 <td>string.find("abc1","[^%a]")</td>
 <td>4 4</td>
</tr>
</tbody></table><ul data-anchor-id="ulw4">
<li>用"()"进行捕获</li>
</ul><table data-anchor-id="7n73" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>字符类</th>
 <th>描述</th>
 <th>示例</th>
 <th>结果</th>
</tr>
</thead>
<tbody><tr>
 <td>()</td>
 <td>捕获字符串</td>
 <td>string.find("12ab","(%a%a)")</td>
 <td>3 4 ab</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.find("ab12","(%d%d)")</td>
 <td>3 4 12</td>
</tr>
</tbody></table><ul data-anchor-id="h8q2">
<li>模式修饰符</li>
</ul><table data-anchor-id="z0pz" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>修饰符</th>
 <th>描述</th>
 <th>示例</th>
 <th>结果</th>
</tr>
</thead>
<tbody><tr>
 <td>+</td>
 <td>表示1个或多个，匹配最多个</td>
 <td>string.find("aaabbb","(a+b)")</td>
 <td>1 4 aaab</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.find("cccbbb","(a+b)")</td>
 <td>nil</td>
</tr>
<tr>
 <td>-</td>
 <td>表示0个或多个，匹配最少个</td>
 <td>string.find("zzxyyy","(xy-)")</td>
 <td>3 3 x</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.find("zzzyyy","(x-y)")</td>
 <td>4 4 y</td>
</tr>
<tr>
 <td>*</td>
 <td>表示0个或多个，匹配最多个</td>
 <td>string.find("mmmnnn","(m*n)")</td>
 <td>1 4 mmmb</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.find("lllnnn","(m*n)")</td>
 <td>4 4 n</td>
</tr>
<tr>
 <td>?</td>
 <td>表示0个或1个</td>
 <td>string.find("aaabbb","(a?b)")</td>
 <td>3 4 ab</td>
</tr>
<tr>
 <td></td>
 <td></td>
 <td>string.find("cccbbb","(a?b)")</td>
 <td>4 4 b</td>
</tr>
</tbody></table><ul data-anchor-id="0ae2">
<li>match的常见用法</li>
</ul><table data-anchor-id="2tct" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>描述</th>
 <th>示例</th>
 <th>结果</th>
</tr>
</thead>
<tbody><tr>
 <td>匹配中文</td>
 <td>string.match("男女abc123","([^%w%p]+)")</td>
 <td>男女</td>
</tr>
<tr>
 <td>匹配英文</td>
 <td>string.match("男女abc123","(%a+)")</td>
 <td>abc</td>
</tr>
<tr>
 <td>匹配数字</td>
 <td>string.match("男女abc123","(%d+)")</td>
 <td>123</td>
</tr>
<tr>
 <td>匹配英文和数字</td>
 <td>string.match("男女abc123","(%w+)")</td>
 <td>abc123</td>
</tr>
</tbody></table><hr><p data-anchor-id="kuux"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="t77z" id="math库-的相关应用">"<a href="http://cloudwu.github.io/lua53doc/manual.html#6.7" target="_blank">math库</a>" 的相关应用</h3><table data-anchor-id="21sj" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>函数名</th>
 <th>描述</th>
 <th>示例</th>
 <th>结果</th>
</tr>
</thead>
<tbody><tr>
 <td>pi</td>
 <td>圆周率</td>
 <td>math.pi</td>
 <td>3.1415926535898</td>
</tr>
<tr>
 <td>abs</td>
 <td>取绝对值</td>
 <td>math.abs(-2012)</td>
 <td>2012</td>
</tr>
<tr>
 <td>ceil</td>
 <td>向上取整</td>
 <td>math.ceil(9.1)</td>
 <td>10</td>
</tr>
<tr>
 <td>floor</td>
 <td>向下取整</td>
 <td>math.floor(9.9)</td>
 <td>9</td>
</tr>
<tr>
 <td>max</td>
 <td>取参数最大值</td>
 <td>math.max(2,4,6,8)</td>
 <td>8</td>
</tr>
<tr>
 <td>min</td>
 <td>取参数最小值</td>
 <td>math.min(2,4,6,8)</td>
 <td>2</td>
</tr>
<tr>
 <td>pow</td>
 <td>计算x的y次幂</td>
 <td>math.pow(2,16)</td>
 <td>65536.0</td>
</tr>
<tr>
 <td>sqrt</td>
 <td>开平方</td>
 <td>math.sqrt(65536)</td>
 <td>256.0</td>
</tr>
<tr>
 <td>modf</td>
 <td>取整数和小数部分</td>
 <td>math.modf(20.12)</td>
 <td>20 0.12</td>
</tr>
<tr>
 <td>randomseed</td>
 <td>设随机数种子</td>
 <td>math.randomseed(os.time())</td>
 <td></td>
</tr>
<tr>
 <td>random</td>
 <td>取随机数</td>
 <td>math.random(5,90)</td>
 <td>5~90</td>
</tr>
<tr>
 <td>rad</td>
 <td>角度转弧度</td>
 <td>math.rad(180)</td>
 <td>3.1415926535898</td>
</tr>
<tr>
 <td>deg</td>
 <td>弧度转角度</td>
 <td>math.deg(math.pi)</td>
 <td>180.0</td>
</tr>
<tr>
 <td>exp</td>
 <td>e的x次方</td>
 <td>math.exp(4)</td>
 <td>54.598150033144</td>
</tr>
<tr>
 <td>log</td>
 <td>计算x的自然对数</td>
 <td>math.log(54.598150033144)</td>
 <td>4.0</td>
</tr>
<tr>
 <td>log10</td>
 <td>计算10为底，x的对数</td>
 <td>math.log10(1000)</td>
 <td>3.0</td>
</tr>
<tr>
 <td>frexp</td>
 <td>将参数拆成x * (2 ^ y)的形式</td>
 <td>math.frexp(160)</td>
 <td>0.625 8</td>
</tr>
<tr>
 <td>ldexp</td>
 <td>计算x * (2 ^ y)</td>
 <td>math.ldexp(0.625,8)</td>
 <td>160.0</td>
</tr>
<tr>
 <td>sin</td>
 <td>正弦</td>
 <td>math.sin(math.rad(30))</td>
 <td>0.5</td>
</tr>
<tr>
 <td>cos</td>
 <td>余弦</td>
 <td>math.cos(math.rad(60))</td>
 <td>0.5</td>
</tr>
<tr>
 <td>tan</td>
 <td>正切</td>
 <td>math.tan(math.rad(45))</td>
 <td>1.0</td>
</tr>
<tr>
 <td>asin</td>
 <td>反正弦</td>
 <td>math.deg(math.asin(0.5))</td>
 <td>30.0</td>
</tr>
<tr>
 <td>acos</td>
 <td>反余弦</td>
 <td>math.deg(math.acos(0.5))</td>
 <td>60.0</td>
</tr>
<tr>
 <td>atan</td>
 <td>反正切</td>
 <td>math.deg(math.atan(1))</td>
 <td>45.0</td>
</tr>
</tbody></table><hr><p data-anchor-id="b5q2"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h3 data-anchor-id="b43c" id="学习-lua-注意避开的坑">学习 Lua 注意避开的坑</h3><ul data-anchor-id="5bf2">
<li>数组下标是从 1 开始的（区别于 C 语言系的 0 开始）</li>
<li>string.len 不是取字符串的字符个数，而是取字节数</li>
<li>所有未初始化的变量都是 nil，对一个表中的值赋 nil 会从表中删除它</li>
<li>只有 nil 和 false 是逻辑假，其它值都是逻辑真，包括 0</li>
<li>字符串和数字在做数学运算和对比大小时会自动转换，比如 a = '1' + 2</li>
<li>两个浮点数（带小数点的数）不能用全等号（<code>==</code>）做对比，错误用法比如 <code>if 89.7 == (3 * 29.9) then</code></li>
<li>一个可以完全表示为整数的浮点数和对应的整数相等 （例如：<code>1.0 == 1</code>）</li>
</ul><hr><p data-anchor-id="g911"><br> <br>
<br> <br>
<br></p><div class="md-section-divider"></div><h3 data-anchor-id="dlw9" id="开发常见运行期错误参考">开发常见运行期错误参考</h3><table data-anchor-id="nll8" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>错误描述片段</th>
 <th>原因</th>
 <th>处理方式</th>
</tr>
</thead>
<tbody><tr>
 <td>attempt to perform arithmetic on a</td>
 <td>尝试对非数值进行了数学运算（+、-、*、/）</td>
 <td>数学运算之前，检查运算输入是否都为数字</td>
</tr>
<tr>
 <td>attempt to compare</td>
 <td>尝试对非法值进行了比较运算（&gt;、&lt;、&gt;=、&lt;=）</td>
 <td>比较运算之前，检查运算输入是否双方可以进行比较运算</td>
</tr>
<tr>
 <td>attempt to concatenate a</td>
 <td>尝试对非字符串值进行了连接（..）</td>
 <td>在进行字符串连接之前，先确定连接双方都为字符串</td>
</tr>
<tr>
 <td>attempt to call a</td>
 <td>尝试调用了一个不是函数的变量</td>
 <td>调用一个函数之前，先确定其是否为一个函数</td>
</tr>
<tr>
 <td>attempt to index a</td>
 <td>尝试对一个非表变量进行索引（下标运算）</td>
 <td>在从数组变量或关联数组变量中取值前，先确定其是否为一个表</td>
</tr>
<tr>
 <td>attempt to yield across a C-call boundary</td>
 <td>尝试在不能让出的调用块中让出</td>
 <td><a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-require" target="_blank">require</a> 一个模块的时候，请确认被 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-require" target="_blank">require</a> 的模块返回之前没有调用会让出的函数（手册上函数前带叹号）。还有就是不要尝试在带 C 回调的函数中使用会让出的函数（手册上函数前带叹号）。</td>
</tr>
<tr>
 <td>invalid order function for sorting</td>
 <td>非法的排序函数，通常发生在排序函数的规则逻辑不够明确的情况下</td>
 <td>调用排序函数时，明确排序规则，不要出现 a 大于 b 成立同时小于 b 也成立的规则</td>
</tr>
<tr>
 <td>bad argument #1 to 'xxx' (number expected, got nil)</td>
 <td>调用 xxx 函数时，第 #1 个参数的类型不正确，需要 number 却传入了 nil</td>
 <td>参数错误，传入合适的参数就不会出错了</td>
</tr>
<tr>
 <td>bad argument #2 to 'xxx' (number has no integer representation)</td>
 <td>调用 xxx 函数时，第 #2 个参数无法转换成整数</td>
 <td>参数错误，传入合适的参数就不会出错了</td>
</tr>
<tr>
 <td>bad argument #3 to 'xxx'</td>
 <td>调用 xxx 函数时，第 #3 个参数非法</td>
 <td>参数错误，传入合适的参数就不会出错了</td>
</tr>
</tbody></table><p></p><ul data-anchor-id="j6ab"> <br>
<li>使用 <a href="http://cloudwu.github.io/lua53doc/manual.html#pdf-require" target="_blank">require</a> 的时候抛出 attempt to yield across a C-call boundary 错误的权宜解决方案 <br>
<ul><li>1、在被 require 的模块代码前加上一行 <code>return function()</code></li>
<li>2、在被 require 的模块代码最后加上一行 <code>end</code></li>
<li>3、require 的时候，后面多加一对括号，例如 <code>require('A')</code> 改成 <code>require('A')()</code></li>
<li>看完上面仍然不会操作的下载参考例子 <br><p></p>

<blockquote class="white-blockquote">
  <p><a href="https://apt-pages.xxtouch.com/others/%E5%83%8Fdofile%E4%B8%80%E6%A0%B7%E4%BD%BF%E7%94%A8require.zip" target="_blank">像dofile一样使用require.zip-0.5kB</a></p></blockquote></li></ul></li>
  </ul><p></p><hr><p data-anchor-id="ahaz"><br> <br>
<br> <br>
<br></p></div>
</body>
</html>